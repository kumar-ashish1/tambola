{"ast":null,"code":"import _classCallCheck from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import{Component}from\"react\";import{BoardLine}from\"./BoardLine\";import Notification from\"./Notification\";import Waiting from\"./Waiting\";import Timer from\"./Timer\";//TODO: Fix some logic of duplicate keys for rows generated\n// Another variation: Right now the host will check mark the numbers which are done;\n// What if he messes up? What if he could not maintain the board correctly and give awards to\n// the bogus ones without even realizing that he has not been maintaining the board properly;\n// We will have a rectify button which will actually change all the states of the boxes by looking\n// at the array. This is still easy to do.\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";// Utility Functions\nfunction shuffle(a){var j,x,i;for(i=a.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));x=a[i];a[i]=a[j];a[j]=x;}return a;}// Creates an array of size 90 with 1-90 at indices 0-89\nfunction createArray(){var a=[];for(var i=0;i<90;++i){a[i]=i+1;}return a;}function createNumbersLine(n){// generates an array of 10 elements; from n - n+9\nvar a=[];for(var i=0;i<10;++i){a[i]={value:n+i,check:false};}return a;}// Function generates all numbers 1-90 in order for printing the board\nfunction generateAllBoardNumbers(){var a=[];for(var i=0;i<9;++i){a[i]=createNumbersLine(i*10+1);}return a;}function generateAllLines(allBoardNumbers){var allLines=[];for(var i=0;i<allBoardNumbers.length;++i){allLines.push(/*#__PURE__*/_jsx(BoardLine,{index:i,numbers:allBoardNumbers[i]},i));}return allLines;}var Board=/*#__PURE__*/function(_Component){_inherits(Board,_Component);var _super=_createSuper(Board);function Board(props){var _this;_classCallCheck(this,Board);_this=_super.call(this,props);_this.handleNewNumber=function(newNumber){var columnNumber=newNumber%10===0?9:newNumber%10-1;var rowNum=newNumber%10===0?newNumber/10-1:Math.floor(newNumber/10);var allBoardNumbers=_this.state.allBoardNumbers;allBoardNumbers[rowNum][columnNumber]={value:newNumber,check:true};_this.setState({allBoardNumbers:allBoardNumbers,goneNumbers:_this.state.goneNumbers+1});};var boardNumbersArray=shuffle(createArray());_this.state={shuffledBoardNumbers:boardNumbersArray,goneNumbers:0,allBoardNumbers:generateAllBoardNumbers(),showTimer:false};return _this;}_createClass(Board,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.socket.on(\"showTimer\",function(){// Disable the generate new button\nvar generateNewButton=document.querySelector(\"button.new-number\");generateNewButton.disabled=true;generateNewButton.classList.add(\"disabled-button\");_this2.setState({showTimer:true});});this.props.socket.on(\"callWinToHost\",function(){if(_this2.state.showTimer===true)_this2.setState({showTimer:false});});}},{key:\"render\",value:function render(){var _this3=this;var timer=null;if(this.state.showTimer){timer=/*#__PURE__*/_jsx(Timer,{socket:this.props.socket,endGame:this.props.endGame});}var newNumber=0;var allLines=generateAllLines(this.state.allBoardNumbers);return/*#__PURE__*/_jsxs(\"div\",{className:\"board-component-main\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"new-number\",onClick:function onClick(){newNumber=_this3.state.shuffledBoardNumbers[_this3.state.goneNumbers];_this3.handleNewNumber(newNumber);_this3.props.socket.emit(\"newNumber\",newNumber);},children:\"Generate New\"}),/*#__PURE__*/_jsx(\"button\",{className:\"new-number\",onClick:function onClick(){// newNumber = this.state.shuffledBoardNumbers[this.state.goneNumbers];\n// this.handleNewNumber(newNumber);\n_this3.props.socket.emit(\"GameFinished\");},children:\"End Game\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"new-number-host-container\",children:/*#__PURE__*/_jsx(\"p\",{className:\"new-number-host\",children:this.state.shuffledBoardNumbers[this.state.goneNumbers-1]?this.state.shuffledBoardNumbers[this.state.goneNumbers-1]:\"\"})})}),timer,/*#__PURE__*/_jsx(Waiting,{socket:this.props.socket,playerType:\"Host\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"notification-parent\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"ticket-board-container\",className:\"no-click\",children:allLines}),/*#__PURE__*/_jsx(Notification,{socket:this.props.socket,type:\"host\"})]})]});}}]);return Board;}(Component);export default Board;","map":{"version":3,"names":["React","Component","BoardLine","Notification","Waiting","Timer","jsx","_jsx","jsxs","_jsxs","shuffle","a","j","x","i","length","Math","floor","random","createArray","createNumbersLine","n","value","check","generateAllBoardNumbers","generateAllLines","allBoardNumbers","allLines","push","index","numbers","Board","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","handleNewNumber","newNumber","columnNumber","rowNum","state","setState","goneNumbers","boardNumbersArray","shuffledBoardNumbers","showTimer","_createClass","key","componentDidMount","_this2","socket","on","generateNewButton","document","querySelector","disabled","classList","add","render","_this3","timer","endGame","className","children","onClick","emit","playerType","id","type"],"sources":["/Users/ashish/Documents/tambola2/frontend/src/components/Board.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Component } from \"react\";\nimport { BoardLine } from \"./BoardLine\";\nimport Notification from \"./Notification\";\nimport { BoxState } from \"./Box\";\nimport Waiting from \"./Waiting\";\nimport Timer from \"./Timer\";\n\n//TODO: Fix some logic of duplicate keys for rows generated\n\n// Another variation: Right now the host will check mark the numbers which are done;\n// What if he messes up? What if he could not maintain the board correctly and give awards to\n// the bogus ones without even realizing that he has not been maintaining the board properly;\n// We will have a rectify button which will actually change all the states of the boxes by looking\n// at the array. This is still easy to do.\n\ninterface BoardProps {\n  socket: any;\n  endGame: () => void;\n}\n\ninterface BoardState {\n  // This is the array that actually holds what numbers are checked and what are not in 1-90 order\n  allBoardNumbers: Array<Array<BoxState>>;\n\n  // Array of shuffled numbers\n  shuffledBoardNumbers: Array<number>;\n\n  // This is index of the shuffledBoardNumbers array. So tells basically which number should come next\n  goneNumbers: number;\n\n  // for timer\n  showTimer: boolean;\n}\n\n// Utility Functions\nfunction shuffle(a: Array<number>): Array<number> {\n  var j, x, i;\n  for (i = a.length - 1; i > 0; i--) {\n    j = Math.floor(Math.random() * (i + 1));\n    x = a[i];\n    a[i] = a[j];\n    a[j] = x;\n  }\n  return a;\n}\n\n// Creates an array of size 90 with 1-90 at indices 0-89\nfunction createArray(): Array<number> {\n  let a = [];\n  for (let i = 0; i < 90; ++i) {\n    a[i] = i + 1;\n  }\n  return a;\n}\n\nfunction createNumbersLine(n: number): Array<BoxState> {\n  // generates an array of 10 elements; from n - n+9\n  let a: Array<BoxState> = [];\n  for (let i = 0; i < 10; ++i) {\n    a[i] = { value: n + i, check: false };\n  }\n  return a;\n}\n\n// Function generates all numbers 1-90 in order for printing the board\nfunction generateAllBoardNumbers(): Array<Array<BoxState>> {\n  let a: Array<Array<BoxState>> = [];\n  for (let i = 0; i < 9; ++i) {\n    a[i] = createNumbersLine(i * 10 + 1);\n  }\n  return a;\n}\n\nfunction generateAllLines(allBoardNumbers: Array<Array<BoxState>>) {\n  let allLines = [];\n  for (let i = 0; i < allBoardNumbers.length; ++i) {\n    allLines.push(<BoardLine key={i} index={i} numbers={allBoardNumbers[i]} />);\n  }\n  return allLines;\n}\n\nclass Board extends Component<BoardProps, BoardState> {\n  constructor(props: BoardProps) {\n    super(props);\n    let boardNumbersArray = shuffle(createArray());\n    this.state = {\n      shuffledBoardNumbers: boardNumbersArray,\n      goneNumbers: 0,\n      allBoardNumbers: generateAllBoardNumbers(),\n      showTimer: false,\n    };\n  }\n\n  componentDidMount() {\n    this.props.socket.on(\"showTimer\", () => {\n      // Disable the generate new button\n      let generateNewButton = document.querySelector(\n        \"button.new-number\"\n      ) as HTMLInputElement;\n      generateNewButton.disabled = true;\n      generateNewButton.classList.add(\"disabled-button\");\n      this.setState({ showTimer: true });\n    });\n    this.props.socket.on(\"callWinToHost\", () => {\n      if (this.state.showTimer === true) this.setState({ showTimer: false });\n    });\n  }\n\n  handleNewNumber = (newNumber: number) => {\n    let columnNumber = newNumber % 10 === 0 ? 9 : (newNumber % 10) - 1;\n    let rowNum =\n      newNumber % 10 === 0 ? newNumber / 10 - 1 : Math.floor(newNumber / 10);\n    let allBoardNumbers = this.state.allBoardNumbers;\n    allBoardNumbers[rowNum][columnNumber] = {\n      value: newNumber,\n      check: true,\n    };\n    this.setState({\n      allBoardNumbers: allBoardNumbers,\n      goneNumbers: this.state.goneNumbers + 1,\n    });\n  };\n\n  render() {\n    let timer = null;\n    if (this.state.showTimer) {\n      timer = <Timer socket={this.props.socket} endGame={this.props.endGame} />;\n    }\n\n    let newNumber = 0;\n    let allLines = generateAllLines(this.state.allBoardNumbers);\n    return (\n      <div className=\"board-component-main\">\n        <button\n          className={\"new-number\"}\n          onClick={() => {\n            newNumber = this.state.shuffledBoardNumbers[this.state.goneNumbers];\n            this.handleNewNumber(newNumber);\n            this.props.socket.emit(\"newNumber\", newNumber);\n          }}\n        >\n          Generate New\n        </button>\n\n        <button \n          className={\"new-number\"}\n          onClick={() => {\n           // newNumber = this.state.shuffledBoardNumbers[this.state.goneNumbers];\n           // this.handleNewNumber(newNumber);\n           \n            this.props.socket.emit(\"GameFinished\");\n\n          }}\n        >\n         End Game\n        </button>\n        <div>\n          <div className=\"new-number-host-container\">\n            <p className={\"new-number-host\"}>\n              {this.state.shuffledBoardNumbers[this.state.goneNumbers - 1]\n                ? this.state.shuffledBoardNumbers[this.state.goneNumbers - 1]\n                : \"\"}\n            </p>\n          </div>\n        </div>\n        {timer}\n        <Waiting socket={this.props.socket} playerType=\"Host\" />\n        <div className=\"notification-parent\">\n          {/* This div is for setting the opacity when notification is shown */}\n          <div id=\"ticket-board-container\" className=\"no-click\">\n            {allLines}\n          </div>\n          <Notification socket={this.props.socket} type=\"host\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Board;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}