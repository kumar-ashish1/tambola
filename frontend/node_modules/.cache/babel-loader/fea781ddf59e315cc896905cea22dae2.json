{"ast":null,"code":"import _classCallCheck from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import{Component}from\"react\";import Reward from\"react-rewards\";// Important: To make the notifications to appear properly and rewards to work properly\n// The parent div should have position: relative\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function getUserName(obj){return obj.calledWinUsername||obj.user.username;}function getMainHeading(obj){var mainHeading;if(obj.result!==undefined){// this is result Obj\nmainHeading=obj.result+\" \"+obj.callWinType;}else{mainHeading=\"Call: \"+obj.callWinType;}return mainHeading;}var Notification=/*#__PURE__*/function(_Component){_inherits(Notification,_Component);var _super=_createSuper(Notification);function Notification(props){var _this;_classCallCheck(this,Notification);_this=_super.call(this,props);_this.reward=void 0;_this.deleteNotification=function(){_this.setState({notificationObj:null});var ticketBoardContainer=document.getElementById(\"ticket-board-container\");if(ticketBoardContainer)ticketBoardContainer.setAttribute(\"style\",\"opacity: 1\");};_this.state={notificationObj:null};return _this;}_createClass(Notification,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var ticketBoardContainer=document.getElementById(\"ticket-board-container\");this.props.socket.on(\"callWinToHost\",function(callWinObj){_this2.reward.rewardMe();_this2.setState({notificationObj:callWinObj});ticketBoardContainer===null||ticketBoardContainer===void 0?void 0:ticketBoardContainer.setAttribute(\"style\",\"opacity:0.2;\");// callWinToHost notification gets deleted after 5seconds on everyone's screen\nsetTimeout(function(){_this2.deleteNotification();},5000);});this.props.socket.on(\"resultsForPC\",function(resultsObj){_this2.reward.rewardMe();_this2.setState({notificationObj:resultsObj});ticketBoardContainer===null||ticketBoardContainer===void 0?void 0:ticketBoardContainer.setAttribute(\"style\",\"opacity:0.2;\");// Result notification gets deleted after 5seconds on everyone's screen\nsetTimeout(function(){_this2.deleteNotification();},5000);});}},{key:\"render\",value:function render(){var _this3=this;var notificationComp=this.state.notificationObj?/*#__PURE__*/_jsx(\"div\",{className:\"notification-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"notification\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"main animated rubberBand\",children:getMainHeading(this.state.notificationObj)}),/*#__PURE__*/_jsx(\"p\",{className:\"sub animated bounce\",children:getUserName(this.state.notificationObj)})]})}):null;return/*#__PURE__*/_jsxs(_Fragment,{children:[notificationComp,/*#__PURE__*/_jsx(Reward,{ref:function ref(_ref){_this3.reward=_ref;},type:\"confetti\",config:{elementCount:100,angle:90,spread:90,decay:0.95,lifetime:150}})]});}}]);return Notification;}(Component);export default Notification;","map":{"version":3,"names":["React","Component","Reward","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getUserName","obj","calledWinUsername","user","username","getMainHeading","mainHeading","result","undefined","callWinType","Notification","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","reward","deleteNotification","setState","notificationObj","ticketBoardContainer","document","getElementById","setAttribute","state","_createClass","key","value","componentDidMount","_this2","socket","on","callWinObj","rewardMe","setTimeout","resultsObj","render","_this3","notificationComp","className","children","ref","type","config","elementCount","angle","spread","decay","lifetime"],"sources":["/Users/ashish/Documents/tambola2/frontend/src/components/Notification.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Component } from \"react\";\nimport { callWin, resultObj } from \"./Player\";\nimport Reward from \"react-rewards\";\n\n// Important: To make the notifications to appear properly and rewards to work properly\n// The parent div should have position: relative\n\ninterface NotificationProps {\n  socket: any;\n  type: string;\n}\n\ninterface NotificationState {\n  notificationObj: callWin | resultObj | null;\n}\n\nfunction getUserName(obj: any) {\n  return obj.calledWinUsername || obj.user.username;\n}\n\nfunction getMainHeading(obj: any) {\n  let mainHeading;\n  if (obj.result !== undefined) {\n    // this is result Obj\n    mainHeading = obj.result + \" \" + obj.callWinType;\n  } else {\n    mainHeading = \"Call: \" + obj.callWinType;\n  }\n  return mainHeading;\n}\n\nclass Notification extends Component<NotificationProps, NotificationState> {\n  reward: any;\n  constructor(props: NotificationProps) {\n    super(props);\n    this.state = { notificationObj: null };\n  }\n\n  componentDidMount() {\n    let ticketBoardContainer = document.getElementById(\n      \"ticket-board-container\"\n    );\n    this.props.socket.on(\"callWinToHost\", (callWinObj: callWin) => {\n      this.reward.rewardMe();\n      this.setState({ notificationObj: callWinObj });\n      ticketBoardContainer?.setAttribute(\"style\", \"opacity:0.2;\");\n\n      // callWinToHost notification gets deleted after 5seconds on everyone's screen\n      setTimeout(() => {\n        this.deleteNotification();\n      }, 5000);\n    });\n    this.props.socket.on(\"resultsForPC\", (resultsObj: resultObj) => {\n      this.reward.rewardMe();\n      this.setState({ notificationObj: resultsObj });\n      ticketBoardContainer?.setAttribute(\"style\", \"opacity:0.2;\");\n\n      // Result notification gets deleted after 5seconds on everyone's screen\n      setTimeout(() => {\n        this.deleteNotification();\n      }, 5000);\n    });\n\n    \n  }\n\n  deleteNotification = () => {\n    this.setState({ notificationObj: null });\n    let ticketBoardContainer = document.getElementById(\n      \"ticket-board-container\"\n    );\n    if (ticketBoardContainer)\n      ticketBoardContainer.setAttribute(\"style\", \"opacity: 1\");\n  };\n\n  render() {\n    let notificationComp = this.state.notificationObj ? (\n      <div className=\"notification-container\">\n        <div className=\"notification\">\n          <p className=\"main animated rubberBand\">\n            {getMainHeading(this.state.notificationObj)}\n          </p>\n          <p className=\"sub animated bounce\">\n            {getUserName(this.state.notificationObj)}\n          </p>\n        </div>\n      </div>\n    ) : null;\n    return (\n      <>\n        {notificationComp}\n        <Reward\n          ref={(ref: any) => {\n            this.reward = ref;\n          }}\n          type=\"confetti\"\n          config={{\n            elementCount: 100,\n            angle: 90,\n            spread: 90,\n            decay: 0.95,\n            lifetime: 150,\n          }}\n        ></Reward>\n      </>\n    );\n  }\n}\n\nexport default Notification;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}