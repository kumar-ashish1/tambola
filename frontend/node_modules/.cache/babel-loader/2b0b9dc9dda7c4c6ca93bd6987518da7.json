{"ast":null,"code":"import*as React from\"react\";import Ticket from\"./Ticket\";import ResultButtons from\"./ResultButtons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function HostTicket(props){var status=\"\";//console.log(checkFirstLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]),props.callWinObj.callWinType)\nif(props.callWinObj.callWinType==\"First Line\"){console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]);status=checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Second Line\"){console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]);status=checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Third Line\"){console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]);status=checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Corners\"){status=checkCorners(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0],props.callWinObj.houses[0][1],props.callWinObj.houses[0][2])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Full House\"){if(checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0])&&checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1])&&checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]))status=\"True\";else status=\"False\";}var handleResultCall=function handleResultCall(result){props.socket.emit(\"resultsFromHost\",{result:result,callWinType:props.callWinObj.callWinType,userCalledForWin:props.callWinObj.user});// if(result == \"Confirm Win!\")\n// {\n// axios({\n//   method: 'post',\n//   url: 'https://techkilla.com/tambola/tambola_result.php',\n//   headers: { 'content-type': 'application/json' },\n//   data: {name:props.callWinObj.user.username,emp_code:props.callWinObj.user.emp_code,award:props.callWinObj.callWinType}\n// })\n//   .then(result => {\n//     console.log(\"result: \" + result.data);\n//   })\n//   .catch(error => console.log(error.message));\n// }\n// Key is concatenation of id and callWinType\nprops.removeTicketFromHost(props.callWinObj.user.id+props.callWinObj.callWinType);};var playerTicket=/*#__PURE__*/_jsxs(\"div\",{className:\"host-ticket\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"win-call-type\",children:props.callWinObj.callWinType}),/*#__PURE__*/_jsxs(\"p\",{className:\"player-name\",children:[props.callWinObj.user.username,\"'s Ticket (Win: \",status,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"no-click\",children:/*#__PURE__*/_jsx(Ticket,{houses:props.callWinObj.houses,numHouses:props.callWinObj.houses.length})}),/*#__PURE__*/_jsx(ResultButtons,{win:\"Confirm Win!\",bogey:\"Bogey!\",resultCallback:handleResultCall},0)]});return/*#__PURE__*/_jsx(_Fragment,{children:playerTicket});}function checkLine(goneNumbers,line){var count=0;for(var i=0;i<line.length;i++){if(line[i].value==0){count++;}else if(isExist(goneNumbers,line[i].value)&&line[i].check){count++;}}return count==line.length;}function checkCorners(goneNumbers,line1,line2,line3){var firstRowFirstNum=getCornerNumber(line1);var firstRowLastNumber=getCornerNumber(line1.reverse());var lastRowFirstNum=getCornerNumber(line3);var lastRowLastNumber=getCornerNumber(line3.reverse());var line=[firstRowFirstNum,firstRowLastNumber,lastRowFirstNum,lastRowLastNumber];return checkLine(goneNumbers,line);}function getCornerNumber(line){var num;var count=0;do{num=line[count];count++;}while(num.value!=0);return num;}// function checkCorners(goneNumbers:Array<number>,line1:Array<any>,line2:Array<any>,line3:Array<any>):boolean\n// {\n//   let leftCorner:Array<any> = [line1[0],line2[0],line3[0]];\n//   let rightCorner:Array<any> = [line1[line1.length-1],line2[line2.length-1],line3[line3.length-1]];\n//   return (checkLine(goneNumbers,leftCorner) && checkLine(goneNumbers,rightCorner))\n// }\nfunction isExist(goneNumbers,num){var result=false;if(num==0)return true;for(var i=0;i<goneNumbers.length;i++){if(goneNumbers[i]==num){result=true;console.log(num,goneNumbers[i],\"exits\");break;}}return result;}export default HostTicket;","map":{"version":3,"names":["React","Ticket","ResultButtons","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HostTicket","props","status","callWinObj","callWinType","console","log","goneNumbers","houses","checkLine","checkCorners","handleResultCall","result","socket","emit","userCalledForWin","user","removeTicketFromHost","id","playerTicket","className","children","username","numHouses","length","win","bogey","resultCallback","line","count","i","value","isExist","check","line1","line2","line3","firstRowFirstNum","getCornerNumber","firstRowLastNumber","reverse","lastRowFirstNum","lastRowLastNumber","num"],"sources":["/Users/ashish/Documents/tambola3/tambola/frontend/src/components/HostTicket.tsx"],"sourcesContent":["import * as React from \"react\";\nimport Ticket from \"./Ticket\";\nimport ResultButtons from \"./ResultButtons\";\nimport { callWin } from \"./Player\";\nimport axios from 'axios';\nimport Board from \"./Board\";\nimport GoneNumbers from \"./GoneNumbers\";\n\n\ninterface HostTicketProps {\n  socket: any;\n  callWinObj: callWin;\n  removeTicketFromHost: (id: string) => void;\n}\n\nfunction HostTicket(props: HostTicketProps) {\n\n  var status = \"\";\n  //console.log(checkFirstLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]),props.callWinObj.callWinType)\n\n  if(props.callWinObj.callWinType == \"First Line\")\n  {\n    console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]);\n        status = checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]) ? \"True\" : \"False\";\n  }\n  if(props.callWinObj.callWinType == \"Second Line\")\n  {\n       console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]);\n        status = checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]) ? \"True\" : \"False\";\n  }\n  if(props.callWinObj.callWinType == \"Third Line\")\n  {\n    console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]);\n        status = checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]) ? \"True\" : \"False\";   \n  }   \n  if(props.callWinObj.callWinType == \"Corners\")\n  {\n        status = checkCorners(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0],props.callWinObj.houses[0][1],props.callWinObj.houses[0][2]) ? \"True\" : \"False\";\n  }\n  if(props.callWinObj.callWinType == \"Full House\")\n  {\n        if(checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]) && checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]) && checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]))\n             status = \"True\";\n        else \n             status = \"False\";     \n  }\n\n  let handleResultCall = (result: string) => {\n    props.socket.emit(\"resultsFromHost\", {\n      result: result,\n      callWinType: props.callWinObj.callWinType,\n      userCalledForWin: props.callWinObj.user,\n    });\n\n\n    // if(result == \"Confirm Win!\")\n    // {\n    // axios({\n    //   method: 'post',\n    //   url: 'https://techkilla.com/tambola/tambola_result.php',\n    //   headers: { 'content-type': 'application/json' },\n    //   data: {name:props.callWinObj.user.username,emp_code:props.callWinObj.user.emp_code,award:props.callWinObj.callWinType}\n    // })\n    //   .then(result => {\n    //     console.log(\"result: \" + result.data);\n    //   })\n    //   .catch(error => console.log(error.message));\n    // }\n\n    // Key is concatenation of id and callWinType\n    props.removeTicketFromHost(\n      props.callWinObj.user.id + props.callWinObj.callWinType\n    );\n  };\n  let playerTicket = (\n    <div className=\"host-ticket\">\n      <br></br>\n      <p className=\"win-call-type\">{props.callWinObj.callWinType}</p>\n      <p className=\"player-name\">{props.callWinObj.user.username}'s Ticket (Win: {status})</p>\n      <div className=\"no-click\">\n        <Ticket\n          houses={props.callWinObj.houses}\n          numHouses={props.callWinObj.houses.length}\n        />\n      </div>\n      <ResultButtons\n        key={0}\n        win={\"Confirm Win!\"}\n        bogey={\"Bogey!\"}\n        resultCallback={handleResultCall}\n      />\n    </div>\n  );\n  return <>{playerTicket}</>;\n}\n\nfunction checkLine(goneNumbers:Array<Number>,line:Array<any>):boolean\n{\n    let count:number = 0;\n    for(var i=0;i<line.length;i++)\n    {\n        if(line[i].value == 0)\n        {\n          count++;\n        }\n        else if(isExist(goneNumbers,line[i].value) && line[i].check)\n        {\n            count++;\n        }\n    }\n    return (count == line.length);\n}\n\nfunction checkCorners(goneNumbers:Array<number>,line1:Array<any>,line2:Array<any>,line3:Array<any>):boolean\n{\n  let firstRowFirstNum:any = getCornerNumber(line1);\n  let firstRowLastNumber:any = getCornerNumber(line1.reverse());\n  let lastRowFirstNum:any = getCornerNumber(line3);\n  let lastRowLastNumber:any = getCornerNumber(line3.reverse());\n  let line:Array<any> = [firstRowFirstNum,firstRowLastNumber,lastRowFirstNum,lastRowLastNumber];\n\n  return checkLine(goneNumbers,line);\n}\n\nfunction getCornerNumber(line:Array<any>):any\n{\n  let num:any;\n  let count = 0;\n\n  do{\n    num = line[count];\n    count++;\n  }while(num.value != 0);\n\n  return num;\n}\n\n// function checkCorners(goneNumbers:Array<number>,line1:Array<any>,line2:Array<any>,line3:Array<any>):boolean\n// {\n//   let leftCorner:Array<any> = [line1[0],line2[0],line3[0]];\n//   let rightCorner:Array<any> = [line1[line1.length-1],line2[line2.length-1],line3[line3.length-1]];\n\n//   return (checkLine(goneNumbers,leftCorner) && checkLine(goneNumbers,rightCorner))\n// }\n\nfunction isExist(goneNumbers:Array<Number>,num:Number):boolean\n{\n  let result:boolean = false;\n\n  if(num == 0)\n    return true;\n\n   for(var i=0;i<goneNumbers.length;i++)\n   {\n     if(goneNumbers[i] == num)\n     {\n        result = true;\n        console.log(num,goneNumbers[i],\"exits\");\n        break;\n     }\n   }\n   return result;\n}\n\nexport default HostTicket;\n"],"mappings":"AAAA,MAAO,GAAK,CAAAA,KAAK,KAAM,OAAO,CAC9B,MAAO,CAAAC,MAAM,KAAM,UAAU,CAC7B,MAAO,CAAAC,aAAa,KAAM,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAa5C,QAAS,CAAAC,UAAUA,CAACC,KAAsB,CAAE,CAE1C,GAAI,CAAAC,MAAM,CAAG,EAAE,CACf;AAEA,GAAGD,KAAK,CAACE,UAAU,CAACC,WAAW,EAAI,YAAY,CAC/C,CACEC,OAAO,CAACC,GAAG,CAACL,KAAK,CAACE,UAAU,CAACC,WAAW,CAACH,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAChGN,MAAM,CAAGO,SAAS,CAACR,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,MAAM,CAAG,OAAO,CACvG,CACA,GAAGP,KAAK,CAACE,UAAU,CAACC,WAAW,EAAI,aAAa,CAChD,CACKC,OAAO,CAACC,GAAG,CAACL,KAAK,CAACE,UAAU,CAACC,WAAW,CAACH,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACnGN,MAAM,CAAGO,SAAS,CAACR,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,MAAM,CAAG,OAAO,CACvG,CACA,GAAGP,KAAK,CAACE,UAAU,CAACC,WAAW,EAAI,YAAY,CAC/C,CACEC,OAAO,CAACC,GAAG,CAACL,KAAK,CAACE,UAAU,CAACC,WAAW,CAACH,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAChGN,MAAM,CAAGO,SAAS,CAACR,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,MAAM,CAAG,OAAO,CACvG,CACA,GAAGP,KAAK,CAACE,UAAU,CAACC,WAAW,EAAI,SAAS,CAC5C,CACMF,MAAM,CAAGQ,YAAY,CAACT,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACP,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACP,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,MAAM,CAAG,OAAO,CACtK,CACA,GAAGP,KAAK,CAACE,UAAU,CAACC,WAAW,EAAI,YAAY,CAC/C,CACM,GAAGK,SAAS,CAACR,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAIC,SAAS,CAACR,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAIC,SAAS,CAACR,KAAK,CAACE,UAAU,CAACI,WAAW,CAACN,KAAK,CAACE,UAAU,CAACK,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CACrNN,MAAM,CAAG,MAAM,CAAC,IAEhB,CAAAA,MAAM,CAAG,OAAO,CAC3B,CAEA,GAAI,CAAAS,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIC,MAAc,CAAK,CACzCX,KAAK,CAACY,MAAM,CAACC,IAAI,CAAC,iBAAiB,CAAE,CACnCF,MAAM,CAAEA,MAAM,CACdR,WAAW,CAAEH,KAAK,CAACE,UAAU,CAACC,WAAW,CACzCW,gBAAgB,CAAEd,KAAK,CAACE,UAAU,CAACa,IACrC,CAAC,CAAC,CAGF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAf,KAAK,CAACgB,oBAAoB,CACxBhB,KAAK,CAACE,UAAU,CAACa,IAAI,CAACE,EAAE,CAAGjB,KAAK,CAACE,UAAU,CAACC,WAC9C,CAAC,CACH,CAAC,CACD,GAAI,CAAAe,YAAY,cACdtB,KAAA,QAAKuB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B1B,IAAA,QAAQ,CAAC,cACTA,IAAA,MAAGyB,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAEpB,KAAK,CAACE,UAAU,CAACC,WAAW,CAAI,CAAC,cAC/DP,KAAA,MAAGuB,SAAS,CAAC,aAAa,CAAAC,QAAA,EAAEpB,KAAK,CAACE,UAAU,CAACa,IAAI,CAACM,QAAQ,CAAC,kBAAgB,CAACpB,MAAM,CAAC,GAAC,EAAG,CAAC,cACxFP,IAAA,QAAKyB,SAAS,CAAC,UAAU,CAAAC,QAAA,cACvB1B,IAAA,CAACH,MAAM,EACLgB,MAAM,CAAEP,KAAK,CAACE,UAAU,CAACK,MAAO,CAChCe,SAAS,CAAEtB,KAAK,CAACE,UAAU,CAACK,MAAM,CAACgB,MAAO,CAC3C,CAAC,CACC,CAAC,cACN7B,IAAA,CAACF,aAAa,EAEZgC,GAAG,CAAE,cAAe,CACpBC,KAAK,CAAE,QAAS,CAChBC,cAAc,CAAEhB,gBAAiB,EAH5B,CAIN,CAAC,EACC,CACN,CACD,mBAAOhB,IAAA,CAAAI,SAAA,EAAAsB,QAAA,CAAGF,YAAY,CAAG,CAAC,CAC5B,CAEA,QAAS,CAAAV,SAASA,CAACF,WAAyB,CAACqB,IAAe,CAC5D,CACI,GAAI,CAAAC,KAAY,CAAG,CAAC,CACpB,IAAI,GAAI,CAAAC,CAAC,CAAC,CAAC,CAACA,CAAC,CAACF,IAAI,CAACJ,MAAM,CAACM,CAAC,EAAE,CAC7B,CACI,GAAGF,IAAI,CAACE,CAAC,CAAC,CAACC,KAAK,EAAI,CAAC,CACrB,CACEF,KAAK,EAAE,CACT,CAAC,IACI,IAAGG,OAAO,CAACzB,WAAW,CAACqB,IAAI,CAACE,CAAC,CAAC,CAACC,KAAK,CAAC,EAAIH,IAAI,CAACE,CAAC,CAAC,CAACG,KAAK,CAC3D,CACIJ,KAAK,EAAE,CACX,CACJ,CACA,MAAQ,CAAAA,KAAK,EAAID,IAAI,CAACJ,MAAM,CAChC,CAEA,QAAS,CAAAd,YAAYA,CAACH,WAAyB,CAAC2B,KAAgB,CAACC,KAAgB,CAACC,KAAgB,CAClG,CACE,GAAI,CAAAC,gBAAoB,CAAGC,eAAe,CAACJ,KAAK,CAAC,CACjD,GAAI,CAAAK,kBAAsB,CAAGD,eAAe,CAACJ,KAAK,CAACM,OAAO,CAAC,CAAC,CAAC,CAC7D,GAAI,CAAAC,eAAmB,CAAGH,eAAe,CAACF,KAAK,CAAC,CAChD,GAAI,CAAAM,iBAAqB,CAAGJ,eAAe,CAACF,KAAK,CAACI,OAAO,CAAC,CAAC,CAAC,CAC5D,GAAI,CAAAZ,IAAe,CAAG,CAACS,gBAAgB,CAACE,kBAAkB,CAACE,eAAe,CAACC,iBAAiB,CAAC,CAE7F,MAAO,CAAAjC,SAAS,CAACF,WAAW,CAACqB,IAAI,CAAC,CACpC,CAEA,QAAS,CAAAU,eAAeA,CAACV,IAAe,CACxC,CACE,GAAI,CAAAe,GAAO,CACX,GAAI,CAAAd,KAAK,CAAG,CAAC,CAEb,EAAE,CACAc,GAAG,CAAGf,IAAI,CAACC,KAAK,CAAC,CACjBA,KAAK,EAAE,CACT,CAAC,MAAMc,GAAG,CAACZ,KAAK,EAAI,CAAC,EAErB,MAAO,CAAAY,GAAG,CACZ,CAEA;AACA;AACA;AACA;AAEA;AACA;AAEA,QAAS,CAAAX,OAAOA,CAACzB,WAAyB,CAACoC,GAAU,CACrD,CACE,GAAI,CAAA/B,MAAc,CAAG,KAAK,CAE1B,GAAG+B,GAAG,EAAI,CAAC,CACT,MAAO,KAAI,CAEZ,IAAI,GAAI,CAAAb,CAAC,CAAC,CAAC,CAACA,CAAC,CAACvB,WAAW,CAACiB,MAAM,CAACM,CAAC,EAAE,CACpC,CACE,GAAGvB,WAAW,CAACuB,CAAC,CAAC,EAAIa,GAAG,CACxB,CACG/B,MAAM,CAAG,IAAI,CACbP,OAAO,CAACC,GAAG,CAACqC,GAAG,CAACpC,WAAW,CAACuB,CAAC,CAAC,CAAC,OAAO,CAAC,CACvC,MACH,CACF,CACA,MAAO,CAAAlB,MAAM,CAChB,CAEA,cAAe,CAAAZ,UAAU"},"metadata":{},"sourceType":"module"}