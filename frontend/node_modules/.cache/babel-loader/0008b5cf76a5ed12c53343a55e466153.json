{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import*as React from\"react\";import Ticket from\"./Ticket\";import ResultButtons from\"./ResultButtons\";function HostTicket(props){var status=\"\";//console.log(checkFirstLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]),props.callWinObj.callWinType)\nif(props.callWinObj.callWinType==\"First Line\"){console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]);status=checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Second Line\"){console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]);status=checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Third Line\"){console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]);status=checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Corners\"){status=checkCorners(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0],props.callWinObj.houses[0][1],props.callWinObj.houses[0][2])?\"True\":\"False\";}if(props.callWinObj.callWinType==\"Full House\"){if(checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0])&&checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1])&&checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]))status=\"True\";else status=\"False\";}var handleResultCall=function handleResultCall(result){props.socket.emit(\"resultsFromHost\",{result:result,callWinType:props.callWinObj.callWinType,userCalledForWin:props.callWinObj.user});// if(result == \"Confirm Win!\")\n// {\n// axios({\n//   method: 'post',\n//   url: 'https://techkilla.com/tambola/tambola_result.php',\n//   headers: { 'content-type': 'application/json' },\n//   data: {name:props.callWinObj.user.username,emp_code:props.callWinObj.user.emp_code,award:props.callWinObj.callWinType}\n// })\n//   .then(result => {\n//     console.log(\"result: \" + result.data);\n//   })\n//   .catch(error => console.log(error.message));\n// }\n// Key is concatenation of id and callWinType\nprops.removeTicketFromHost(props.callWinObj.user.id+props.callWinObj.callWinType);};var playerTicket=/*#__PURE__*/_jsxs(\"div\",{className:\"host-ticket\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{className:\"win-call-type\",children:props.callWinObj.callWinType}),/*#__PURE__*/_jsxs(\"p\",{className:\"player-name\",children:[props.callWinObj.user.username,\"'s Ticket (Win: \",status,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"no-click\",children:/*#__PURE__*/_jsx(Ticket,{houses:props.callWinObj.houses,numHouses:props.callWinObj.houses.length})}),/*#__PURE__*/_jsx(ResultButtons,{win:\"Confirm Win!\",bogey:\"Bogey!\",resultCallback:handleResultCall},0)]});return/*#__PURE__*/_jsx(_Fragment,{children:playerTicket});}function checkLine(goneNumbers,line){var count=0;for(var i=0;i<line.length;i++){if(line[i].value==0){count++;}else if(isExist(goneNumbers,line[i].value)&&line[i].check){count++;}}return count==line.length;}function checkCorners(goneNumbers,line1,line2,line3){var firstRowFirstNum=getCornerNumber(line1);var firstRowLastNumber=getCornerNumber(line1.reverse());var lastRowFirstNum=getCornerNumber(line3);var lastRowLastNumber=getCornerNumber(line3.reverse());var line=[firstRowFirstNum,firstRowLastNumber,lastRowFirstNum,lastRowLastNumber];return checkLine(goneNumbers,line);}function getCornerNumber(line){var num;var count=0;do{num=line[count];count++;}while(num.value!=0);return num;}// function checkCorners(goneNumbers:Array<number>,line1:Array<any>,line2:Array<any>,line3:Array<any>):boolean\n// {\n//   let leftCorner:Array<any> = [line1[0],line2[0],line3[0]];\n//   let rightCorner:Array<any> = [line1[line1.length-1],line2[line2.length-1],line3[line3.length-1]];\n//   return (checkLine(goneNumbers,leftCorner) && checkLine(goneNumbers,rightCorner))\n// }\nfunction isExist(goneNumbers,num){var result=false;if(num==0)return true;for(var i=0;i<goneNumbers.length;i++){if(goneNumbers[i]==num){result=true;console.log(num,goneNumbers[i],\"exits\");break;}}return result;}export default HostTicket;","map":{"version":3,"sources":["/Users/ashish/Documents/tambola2/frontend/src/components/HostTicket.tsx"],"names":["React","Ticket","ResultButtons","HostTicket","props","status","callWinObj","callWinType","console","log","goneNumbers","houses","checkLine","checkCorners","handleResultCall","result","socket","emit","userCalledForWin","user","removeTicketFromHost","id","playerTicket","username","length","line","count","i","value","isExist","check","line1","line2","line3","firstRowFirstNum","getCornerNumber","firstRowLastNumber","reverse","lastRowFirstNum","lastRowLastNumber","num"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport Ticket from \"./Ticket\";\nimport ResultButtons from \"./ResultButtons\";\nimport { callWin } from \"./Player\";\nimport axios from 'axios';\nimport Board from \"./Board\";\nimport GoneNumbers from \"./GoneNumbers\";\n\n\ninterface HostTicketProps {\n  socket: any;\n  callWinObj: callWin;\n  removeTicketFromHost: (id: string) => void;\n}\n\nfunction HostTicket(props: HostTicketProps) {\n\n  var status = \"\";\n  //console.log(checkFirstLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]),props.callWinObj.callWinType)\n\n  if(props.callWinObj.callWinType == \"First Line\")\n  {\n    console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]);\n        status = checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]) ? \"True\" : \"False\";\n  }\n  if(props.callWinObj.callWinType == \"Second Line\")\n  {\n       console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]);\n        status = checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]) ? \"True\" : \"False\";\n  }\n  if(props.callWinObj.callWinType == \"Third Line\")\n  {\n    console.log(props.callWinObj.callWinType,props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]);\n        status = checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]) ? \"True\" : \"False\";   \n  }   \n  if(props.callWinObj.callWinType == \"Corners\")\n  {\n        status = checkCorners(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0],props.callWinObj.houses[0][1],props.callWinObj.houses[0][2]) ? \"True\" : \"False\";\n  }\n  if(props.callWinObj.callWinType == \"Full House\")\n  {\n        if(checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][0]) && checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][1]) && checkLine(props.callWinObj.goneNumbers,props.callWinObj.houses[0][2]))\n             status = \"True\";\n        else \n             status = \"False\";     \n  }\n\n  let handleResultCall = (result: string) => {\n    props.socket.emit(\"resultsFromHost\", {\n      result: result,\n      callWinType: props.callWinObj.callWinType,\n      userCalledForWin: props.callWinObj.user,\n    });\n\n\n    // if(result == \"Confirm Win!\")\n    // {\n    // axios({\n    //   method: 'post',\n    //   url: 'https://techkilla.com/tambola/tambola_result.php',\n    //   headers: { 'content-type': 'application/json' },\n    //   data: {name:props.callWinObj.user.username,emp_code:props.callWinObj.user.emp_code,award:props.callWinObj.callWinType}\n    // })\n    //   .then(result => {\n    //     console.log(\"result: \" + result.data);\n    //   })\n    //   .catch(error => console.log(error.message));\n    // }\n\n    // Key is concatenation of id and callWinType\n    props.removeTicketFromHost(\n      props.callWinObj.user.id + props.callWinObj.callWinType\n    );\n  };\n  let playerTicket = (\n    <div className=\"host-ticket\">\n      <br></br>\n      <p className=\"win-call-type\">{props.callWinObj.callWinType}</p>\n      <p className=\"player-name\">{props.callWinObj.user.username}'s Ticket (Win: {status})</p>\n      <div className=\"no-click\">\n        <Ticket\n          houses={props.callWinObj.houses}\n          numHouses={props.callWinObj.houses.length}\n        />\n      </div>\n      <ResultButtons\n        key={0}\n        win={\"Confirm Win!\"}\n        bogey={\"Bogey!\"}\n        resultCallback={handleResultCall}\n      />\n    </div>\n  );\n  return <>{playerTicket}</>;\n}\n\nfunction checkLine(goneNumbers:Array<Number>,line:Array<any>):boolean\n{\n    let count:number = 0;\n    for(var i=0;i<line.length;i++)\n    {\n        if(line[i].value == 0)\n        {\n          count++;\n        }\n        else if(isExist(goneNumbers,line[i].value) && line[i].check)\n        {\n            count++;\n        }\n    }\n    return (count == line.length);\n}\n\nfunction checkCorners(goneNumbers:Array<number>,line1:Array<any>,line2:Array<any>,line3:Array<any>):boolean\n{\n  let firstRowFirstNum:any = getCornerNumber(line1);\n  let firstRowLastNumber:any = getCornerNumber(line1.reverse());\n  let lastRowFirstNum:any = getCornerNumber(line3);\n  let lastRowLastNumber:any = getCornerNumber(line3.reverse());\n  let line:Array<any> = [firstRowFirstNum,firstRowLastNumber,lastRowFirstNum,lastRowLastNumber];\n\n  return checkLine(goneNumbers,line);\n}\n\nfunction getCornerNumber(line:Array<any>):any\n{\n  let num:any;\n  let count = 0;\n\n  do{\n    num = line[count];\n    count++;\n  }while(num.value != 0);\n\n  return num;\n}\n\n// function checkCorners(goneNumbers:Array<number>,line1:Array<any>,line2:Array<any>,line3:Array<any>):boolean\n// {\n//   let leftCorner:Array<any> = [line1[0],line2[0],line3[0]];\n//   let rightCorner:Array<any> = [line1[line1.length-1],line2[line2.length-1],line3[line3.length-1]];\n\n//   return (checkLine(goneNumbers,leftCorner) && checkLine(goneNumbers,rightCorner))\n// }\n\nfunction isExist(goneNumbers:Array<Number>,num:Number):boolean\n{\n  let result:boolean = false;\n\n  if(num == 0)\n    return true;\n\n   for(var i=0;i<goneNumbers.length;i++)\n   {\n     if(goneNumbers[i] == num)\n     {\n        result = true;\n        console.log(num,goneNumbers[i],\"exits\");\n        break;\n     }\n   }\n   return result;\n}\n\nexport default HostTicket;\n"]},"metadata":{},"sourceType":"module"}