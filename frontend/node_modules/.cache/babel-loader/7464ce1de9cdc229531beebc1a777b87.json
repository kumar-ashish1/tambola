{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/ashish/Documents/tambola2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ashish/Documents/tambola2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ashish/Documents/tambola2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ashish/Documents/tambola2/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from\"react\";import{Component}from\"react\";import Reward from\"react-rewards\";// Important: To make the notifications to appear properly and rewards to work properly\n// The parent div should have position: relative\nfunction getUserName(obj){return obj.calledWinUsername||obj.user.username;}function getMainHeading(obj){var mainHeading;if(obj.result!==undefined){// this is result Obj\nmainHeading=obj.result+\" \"+obj.callWinType;}else{mainHeading=\"Call: \"+obj.callWinType;}return mainHeading;}var Notification=/*#__PURE__*/function(_Component){_inherits(Notification,_Component);var _super=_createSuper(Notification);function Notification(props){var _this;_classCallCheck(this,Notification);_this=_super.call(this,props);_this.reward=void 0;_this.deleteNotification=function(){_this.setState({notificationObj:null});var ticketBoardContainer=document.getElementById(\"ticket-board-container\");if(ticketBoardContainer)ticketBoardContainer.setAttribute(\"style\",\"opacity: 1\");};_this.state={notificationObj:null};return _this;}_createClass(Notification,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var ticketBoardContainer=document.getElementById(\"ticket-board-container\");this.props.socket.on(\"callWinToHost\",function(callWinObj){_this2.reward.rewardMe();_this2.setState({notificationObj:callWinObj});ticketBoardContainer===null||ticketBoardContainer===void 0?void 0:ticketBoardContainer.setAttribute(\"style\",\"opacity:0.2;\");// callWinToHost notification gets deleted after 5seconds on everyone's screen\nsetTimeout(function(){_this2.deleteNotification();},5000);});this.props.socket.on(\"resultsForPC\",function(resultsObj){_this2.reward.rewardMe();_this2.setState({notificationObj:resultsObj});ticketBoardContainer===null||ticketBoardContainer===void 0?void 0:ticketBoardContainer.setAttribute(\"style\",\"opacity:0.2;\");// Result notification gets deleted after 5seconds on everyone's screen\nsetTimeout(function(){_this2.deleteNotification();},5000);});}},{key:\"render\",value:function render(){var _this3=this;var notificationComp=this.state.notificationObj?/*#__PURE__*/_jsx(\"div\",{className:\"notification-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"notification\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"main animated rubberBand\",children:getMainHeading(this.state.notificationObj)}),/*#__PURE__*/_jsx(\"p\",{className:\"sub animated bounce\",children:getUserName(this.state.notificationObj)})]})}):null;return/*#__PURE__*/_jsxs(_Fragment,{children:[notificationComp,/*#__PURE__*/_jsx(Reward,{ref:function ref(_ref){_this3.reward=_ref;},type:\"confetti\",config:{elementCount:100,angle:90,spread:90,decay:0.95,lifetime:150}})]});}}]);return Notification;}(Component);export default Notification;","map":{"version":3,"sources":["/Users/ashish/Documents/tambola2/frontend/src/components/Notification.tsx"],"names":["React","Component","Reward","getUserName","obj","calledWinUsername","user","username","getMainHeading","mainHeading","result","undefined","callWinType","Notification","props","reward","deleteNotification","setState","notificationObj","ticketBoardContainer","document","getElementById","setAttribute","state","socket","on","callWinObj","rewardMe","setTimeout","resultsObj","notificationComp","ref","elementCount","angle","spread","decay","lifetime"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport { Component } from \"react\";\nimport { callWin, resultObj } from \"./Player\";\nimport Reward from \"react-rewards\";\n\n// Important: To make the notifications to appear properly and rewards to work properly\n// The parent div should have position: relative\n\ninterface NotificationProps {\n  socket: any;\n  type: string;\n}\n\ninterface NotificationState {\n  notificationObj: callWin | resultObj | null;\n}\n\nfunction getUserName(obj: any) {\n  return obj.calledWinUsername || obj.user.username;\n}\n\nfunction getMainHeading(obj: any) {\n  let mainHeading;\n  if (obj.result !== undefined) {\n    // this is result Obj\n    mainHeading = obj.result + \" \" + obj.callWinType;\n  } else {\n    mainHeading = \"Call: \" + obj.callWinType;\n  }\n  return mainHeading;\n}\n\nclass Notification extends Component<NotificationProps, NotificationState> {\n  reward: any;\n  constructor(props: NotificationProps) {\n    super(props);\n    this.state = { notificationObj: null };\n  }\n\n  componentDidMount() {\n    let ticketBoardContainer = document.getElementById(\n      \"ticket-board-container\"\n    );\n    this.props.socket.on(\"callWinToHost\", (callWinObj: callWin) => {\n      this.reward.rewardMe();\n      this.setState({ notificationObj: callWinObj });\n      ticketBoardContainer?.setAttribute(\"style\", \"opacity:0.2;\");\n\n      // callWinToHost notification gets deleted after 5seconds on everyone's screen\n      setTimeout(() => {\n        this.deleteNotification();\n      }, 5000);\n    });\n    this.props.socket.on(\"resultsForPC\", (resultsObj: resultObj) => {\n      this.reward.rewardMe();\n      this.setState({ notificationObj: resultsObj });\n      ticketBoardContainer?.setAttribute(\"style\", \"opacity:0.2;\");\n\n      // Result notification gets deleted after 5seconds on everyone's screen\n      setTimeout(() => {\n        this.deleteNotification();\n      }, 5000);\n    });\n\n    \n  }\n\n  deleteNotification = () => {\n    this.setState({ notificationObj: null });\n    let ticketBoardContainer = document.getElementById(\n      \"ticket-board-container\"\n    );\n    if (ticketBoardContainer)\n      ticketBoardContainer.setAttribute(\"style\", \"opacity: 1\");\n  };\n\n  render() {\n    let notificationComp = this.state.notificationObj ? (\n      <div className=\"notification-container\">\n        <div className=\"notification\">\n          <p className=\"main animated rubberBand\">\n            {getMainHeading(this.state.notificationObj)}\n          </p>\n          <p className=\"sub animated bounce\">\n            {getUserName(this.state.notificationObj)}\n          </p>\n        </div>\n      </div>\n    ) : null;\n    return (\n      <>\n        {notificationComp}\n        <Reward\n          ref={(ref: any) => {\n            this.reward = ref;\n          }}\n          type=\"confetti\"\n          config={{\n            elementCount: 100,\n            angle: 90,\n            spread: 90,\n            decay: 0.95,\n            lifetime: 150,\n          }}\n        ></Reward>\n      </>\n    );\n  }\n}\n\nexport default Notification;\n"]},"metadata":{},"sourceType":"module"}