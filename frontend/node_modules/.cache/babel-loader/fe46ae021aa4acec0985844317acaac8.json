{"ast":null,"code":"import _classCallCheck from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import{Component}from\"react\";import Board from\"./Board\";import PcTicket from\"./PcTicket\";import MultipleHostTicket from\"./MultipleHostTickets\";import Prizes from\"./Prizes\";import Walkthrough from\"./Walkthrough\";import Reward from\"react-rewards\";import{doNotLeavePage}from\"../utils/utils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Player=/*#__PURE__*/function(_Component){_inherits(Player,_Component);var _super=_createSuper(Player);function Player(props){var _this;_classCallCheck(this,Player);_this=_super.call(this,props);// The declarations are just for Host type\n_this.ticketFromPlayer=void 0;_this.winningCallFromPlayer=void 0;_this.userCalledForWin=void 0;_this.reward=void 0;// This function will be called if game ends\n_this.endGame=function(){_this.setState({hasGameEnded:true});_this.reward.rewardMe();window.removeEventListener('beforeunload',doNotLeavePage);var timesRun=0;var interval=setInterval(function(){_this.reward.rewardMe();++timesRun;if(timesRun===4)clearInterval(interval);},2000);};_this.state={hasGameEnded:false};return _this;}_createClass(Player,[{key:\"render\",value:function render(){var _this2=this;var mainComponent=null;var gameOverP=null;var board;var gameEndedCssClass=\"\";if(this.state.hasGameEnded){// This css class changes the opacity and disable all the clicks.\n// This is different from how it is handled in Notifications component\ngameEndedCssClass=\"game-ended no-click\";gameOverP=/*#__PURE__*/_jsx(\"p\",{className:\"game-over animated rubberBand\",children:\"Game Over\"});}if(this.props.type===\"PC\"){mainComponent=/*#__PURE__*/_jsxs(\"div\",{className:\"everything-but-prizes\",children:[/*#__PURE__*/_jsx(Walkthrough,{type:\"game\",playerType:\"PC\",runWalkthrough:this.props.runWalkthrough}),/*#__PURE__*/_jsx(\"div\",{className:gameEndedCssClass,children:/*#__PURE__*/_jsx(PcTicket,{socket:this.props.socket,numHouses:this.props.numHouses,awards:this.props.awards,endGame:this.endGame})}),gameOverP]});}else if(this.props.type===\"Host\"){mainComponent=/*#__PURE__*/_jsxs(\"div\",{className:\"everything-but-prizes\",children:[/*#__PURE__*/_jsx(Walkthrough,{type:\"game\",playerType:\"Host\",runWalkthrough:this.props.runWalkthrough}),/*#__PURE__*/_jsxs(\"div\",{className:gameEndedCssClass,children:[/*#__PURE__*/_jsx(Board,{socket:this.props.socket,endGame:this.endGame}),/*#__PURE__*/_jsx(MultipleHostTicket,{socket:this.props.socket,showWalkthrough:this.props.runWalkthrough})]}),gameOverP]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-container\",children:[mainComponent,/*#__PURE__*/_jsx(Prizes,{socket:this.props.socket,awards:this.props.awards,playerType:this.props.type,endGame:this.endGame})]}),/*#__PURE__*/_jsx(\"div\",{className:\"game-over-reward\",children:/*#__PURE__*/_jsx(Reward,{ref:function ref(_ref){_this2.reward=_ref;},type:\"confetti\",config:{elementCount:90,angle:70,spread:70,decay:0.95,lifetime:100}})})]});}}]);return Player;}(Component);export default Player;","map":{"version":3,"names":["React","Component","Board","PcTicket","MultipleHostTicket","Prizes","Walkthrough","Reward","doNotLeavePage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Player","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","ticketFromPlayer","winningCallFromPlayer","userCalledForWin","reward","endGame","setState","hasGameEnded","rewardMe","window","removeEventListener","timesRun","interval","setInterval","clearInterval","state","_createClass","key","value","render","_this2","mainComponent","gameOverP","board","gameEndedCssClass","className","children","type","playerType","runWalkthrough","socket","numHouses","awards","showWalkthrough","ref","config","elementCount","angle","spread","decay","lifetime"],"sources":["/Users/ashish/Documents/tambola2/frontend/src/components/Player.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Component } from \"react\";\nimport Board from \"./Board\";\nimport { BoxState } from \"./Box\";\nimport PcTicket from \"./PcTicket\";\nimport MultipleHostTicket from \"./MultipleHostTickets\";\nimport { Award } from \"./Config\";\nimport Prizes from \"./Prizes\";\nimport Walkthrough from \"./Walkthrough\";\nimport Reward from \"react-rewards\";\nimport { doNotLeavePage } from \"../utils/utils\";\n\n\nexport interface callWin {\n  callWinType: string;\n  goneNumbers: Array<number>;\n  houses: Array<Array<Array<BoxState>>>;\n  user: { id: string; username: string; room: string,emp_code:string};\n}\n\nexport interface resultObj {\n  callWinType: string;\n  calledWinUsername: string;\n  calledWinUserEmpCode:string;\n  calledWinSocketId:String;\n  result: string;\n}\n\ninterface PlayerProps {\n  socket: any;\n  type: string; // type is either PC or host\n  name: string;\n  emp_code:string;\n\n  // awards coming for buttons and leaderboard\n  awards: Award[];\n\n  // for PC\n  numHouses: number;\n  runWalkthrough: boolean\n}\n\ninterface PlayerState {\n  hasGameEnded: boolean;\n}\n\nclass Player extends Component<PlayerProps, PlayerState> {\n  // The declarations are just for Host type\n  ticketFromPlayer: Array<Array<Array<BoxState>>> | undefined;\n  winningCallFromPlayer: string | undefined;\n  userCalledForWin: { id: string; username: string; room: string } | undefined;\n  reward: any;\n  constructor(props: PlayerProps) {\n    super(props);\n    this.state = {\n      hasGameEnded: false,\n    };\n  }\n\n  // This function will be called if game ends\n  endGame = () => {\n    this.setState({ hasGameEnded: true });\n    this.reward.rewardMe();\n    window.removeEventListener('beforeunload', doNotLeavePage);\n    let timesRun = 0;\n    let interval = setInterval(() => {\n      this.reward.rewardMe();\n      ++timesRun;\n      if (timesRun === 4) clearInterval(interval);\n    }, 2000);\n  };\n\n  render() {\n    let mainComponent = null;\n    let gameOverP = null;\n    let board;\n    let gameEndedCssClass = \"\";\n    if (this.state.hasGameEnded) {\n      // This css class changes the opacity and disable all the clicks.\n      // This is different from how it is handled in Notifications component\n      gameEndedCssClass = \"game-ended no-click\";\n      gameOverP = <p className=\"game-over animated rubberBand\">Game Over</p>;\n    }\n    if (this.props.type === \"PC\") {\n      mainComponent = (\n        <div className=\"everything-but-prizes\">\n          <Walkthrough type=\"game\" playerType=\"PC\" runWalkthrough={this.props.runWalkthrough}/>\n          <div className={gameEndedCssClass}>\n            <PcTicket\n              \n              socket={this.props.socket}\n              numHouses={this.props.numHouses}\n              awards={this.props.awards}\n              endGame={this.endGame}\n            />\n          </div>\n          {gameOverP}\n        </div>\n      );\n    } else if (this.props.type === \"Host\") {\n      mainComponent = (\n        <div className=\"everything-but-prizes\">\n          <Walkthrough type=\"game\" playerType=\"Host\" runWalkthrough={this.props.runWalkthrough}/>\n          <div className={gameEndedCssClass}>\n           <Board socket={this.props.socket} endGame={this.endGame}/>\n            <MultipleHostTicket socket={this.props.socket} showWalkthrough={this.props.runWalkthrough}/>\n          </div>\n          {gameOverP}\n        </div>\n      );\n    }\n    return (\n      <>\n        <div className=\"main-container\">\n          {mainComponent}\n          <Prizes\n            socket={this.props.socket}\n            awards={this.props.awards}\n            playerType={this.props.type}\n            endGame={this.endGame}\n          />\n        </div>\n        {/* This is just for game over confetti */}\n        <div className=\"game-over-reward\">\n          <Reward\n            ref={(ref: any) => {\n              this.reward = ref;\n            }}\n            type=\"confetti\"\n            config={{\n              elementCount: 90,\n              angle: 70,\n              spread: 70,\n              decay: 0.95,\n              lifetime: 100,\n            }}\n          ></Reward>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default Player;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}