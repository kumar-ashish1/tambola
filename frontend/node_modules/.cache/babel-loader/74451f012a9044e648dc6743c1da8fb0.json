{"ast":null,"code":"import _classCallCheck from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/ashish/Documents/tambola2/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import{Component}from\"react\";import Ticket from\"./Ticket\";import{generateTicket}from\"../utils/utils\";import WinningButtons from\"./WinningButtons\";import NewNumber from\"./NewNumber\";import Notification from\"./Notification\";import Waiting from\"./Waiting\";import Timer from\"./Timer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PcTicket=/*#__PURE__*/function(_Component){_inherits(PcTicket,_Component);var _super=_createSuper(PcTicket);function PcTicket(props){var _this;_classCallCheck(this,PcTicket);_this=_super.call(this,props);_this.houses=void 0;_this.changeTicketState=function(houseIndex,lineIndex,boxIndex,check){var value=_this.houses[houseIndex][lineIndex][boxIndex].value;_this.houses[houseIndex][lineIndex][boxIndex]={value:value,check:check};console.log(\"here it is after changing\",_this.houses);};_this.handleWinningCall=function(callWinType){// send ticket here as well\n_this.props.socket.emit(\"callWinFromPC\",{callWinType:callWinType,houses:_this.houses});};_this.winningButtons=/*#__PURE__*/_jsx(WinningButtons,{awards:_this.props.awards,winCallBack:_this.handleWinningCall},0);_this.houses=generateTicket(_this.props.numHouses);_this.state={showTimer:false};return _this;}_createClass(PcTicket,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.props.socket.on(\"showTimer\",function(){_this2.setState({showTimer:true});});// hiding timer in case there is another call for win\nthis.props.socket.on(\"callWinToHost\",function(){if(_this2.state.showTimer===true)_this2.setState({showTimer:false});});}},{key:\"render\",value:function render(){var timer=null;if(this.state.showTimer){timer=/*#__PURE__*/_jsx(Timer,{socket:this.props.socket,endGame:this.props.endGame});}return/*#__PURE__*/_jsxs(\"div\",{className:\"pc-ticket\",children:[/*#__PURE__*/_jsx(NewNumber,{socket:this.props.socket}),timer,/*#__PURE__*/_jsx(Waiting,{playerType:\"PC\",socket:this.props.socket}),/*#__PURE__*/_jsxs(\"div\",{className:\"notification-parent\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"ticket-board-container\",children:/*#__PURE__*/_jsx(Ticket,{houses:this.houses,changeTicketState:this.changeTicketState,numHouses:this.props.numHouses})}),/*#__PURE__*/_jsx(Notification,{socket:this.props.socket,type:\"Pc\"})]}),this.winningButtons]});}}]);return PcTicket;}(Component);export default PcTicket;","map":{"version":3,"names":["React","Component","Ticket","generateTicket","WinningButtons","NewNumber","Notification","Waiting","Timer","jsx","_jsx","jsxs","_jsxs","PcTicket","_Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","houses","changeTicketState","houseIndex","lineIndex","boxIndex","check","value","console","log","handleWinningCall","callWinType","socket","emit","winningButtons","awards","winCallBack","numHouses","state","showTimer","_createClass","key","componentDidMount","_this2","on","setState","render","timer","endGame","className","children","playerType","id","type"],"sources":["/Users/ashish/Documents/tambola2/frontend/src/components/PcTicket.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { Component } from \"react\";\nimport Ticket from \"./Ticket\";\nimport { BoxState } from \"./Box\";\nimport { generateTicket } from \"../utils/utils\";\nimport WinningButtons from \"./WinningButtons\";\nimport NewNumber from \"./NewNumber\";\nimport Notification from \"./Notification\";\nimport { Award } from \"./Config\";\nimport Waiting from \"./Waiting\";\nimport Timer from \"./Timer\";\nimport Board from \"./Board\";\n\ninterface PcTicketProps {\n  socket: any;\n\n  // awards coming for winning buttons\n  awards: Award[];\n\n  // number of houses\n  numHouses: number;\n\n  endGame: () => void;\n}\n\ninterface PcTicketState {\n  showTimer: boolean;\n}\n\nclass PcTicket extends Component<PcTicketProps, PcTicketState> {\n  houses: Array<Array<Array<BoxState>>>;\n  constructor(props: PcTicketProps) {\n    super(props);\n    this.houses = generateTicket(this.props.numHouses);\n    this.state = { showTimer: false };\n  }\n  componentDidMount() {\n    this.props.socket.on(\"showTimer\", () => {\n      this.setState({ showTimer: true });\n    });\n\n    // hiding timer in case there is another call for win\n    this.props.socket.on(\"callWinToHost\", () => {\n      if (this.state.showTimer === true) this.setState({ showTimer: false });\n    });\n\n  }\n  changeTicketState = (\n    houseIndex: number,\n    lineIndex: number,\n    boxIndex: number,\n    check: boolean\n  ): void => {\n    let { value } = this.houses[houseIndex][lineIndex][boxIndex];\n    this.houses[houseIndex][lineIndex][boxIndex] = { value: value, check };\n    console.log(\"here it is after changing\", this.houses);\n  };\n\n  handleWinningCall = (callWinType: string) => {\n    // send ticket here as well\n    this.props.socket.emit(\"callWinFromPC\", {\n      callWinType: callWinType,\n      houses: this.houses,\n    });\n  };\n\n  winningButtons = (\n    <WinningButtons\n      key={0}\n      awards={this.props.awards}\n      winCallBack={this.handleWinningCall}\n    />\n  );\n\n  render() {\n    let timer = null;\n    if (this.state.showTimer) {\n      timer = <Timer socket={this.props.socket} endGame={this.props.endGame} />;\n    }\n\n    return (\n      <div className=\"pc-ticket\">\n        <NewNumber socket={this.props.socket} />\n        {timer}\n        <Waiting playerType=\"PC\" socket={this.props.socket} />\n        <div className=\"notification-parent\">\n          {/* This div is for setting the opacity when notification is shown */}\n          <div id=\"ticket-board-container\">\n            <Ticket\n              houses={this.houses}\n              changeTicketState={this.changeTicketState}\n              numHouses={this.props.numHouses}\n            />\n          </div>\n\n          <Notification socket={this.props.socket} type=\"Pc\" />\n        </div>\n\n        {this.winningButtons}\n      </div>\n    );\n  }\n}\n\nexport default PcTicket;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}