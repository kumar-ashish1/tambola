{"ast":null,"code":"import React, { PureComponent, createContext, createElement, forwardRef, Component, cloneElement, Children } from 'react';\nimport PropTypes from 'prop-types';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n\nvar _assign$ = function __assign$1() {\n  _assign$ = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign$.apply(this, arguments);\n};\n\nvar clamp = function clamp(min, max) {\n  return function (v) {\n    return Math.max(Math.min(v, max), min);\n  };\n};\n\nvar sanitize = function sanitize(v) {\n  return v % 1 ? Number(v.toFixed(5)) : v;\n};\n\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))$/i;\nvar number = {\n  test: function test(v) {\n    return typeof v === 'number';\n  },\n  parse: parseFloat,\n  transform: function transform(v) {\n    return v;\n  }\n};\n\nvar alpha = _assign$({}, number, {\n  transform: clamp(0, 1)\n});\n\nvar scale = _assign$({}, number, {\n  default: 1\n});\n\nvar createUnitType = function createUnitType(unit) {\n  return {\n    test: function test(v) {\n      return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\n    },\n    parse: parseFloat,\n    transform: function transform(v) {\n      return \"\" + v + unit;\n    }\n  };\n};\n\nvar degrees = createUnitType('deg');\nvar percent = createUnitType('%');\nvar px = createUnitType('px');\nvar vh = createUnitType('vh');\nvar vw = createUnitType('vw');\n\nvar progressPercentage = _assign$({}, percent, {\n  parse: function parse(v) {\n    return percent.parse(v) / 100;\n  },\n  transform: function transform(v) {\n    return percent.transform(v * 100);\n  }\n});\n\nvar getValueFromFunctionString = function getValueFromFunctionString(value) {\n  return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\n};\n\nvar clampRgbUnit = clamp(0, 255);\n\nvar isRgba = function isRgba(v) {\n  return v.red !== undefined;\n};\n\nvar isHsla = function isHsla(v) {\n  return v.hue !== undefined;\n};\n\nvar splitColorValues = function splitColorValues(terms) {\n  return function (v) {\n    if (typeof v !== 'string') return v;\n    var values = {};\n    var valuesArray = getValueFromFunctionString(v).split(/,\\s*/);\n\n    for (var i = 0; i < 4; i++) {\n      values[terms[i]] = valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\n    }\n\n    return values;\n  };\n};\n\nvar rgbaTemplate = function rgbaTemplate(_a) {\n  var red = _a.red,\n      green = _a.green,\n      blue = _a.blue,\n      _b = _a.alpha,\n      alpha$$1 = _b === void 0 ? 1 : _b;\n  return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha$$1 + \")\";\n};\n\nvar hslaTemplate = function hslaTemplate(_a) {\n  var hue = _a.hue,\n      saturation = _a.saturation,\n      lightness = _a.lightness,\n      _b = _a.alpha,\n      alpha$$1 = _b === void 0 ? 1 : _b;\n  return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha$$1 + \")\";\n};\n\nvar rgbUnit = _assign$({}, number, {\n  transform: function transform(v) {\n    return Math.round(clampRgbUnit(v));\n  }\n});\n\nfunction isColorString(color, colorType) {\n  return color.startsWith(colorType) && singleColorRegex.test(color);\n}\n\nvar rgba = {\n  test: function test(v) {\n    return typeof v === 'string' ? isColorString(v, 'rgb') : isRgba(v);\n  },\n  parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\n  transform: function transform(_a) {\n    var red = _a.red,\n        green = _a.green,\n        blue = _a.blue,\n        _b = _a.alpha,\n        alpha$$1 = _b === void 0 ? 1 : _b;\n    return rgbaTemplate({\n      red: rgbUnit.transform(red),\n      green: rgbUnit.transform(green),\n      blue: rgbUnit.transform(blue),\n      alpha: sanitize(alpha.transform(alpha$$1))\n    });\n  }\n};\nvar hsla = {\n  test: function test(v) {\n    return typeof v === 'string' ? isColorString(v, 'hsl') : isHsla(v);\n  },\n  parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\n  transform: function transform(_a) {\n    var hue = _a.hue,\n        saturation = _a.saturation,\n        lightness = _a.lightness,\n        _b = _a.alpha,\n        alpha$$1 = _b === void 0 ? 1 : _b;\n    return hslaTemplate({\n      hue: Math.round(hue),\n      saturation: percent.transform(sanitize(saturation)),\n      lightness: percent.transform(sanitize(lightness)),\n      alpha: sanitize(alpha.transform(alpha$$1))\n    });\n  }\n};\n\nvar hex = _assign$({}, rgba, {\n  test: function test(v) {\n    return typeof v === 'string' && isColorString(v, '#');\n  },\n  parse: function parse(v) {\n    var r = '';\n    var g = '';\n    var b = '';\n\n    if (v.length > 4) {\n      r = v.substr(1, 2);\n      g = v.substr(3, 2);\n      b = v.substr(5, 2);\n    } else {\n      r = v.substr(1, 1);\n      g = v.substr(2, 1);\n      b = v.substr(3, 1);\n      r += r;\n      g += g;\n      b += b;\n    }\n\n    return {\n      red: parseInt(r, 16),\n      green: parseInt(g, 16),\n      blue: parseInt(b, 16),\n      alpha: 1\n    };\n  }\n});\n\nvar color = {\n  test: function test(v) {\n    return typeof v === 'string' && singleColorRegex.test(v) || isRgba(v) || isHsla(v);\n  },\n  parse: function parse(v) {\n    if (rgba.test(v)) {\n      return rgba.parse(v);\n    } else if (hsla.test(v)) {\n      return hsla.parse(v);\n    } else if (hex.test(v)) {\n      return hex.parse(v);\n    }\n\n    return v;\n  },\n  transform: function transform(v) {\n    if (isRgba(v)) {\n      return rgba.transform(v);\n    } else if (isHsla(v)) {\n      return hsla.transform(v);\n    }\n\n    return v;\n  }\n};\nvar COLOR_TOKEN = '${c}';\nvar NUMBER_TOKEN = '${n}';\n\nvar convertNumbersToZero = function convertNumbersToZero(v) {\n  return typeof v === 'number' ? 0 : v;\n};\n\nvar complex = {\n  test: function test(v) {\n    if (typeof v !== 'string' || !isNaN(v)) return false;\n    var numValues = 0;\n    var foundNumbers = v.match(floatRegex);\n    var foundColors = v.match(colorRegex);\n    if (foundNumbers) numValues += foundNumbers.length;\n    if (foundColors) numValues += foundColors.length;\n    return numValues > 0;\n  },\n  parse: function parse(v) {\n    var input = v;\n    var parsed = [];\n    var foundColors = input.match(colorRegex);\n\n    if (foundColors) {\n      input = input.replace(colorRegex, COLOR_TOKEN);\n      parsed.push.apply(parsed, foundColors.map(color.parse));\n    }\n\n    var foundNumbers = input.match(floatRegex);\n\n    if (foundNumbers) {\n      parsed.push.apply(parsed, foundNumbers.map(number.parse));\n    }\n\n    return parsed;\n  },\n  createTransformer: function createTransformer(prop) {\n    var template = prop;\n    var token = 0;\n    var foundColors = prop.match(colorRegex);\n    var numColors = foundColors ? foundColors.length : 0;\n\n    if (foundColors) {\n      for (var i = 0; i < numColors; i++) {\n        template = template.replace(foundColors[i], COLOR_TOKEN);\n        token++;\n      }\n    }\n\n    var foundNumbers = template.match(floatRegex);\n    var numNumbers = foundNumbers ? foundNumbers.length : 0;\n\n    if (foundNumbers) {\n      for (var i = 0; i < numNumbers; i++) {\n        template = template.replace(foundNumbers[i], NUMBER_TOKEN);\n        token++;\n      }\n    }\n\n    return function (v) {\n      var output = template;\n\n      for (var i = 0; i < token; i++) {\n        output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\n      }\n\n      return output;\n    };\n  },\n  getAnimatableNone: function getAnimatableNone(target) {\n    var parsedTarget = complex.parse(target);\n    var targetTransformer = complex.createTransformer(target);\n    return targetTransformer(parsedTarget.map(convertNumbersToZero));\n  }\n};\n\nvar warning = function warning() {};\n\nvar invariant = function invariant() {};\n\nif (process.env.NODE_ENV !== 'production') {\n  warning = function warning(check, message) {\n    if (!check && typeof console !== 'undefined') {\n      console.warn(message);\n    }\n  };\n\n  invariant = function invariant(check, message) {\n    if (!check) {\n      throw new Error(message);\n    }\n  };\n}\n\nvar prevTime = 0;\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined ? function (callback) {\n  return window.requestAnimationFrame(callback);\n} : function (callback) {\n  var timestamp = Date.now();\n  var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\n  prevTime = timestamp + timeToCall;\n  setTimeout(function () {\n    return callback(prevTime);\n  }, timeToCall);\n};\n\nvar createStep = function createStep(setRunNextFrame) {\n  var processToRun = [];\n  var processToRunNextFrame = [];\n  var numThisFrame = 0;\n  var isProcessing = false;\n  var i = 0;\n  var cancelled = new WeakSet();\n  var toKeepAlive = new WeakSet();\n  var renderStep = {\n    cancel: function cancel(process) {\n      var indexOfCallback = processToRunNextFrame.indexOf(process);\n      cancelled.add(process);\n\n      if (indexOfCallback !== -1) {\n        processToRunNextFrame.splice(indexOfCallback, 1);\n      }\n    },\n    process: function process(frame) {\n      var _a;\n\n      isProcessing = true;\n      _a = [processToRunNextFrame, processToRun], processToRun = _a[0], processToRunNextFrame = _a[1];\n      processToRunNextFrame.length = 0;\n      numThisFrame = processToRun.length;\n\n      if (numThisFrame) {\n        var process_1;\n\n        for (i = 0; i < numThisFrame; i++) {\n          process_1 = processToRun[i];\n          process_1(frame);\n\n          if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\n            renderStep.schedule(process_1);\n            setRunNextFrame(true);\n          }\n        }\n      }\n\n      isProcessing = false;\n    },\n    schedule: function schedule(process, keepAlive, immediate) {\n      if (keepAlive === void 0) {\n        keepAlive = false;\n      }\n\n      if (immediate === void 0) {\n        immediate = false;\n      }\n\n      invariant(typeof process === 'function', 'Argument must be a function');\n      var addToCurrentBuffer = immediate && isProcessing;\n      var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\n      cancelled.delete(process);\n      if (keepAlive) toKeepAlive.add(process);\n\n      if (buffer.indexOf(process) === -1) {\n        buffer.push(process);\n        if (addToCurrentBuffer) numThisFrame = processToRun.length;\n      }\n    }\n  };\n  return renderStep;\n};\n\nvar StepId;\n\n(function (StepId) {\n  StepId[\"Read\"] = \"read\";\n  StepId[\"Update\"] = \"update\";\n  StepId[\"Render\"] = \"render\";\n  StepId[\"PostRender\"] = \"postRender\";\n  StepId[\"FixedUpdate\"] = \"fixedUpdate\";\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\nvar defaultElapsed = 1 / 60 * 1000;\nvar useDefaultElapsed = true;\nvar willRunNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n  delta: 0,\n  timestamp: 0\n};\nvar stepsOrder = [StepId.Read, StepId.Update, StepId.Render, StepId.PostRender];\n\nvar setWillRunNextFrame = function setWillRunNextFrame(willRun) {\n  return willRunNextFrame = willRun;\n};\n\nvar _a = stepsOrder.reduce(function (acc, key) {\n  var step = createStep(setWillRunNextFrame);\n\n  acc.sync[key] = function (process, keepAlive, immediate) {\n    if (keepAlive === void 0) {\n      keepAlive = false;\n    }\n\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    if (!willRunNextFrame) startLoop();\n    step.schedule(process, keepAlive, immediate);\n    return process;\n  };\n\n  acc.cancelSync[key] = function (process) {\n    return step.cancel(process);\n  };\n\n  acc.steps[key] = step;\n  return acc;\n}, {\n  steps: {},\n  sync: {},\n  cancelSync: {}\n}),\n    steps = _a.steps,\n    sync = _a.sync,\n    cancelSync = _a.cancelSync;\n\nvar processStep = function processStep(stepId) {\n  return steps[stepId].process(frame);\n};\n\nvar processFrame = function processFrame(timestamp) {\n  willRunNextFrame = false;\n  frame.delta = useDefaultElapsed ? defaultElapsed : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n  if (!useDefaultElapsed) defaultElapsed = frame.delta;\n  frame.timestamp = timestamp;\n  isProcessing = true;\n  stepsOrder.forEach(processStep);\n  isProcessing = false;\n\n  if (willRunNextFrame) {\n    useDefaultElapsed = false;\n    onNextFrame(processFrame);\n  }\n};\n\nvar startLoop = function startLoop() {\n  willRunNextFrame = true;\n  useDefaultElapsed = true;\n  if (!isProcessing) onNextFrame(processFrame);\n};\n\nvar getFrameData = function getFrameData() {\n  return frame;\n};\n\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\n\nvar reversed = function reversed(easing) {\n  return function (p) {\n    return 1 - easing(1 - p);\n  };\n};\n\nvar mirrored = function mirrored(easing) {\n  return function (p) {\n    return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n  };\n};\n\nvar createReversedEasing = reversed;\n\nvar createExpoIn = function createExpoIn(power) {\n  return function (p) {\n    return Math.pow(p, power);\n  };\n};\n\nvar createBackIn = function createBackIn(power) {\n  return function (p) {\n    return p * p * ((power + 1) * p - power);\n  };\n};\n\nvar createAnticipateEasing = function createAnticipateEasing(power) {\n  var backEasing = createBackIn(power);\n  return function (p) {\n    return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n  };\n};\n\nvar linear = function linear(p) {\n  return p;\n};\n\nvar easeIn = /*#__PURE__*/createExpoIn(2);\nvar easeOut = /*#__PURE__*/reversed(easeIn);\nvar easeInOut = /*#__PURE__*/mirrored(easeIn);\n\nvar circIn = function circIn(p) {\n  return 1 - Math.sin(Math.acos(p));\n};\n\nvar circOut = /*#__PURE__*/reversed(circIn);\nvar circInOut = /*#__PURE__*/mirrored(circOut);\nvar backIn = /*#__PURE__*/createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = /*#__PURE__*/reversed(backIn);\nvar backInOut = /*#__PURE__*/mirrored(backIn);\nvar anticipate = /*#__PURE__*/createAnticipateEasing(DEFAULT_OVERSHOOT_STRENGTH);\nvar NEWTON_ITERATIONS = 8;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar K_SPLINE_TABLE_SIZE = 11;\nvar K_SAMPLE_STEP_SIZE = 1.0 / (K_SPLINE_TABLE_SIZE - 1.0);\nvar FLOAT_32_SUPPORTED = typeof Float32Array !== 'undefined';\n\nvar a = function a(a1, a2) {\n  return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\n\nvar b = function b(a1, a2) {\n  return 3.0 * a2 - 6.0 * a1;\n};\n\nvar c = function c(a1) {\n  return 3.0 * a1;\n};\n\nvar getSlope = function getSlope(t, a1, a2) {\n  return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\n\nvar calcBezier = function calcBezier(t, a1, a2) {\n  return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\n\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n  var sampleValues = FLOAT_32_SUPPORTED ? new Float32Array(K_SPLINE_TABLE_SIZE) : new Array(K_SPLINE_TABLE_SIZE);\n\n  var binarySubdivide = function binarySubdivide(aX, aA, aB) {\n    var i = 0;\n    var currentX;\n    var currentT;\n\n    do {\n      currentT = aA + (aB - aA) / 2.0;\n      currentX = calcBezier(currentT, mX1, mX2) - aX;\n\n      if (currentX > 0.0) {\n        aB = currentT;\n      } else {\n        aA = currentT;\n      }\n    } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n\n    return currentT;\n  };\n\n  var newtonRaphsonIterate = function newtonRaphsonIterate(aX, aGuessT) {\n    var i = 0;\n    var currentSlope = 0;\n    var currentX;\n\n    for (; i < NEWTON_ITERATIONS; ++i) {\n      currentSlope = getSlope(aGuessT, mX1, mX2);\n\n      if (currentSlope === 0.0) {\n        return aGuessT;\n      }\n\n      currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n      aGuessT -= currentX / currentSlope;\n    }\n\n    return aGuessT;\n  };\n\n  var calcSampleValues = function calcSampleValues() {\n    for (var i = 0; i < K_SPLINE_TABLE_SIZE; ++i) {\n      sampleValues[i] = calcBezier(i * K_SAMPLE_STEP_SIZE, mX1, mX2);\n    }\n  };\n\n  var getTForX = function getTForX(aX) {\n    var intervalStart = 0.0;\n    var currentSample = 1;\n    var lastSample = K_SPLINE_TABLE_SIZE - 1;\n    var dist = 0.0;\n    var guessForT = 0.0;\n    var initialSlope = 0.0;\n\n    for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n      intervalStart += K_SAMPLE_STEP_SIZE;\n    }\n\n    --currentSample;\n    dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    guessForT = intervalStart + dist * K_SAMPLE_STEP_SIZE;\n    initialSlope = getSlope(guessForT, mX1, mX2);\n\n    if (initialSlope >= NEWTON_MIN_SLOPE) {\n      return newtonRaphsonIterate(aX, guessForT);\n    } else if (initialSlope === 0.0) {\n      return guessForT;\n    } else {\n      return binarySubdivide(aX, intervalStart, intervalStart + K_SAMPLE_STEP_SIZE);\n    }\n  };\n\n  calcSampleValues();\n\n  var resolver = function resolver(aX) {\n    var returnValue;\n\n    if (mX1 === mY1 && mX2 === mY2) {\n      returnValue = aX;\n    } else if (aX === 0) {\n      returnValue = 0;\n    } else if (aX === 1) {\n      returnValue = 1;\n    } else {\n      returnValue = calcBezier(getTForX(aX), mY1, mY2);\n    }\n\n    return returnValue;\n  };\n\n  return resolver;\n}\n\nvar zeroPoint = {\n  x: 0,\n  y: 0,\n  z: 0\n};\n\nvar isNum = function isNum(v) {\n  return typeof v === 'number';\n};\n\nvar radiansToDegrees = function radiansToDegrees(radians) {\n  return radians * 180 / Math.PI;\n};\n\nvar angle = function angle(a, b) {\n  if (b === void 0) {\n    b = zeroPoint;\n  }\n\n  return radiansToDegrees(Math.atan2(b.y - a.y, b.x - a.x));\n};\n\nvar applyOffset = function applyOffset(from, to) {\n  var hasReceivedFrom = true;\n\n  if (to === undefined) {\n    to = from;\n    hasReceivedFrom = false;\n  }\n\n  return function (v) {\n    if (hasReceivedFrom) {\n      return v - from + to;\n    } else {\n      from = v;\n      hasReceivedFrom = true;\n      return to;\n    }\n  };\n};\n\nvar curryRange = function curryRange(func) {\n  return function (min, max, v) {\n    return v !== undefined ? func(min, max, v) : function (cv) {\n      return func(min, max, cv);\n    };\n  };\n};\n\nvar clamp$1 = function clamp$1(min, max, v) {\n  return Math.min(Math.max(v, min), max);\n};\n\nvar clamp$1$1 = curryRange(clamp$1);\n\nvar conditional = function conditional(check, apply) {\n  return function (v) {\n    return check(v) ? apply(v) : v;\n  };\n};\n\nvar degreesToRadians = function degreesToRadians(degrees$$1) {\n  return degrees$$1 * Math.PI / 180;\n};\n\nvar isPoint = function isPoint(point) {\n  return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\nvar isPoint3D = function isPoint3D(point) {\n  return isPoint(point) && point.hasOwnProperty('z');\n};\n\nvar distance1D = function distance1D(a, b) {\n  return Math.abs(a - b);\n};\n\nvar distance = function distance(a, b) {\n  if (b === void 0) {\n    b = zeroPoint;\n  }\n\n  if (isNum(a) && isNum(b)) {\n    return distance1D(a, b);\n  } else if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n    return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n  }\n\n  return 0;\n};\n\nvar progress = function progress(from, to, value) {\n  var toFromDifference = to - from;\n  return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nvar mix = function mix(from, to, progress) {\n  return -progress * from + progress * to + from;\n};\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n\nvar _assign$2 = function __assign$2() {\n  _assign$2 = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign$2.apply(this, arguments);\n};\n\nvar mixLinearColor = function mixLinearColor(from, to, v) {\n  var fromExpo = from * from;\n  var toExpo = to * to;\n  return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\n};\n\nvar colorTypes = [hex, rgba, hsla];\n\nvar getColorType = function getColorType(v) {\n  return colorTypes.find(function (type) {\n    return type.test(v);\n  });\n};\n\nvar notAnimatable = function notAnimatable(color$$1) {\n  return \"'\" + color$$1 + \"' is not an animatable color. Use the equivalent color code instead.\";\n};\n\nvar mixColor = function mixColor(from, to) {\n  var fromColorType = getColorType(from);\n  var toColorType = getColorType(to);\n  invariant(!!fromColorType, notAnimatable(from));\n  invariant(!!toColorType, notAnimatable(to));\n  invariant(fromColorType.transform === toColorType.transform, 'Both colors must be hex/RGBA, OR both must be HSLA.');\n  var fromColor = fromColorType.parse(from);\n  var toColor = toColorType.parse(to);\n\n  var blended = _assign$2({}, fromColor);\n\n  var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\n  return function (v) {\n    for (var key in blended) {\n      if (key !== 'alpha') {\n        blended[key] = mixFunc(fromColor[key], toColor[key], v);\n      }\n    }\n\n    blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\n    return fromColorType.transform(blended);\n  };\n};\n\nvar combineFunctions = function combineFunctions(a, b) {\n  return function (v) {\n    return b(a(v));\n  };\n};\n\nvar pipe = function pipe() {\n  var transformers = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    transformers[_i] = arguments[_i];\n  }\n\n  return transformers.reduce(combineFunctions);\n};\n\nfunction getMixer(origin, target) {\n  if (isNum(origin)) {\n    return function (v) {\n      return mix(origin, target, v);\n    };\n  } else if (color.test(origin)) {\n    return mixColor(origin, target);\n  } else {\n    return mixComplex(origin, target);\n  }\n}\n\nvar mixArray = function mixArray(from, to) {\n  var output = from.slice();\n  var numValues = output.length;\n  var blendValue = from.map(function (fromThis, i) {\n    return getMixer(fromThis, to[i]);\n  });\n  return function (v) {\n    for (var i = 0; i < numValues; i++) {\n      output[i] = blendValue[i](v);\n    }\n\n    return output;\n  };\n};\n\nvar mixObject = function mixObject(origin, target) {\n  var output = _assign$2({}, origin, target);\n\n  var blendValue = {};\n\n  for (var key in output) {\n    if (origin[key] !== undefined && target[key] !== undefined) {\n      blendValue[key] = getMixer(origin[key], target[key]);\n    }\n  }\n\n  return function (v) {\n    for (var key in blendValue) {\n      output[key] = blendValue[key](v);\n    }\n\n    return output;\n  };\n};\n\nfunction analyse(value) {\n  var parsed = complex.parse(value);\n  var numValues = parsed.length;\n  var numNumbers = 0;\n  var numRGB = 0;\n  var numHSL = 0;\n\n  for (var i = 0; i < numValues; i++) {\n    if (numNumbers || typeof parsed[i] === 'number') {\n      numNumbers++;\n    } else {\n      if (parsed[i].hue !== undefined) {\n        numHSL++;\n      } else {\n        numRGB++;\n      }\n    }\n  }\n\n  return {\n    parsed: parsed,\n    numNumbers: numNumbers,\n    numRGB: numRGB,\n    numHSL: numHSL\n  };\n}\n\nvar mixComplex = function mixComplex(origin, target) {\n  var template = complex.createTransformer(target);\n  var originStats = analyse(origin);\n  var targetStats = analyse(target);\n  invariant(originStats.numHSL === targetStats.numHSL && originStats.numRGB === targetStats.numRGB && originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\n  return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\n};\n\nvar mixNumber = function mixNumber(from, to) {\n  return function (p) {\n    return mix(from, to, p);\n  };\n};\n\nfunction detectMixerFactory(v) {\n  if (typeof v === 'number') {\n    return mixNumber;\n  } else if (typeof v === 'string') {\n    if (color.test(v)) {\n      return mixColor;\n    } else {\n      return mixComplex;\n    }\n  } else if (Array.isArray(v)) {\n    return mixArray;\n  } else if (typeof v === 'object') {\n    return mixObject;\n  }\n}\n\nfunction createMixers(output, ease, customMixer) {\n  var mixers = [];\n  var mixerFactory = customMixer || detectMixerFactory(output[0]);\n  var numMixers = output.length - 1;\n\n  for (var i = 0; i < numMixers; i++) {\n    var mixer = mixerFactory(output[i], output[i + 1]);\n\n    if (ease) {\n      var easingFunction = Array.isArray(ease) ? ease[i] : ease;\n      mixer = pipe(easingFunction, mixer);\n    }\n\n    mixers.push(mixer);\n  }\n\n  return mixers;\n}\n\nfunction fastInterpolate(_a, _b) {\n  var from = _a[0],\n      to = _a[1];\n  var mixer = _b[0];\n  return function (v) {\n    return mixer(progress(from, to, v));\n  };\n}\n\nfunction slowInterpolate(input, mixers) {\n  var inputLength = input.length;\n  var lastInputIndex = inputLength - 1;\n  return function (v) {\n    var mixerIndex = 0;\n    var foundMixerIndex = false;\n\n    if (v <= input[0]) {\n      foundMixerIndex = true;\n    } else if (v >= input[lastInputIndex]) {\n      mixerIndex = lastInputIndex - 1;\n      foundMixerIndex = true;\n    }\n\n    if (!foundMixerIndex) {\n      var i = 1;\n\n      for (; i < inputLength; i++) {\n        if (input[i] > v || i === lastInputIndex) {\n          break;\n        }\n      }\n\n      mixerIndex = i - 1;\n    }\n\n    var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\n    return mixers[mixerIndex](progressInRange);\n  };\n}\n\nfunction interpolate(input, output, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.clamp,\n      clamp = _c === void 0 ? true : _c,\n      ease = _b.ease,\n      mixer = _b.mixer;\n\n  var inputLength = input.length;\n  invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\n  invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\n\n  if (input[0] > input[inputLength - 1]) {\n    input = [].concat(input);\n    output = [].concat(output);\n    input.reverse();\n    output.reverse();\n  }\n\n  var mixers = createMixers(output, ease, mixer);\n  var interpolator = inputLength === 2 ? fastInterpolate(input, mixers) : slowInterpolate(input, mixers);\n  return clamp ? pipe(clamp$1$1(input[0], input[inputLength - 1]), interpolator) : interpolator;\n}\n\nvar pointFromVector = function pointFromVector(origin, angle, distance) {\n  angle = degreesToRadians(angle);\n  return {\n    x: distance * Math.cos(angle) + origin.x,\n    y: distance * Math.sin(angle) + origin.y\n  };\n};\n\nvar toDecimal = function toDecimal(num, precision) {\n  if (precision === void 0) {\n    precision = 2;\n  }\n\n  precision = Math.pow(10, precision);\n  return Math.round(num * precision) / precision;\n};\n\nvar smoothFrame = function smoothFrame(prevValue, nextValue, duration, smoothing) {\n  if (smoothing === void 0) {\n    smoothing = 0;\n  }\n\n  return toDecimal(prevValue + duration * (nextValue - prevValue) / Math.max(smoothing, duration));\n};\n\nvar smooth = function smooth(strength) {\n  if (strength === void 0) {\n    strength = 50;\n  }\n\n  var previousValue = 0;\n  var lastUpdated = 0;\n  return function (v) {\n    var currentFramestamp = getFrameData().timestamp;\n    var timeDelta = currentFramestamp !== lastUpdated ? currentFramestamp - lastUpdated : 0;\n    var newValue = timeDelta ? smoothFrame(previousValue, v, timeDelta, strength) : previousValue;\n    lastUpdated = currentFramestamp;\n    previousValue = newValue;\n    return newValue;\n  };\n};\n\nvar snap = function snap(points) {\n  if (typeof points === 'number') {\n    return function (v) {\n      return Math.round(v / points) * points;\n    };\n  } else {\n    var i_1 = 0;\n    var numPoints_1 = points.length;\n    return function (v) {\n      var lastDistance = Math.abs(points[0] - v);\n\n      for (i_1 = 1; i_1 < numPoints_1; i_1++) {\n        var point = points[i_1];\n        var distance = Math.abs(point - v);\n        if (distance === 0) return point;\n        if (distance > lastDistance) return points[i_1 - 1];\n        if (i_1 === numPoints_1 - 1) return point;\n        lastDistance = distance;\n      }\n    };\n  }\n};\n\nvar identity = function identity(v) {\n  return v;\n};\n\nvar springForce = function springForce(alterDisplacement) {\n  if (alterDisplacement === void 0) {\n    alterDisplacement = identity;\n  }\n\n  return curryRange(function (constant, origin, v) {\n    var displacement = origin - v;\n    var springModifiedDisplacement = -(0 - constant + 1) * (0 - alterDisplacement(Math.abs(displacement)));\n    return displacement <= 0 ? origin + springModifiedDisplacement : origin - springModifiedDisplacement;\n  });\n};\n\nvar springForceLinear = springForce();\nvar springForceExpo = springForce(Math.sqrt);\n\nvar velocityPerFrame = function velocityPerFrame(xps, frameDuration) {\n  return isNum(xps) ? xps / (1000 / frameDuration) : 0;\n};\n\nvar velocityPerSecond = function velocityPerSecond(velocity, frameDuration) {\n  return frameDuration ? velocity * (1000 / frameDuration) : 0;\n};\n\nvar wrap = function wrap(min, max, v) {\n  var rangeSize = max - min;\n  return ((v - min) % rangeSize + rangeSize) % rangeSize + min;\n};\n\nvar wrap$1 = curryRange(wrap);\nvar clampProgress = clamp$1$1(0, 1);\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar _assign$3 = function __assign$3() {\n  _assign$3 = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign$3.apply(this, arguments);\n};\n\nfunction __rest$1(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar createStyler = function createStyler(_a) {\n  var onRead = _a.onRead,\n      onRender = _a.onRender,\n      _b = _a.uncachedValues,\n      uncachedValues = _b === void 0 ? new Set() : _b,\n      _c = _a.useCache,\n      useCache = _c === void 0 ? true : _c;\n  return function (_a) {\n    if (_a === void 0) {\n      _a = {};\n    }\n\n    var props = __rest$1(_a, []);\n\n    var state = {};\n    var changedValues = [];\n    var hasChanged = false;\n\n    function setValue(key, value) {\n      if (key.startsWith('--')) {\n        props.hasCSSVariable = true;\n      }\n\n      var currentValue = state[key];\n      state[key] = value;\n      if (state[key] === currentValue) return;\n\n      if (changedValues.indexOf(key) === -1) {\n        changedValues.push(key);\n      }\n\n      if (!hasChanged) {\n        hasChanged = true;\n        sync.render(styler.render);\n      }\n    }\n\n    var styler = {\n      get: function get(key, forceRead) {\n        if (forceRead === void 0) {\n          forceRead = false;\n        }\n\n        var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n        return useCached ? state[key] : onRead(key, props);\n      },\n      set: function set(values, value) {\n        if (typeof values === 'string') {\n          setValue(values, value);\n        } else {\n          for (var key in values) {\n            setValue(key, values[key]);\n          }\n        }\n\n        return this;\n      },\n      render: function render(forceRender) {\n        if (forceRender === void 0) {\n          forceRender = false;\n        }\n\n        if (hasChanged || forceRender === true) {\n          onRender(state, props, changedValues);\n          hasChanged = false;\n          changedValues.length = 0;\n        }\n\n        return this;\n      }\n    };\n    return styler;\n  };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\n\nvar camelToDash = function camelToDash(str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nvar setDomAttrs = function setDomAttrs(element, attrs) {\n  for (var key in attrs) {\n    if (attrs.hasOwnProperty(key)) {\n      element.setAttribute(key, attrs[key]);\n    }\n  }\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\n\nvar setDashPrefix = function setDashPrefix(key, prefixed) {\n  return dashCache.set(key, camelToDash(prefixed));\n};\n\nvar testPrefix = function testPrefix(key) {\n  testElement = testElement || document.createElement('div');\n\n  for (var i = 0; i < numPrefixes; i++) {\n    var prefix = prefixes[i];\n    var noPrefix = prefix === '';\n    var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n\n    if (prefixedPropertyName in testElement.style || noPrefix) {\n      camelCache.set(key, prefixedPropertyName);\n      setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n    }\n  }\n};\n\nvar setServerProperty = function setServerProperty(key) {\n  return setDashPrefix(key, key);\n};\n\nvar prefixer = function prefixer(key, asDashCase) {\n  if (asDashCase === void 0) {\n    asDashCase = false;\n  }\n\n  var cache = asDashCase ? dashCache : camelCache;\n  if (!cache.has(key)) isBrowser ? testPrefix(key) : setServerProperty(key);\n  return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n  return axes.reduce(function (axesAcc, axesKey) {\n    axesAcc.push(key + axesKey);\n    return axesAcc;\n  }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n  dict[key] = true;\n  return dict;\n}, {});\n\nfunction isTransformProp(key) {\n  return transformPropDictionary[key] === true;\n}\n\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\n\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\n\nvar rounded = /*#__PURE__*/_assign$3({}, number, {\n  transform: Math.round\n});\n\nvar valueTypes = {\n  color: color,\n  backgroundColor: color,\n  outlineColor: color,\n  fill: color,\n  stroke: color,\n  borderColor: color,\n  borderTopColor: color,\n  borderRightColor: color,\n  borderBottomColor: color,\n  borderLeftColor: color,\n  borderWidth: px,\n  borderTopWidth: px,\n  borderRightWidth: px,\n  borderBottomWidth: px,\n  borderLeftWidth: px,\n  borderRadius: px,\n  radius: px,\n  borderTopLeftRadius: px,\n  borderTopRightRadius: px,\n  borderBottomRightRadius: px,\n  borderBottomLeftRadius: px,\n  width: px,\n  maxWidth: px,\n  height: px,\n  maxHeight: px,\n  size: px,\n  top: px,\n  right: px,\n  bottom: px,\n  left: px,\n  padding: px,\n  paddingTop: px,\n  paddingRight: px,\n  paddingBottom: px,\n  paddingLeft: px,\n  margin: px,\n  marginTop: px,\n  marginRight: px,\n  marginBottom: px,\n  marginLeft: px,\n  rotate: degrees,\n  rotateX: degrees,\n  rotateY: degrees,\n  rotateZ: degrees,\n  scale: scale,\n  scaleX: scale,\n  scaleY: scale,\n  scaleZ: scale,\n  skew: degrees,\n  skewX: degrees,\n  skewY: degrees,\n  distance: px,\n  x: px,\n  y: px,\n  z: px,\n  perspective: px,\n  opacity: alpha,\n  originX: progressPercentage,\n  originY: progressPercentage,\n  originZ: px,\n  zIndex: rounded\n};\n\nvar getValueType = function getValueType(key) {\n  return valueTypes[key];\n};\n\nvar getValueAsType = function getValueAsType(value, type) {\n  return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n  x: 'translateX',\n  y: 'translateY',\n  z: 'translateZ'\n};\n\nfunction isCustomTemplate(v) {\n  return typeof v === 'function';\n}\n\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration) {\n  var transformString = '';\n  var transformHasZ = false;\n  transformKeys.sort(sortTransformProps);\n  var numTransformKeys = transformKeys.length;\n\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n    transformHasZ = key === 'z' ? true : transformHasZ;\n  }\n\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += 'translateZ(0)';\n  } else {\n    transformString = transformString.trim();\n  }\n\n  if (isCustomTemplate(state.transform)) {\n    transformString = state.transform(transform, transformString);\n  } else if (transformIsDefault) {\n    transformString = 'none';\n  }\n\n  return transformString;\n}\n\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase) {\n  if (enableHardwareAcceleration === void 0) {\n    enableHardwareAcceleration = true;\n  }\n\n  if (styles === void 0) {\n    styles = {};\n  }\n\n  if (transform === void 0) {\n    transform = {};\n  }\n\n  if (transformOrigin === void 0) {\n    transformOrigin = {};\n  }\n\n  if (transformKeys === void 0) {\n    transformKeys = [];\n  }\n\n  if (isDashCase === void 0) {\n    isDashCase = false;\n  }\n\n  var transformIsDefault = true;\n  var hasTransform = false;\n  var hasTransformOrigin = false;\n\n  for (var key in state) {\n    var value = state[key];\n    var valueType = getValueType(key);\n    var valueAsType = getValueAsType(value, valueType);\n\n    if (isTransformProp(key)) {\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key);\n\n      if (transformIsDefault) {\n        if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n          transformIsDefault = false;\n        }\n      }\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType;\n      hasTransformOrigin = true;\n    } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n      styles[prefixer(key, isDashCase)] = valueAsType;\n    }\n  }\n\n  if (hasTransform || typeof state.transform === 'function') {\n    styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration);\n  }\n\n  if (hasTransformOrigin) {\n    styles.transformOrigin = (transformOrigin.originX || 0) + \" \" + (transformOrigin.originY || 0) + \" \" + (transformOrigin.originZ || 0);\n  }\n\n  return styles;\n}\n\nfunction createStyleBuilder(enableHardwareAcceleration) {\n  if (enableHardwareAcceleration === void 0) {\n    enableHardwareAcceleration = true;\n  }\n\n  var styles = {};\n  var transform = {};\n  var transformOrigin = {};\n  var transformKeys = [];\n  return function (state) {\n    transformKeys.length = 0;\n    buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, true);\n    return styles;\n  };\n}\n\nfunction onRead(key, options) {\n  var element = options.element,\n      preparseOutput = options.preparseOutput;\n  var defaultValueType = getValueType(key);\n\n  if (isTransformProp(key)) {\n    return defaultValueType ? defaultValueType.default || 0 : 0;\n  } else if (scrollKeys.has(key)) {\n    return element[key];\n  } else {\n    var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n    return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n  }\n}\n\nfunction onRender(state, _a, changedValues) {\n  var element = _a.element,\n      buildStyles = _a.buildStyles,\n      hasCSSVariable = _a.hasCSSVariable;\n  Object.assign(element.style, buildStyles(state));\n\n  if (hasCSSVariable) {\n    var numChangedValues = changedValues.length;\n\n    for (var i = 0; i < numChangedValues; i++) {\n      var key = changedValues[i];\n\n      if (key.startsWith('--')) {\n        element.style.setProperty(key, state[key]);\n      }\n    }\n  }\n\n  if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n    element[SCROLL_LEFT] = state[SCROLL_LEFT];\n  }\n\n  if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n    element[SCROLL_TOP] = state[SCROLL_TOP];\n  }\n}\n\nvar cssStyler = /*#__PURE__*/createStyler({\n  onRead: onRead,\n  onRender: onRender,\n  uncachedValues: scrollKeys\n});\n\nfunction createCssStyler(element, _a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n\n  var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n      props = __rest$1(_a, [\"enableHardwareAcceleration\"]);\n\n  return cssStyler(_assign$3({\n    element: element,\n    buildStyles: createStyleBuilder(enableHardwareAcceleration),\n    preparseOutput: true\n  }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\nvar ZERO_NOT_ZERO = 0.0000001;\n\nvar progressToPixels = function progressToPixels(progress, length) {\n  return progress * length + 'px';\n};\n\nvar build = function build(state, dimensions, isPath, pathLength) {\n  var hasTransform = false;\n  var hasDashArray = false;\n  var props = {};\n  var dashArrayStyles = isPath ? {\n    pathLength: '0',\n    pathSpacing: \"\" + pathLength\n  } : undefined;\n  var scale$$1 = state.scale !== undefined ? state.scale || ZERO_NOT_ZERO : state.scaleX || 1;\n  var scaleY = state.scaleY !== undefined ? state.scaleY || ZERO_NOT_ZERO : scale$$1 || 1;\n  var transformOriginX = dimensions.width * (state.originX || 50) + dimensions.x;\n  var transformOriginY = dimensions.height * (state.originY || 50) + dimensions.y;\n  var scaleTransformX = -transformOriginX * (scale$$1 * 1);\n  var scaleTransformY = -transformOriginY * (scaleY * 1);\n  var scaleReplaceX = transformOriginX / scale$$1;\n  var scaleReplaceY = transformOriginY / scaleY;\n  var transform = {\n    translate: \"translate(\" + state.x + \", \" + state.y + \") \",\n    scale: \"translate(\" + scaleTransformX + \", \" + scaleTransformY + \") scale(\" + scale$$1 + \", \" + scaleY + \") translate(\" + scaleReplaceX + \", \" + scaleReplaceY + \") \",\n    rotate: \"rotate(\" + state.rotate + \", \" + transformOriginX + \", \" + transformOriginY + \") \",\n    skewX: \"skewX(\" + state.skewX + \") \",\n    skewY: \"skewY(\" + state.skewY + \") \"\n  };\n\n  for (var key in state) {\n    if (state.hasOwnProperty(key)) {\n      var value = state[key];\n\n      if (isTransformProp(key)) {\n        hasTransform = true;\n      } else if (isPath && (key === 'pathLength' || key === 'pathSpacing') && typeof value === 'number') {\n        hasDashArray = true;\n        dashArrayStyles[key] = progressToPixels(value, pathLength);\n      } else if (isPath && key === 'pathOffset') {\n        props['stroke-dashoffset'] = progressToPixels(-value, pathLength);\n      } else {\n        var attrKey = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        props[attrKey] = value;\n      }\n    }\n  }\n\n  if (hasDashArray) {\n    props['stroke-dasharray'] = dashArrayStyles.pathLength + ' ' + dashArrayStyles.pathSpacing;\n  }\n\n  if (hasTransform) {\n    props.transform = '';\n\n    for (var key in transform) {\n      if (transform.hasOwnProperty(key)) {\n        var defaultValue = key === 'scale' ? '1' : '0';\n        props.transform += transform[key].replace(/undefined/g, defaultValue);\n      }\n    }\n  }\n\n  return props;\n};\n\nvar int = /*#__PURE__*/_assign$3({}, number, {\n  transform: Math.round\n});\n\nvar valueTypes$1 = {\n  fill: color,\n  stroke: color,\n  scale: scale,\n  scaleX: scale,\n  scaleY: scale,\n  opacity: alpha,\n  fillOpacity: alpha,\n  strokeOpacity: alpha,\n  numOctaves: int\n};\n\nvar getValueType$1 = function getValueType$1(key) {\n  return valueTypes$1[key];\n};\n\nvar getDimensions = function getDimensions(element) {\n  return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\n\nvar getSVGElementDimensions = function getSVGElementDimensions(element) {\n  try {\n    return getDimensions(element);\n  } catch (e) {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0\n    };\n  }\n};\n\nvar svgStyler = /*#__PURE__*/createStyler({\n  onRead: function onRead(key, _a) {\n    var element = _a.element;\n\n    if (!isTransformProp(key)) {\n      return element.getAttribute(key);\n    } else {\n      var valueType = getValueType$1(key);\n      return valueType ? valueType.default : 0;\n    }\n  },\n  onRender: function onRender(state, _a) {\n    var dimensions = _a.dimensions,\n        element = _a.element,\n        isPath = _a.isPath,\n        pathLength = _a.pathLength;\n    setDomAttrs(element, build(state, dimensions, isPath, pathLength));\n  }\n});\n\nvar svg = function svg(element) {\n  var dimensions = getSVGElementDimensions(element);\n  var props = {\n    element: element,\n    dimensions: dimensions,\n    isPath: false\n  };\n\n  if (element.tagName === 'path') {\n    props.isPath = true;\n    props.pathLength = element.getTotalLength();\n  }\n\n  return svgStyler(props);\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n  useCache: false,\n  onRead: function onRead(key) {\n    return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n  },\n  onRender: function onRender(_a) {\n    var _b = _a.scrollTop,\n        scrollTop = _b === void 0 ? 0 : _b,\n        _c = _a.scrollLeft,\n        scrollLeft = _c === void 0 ? 0 : _c;\n    return window.scrollTo(scrollLeft, scrollTop);\n  }\n});\nvar cache = /*#__PURE__*/new WeakMap();\n\nvar createDOMStyler = function createDOMStyler(node, props) {\n  var styler;\n\n  if (node instanceof HTMLElement) {\n    styler = createCssStyler(node, props);\n  } else if (node instanceof SVGElement) {\n    styler = svg(node);\n  } else if (node === window) {\n    styler = viewport(node);\n  }\n\n  invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n  cache.set(node, styler);\n  return styler;\n};\n\nvar getStyler = function getStyler(node, props) {\n  return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\n\nfunction index(nodeOrSelector, props) {\n  var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n  return getStyler(node, props);\n}\n\nvar Chainable = /*#__PURE__*/function () {\n  function Chainable(props) {\n    if (props === void 0) {\n      props = {};\n    }\n\n    this.props = props;\n  }\n\n  Chainable.prototype.applyMiddleware = function (middleware) {\n    return this.create(_assign({}, this.props, {\n      middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware]\n    }));\n  };\n\n  Chainable.prototype.pipe = function () {\n    var funcs = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      funcs[_i] = arguments[_i];\n    }\n\n    var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return update(pipedUpdate(v));\n      };\n    });\n  };\n\n  Chainable.prototype.while = function (predicate) {\n    return this.applyMiddleware(function (update, complete) {\n      return function (v) {\n        return predicate(v) ? update(v) : complete();\n      };\n    });\n  };\n\n  Chainable.prototype.filter = function (predicate) {\n    return this.applyMiddleware(function (update) {\n      return function (v) {\n        return predicate(v) && update(v);\n      };\n    });\n  };\n\n  return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n  function Observer(_a, observer) {\n    var middleware = _a.middleware,\n        onComplete = _a.onComplete;\n\n    var _this = this;\n\n    this.isActive = true;\n\n    this.update = function (v) {\n      if (_this.observer.update) _this.updateObserver(v);\n    };\n\n    this.complete = function () {\n      if (_this.observer.complete && _this.isActive) _this.observer.complete();\n      if (_this.onComplete) _this.onComplete();\n      _this.isActive = false;\n    };\n\n    this.error = function (err) {\n      if (_this.observer.error && _this.isActive) _this.observer.error(err);\n      _this.isActive = false;\n    };\n\n    this.observer = observer;\n\n    this.updateObserver = function (v) {\n      return observer.update(v);\n    };\n\n    this.onComplete = onComplete;\n\n    if (observer.update && middleware && middleware.length) {\n      middleware.forEach(function (m) {\n        return _this.updateObserver = m(_this.updateObserver, _this.complete);\n      });\n    }\n  }\n\n  return Observer;\n}();\n\nvar createObserver = function createObserver(observerCandidate, _a, onComplete) {\n  var middleware = _a.middleware;\n\n  if (typeof observerCandidate === 'function') {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, {\n      update: observerCandidate\n    });\n  } else {\n    return new Observer({\n      middleware: middleware,\n      onComplete: onComplete\n    }, observerCandidate);\n  }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n  __extends(Action, _super);\n\n  function Action() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Action.prototype.create = function (props) {\n    return new Action(props);\n  };\n\n  Action.prototype.start = function (observerCandidate) {\n    if (observerCandidate === void 0) {\n      observerCandidate = {};\n    }\n\n    var isComplete = false;\n    var subscription = {\n      stop: function stop() {\n        return undefined;\n      }\n    };\n\n    var _a = this.props,\n        init = _a.init,\n        observerProps = __rest(_a, [\"init\"]);\n\n    var observer = createObserver(observerCandidate, observerProps, function () {\n      isComplete = true;\n      subscription.stop();\n    });\n    var api = init(observer);\n    subscription = api ? _assign({}, subscription, api) : subscription;\n\n    if (observerCandidate.registerParent) {\n      observerCandidate.registerParent(subscription);\n    }\n\n    if (isComplete) subscription.stop();\n    return subscription;\n  };\n\n  return Action;\n}(Chainable);\n\nvar action = function action(init) {\n  return new Action({\n    init: init\n  });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n  __extends(BaseMulticast, _super);\n\n  function BaseMulticast() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.subscribers = [];\n    return _this;\n  }\n\n  BaseMulticast.prototype.complete = function () {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.complete();\n    });\n  };\n\n  BaseMulticast.prototype.error = function (err) {\n    this.subscribers.forEach(function (subscriber) {\n      return subscriber.error(err);\n    });\n  };\n\n  BaseMulticast.prototype.update = function (v) {\n    for (var i = 0; i < this.subscribers.length; i++) {\n      this.subscribers[i].update(v);\n    }\n  };\n\n  BaseMulticast.prototype.subscribe = function (observerCandidate) {\n    var _this = this;\n\n    var observer = createObserver(observerCandidate, this.props);\n    this.subscribers.push(observer);\n    var subscription = {\n      unsubscribe: function unsubscribe() {\n        var index$$1 = _this.subscribers.indexOf(observer);\n\n        if (index$$1 !== -1) _this.subscribers.splice(index$$1, 1);\n      }\n    };\n    return subscription;\n  };\n\n  BaseMulticast.prototype.stop = function () {\n    if (this.parent) this.parent.stop();\n  };\n\n  BaseMulticast.prototype.registerParent = function (subscription) {\n    this.stop();\n    this.parent = subscription;\n  };\n\n  return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n  __extends(Multicast, _super);\n\n  function Multicast() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Multicast.prototype.create = function (props) {\n    return new Multicast(props);\n  };\n\n  return Multicast;\n}(BaseMulticast);\n\nvar stepProgress = function stepProgress(steps, progress$$1) {\n  var segment = 1 / (steps - 1);\n  var subsegment = 1 / (2 * (steps - 1));\n  var percentProgressOfTarget = Math.min(progress$$1, 1);\n  var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n  var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n  return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n  angle: angle,\n  degreesToRadians: degreesToRadians,\n  distance: distance,\n  isPoint3D: isPoint3D,\n  isPoint: isPoint,\n  dilate: mix,\n  getValueFromProgress: mix,\n  pointFromAngleAndDistance: pointFromVector,\n  getProgressFromValue: progress,\n  radiansToDegrees: radiansToDegrees,\n  smooth: smoothFrame,\n  speedPerFrame: velocityPerFrame,\n  speedPerSecond: velocityPerSecond,\n  stepProgress: stepProgress\n});\n\nvar isValueList = function isValueList(v) {\n  return Array.isArray(v);\n};\n\nvar isSingleValue = function isSingleValue(v) {\n  var typeOfV = typeof v;\n  return typeOfV === 'string' || typeOfV === 'number';\n};\n\nvar ValueReaction = /*#__PURE__*/function (_super) {\n  __extends(ValueReaction, _super);\n\n  function ValueReaction(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.scheduleVelocityCheck = function () {\n      return sync.postRender(_this.velocityCheck);\n    };\n\n    _this.velocityCheck = function (_a) {\n      var timestamp = _a.timestamp;\n\n      if (timestamp !== _this.lastUpdated) {\n        _this.prev = _this.current;\n      }\n    };\n\n    _this.prev = _this.current = props.value || 0;\n\n    if (isSingleValue(_this.current)) {\n      _this.updateCurrent = function (v) {\n        return _this.current = v;\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getSingleVelocity(_this.current, _this.prev);\n      };\n    } else if (isValueList(_this.current)) {\n      _this.updateCurrent = function (v) {\n        return _this.current = v.slice();\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getListVelocity();\n      };\n    } else {\n      _this.updateCurrent = function (v) {\n        _this.current = {};\n\n        for (var key in v) {\n          if (v.hasOwnProperty(key)) {\n            _this.current[key] = v[key];\n          }\n        }\n      };\n\n      _this.getVelocityOfCurrent = function () {\n        return _this.getMapVelocity();\n      };\n    }\n\n    if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n    return _this;\n  }\n\n  ValueReaction.prototype.create = function (props) {\n    return new ValueReaction(props);\n  };\n\n  ValueReaction.prototype.get = function () {\n    return this.current;\n  };\n\n  ValueReaction.prototype.getVelocity = function () {\n    return this.getVelocityOfCurrent();\n  };\n\n  ValueReaction.prototype.update = function (v) {\n    _super.prototype.update.call(this, v);\n\n    this.prev = this.current;\n    this.updateCurrent(v);\n\n    var _a = getFrameData(),\n        delta = _a.delta,\n        timestamp = _a.timestamp;\n\n    this.timeDelta = delta;\n    this.lastUpdated = timestamp;\n    sync.postRender(this.scheduleVelocityCheck);\n  };\n\n  ValueReaction.prototype.subscribe = function (observerCandidate) {\n    var sub = _super.prototype.subscribe.call(this, observerCandidate);\n\n    this.subscribers[this.subscribers.length - 1].update(this.current);\n    return sub;\n  };\n\n  ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n    return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n  };\n\n  ValueReaction.prototype.getListVelocity = function () {\n    var _this = this;\n\n    return this.current.map(function (c, i) {\n      return _this.getSingleVelocity(c, _this.prev[i]);\n    });\n  };\n\n  ValueReaction.prototype.getMapVelocity = function () {\n    var velocity = {};\n\n    for (var key in this.current) {\n      if (this.current.hasOwnProperty(key)) {\n        velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n      }\n    }\n\n    return velocity;\n  };\n\n  return ValueReaction;\n}(BaseMulticast);\n\nvar value = function value(_value2, initialSubscription) {\n  return new ValueReaction({\n    value: _value2,\n    initialSubscription: initialSubscription\n  });\n};\n\nvar multi = function multi(_a) {\n  var getCount = _a.getCount,\n      getFirst = _a.getFirst,\n      getOutput = _a.getOutput,\n      mapApi = _a.mapApi,\n      setProp = _a.setProp,\n      startActions = _a.startActions;\n  return function (actions) {\n    return action(function (_a) {\n      var update = _a.update,\n          _complete = _a.complete,\n          error = _a.error;\n      var numActions = getCount(actions);\n      var output = getOutput();\n\n      var updateOutput = function updateOutput() {\n        return update(output);\n      };\n\n      var numCompletedActions = 0;\n      var subs = startActions(actions, function (a, name) {\n        var hasCompleted = false;\n        return a.start({\n          complete: function complete() {\n            if (!hasCompleted) {\n              hasCompleted = true;\n              numCompletedActions++;\n              if (numCompletedActions === numActions) sync.update(_complete);\n            }\n          },\n          error: error,\n          update: function update(v) {\n            setProp(output, name, v);\n            sync.update(updateOutput, false, true);\n          }\n        });\n      });\n      return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n        api[methodName] = mapApi(subs, methodName);\n        return api;\n      }, {});\n    });\n  };\n};\n\nvar composite = /*#__PURE__*/multi({\n  getOutput: function getOutput() {\n    return {};\n  },\n  getCount: function getCount(subs) {\n    return Object.keys(subs).length;\n  },\n  getFirst: function getFirst(subs) {\n    return subs[Object.keys(subs)[0]];\n  },\n  mapApi: function mapApi(subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return Object.keys(subs).reduce(function (output, propKey) {\n        var _a;\n\n        if (subs[propKey][methodName]) {\n          args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n        }\n\n        return output;\n      }, {});\n    };\n  },\n  setProp: function setProp(output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function startActions(actions, starter) {\n    return Object.keys(actions).reduce(function (subs, key) {\n      subs[key] = starter(actions[key], key);\n      return subs;\n    }, {});\n  }\n});\nvar parallel = /*#__PURE__*/multi({\n  getOutput: function getOutput() {\n    return [];\n  },\n  getCount: function getCount(subs) {\n    return subs.length;\n  },\n  getFirst: function getFirst(subs) {\n    return subs[0];\n  },\n  mapApi: function mapApi(subs, methodName) {\n    return function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return subs.map(function (sub, i) {\n        if (sub[methodName]) {\n          return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n        }\n      });\n    };\n  },\n  setProp: function setProp(output, name, v) {\n    return output[name] = v;\n  },\n  startActions: function startActions(actions, starter) {\n    return actions.map(function (action, i) {\n      return starter(action, i);\n    });\n  }\n});\n\nvar parallel$1 = function parallel$1() {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return parallel(actions);\n};\n\nvar createVectorTests = function createVectorTests(typeTests) {\n  var testNames = Object.keys(typeTests);\n\n  var isVectorProp = function isVectorProp(prop, key) {\n    return prop !== undefined && !typeTests[key](prop);\n  };\n\n  var getVectorKeys = function getVectorKeys(props) {\n    return testNames.reduce(function (vectorKeys, key) {\n      if (isVectorProp(props[key], key)) vectorKeys.push(key);\n      return vectorKeys;\n    }, []);\n  };\n\n  var testVectorProps = function testVectorProps(props) {\n    return props && testNames.some(function (key) {\n      return isVectorProp(props[key], key);\n    });\n  };\n\n  return {\n    getVectorKeys: getVectorKeys,\n    testVectorProps: testVectorProps\n  };\n};\n\nvar unitTypes = [px, percent, degrees, vh, vw];\n\nvar findUnitType = function findUnitType(prop) {\n  return unitTypes.find(function (type) {\n    return type.test(prop);\n  });\n};\n\nvar isUnitProp = function isUnitProp(prop) {\n  return Boolean(findUnitType(prop));\n};\n\nvar createAction = function createAction(action, props) {\n  return action(props);\n};\n\nvar reduceArrayValue = function reduceArrayValue(i) {\n  return function (props, key) {\n    props[key] = props[key][i];\n    return props;\n  };\n};\n\nvar createArrayAction = function createArrayAction(action, props, vectorKeys) {\n  var firstVectorKey = vectorKeys[0];\n  var actionList = props[firstVectorKey].map(function (v, i) {\n    var childActionProps = vectorKeys.reduce(reduceArrayValue(i), _assign({}, props));\n    return getActionCreator(v)(action, childActionProps);\n  });\n  return parallel$1.apply(void 0, actionList);\n};\n\nvar reduceObjectValue = function reduceObjectValue(key) {\n  return function (props, propKey) {\n    props[propKey] = props[propKey][key];\n    return props;\n  };\n};\n\nvar createObjectAction = function createObjectAction(action, props, vectorKeys) {\n  var firstVectorKey = vectorKeys[0];\n  var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n    var childActionProps = vectorKeys.reduce(reduceObjectValue(key), _assign({}, props));\n    map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n    return map;\n  }, {});\n  return composite(actionMap);\n};\n\nvar createUnitAction = function createUnitAction(action, _a) {\n  var from = _a.from,\n      to = _a.to,\n      props = __rest(_a, [\"from\", \"to\"]);\n\n  var unitType = findUnitType(from) || findUnitType(to);\n  var transform = unitType.transform,\n      parse = unitType.parse;\n  return action(_assign({}, props, {\n    from: typeof from === 'string' ? parse(from) : from,\n    to: typeof to === 'string' ? parse(to) : to\n  })).pipe(transform);\n};\n\nvar createMixerAction = function createMixerAction(mixer) {\n  return function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n\n    return action(_assign({}, props, {\n      from: 0,\n      to: 1\n    })).pipe(mixer(from, to));\n  };\n};\n\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\n\nvar createVectorAction = function createVectorAction(action, typeTests) {\n  var _a = createVectorTests(typeTests),\n      testVectorProps = _a.testVectorProps,\n      getVectorKeys = _a.getVectorKeys;\n\n  var vectorAction = function vectorAction(props) {\n    var isVector = testVectorProps(props);\n    if (!isVector) return action(props);\n    var vectorKeys = getVectorKeys(props);\n    var testKey = vectorKeys[0];\n    var testProp = props[testKey];\n    return getActionCreator(testProp)(action, props, vectorKeys);\n  };\n\n  return vectorAction;\n};\n\nvar getActionCreator = function getActionCreator(prop) {\n  if (typeof prop === 'number') {\n    return createAction;\n  } else if (Array.isArray(prop)) {\n    return createArrayAction;\n  } else if (isUnitProp(prop)) {\n    return createUnitAction;\n  } else if (color.test(prop)) {\n    return createColorAction;\n  } else if (complex.test(prop)) {\n    return createComplexAction;\n  } else if (typeof prop === 'object') {\n    return createObjectAction;\n  } else {\n    return createAction;\n  }\n};\n\nvar decay = function decay(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0 : _b,\n        _c = props.from,\n        from = _c === void 0 ? 0 : _c,\n        _d = props.power,\n        power = _d === void 0 ? 0.8 : _d,\n        _e = props.timeConstant,\n        timeConstant = _e === void 0 ? 350 : _e,\n        _f = props.restDelta,\n        restDelta = _f === void 0 ? 0.5 : _f,\n        modifyTarget = props.modifyTarget;\n    var elapsed = 0;\n    var amplitude = power * velocity;\n    var idealTarget = Math.round(from + amplitude);\n    var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n    var process = sync.update(function (_a) {\n      var frameDelta = _a.delta;\n      elapsed += frameDelta;\n      var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n      var isMoving = delta > restDelta || delta < -restDelta;\n      var current = isMoving ? target + delta : target;\n      update(current);\n\n      if (!isMoving) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      stop: function stop() {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n  from: number.test,\n  modifyTarget: function modifyTarget(func) {\n    return typeof func === 'function';\n  },\n  velocity: number.test\n});\n\nvar spring = function spring(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.velocity,\n        velocity = _b === void 0 ? 0.0 : _b;\n    var _c = props.from,\n        from = _c === void 0 ? 0.0 : _c,\n        _d = props.to,\n        to = _d === void 0 ? 0.0 : _d,\n        _e = props.stiffness,\n        stiffness = _e === void 0 ? 100 : _e,\n        _f = props.damping,\n        damping = _f === void 0 ? 10 : _f,\n        _g = props.mass,\n        mass = _g === void 0 ? 1.0 : _g,\n        _h = props.restSpeed,\n        restSpeed = _h === void 0 ? 0.01 : _h,\n        _j = props.restDelta,\n        restDelta = _j === void 0 ? 0.01 : _j;\n    var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n    var t = 0;\n    var delta = to - from;\n    var position = from;\n    var prevPosition = position;\n    var process = sync.update(function (_a) {\n      var timeDelta = _a.delta;\n      t += timeDelta;\n      var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n      var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n      prevPosition = position;\n\n      if (dampingRatio < 1) {\n        var envelope = Math.exp(-dampingRatio * angularFreq * t);\n        var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n        position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n      } else {\n        var envelope = Math.exp(-angularFreq * t);\n        position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n      }\n\n      velocity = velocityPerSecond(position - prevPosition, timeDelta);\n      var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n      var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n\n      if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n        position = to;\n        update(position);\n        cancelSync.update(process);\n        complete();\n      } else {\n        update(position);\n      }\n    }, true);\n    return {\n      stop: function stop() {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n  from: number.test,\n  to: number.test,\n  stiffness: number.test,\n  damping: number.test,\n  mass: number.test,\n  velocity: number.test\n});\n\nvar scrubber = function scrubber(_a) {\n  var _b = _a.from,\n      from = _b === void 0 ? 0 : _b,\n      _c = _a.to,\n      to = _c === void 0 ? 1 : _c,\n      _d = _a.ease,\n      ease = _d === void 0 ? linear : _d,\n      _e = _a.reverseEase,\n      reverseEase = _e === void 0 ? false : _e;\n\n  if (reverseEase) {\n    ease = createReversedEasing(ease);\n  }\n\n  return action(function (_a) {\n    var update = _a.update;\n    return {\n      seek: function seek(progress$$1) {\n        return update(progress$$1);\n      }\n    };\n  }).pipe(ease, function (v) {\n    return mix(from, to, v);\n  });\n};\n\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n  ease: function ease(func) {\n    return typeof func === 'function';\n  },\n  from: number.test,\n  to: number.test\n});\nvar clampProgress$1 = /*#__PURE__*/clamp$1$1(0, 1);\n\nvar tween = function tween(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    var _b = props.duration,\n        duration = _b === void 0 ? 300 : _b,\n        _c = props.ease,\n        ease = _c === void 0 ? easeOut : _c,\n        _d = props.flip,\n        flip = _d === void 0 ? 0 : _d,\n        _e = props.loop,\n        loop = _e === void 0 ? 0 : _e,\n        _f = props.yoyo,\n        yoyo = _f === void 0 ? 0 : _f,\n        _g = props.repeatDelay,\n        repeatDelay = _g === void 0 ? 0 : _g;\n    var _h = props.from,\n        from = _h === void 0 ? 0 : _h,\n        _j = props.to,\n        to = _j === void 0 ? 1 : _j,\n        _k = props.elapsed,\n        elapsed = _k === void 0 ? 0 : _k,\n        _l = props.flipCount,\n        flipCount = _l === void 0 ? 0 : _l,\n        _m = props.yoyoCount,\n        yoyoCount = _m === void 0 ? 0 : _m,\n        _o = props.loopCount,\n        loopCount = _o === void 0 ? 0 : _o;\n    var playhead = vectorScrubber({\n      from: from,\n      to: to,\n      ease: ease\n    }).start(update);\n    var currentProgress = 0;\n    var process;\n    var _isActive = false;\n\n    var reverseAnimation = function reverseAnimation(reverseEase) {\n      if (reverseEase === void 0) {\n        reverseEase = false;\n      }\n\n      var _a;\n\n      _a = [to, from], from = _a[0], to = _a[1];\n      playhead = vectorScrubber({\n        from: from,\n        to: to,\n        ease: ease,\n        reverseEase: reverseEase\n      }).start(update);\n    };\n\n    var isTweenComplete = function isTweenComplete() {\n      var isComplete = _isActive && elapsed > duration + repeatDelay;\n      if (!isComplete) return false;\n      if (isComplete && !loop && !flip && !yoyo) return true;\n      elapsed = duration - (elapsed - repeatDelay);\n\n      if (loop && loopCount < loop) {\n        loopCount++;\n        return false;\n      } else if (flip && flipCount < flip) {\n        flipCount++;\n        reverseAnimation();\n        return false;\n      } else if (yoyo && yoyoCount < yoyo) {\n        yoyoCount++;\n        reverseAnimation(yoyoCount % 2 !== 0);\n        return false;\n      }\n\n      return true;\n    };\n\n    var updateTween = function updateTween() {\n      currentProgress = clampProgress$1(progress(0, duration, elapsed));\n      playhead.seek(currentProgress);\n    };\n\n    var startTimer = function startTimer() {\n      _isActive = true;\n      process = sync.update(function (_a) {\n        var delta = _a.delta;\n        elapsed += delta;\n        updateTween();\n\n        if (isTweenComplete()) {\n          cancelSync.update(process);\n          complete && sync.update(complete, false, true);\n        }\n      }, true);\n    };\n\n    var stopTimer = function stopTimer() {\n      _isActive = false;\n      if (process) cancelSync.update(process);\n    };\n\n    startTimer();\n    return {\n      isActive: function isActive() {\n        return _isActive;\n      },\n      getElapsed: function getElapsed() {\n        return clamp$1$1(0, duration, elapsed);\n      },\n      getProgress: function getProgress() {\n        return currentProgress;\n      },\n      stop: function stop() {\n        stopTimer();\n      },\n      pause: function pause() {\n        stopTimer();\n        return this;\n      },\n      resume: function resume() {\n        if (!_isActive) startTimer();\n        return this;\n      },\n      seek: function seek(newProgress) {\n        elapsed = mix(0, duration, newProgress);\n        sync.update(updateTween, false, true);\n        return this;\n      },\n      reverse: function reverse() {\n        reverseAnimation();\n        return this;\n      }\n    };\n  });\n};\n\nvar clampProgress$1$1 = /*#__PURE__*/clamp$1$1(0, 1);\n\nvar defaultEasings = function defaultEasings(values, easing$$1) {\n  return values.map(function () {\n    return easing$$1 || easeOut;\n  }).splice(0, values.length - 1);\n};\n\nvar defaultTimings = function defaultTimings(values) {\n  var numValues = values.length;\n  return values.map(function (value, i) {\n    return i !== 0 ? i / (numValues - 1) : 0;\n  });\n};\n\nvar interpolateScrubbers = function interpolateScrubbers(input, scrubbers, update) {\n  var rangeLength = input.length;\n  var finalInputIndex = rangeLength - 1;\n  var finalScrubberIndex = finalInputIndex - 1;\n  var subs = scrubbers.map(function (scrub) {\n    return scrub.start(update);\n  });\n  return function (v) {\n    if (v <= input[0]) {\n      subs[0].seek(0);\n    }\n\n    if (v >= input[finalInputIndex]) {\n      subs[finalScrubberIndex].seek(1);\n    }\n\n    var i = 1;\n\n    for (; i < rangeLength; i++) {\n      if (input[i] > v || i === finalInputIndex) break;\n    }\n\n    var progressInRange = progress(input[i - 1], input[i], v);\n    subs[i - 1].seek(clampProgress$1$1(progressInRange));\n  };\n};\n\nvar keyframes = function keyframes(_a) {\n  var easings = _a.easings,\n      _b = _a.ease,\n      ease = _b === void 0 ? linear : _b,\n      times = _a.times,\n      values = _a.values,\n      tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n\n  easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n  times = times || defaultTimings(values);\n  var scrubbers = easings.map(function (easing$$1, i) {\n    return vectorScrubber({\n      from: values[i],\n      to: values[i + 1],\n      ease: easing$$1\n    });\n  });\n  return tween(_assign({}, tweenProps, {\n    ease: ease\n  })).applyMiddleware(function (update) {\n    return interpolateScrubbers(times, scrubbers, update);\n  });\n};\n\nvar physics = function physics(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return action(function (_a) {\n    var complete = _a.complete,\n        update = _a.update;\n    var _b = props.acceleration,\n        acceleration = _b === void 0 ? 0 : _b,\n        _c = props.friction,\n        friction = _c === void 0 ? 0 : _c,\n        _d = props.velocity,\n        velocity = _d === void 0 ? 0 : _d,\n        springStrength = props.springStrength,\n        to = props.to;\n    var _e = props.restSpeed,\n        restSpeed = _e === void 0 ? 0.001 : _e,\n        _f = props.from,\n        from = _f === void 0 ? 0 : _f;\n    var current = from;\n    var process = sync.update(function (_a) {\n      var delta = _a.delta;\n      var elapsed = Math.max(delta, 16);\n      if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n      if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n\n      if (springStrength !== undefined && to !== undefined) {\n        var distanceToTarget = to - current;\n        velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n      }\n\n      current += velocityPerFrame(velocity, elapsed);\n      update(current);\n      var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n\n      if (isComplete) {\n        cancelSync.update(process);\n        complete();\n      }\n    }, true);\n    return {\n      set: function set(v) {\n        current = v;\n        return this;\n      },\n      setAcceleration: function setAcceleration(v) {\n        acceleration = v;\n        return this;\n      },\n      setFriction: function setFriction(v) {\n        friction = v;\n        return this;\n      },\n      setSpringStrength: function setSpringStrength(v) {\n        springStrength = v;\n        return this;\n      },\n      setSpringTarget: function setSpringTarget(v) {\n        to = v;\n        return this;\n      },\n      setVelocity: function setVelocity(v) {\n        velocity = v;\n        return this;\n      },\n      stop: function stop() {\n        return cancelSync.update(process);\n      }\n    };\n  });\n};\n\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n  acceleration: number.test,\n  friction: number.test,\n  velocity: number.test,\n  from: number.test,\n  to: number.test,\n  springStrength: number.test\n});\n\nvar listen = function listen(element, events, options) {\n  return action(function (_a) {\n    var update = _a.update;\n    var eventNames = events.split(' ').map(function (eventName) {\n      element.addEventListener(eventName, update, options);\n      return eventName;\n    });\n    return {\n      stop: function stop() {\n        return eventNames.forEach(function (eventName) {\n          return element.removeEventListener(eventName, update, options);\n        });\n      }\n    };\n  });\n};\n\nvar defaultPointerPos = function defaultPointerPos() {\n  return {\n    clientX: 0,\n    clientY: 0,\n    pageX: 0,\n    pageY: 0,\n    x: 0,\n    y: 0\n  };\n};\n\nvar eventToPoint = function eventToPoint(e, point) {\n  if (point === void 0) {\n    point = defaultPointerPos();\n  }\n\n  point.clientX = point.x = e.clientX;\n  point.clientY = point.y = e.clientY;\n  point.pageX = e.pageX;\n  point.pageY = e.pageY;\n  return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointsLocation = function updatePointsLocation(_a) {\n    var touches = _a.touches;\n    isTouchDevice = true;\n    var numTouches = touches.length;\n    points.length = 0;\n\n    for (var i = 0; i < numTouches; i++) {\n      var thisTouch = touches[i];\n      points.push(eventToPoint(thisTouch));\n    }\n  };\n\n  listen(document, 'touchstart touchmove', {\n    passive: true,\n    capture: true\n  }).start(updatePointsLocation);\n}\n\nvar multitouch = function multitouch(_a) {\n  var _b = _a === void 0 ? {} : _a,\n      _c = _b.preventDefault,\n      preventDefault = _c === void 0 ? true : _c,\n      _d = _b.scale,\n      scale$$1 = _d === void 0 ? 1.0 : _d,\n      _e = _b.rotate,\n      rotate = _e === void 0 ? 0.0 : _e;\n\n  return action(function (_a) {\n    var update = _a.update;\n    var output = {\n      touches: points,\n      scale: scale$$1,\n      rotate: rotate\n    };\n    var initialDistance = 0.0;\n    var initialRotation = 0.0;\n    var isGesture = points.length > 1;\n\n    if (isGesture) {\n      var firstTouch = points[0],\n          secondTouch = points[1];\n      initialDistance = distance(firstTouch, secondTouch);\n      initialRotation = angle(firstTouch, secondTouch);\n    }\n\n    var updatePoint = function updatePoint() {\n      if (isGesture) {\n        var firstTouch = points[0],\n            secondTouch = points[1];\n        var newDistance = distance(firstTouch, secondTouch);\n        var newRotation = angle(firstTouch, secondTouch);\n        output.scale = scale$$1 * (newDistance / initialDistance);\n        output.rotate = rotate + (newRotation - initialRotation);\n      }\n\n      update(output);\n    };\n\n    var onMove = function onMove(e) {\n      if (preventDefault || e.touches.length > 1) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'touchmove', {\n      passive: !preventDefault\n    }).start(onMove);\n    if (isTouchDevice) sync.update(updatePoint);\n    return {\n      stop: function stop() {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getIsTouchDevice = function getIsTouchDevice() {\n  return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\n\nif (typeof document !== 'undefined') {\n  var updatePointLocation = function updatePointLocation(e) {\n    isMouseDevice = true;\n    eventToPoint(e, point);\n  };\n\n  listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\n\nvar mouse = function mouse(_a) {\n  var _b = (_a === void 0 ? {} : _a).preventDefault,\n      preventDefault = _b === void 0 ? true : _b;\n  return action(function (_a) {\n    var update = _a.update;\n\n    var updatePoint = function updatePoint() {\n      return update(point);\n    };\n\n    var onMove = function onMove(e) {\n      if (preventDefault) e.preventDefault();\n      sync.update(updatePoint);\n    };\n\n    var updateOnMove = listen(document, 'mousemove').start(onMove);\n    if (isMouseDevice) sync.update(updatePoint);\n    return {\n      stop: function stop() {\n        cancelSync.update(updatePoint);\n        updateOnMove.stop();\n      }\n    };\n  });\n};\n\nvar getFirstTouch = function getFirstTouch(_a) {\n  var firstTouch = _a[0];\n  return firstTouch;\n};\n\nvar pointer = function pointer(props) {\n  if (props === void 0) {\n    props = {};\n  }\n\n  return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n    var touches = _a.touches;\n    return touches;\n  }, getFirstTouch) : mouse(props);\n};\n\nvar index$1$1 = function index$1$1(_a) {\n  if (_a === void 0) {\n    _a = {};\n  }\n\n  var x = _a.x,\n      y = _a.y,\n      props = __rest(_a, [\"x\", \"y\"]);\n\n  if (x !== undefined || y !== undefined) {\n    var applyXOffset_1 = applyOffset(x || 0);\n    var applyYOffset_1 = applyOffset(y || 0);\n    var delta_1 = {\n      x: 0,\n      y: 0\n    };\n    return pointer(props).pipe(function (point) {\n      delta_1.x = applyXOffset_1(point.x);\n      delta_1.y = applyYOffset_1(point.y);\n      return delta_1;\n    });\n  } else {\n    return pointer(props);\n  }\n};\n\nvar chain = function chain() {\n  var actions = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    actions[_i] = arguments[_i];\n  }\n\n  return action(function (_a) {\n    var update = _a.update,\n        _complete2 = _a.complete;\n    var i = 0;\n    var current;\n\n    var playCurrent = function playCurrent() {\n      current = actions[i].start({\n        complete: function complete() {\n          i++;\n          i >= actions.length ? _complete2() : playCurrent();\n        },\n        update: update\n      });\n    };\n\n    playCurrent();\n    return {\n      stop: function stop() {\n        return current && current.stop();\n      }\n    };\n  });\n};\n\nvar delay = function delay(timeToDelay) {\n  return action(function (_a) {\n    var complete = _a.complete;\n    var timeout = setTimeout(complete, timeToDelay);\n    return {\n      stop: function stop() {\n        return clearTimeout(timeout);\n      }\n    };\n  });\n};\n\nvar appendUnit = function appendUnit(unit) {\n  return function (v) {\n    return \"\" + v + unit;\n  };\n};\n\nvar steps$2 = function steps$2(st, min, max) {\n  if (min === void 0) {\n    min = 0;\n  }\n\n  if (max === void 0) {\n    max = 1;\n  }\n\n  return function (v) {\n    var current = progress(min, max, v);\n    return mix(min, max, stepProgress(st, current));\n  };\n};\n\nvar transformMap = function transformMap(childTransformers) {\n  return function (v) {\n    var output = _assign({}, v);\n\n    for (var key in childTransformers) {\n      if (childTransformers.hasOwnProperty(key)) {\n        var childTransformer = childTransformers[key];\n        output[key] = childTransformer(v[key]);\n      }\n    }\n\n    return output;\n  };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n  applyOffset: applyOffset,\n  clamp: clamp$1$1,\n  conditional: conditional,\n  interpolate: interpolate,\n  blendArray: mixArray,\n  blendColor: mixColor,\n  pipe: pipe,\n  smooth: smooth,\n  snap: snap,\n  generateStaticSpring: springForce,\n  nonlinearSpring: springForceExpo,\n  linearSpring: springForceLinear,\n  wrap: wrap$1,\n  appendUnit: appendUnit,\n  steps: steps$2,\n  transformMap: transformMap\n});\n\nvar getPoseValues = function getPoseValues(_a) {\n  var transition = _a.transition,\n      flip = _a.flip,\n      delay = _a.delay,\n      delayChildren = _a.delayChildren,\n      staggerChildren = _a.staggerChildren,\n      staggerDirection = _a.staggerDirection,\n      afterChildren = _a.afterChildren,\n      beforeChildren = _a.beforeChildren,\n      preTransition = _a.preTransition,\n      applyAtStart = _a.applyAtStart,\n      applyAtEnd = _a.applyAtEnd,\n      props = __rest(_a, [\"transition\", \"flip\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"afterChildren\", \"beforeChildren\", \"preTransition\", \"applyAtStart\", \"applyAtEnd\"]);\n\n  return props;\n};\n\nvar selectPoses = function selectPoses(_a) {\n  var label = _a.label,\n      props = _a.props,\n      values = _a.values,\n      parentValues = _a.parentValues,\n      ancestorValues = _a.ancestorValues,\n      onChange = _a.onChange,\n      passive = _a.passive,\n      initialPose = _a.initialPose,\n      poses = __rest(_a, [\"label\", \"props\", \"values\", \"parentValues\", \"ancestorValues\", \"onChange\", \"passive\", \"initialPose\"]);\n\n  return poses;\n};\n\nvar selectAllValues = function selectAllValues(values, selectValue) {\n  var allValues = {};\n  values.forEach(function (value, key) {\n    return allValues[key] = selectValue(value);\n  });\n  return allValues;\n};\n\nvar resolveProp = function resolveProp(target, props) {\n  return typeof target === 'function' ? target(props) : target;\n};\n\nvar poseDefault = function poseDefault(pose, prop, defaultValue, resolveProps) {\n  return pose && pose[prop] !== undefined ? resolveProp(pose[prop], resolveProps) : defaultValue;\n};\n\nvar startChildAnimations = function startChildAnimations(children, next, pose, props) {\n  var animations = [];\n  var delay = poseDefault(pose, 'delayChildren', 0, props);\n  var stagger = poseDefault(pose, 'staggerChildren', 0, props);\n  var staggerDirection = poseDefault(pose, 'staggerDirection', 1, props);\n  var maxStaggerDuration = (children.size - 1) * stagger;\n  var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n    return i * stagger;\n  } : function (i) {\n    return maxStaggerDuration - i * stagger;\n  };\n  Array.from(children).forEach(function (child, i) {\n    animations.push(child.set(next, {\n      delay: delay + generateStaggerDuration(i)\n    }));\n  });\n  return animations;\n};\n\nvar resolveTransition = function resolveTransition(transition, key, value, props, convertTransitionDefinition, getInstantTransition) {\n  var resolvedTransition;\n\n  if (typeof transition === 'function') {\n    var resolvedTransitionMap = transition(props);\n    resolvedTransition = resolveTransition(resolvedTransitionMap, key, value, props, convertTransitionDefinition, getInstantTransition);\n  } else if (transition[key] || transition.default) {\n    var keyTransition = transition[key] || transition.default;\n\n    if (typeof keyTransition === 'function') {\n      resolvedTransition = keyTransition(props);\n    } else {\n      resolvedTransition = keyTransition;\n    }\n  } else {\n    resolvedTransition = transition;\n  }\n\n  return resolvedTransition === false ? getInstantTransition(value, props) : convertTransitionDefinition(value, resolvedTransition, props);\n};\n\nvar findInsertionIndex = function findInsertionIndex(poseList, priorityList, priorityIndex) {\n  var insertionIndex = 0;\n\n  for (var i = priorityIndex - 1; i >= 0; i--) {\n    var nextHighestPriorityIndex = poseList.indexOf(priorityList[i]);\n\n    if (nextHighestPriorityIndex !== -1) {\n      insertionIndex = nextHighestPriorityIndex + 1;\n      break;\n    }\n  }\n\n  return insertionIndex;\n};\n\nvar applyValues = function applyValues(toApply, values, props, setValue, setValueNative) {\n  invariant(typeof toApply === 'object', 'applyAtStart and applyAtEnd must be of type object');\n  return Object.keys(toApply).forEach(function (key) {\n    var valueToSet = resolveProp(toApply[key], props);\n    values.has(key) ? setValue(values.get(key), valueToSet) : setValueNative(key, valueToSet, props);\n  });\n};\n\nvar createPoseSetter = function createPoseSetter(setterProps) {\n  var state = setterProps.state,\n      poses = setterProps.poses,\n      startAction = setterProps.startAction,\n      stopAction = setterProps.stopAction,\n      getInstantTransition = setterProps.getInstantTransition,\n      addActionDelay = setterProps.addActionDelay,\n      getTransitionProps = setterProps.getTransitionProps,\n      resolveTarget = setterProps.resolveTarget,\n      transformPose = setterProps.transformPose,\n      posePriority = setterProps.posePriority,\n      convertTransitionDefinition = setterProps.convertTransitionDefinition,\n      setValue = setterProps.setValue,\n      setValueNative = setterProps.setValueNative,\n      forceRender = setterProps.forceRender;\n  return function (next, nextProps, propagate) {\n    if (nextProps === void 0) {\n      nextProps = {};\n    }\n\n    if (propagate === void 0) {\n      propagate = true;\n    }\n\n    var children = state.children,\n        values = state.values,\n        props = state.props,\n        activeActions = state.activeActions,\n        activePoses = state.activePoses;\n    var _a = nextProps.delay,\n        delay = _a === void 0 ? 0 : _a;\n    var hasChildren = children.size;\n\n    var baseTransitionProps = _assign({}, props, nextProps);\n\n    var nextPose = poses[next];\n\n    var getChildAnimations = function getChildAnimations() {\n      return hasChildren && propagate ? startChildAnimations(children, next, nextPose, baseTransitionProps) : [];\n    };\n\n    var getParentAnimations = function getParentAnimations() {\n      if (!nextPose) return [];\n      var applyAtStart = nextPose.applyAtStart;\n\n      if (applyAtStart) {\n        applyValues(applyAtStart, values, baseTransitionProps, setValue, setValueNative);\n        if (forceRender) forceRender(baseTransitionProps);\n      }\n\n      if (transformPose) nextPose = transformPose(nextPose, next, state);\n      var preTransition = nextPose.preTransition,\n          getTransition = nextPose.transition,\n          applyAtEnd = nextPose.applyAtEnd;\n      if (preTransition) preTransition(baseTransitionProps);\n      var animations = Object.keys(getPoseValues(nextPose)).map(function (key) {\n        var valuePoses = activePoses.has(key) ? activePoses.get(key) : (activePoses.set(key, []), activePoses.get(key));\n        var existingIndex = valuePoses.indexOf(next);\n        if (existingIndex !== -1) valuePoses.splice(existingIndex, 1);\n        var priority = posePriority ? posePriority.indexOf(next) : 0;\n        var insertionIndex = priority <= 0 ? 0 : findInsertionIndex(valuePoses, posePriority, priority);\n        valuePoses.splice(insertionIndex, 0, next);\n        return insertionIndex === 0 ? new Promise(function (complete) {\n          var value = values.get(key);\n\n          var transitionProps = _assign({}, baseTransitionProps, {\n            key: key,\n            value: value\n          });\n\n          var target = resolveTarget(value, resolveProp(nextPose[key], transitionProps));\n          if (activeActions.has(key)) stopAction(activeActions.get(key));\n\n          var resolveTransitionProps = _assign({\n            to: target\n          }, transitionProps, getTransitionProps(value, target, transitionProps));\n\n          var transition = resolveTransition(getTransition, key, value, resolveTransitionProps, convertTransitionDefinition, getInstantTransition);\n          var poseDelay = delay || resolveProp(nextPose.delay, transitionProps);\n\n          if (poseDelay) {\n            transition = addActionDelay(poseDelay, transition);\n          }\n\n          activeActions.set(key, startAction(value, transition, complete));\n        }) : Promise.resolve();\n      });\n      return applyAtEnd ? [Promise.all(animations).then(function () {\n        applyValues(applyAtEnd, values, baseTransitionProps, setValue, setValueNative);\n      })] : animations;\n    };\n\n    if (nextPose && hasChildren) {\n      if (resolveProp(nextPose.beforeChildren, baseTransitionProps)) {\n        return Promise.all(getParentAnimations()).then(function () {\n          return Promise.all(getChildAnimations());\n        });\n      } else if (resolveProp(nextPose.afterChildren, baseTransitionProps)) {\n        return Promise.all(getChildAnimations()).then(function () {\n          return Promise.all(getParentAnimations());\n        });\n      }\n    }\n\n    return Promise.all(getParentAnimations().concat(getChildAnimations()));\n  };\n};\n\nvar DEFAULT_INITIAL_POSE = 'init';\n\nvar isScale = function isScale(key) {\n  return key.includes('scale');\n};\n\nvar defaultReadValueFromSource = function defaultReadValueFromSource(key) {\n  return isScale(key) ? 1 : 0;\n};\n\nvar readValueFromPose = function readValueFromPose(pose, key, props) {\n  var valueToResolve = pose.applyAtEnd && pose.applyAtEnd[key] !== undefined ? pose.applyAtEnd[key] : pose[key] !== undefined ? pose[key] : pose.applyAtStart && pose.applyAtStart[key] !== undefined ? pose.applyAtStart[key] : 0;\n  return resolveProp(valueToResolve, props);\n};\n\nvar getPosesToSearch = function getPosesToSearch(pose) {\n  var posesToSearch = Array.isArray(pose) ? pose : [pose];\n  posesToSearch.push(DEFAULT_INITIAL_POSE);\n  return posesToSearch;\n};\n\nvar getInitialValue = function getInitialValue(poses, key, initialPose, props, readValueFromSource, activePoses) {\n  if (readValueFromSource === void 0) {\n    readValueFromSource = defaultReadValueFromSource;\n  }\n\n  var posesToSearch = getPosesToSearch(initialPose);\n  var pose = posesToSearch.filter(Boolean).find(function (name) {\n    var thisPose = poses[name];\n    return thisPose && (thisPose[key] !== undefined || thisPose.applyAtStart && thisPose.applyAtStart[key] !== undefined || thisPose.applyAtEnd && thisPose.applyAtEnd[key] !== undefined);\n  });\n  activePoses.set(key, [pose || DEFAULT_INITIAL_POSE]);\n  return pose ? readValueFromPose(poses[pose], key, props) : readValueFromSource(key, props);\n};\n\nvar createValues = function createValues(values, _a) {\n  var userSetValues = _a.userSetValues,\n      createValue = _a.createValue,\n      convertValue = _a.convertValue,\n      readValueFromSource = _a.readValueFromSource,\n      initialPose = _a.initialPose,\n      poses = _a.poses,\n      activePoses = _a.activePoses,\n      props = _a.props;\n  return function (key) {\n    if (values.has(key)) return;\n    var value;\n\n    if (userSetValues && userSetValues[key] !== undefined) {\n      value = convertValue(userSetValues[key], key, props);\n    } else {\n      var initValue = getInitialValue(poses, key, initialPose, props, readValueFromSource, activePoses);\n      value = createValue(initValue, key, props);\n    }\n\n    values.set(key, value);\n  };\n};\n\nvar scrapeValuesFromPose = function scrapeValuesFromPose(values, props) {\n  return function (key) {\n    var pose = props.poses[key];\n    Object.keys(getPoseValues(pose)).forEach(createValues(values, props));\n  };\n};\n\nvar getAncestorValue = function getAncestorValue(key, fromParent, ancestors) {\n  if (fromParent === true) {\n    return ancestors[0] && ancestors[0].values.get(key);\n  } else {\n    var foundAncestor = ancestors.find(function (_a) {\n      var label = _a.label;\n      return label === fromParent;\n    });\n    return foundAncestor && foundAncestor.values.get(key);\n  }\n};\n\nvar bindPassiveValues = function bindPassiveValues(values, _a) {\n  var passive = _a.passive,\n      ancestorValues = _a.ancestorValues,\n      createValue = _a.createValue,\n      readValue = _a.readValue,\n      props = _a.props;\n  return function (key) {\n    var _a = passive[key],\n        valueKey = _a[0],\n        passiveProps = _a[1],\n        fromParent = _a[2];\n    var valueToBind = fromParent && ancestorValues.length ? getAncestorValue(valueKey, fromParent, ancestorValues) : values.has(valueKey) ? values.get(valueKey) : false;\n    if (!valueToBind) return;\n    var newValue = createValue(readValue(valueToBind), key, props, {\n      passiveParentKey: valueKey,\n      passiveParent: valueToBind,\n      passiveProps: passiveProps\n    });\n    values.set(key, newValue);\n  };\n};\n\nvar setNativeValues = function setNativeValues(_a) {\n  var setValueNative = _a.setValueNative,\n      initialPose = _a.initialPose,\n      props = _a.props,\n      poses = _a.poses;\n  var valuesHaveSet = new Set();\n\n  var setValues = function setValues(pose, propKey) {\n    if (pose[propKey]) {\n      for (var key in pose[propKey]) {\n        if (!valuesHaveSet.has(key)) {\n          valuesHaveSet.add(key);\n          setValueNative(key, resolveProp(pose[propKey][key], props), props);\n        }\n      }\n    }\n  };\n\n  getPosesToSearch(initialPose).forEach(function (poseKey) {\n    var pose = poses[poseKey];\n\n    if (pose) {\n      setValues(pose, 'applyAtEnd');\n      setValues(pose, 'applyAtStart');\n    }\n  });\n};\n\nvar createValueMap = function createValueMap(props) {\n  var poses = props.poses,\n      passive = props.passive;\n  var values = new Map();\n  Object.keys(poses).forEach(scrapeValuesFromPose(values, props));\n  setNativeValues(props);\n  if (passive) Object.keys(passive).forEach(bindPassiveValues(values, props));\n  return values;\n};\n\nvar applyDefaultTransition = function applyDefaultTransition(pose, key, defaultTransitions) {\n  return _assign({}, pose, {\n    transition: defaultTransitions.has(key) ? defaultTransitions.get(key) : defaultTransitions.get('default')\n  });\n};\n\nvar generateTransitions = function generateTransitions(poses, defaultTransitions) {\n  Object.keys(poses).forEach(function (key) {\n    var pose = poses[key];\n    invariant(typeof pose === 'object', \"Pose '\" + key + \"' is of invalid type. All poses should be objects.\");\n    poses[key] = pose.transition !== undefined ? pose : applyDefaultTransition(pose, key, defaultTransitions);\n  });\n  return poses;\n};\n\nvar sortByReversePriority = function sortByReversePriority(priorityOrder) {\n  return function (a, b) {\n    var aP = priorityOrder.indexOf(a);\n    var bP = priorityOrder.indexOf(b);\n    if (aP === -1 && bP !== -1) return -1;\n    if (aP !== -1 && bP === -1) return 1;\n    return aP - bP;\n  };\n};\n\nvar poseFactory = function poseFactory(_a) {\n  var getDefaultProps = _a.getDefaultProps,\n      defaultTransitions = _a.defaultTransitions,\n      bindOnChange = _a.bindOnChange,\n      startAction = _a.startAction,\n      stopAction = _a.stopAction,\n      readValue = _a.readValue,\n      readValueFromSource = _a.readValueFromSource,\n      resolveTarget = _a.resolveTarget,\n      setValue = _a.setValue,\n      setValueNative = _a.setValueNative,\n      createValue = _a.createValue,\n      convertValue = _a.convertValue,\n      getInstantTransition = _a.getInstantTransition,\n      getTransitionProps = _a.getTransitionProps,\n      addActionDelay = _a.addActionDelay,\n      selectValueToRead = _a.selectValueToRead,\n      convertTransitionDefinition = _a.convertTransitionDefinition,\n      transformPose = _a.transformPose,\n      posePriority = _a.posePriority,\n      forceRender = _a.forceRender,\n      extendAPI = _a.extendAPI;\n  return function (config) {\n    var parentValues = config.parentValues,\n        _a = config.ancestorValues,\n        ancestorValues = _a === void 0 ? [] : _a;\n    if (parentValues) ancestorValues.unshift({\n      values: parentValues\n    });\n    var activeActions = new Map();\n    var activePoses = new Map();\n    var children = new Set();\n    var poses = generateTransitions(selectPoses(config), defaultTransitions);\n    var _b = config.props,\n        props = _b === void 0 ? {} : _b;\n    if (getDefaultProps) props = _assign({}, getDefaultProps(config), props);\n    var passive = config.passive,\n        userSetValues = config.values,\n        _c = config.initialPose,\n        initialPose = _c === void 0 ? DEFAULT_INITIAL_POSE : _c;\n    var values = createValueMap({\n      poses: poses,\n      passive: passive,\n      ancestorValues: ancestorValues,\n      readValue: readValue,\n      setValueNative: setValueNative,\n      createValue: createValue,\n      convertValue: convertValue,\n      readValueFromSource: readValueFromSource,\n      userSetValues: userSetValues,\n      initialPose: initialPose,\n      activePoses: activePoses,\n      props: props\n    });\n    var state = {\n      activeActions: activeActions,\n      activePoses: activePoses,\n      children: children,\n      props: props,\n      values: values\n    };\n    var onChange = config.onChange;\n    if (onChange) Object.keys(onChange).forEach(bindOnChange(values, onChange));\n    var set = createPoseSetter({\n      state: state,\n      poses: poses,\n      getInstantTransition: getInstantTransition,\n      getTransitionProps: getTransitionProps,\n      convertTransitionDefinition: convertTransitionDefinition,\n      setValue: setValue,\n      setValueNative: setValueNative,\n      startAction: startAction,\n      stopAction: stopAction,\n      resolveTarget: resolveTarget,\n      addActionDelay: addActionDelay,\n      transformPose: transformPose,\n      posePriority: posePriority,\n      forceRender: forceRender\n    });\n\n    var has = function has(poseName) {\n      return !!poses[poseName];\n    };\n\n    var api = {\n      set: set,\n      unset: function unset(poseName, poseProps) {\n        var posesToSet = [];\n        activePoses.forEach(function (valuePoses) {\n          var poseIndex = valuePoses.indexOf(poseName);\n          if (poseIndex === -1) return;\n          var currentPose = valuePoses[0];\n          valuePoses.splice(poseIndex, 1);\n          var nextPose = valuePoses[0];\n          if (nextPose === currentPose) return;\n\n          if (posesToSet.indexOf(nextPose) === -1) {\n            posesToSet.push(nextPose);\n          }\n        });\n        var animationsToResolve = posesToSet.sort(sortByReversePriority(posePriority)).map(function (poseToSet) {\n          return set(poseToSet, poseProps, false);\n        });\n        children.forEach(function (child) {\n          return animationsToResolve.push(child.unset(poseName));\n        });\n        return Promise.all(animationsToResolve);\n      },\n      get: function get(valueName) {\n        return valueName ? selectValueToRead(values.get(valueName)) : selectAllValues(values, selectValueToRead);\n      },\n      has: has,\n      setProps: function setProps(newProps) {\n        return state.props = _assign({}, state.props, newProps);\n      },\n      _addChild: function _addChild(childConfig, factory) {\n        var child = factory(_assign({\n          initialPose: initialPose\n        }, childConfig, {\n          ancestorValues: [{\n            label: config.label,\n            values: values\n          }].concat(ancestorValues)\n        }));\n        children.add(child);\n        return child;\n      },\n      removeChild: function removeChild(child) {\n        return children.delete(child);\n      },\n      clearChildren: function clearChildren() {\n        children.forEach(function (child) {\n          return child.destroy();\n        });\n        children.clear();\n      },\n      destroy: function destroy() {\n        activeActions.forEach(stopAction);\n        children.forEach(function (child) {\n          return child.destroy();\n        });\n      }\n    };\n    return extendAPI(api, state, config);\n  };\n};\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\n\nvar _assign$4 = function __assign$4() {\n  _assign$4 = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign$4.apply(this, arguments);\n};\n\nfunction __rest$2(s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nvar BoundingBoxDimension;\n\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar measureWithoutTransform = function measureWithoutTransform(element) {\n  var transform$$1 = element.style.transform;\n  element.style.transform = '';\n  var bbox = element.getBoundingClientRect();\n  element.style.transform = transform$$1;\n  return bbox;\n};\n\nvar resolveProp$1 = function resolveProp$1(target, props) {\n  return typeof target === 'function' ? target(props) : target;\n};\n\nvar interpolate$1 = transformers.interpolate;\n\nvar singleAxisPointer = function singleAxisPointer(axis) {\n  return function (from) {\n    var _a;\n\n    return index$1$1((_a = {}, _a[axis] = typeof from === 'string' ? parseFloat(from) : from, _a)).pipe(function (v) {\n      return v[axis];\n    });\n  };\n};\n\nvar pointerX = /*#__PURE__*/singleAxisPointer('x');\nvar pointerY = /*#__PURE__*/singleAxisPointer('y');\n\nvar createPointer = function createPointer(axisPointerCreator, min, max, measurement) {\n  return function (transitionProps) {\n    var from = transitionProps.from,\n        type = transitionProps.type,\n        dimensions = transitionProps.dimensions,\n        dragBounds = transitionProps.dragBounds;\n    var axisPointer = axisPointerCreator(dimensions.measurementAsPixels(measurement, from, type));\n    var transformQueue = [];\n\n    if (dragBounds) {\n      var resolvedDragBounds_1 = resolveProp$1(dragBounds, transitionProps);\n\n      if (resolvedDragBounds_1[min] !== undefined) {\n        transformQueue.push(function (v) {\n          return Math.max(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[min], type));\n        });\n      }\n\n      if (resolvedDragBounds_1[max] !== undefined) {\n        transformQueue.push(function (v) {\n          return Math.min(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[max], type));\n        });\n      }\n    }\n\n    if (type === percent) {\n      transformQueue.push(interpolate$1([0, dimensions.get(measurement)], [0, 100], {\n        clamp: false\n      }), function (v) {\n        return v + '%';\n      });\n    }\n\n    return transformQueue.length ? axisPointer.pipe.apply(axisPointer, transformQueue) : axisPointer;\n  };\n};\n\nvar just = function just(from) {\n  return action(function (_a) {\n    var update = _a.update,\n        complete = _a.complete;\n    update(from);\n    complete();\n  });\n};\n\nvar underDampedSpring = function underDampedSpring(_a) {\n  var from = _a.from,\n      velocity = _a.velocity,\n      to = _a.to;\n  return vectorSpring({\n    from: from,\n    to: to,\n    velocity: velocity,\n    stiffness: 500,\n    damping: 25,\n    restDelta: 0.5,\n    restSpeed: 10\n  });\n};\n\nvar overDampedSpring = function overDampedSpring(_a) {\n  var from = _a.from,\n      velocity = _a.velocity,\n      to = _a.to;\n  return vectorSpring({\n    from: from,\n    to: to,\n    velocity: velocity,\n    stiffness: 700,\n    damping: to === 0 ? 100 : 35\n  });\n};\n\nvar linearTween = function linearTween(_a) {\n  var from = _a.from,\n      to = _a.to;\n  return tween({\n    from: from,\n    to: to,\n    ease: linear\n  });\n};\n\nvar intelligentTransition = {\n  x: underDampedSpring,\n  y: underDampedSpring,\n  z: underDampedSpring,\n  rotate: underDampedSpring,\n  rotateX: underDampedSpring,\n  rotateY: underDampedSpring,\n  rotateZ: underDampedSpring,\n  scaleX: overDampedSpring,\n  scaleY: overDampedSpring,\n  scale: overDampedSpring,\n  opacity: linearTween,\n  default: tween\n};\n\nvar dragAction = /*#__PURE__*/_assign$4({}, intelligentTransition, {\n  x: /*#__PURE__*/createPointer(pointerX, 'left', 'right', BoundingBoxDimension.width),\n  y: /*#__PURE__*/createPointer(pointerY, 'top', 'bottom', BoundingBoxDimension.height)\n});\n\nvar justAxis = function justAxis(_a) {\n  var from = _a.from;\n  return just(from);\n};\n\nvar intelligentDragEnd = /*#__PURE__*/_assign$4({}, intelligentTransition, {\n  x: justAxis,\n  y: justAxis\n});\n\nvar defaultTransitions = /*#__PURE__*/new Map([['default', intelligentTransition], ['drag', dragAction], ['dragEnd', intelligentDragEnd]]);\nvar animationLookup = {\n  tween: tween,\n  spring: vectorSpring,\n  decay: vectorDecay,\n  keyframes: keyframes,\n  physics: vectorPhysics\n};\nvar easingLookup = {\n  linear: linear,\n  easeIn: easeIn,\n  easeOut: easeOut,\n  easeInOut: easeInOut,\n  circIn: circIn,\n  circOut: circOut,\n  circInOut: circInOut,\n  backIn: backIn,\n  backOut: backOut,\n  backInOut: backInOut,\n  anticipate: anticipate\n};\nvar auto = {\n  test: function test(v) {\n    return v === 'auto';\n  },\n  parse: function parse(v) {\n    return v;\n  }\n};\nvar valueTypeTests = [number, degrees, percent, px, vw, vh, auto];\n\nvar testValueType = function testValueType(v) {\n  return function (type) {\n    return type.test(v);\n  };\n};\n\nvar getValueType$2 = function getValueType$2(v) {\n  return valueTypeTests.find(testValueType(v));\n};\n\nvar createPassiveValue = function createPassiveValue(init, parent, transform$$1) {\n  var raw = value(transform$$1(init));\n  parent.raw.subscribe(function (v) {\n    return raw.update(transform$$1(v));\n  });\n  return {\n    raw: raw\n  };\n};\n\nvar _createValue = function createValue(init) {\n  var type = getValueType$2(init);\n  var raw = value(init);\n  return {\n    raw: raw,\n    type: type\n  };\n};\n\nvar addActionDelay = function addActionDelay(delay$$1, transition) {\n  if (delay$$1 === void 0) {\n    delay$$1 = 0;\n  }\n\n  return chain(delay(delay$$1), transition);\n};\n\nvar isCubicBezierArgs = function isCubicBezierArgs(args) {\n  return typeof args[0] === 'number';\n};\n\nvar getAction = function getAction(v, _a, _b) {\n  var from = _b.from,\n      to = _b.to,\n      velocity = _b.velocity;\n\n  var _c = _a.type,\n      type = _c === void 0 ? 'tween' : _c,\n      definedEase = _a.ease,\n      def = __rest$2(_a, [\"type\", \"ease\"]);\n\n  invariant(animationLookup[type] !== undefined, \"Invalid transition type '\" + type + \"'. Valid transition types are: tween, spring, decay, physics and keyframes.\");\n  var ease;\n\n  if (type === 'tween') {\n    if (typeof definedEase !== 'function') {\n      if (typeof definedEase === 'string') {\n        invariant(easingLookup[definedEase] !== undefined, \"Invalid easing type '\" + definedEase + \"'. popmotion.io/pose/api/config\");\n        ease = easingLookup[definedEase];\n      } else if (Array.isArray(definedEase) && isCubicBezierArgs(definedEase)) {\n        invariant(definedEase.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n        var x1 = definedEase[0],\n            y1 = definedEase[1],\n            x2 = definedEase[2],\n            y2 = definedEase[3];\n        ease = cubicBezier(x1, y1, x2, y2);\n      }\n    }\n  }\n\n  ease = ease || definedEase;\n  var baseProps = type !== 'keyframes' ? {\n    from: from,\n    to: to,\n    velocity: velocity,\n    ease: ease\n  } : {\n    ease: ease\n  };\n  return animationLookup[type](_assign$4({}, baseProps, def));\n};\n\nvar isAction = function isAction(action$$1) {\n  return typeof action$$1.start !== 'undefined';\n};\n\nvar pose = function pose(_a) {\n  var transformPose = _a.transformPose,\n      addListenerToValue = _a.addListenerToValue,\n      extendAPI = _a.extendAPI,\n      readValueFromSource = _a.readValueFromSource,\n      posePriority = _a.posePriority,\n      setValueNative = _a.setValueNative;\n  return poseFactory({\n    bindOnChange: function bindOnChange(values, onChange) {\n      return function (key) {\n        if (!values.has(key)) return;\n        var raw = values.get(key).raw;\n        raw.subscribe(onChange[key]);\n      };\n    },\n    readValue: function readValue(_a) {\n      var raw = _a.raw;\n      return raw.get();\n    },\n    setValue: function setValue(_a, to) {\n      var raw = _a.raw;\n      return raw.update(to);\n    },\n    createValue: function createValue(init, key, _a, _b) {\n      var elementStyler = _a.elementStyler;\n\n      var _c = _b === void 0 ? {} : _b,\n          passiveParent = _c.passiveParent,\n          passiveProps = _c.passiveProps;\n\n      var val = passiveParent ? createPassiveValue(init, passiveParent, passiveProps) : _createValue(init);\n      val.raw.subscribe(addListenerToValue(key, elementStyler));\n      return val;\n    },\n    convertValue: function convertValue(raw, key, _a) {\n      var elementStyler = _a.elementStyler;\n      raw.subscribe(addListenerToValue(key, elementStyler));\n      return {\n        raw: raw,\n        type: getValueType$2(raw.get())\n      };\n    },\n    getTransitionProps: function getTransitionProps(_a, to) {\n      var raw = _a.raw,\n          type = _a.type;\n      return {\n        from: raw.get(),\n        velocity: raw.getVelocity(),\n        to: to,\n        type: type\n      };\n    },\n    resolveTarget: function resolveTarget(_, to) {\n      return to;\n    },\n    selectValueToRead: function selectValueToRead(_a) {\n      var raw = _a.raw;\n      return raw;\n    },\n    startAction: function startAction(_a, action$$1, complete) {\n      var raw = _a.raw;\n      var reaction = {\n        update: function update(v) {\n          return raw.update(v);\n        },\n        complete: complete\n      };\n      return action$$1.start(reaction);\n    },\n    stopAction: function stopAction(action$$1) {\n      return action$$1.stop();\n    },\n    getInstantTransition: function getInstantTransition(_, _a) {\n      var to = _a.to;\n      return just(to);\n    },\n    convertTransitionDefinition: function convertTransitionDefinition(val, def, props) {\n      if (isAction(def)) return def;\n\n      var delay$$1 = def.delay,\n          min = def.min,\n          max = def.max,\n          round = def.round,\n          remainingDef = __rest$2(def, [\"delay\", \"min\", \"max\", \"round\"]);\n\n      var action$$1 = getAction(val, remainingDef, props);\n      var outputPipe = [];\n      if (delay$$1) action$$1 = addActionDelay(delay$$1, action$$1);\n      if (min !== undefined) outputPipe.push(function (v) {\n        return Math.max(v, min);\n      });\n      if (max !== undefined) outputPipe.push(function (v) {\n        return Math.min(v, max);\n      });\n      if (round) outputPipe.push(Math.round);\n      return outputPipe.length ? action$$1.pipe.apply(action$$1, outputPipe) : action$$1;\n    },\n    setValueNative: setValueNative,\n    addActionDelay: addActionDelay,\n    defaultTransitions: defaultTransitions,\n    transformPose: transformPose,\n    readValueFromSource: readValueFromSource,\n    posePriority: posePriority,\n    extendAPI: extendAPI\n  });\n};\n\nvar createDimensions = function createDimensions(element) {\n  var hasMeasured = false;\n  var current = {\n    width: 0,\n    height: 0,\n    top: 0,\n    left: 0,\n    bottom: 0,\n    right: 0\n  };\n  return {\n    get: function get(measurement) {\n      return measurement ? current[measurement] : current;\n    },\n    measure: function measure() {\n      current = element.getBoundingClientRect();\n      hasMeasured = true;\n      return current;\n    },\n    measurementAsPixels: function measurementAsPixels(measurement, value$$1, type) {\n      return type === percent ? (typeof value$$1 === 'string' ? parseFloat(value$$1) : value$$1) / 100 * current[measurement] : value$$1;\n    },\n    has: function has() {\n      return hasMeasured;\n    }\n  };\n};\n\nvar makeUIEventApplicator = function makeUIEventApplicator(_a) {\n  var startEvents = _a.startEvents,\n      endEvents = _a.endEvents,\n      startPose = _a.startPose,\n      endPose = _a.endPose,\n      startCallback = _a.startCallback,\n      endCallback = _a.endCallback,\n      useDocumentToEnd = _a.useDocumentToEnd,\n      preventScroll = _a.preventScroll;\n  return function (element, activeActions, poser, config) {\n    var startListener = startPose + 'Start';\n    var endListener = startPose + 'End';\n    var moveListener = startPose + 'Move';\n\n    if (preventScroll) {\n      var touchMoveListener = listen(element, 'touchmove', {\n        passive: false\n      }).start(function (e) {\n        e.preventDefault();\n      });\n      activeActions.set(moveListener, touchMoveListener);\n    }\n\n    var eventStartListener = listen(element, startEvents).start(function (startEvent) {\n      poser.unset(endPose);\n      poser.set(startPose);\n      if (startCallback && config[startCallback]) config[startCallback](startEvent);\n      var eventEndListener = listen(useDocumentToEnd ? document.documentElement : element, endEvents + (useDocumentToEnd ? ' mouseenter' : '')).start(function (endEvent) {\n        if (useDocumentToEnd && endEvent.type === 'mouseenter' && endEvent.buttons === 1) {\n          return;\n        }\n\n        activeActions.get(endListener).stop();\n        poser.unset(startPose);\n        poser.set(endPose);\n        if (endCallback && config[endCallback]) config[endCallback](endEvent);\n      });\n      activeActions.set(endListener, eventEndListener);\n    });\n    activeActions.set(startListener, eventStartListener);\n  };\n};\n\nvar events = {\n  draggable: /*#__PURE__*/makeUIEventApplicator({\n    startEvents: 'mousedown touchstart',\n    endEvents: 'mouseup touchend',\n    startPose: 'drag',\n    endPose: 'dragEnd',\n    startCallback: 'onDragStart',\n    endCallback: 'onDragEnd',\n    useDocumentToEnd: true,\n    preventScroll: true\n  }),\n  hoverable: /*#__PURE__*/makeUIEventApplicator({\n    startEvents: 'mouseenter',\n    endEvents: 'mouseleave',\n    startPose: 'hover',\n    endPose: 'hoverEnd'\n  }),\n  focusable: /*#__PURE__*/makeUIEventApplicator({\n    startEvents: 'focus',\n    endEvents: 'blur',\n    startPose: 'focus',\n    endPose: 'blur'\n  }),\n  pressable: /*#__PURE__*/makeUIEventApplicator({\n    startEvents: 'mousedown touchstart',\n    endEvents: 'mouseup touchend',\n    startPose: 'press',\n    endPose: 'pressEnd',\n    startCallback: 'onPressStart',\n    endCallback: 'onPressEnd',\n    useDocumentToEnd: true\n  })\n};\nvar eventKeys = /*#__PURE__*/Object.keys(events);\n\nvar appendEventListeners = function appendEventListeners(element, activeActions, poser, _a) {\n  var props = _a.props;\n  return eventKeys.forEach(function (key) {\n    if (props[key]) events[key](element, activeActions, poser, props);\n  });\n};\n\nvar ORIGIN_START = 0;\nvar ORIGIN_CENTER = '50%';\nvar ORIGIN_END = '100%';\n\nvar findCenter = function findCenter(_a) {\n  var top = _a.top,\n      right = _a.right,\n      bottom = _a.bottom,\n      left = _a.left;\n  return {\n    x: (left + right) / 2,\n    y: (top + bottom) / 2\n  };\n};\n\nvar positionalProps = ['width', 'height', 'top', 'left', 'bottom', 'right'];\nvar positionalPropsDict = /*#__PURE__*/new Set(positionalProps);\n\nvar checkPositionalProp = function checkPositionalProp(key) {\n  return positionalPropsDict.has(key);\n};\n\nvar hasPositionalProps = function hasPositionalProps(pose) {\n  return Object.keys(pose).some(checkPositionalProp);\n};\n\nvar isFlipPose = function isFlipPose(flip, key, state) {\n  return state.props.element instanceof HTMLElement && (flip === true || key === 'flip');\n};\n\nvar setValue = function setValue(_a, key, to) {\n  var values = _a.values,\n      props = _a.props;\n\n  if (values.has(key)) {\n    var raw = values.get(key).raw;\n    raw.update(to);\n    raw.update(to);\n  } else {\n    values.set(key, {\n      raw: value(to, function (v) {\n        return props.elementStyler.set(key, v);\n      })\n    });\n  }\n};\n\nvar explicitlyFlipPose = function explicitlyFlipPose(state, nextPose) {\n  var _a = state.props,\n      dimensions = _a.dimensions,\n      elementStyler = _a.elementStyler;\n  dimensions.measure();\n\n  var width = nextPose.width,\n      height = nextPose.height,\n      top = nextPose.top,\n      left = nextPose.left,\n      bottom = nextPose.bottom,\n      right = nextPose.right,\n      position = nextPose.position,\n      remainingPose = __rest$2(nextPose, [\"width\", \"height\", \"top\", \"left\", \"bottom\", \"right\", \"position\"]);\n\n  var propsToSet = positionalProps.concat('position').reduce(function (acc, key) {\n    if (nextPose[key] !== undefined) {\n      acc[key] = resolveProp$1(nextPose[key], state.props);\n    }\n\n    return acc;\n  }, {});\n  elementStyler.set(propsToSet).render();\n  return implicitlyFlipPose(state, remainingPose);\n};\n\nvar implicitlyFlipPose = function implicitlyFlipPose(state, nextPose) {\n  var _a = state.props,\n      dimensions = _a.dimensions,\n      element = _a.element,\n      elementStyler = _a.elementStyler;\n  if (!dimensions.has()) return {};\n  var prev = dimensions.get();\n  var next = measureWithoutTransform(element);\n  var originX = prev.left === next.left ? ORIGIN_START : prev.right === next.right ? ORIGIN_END : ORIGIN_CENTER;\n  var originY = prev.top === next.top ? ORIGIN_START : prev.bottom === next.bottom ? ORIGIN_END : ORIGIN_CENTER;\n  elementStyler.set({\n    originX: originX,\n    originY: originY\n  });\n\n  if (prev.width !== next.width) {\n    setValue(state, 'scaleX', prev.width / next.width);\n    nextPose.scaleX = 1;\n  }\n\n  if (prev.height !== next.height) {\n    setValue(state, 'scaleY', prev.height / next.height);\n    nextPose.scaleY = 1;\n  }\n\n  var prevCenter = findCenter(prev);\n  var nextCenter = findCenter(next);\n\n  if (originX === ORIGIN_CENTER) {\n    setValue(state, 'x', prevCenter.x - nextCenter.x);\n    nextPose.x = 0;\n  }\n\n  if (originY === ORIGIN_CENTER) {\n    setValue(state, 'y', prevCenter.y - nextCenter.y);\n    nextPose.y = 0;\n  }\n\n  elementStyler.render();\n  return nextPose;\n};\n\nvar flipPose = function flipPose(props, nextPose) {\n  return hasPositionalProps(nextPose) ? explicitlyFlipPose(props, nextPose) : implicitlyFlipPose(props, nextPose);\n};\n\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(', ')[pos]);\n};\n\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (element, bbox, _a) {\n    var transform$$1 = _a.transform;\n    if (transform$$1 === 'none') return 0;\n    var matrix3d = transform$$1.match(/^matrix3d\\((.+)\\)$/);\n    if (matrix3d) return getPosFromMatrix(matrix3d[1], pos3);\n    return getPosFromMatrix(transform$$1.match(/^matrix\\((.+)\\)$/)[1], pos2);\n  };\n};\n\nvar positionalValues = {\n  width: function width(element, _a) {\n    var width = _a.width;\n    return width;\n  },\n  height: function height(element, _a) {\n    var height = _a.height;\n    return height;\n  },\n  top: function top(element, bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(element, bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(element, _a, _b) {\n    var height = _a.height;\n    var top = _b.top;\n    return parseFloat(top) + height;\n  },\n  right: function right(element, _a, _b) {\n    var width = _a.width;\n    var left = _b.left;\n    return parseFloat(left) + width;\n  },\n  x: /*#__PURE__*/getTranslateFromMatrix(4, 13),\n  y: /*#__PURE__*/getTranslateFromMatrix(5, 14)\n};\n\nvar isPositionalKey = function isPositionalKey(v) {\n  return positionalValues[v] !== undefined;\n};\n\nvar isPositional = function isPositional(pose) {\n  return Object.keys(pose).some(isPositionalKey);\n};\n\nvar convertPositionalUnits = function convertPositionalUnits(state, nextPose) {\n  var values = state.values,\n      props = state.props;\n  var element = props.element,\n      elementStyler = props.elementStyler;\n  var positionalPoseKeys = Object.keys(nextPose).filter(isPositionalKey);\n  var changedPositionalKeys = [];\n  var elementComputedStyle = getComputedStyle(element);\n  var applyAtEndHasBeenCopied = false;\n  positionalPoseKeys.forEach(function (key) {\n    var value$$1 = values.get(key);\n    var fromValueType = getValueType$2(value$$1.raw.get());\n    var to = resolveProp$1(nextPose[key], props);\n    var toValueType = getValueType$2(to);\n\n    if (fromValueType !== toValueType) {\n      changedPositionalKeys.push(key);\n\n      if (!applyAtEndHasBeenCopied) {\n        applyAtEndHasBeenCopied = true;\n        nextPose.applyAtEnd = nextPose.applyAtEnd ? _assign$4({}, nextPose.applyAtEnd) : {};\n      }\n\n      nextPose.applyAtEnd[key] = nextPose.applyAtEnd[key] || nextPose[key];\n      setValue(state, key, to);\n    }\n  });\n  if (!changedPositionalKeys.length) return nextPose;\n  var originBbox = element.getBoundingClientRect();\n  var top = elementComputedStyle.top,\n      left = elementComputedStyle.left,\n      bottom = elementComputedStyle.bottom,\n      right = elementComputedStyle.right,\n      transform$$1 = elementComputedStyle.transform;\n  var originComputedStyle = {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    transform: transform$$1\n  };\n  elementStyler.render();\n  var targetBbox = element.getBoundingClientRect();\n  changedPositionalKeys.forEach(function (key) {\n    setValue(state, key, positionalValues[key](element, originBbox, originComputedStyle));\n    nextPose[key] = positionalValues[key](element, targetBbox, elementComputedStyle);\n  });\n  elementStyler.render();\n  return nextPose;\n};\n\nvar getCurrent = function getCurrent(prop) {\n  return function (_a) {\n    var elementStyler = _a.elementStyler;\n    return elementStyler.get(prop);\n  };\n};\n\nvar dragPoses = function dragPoses(draggable) {\n  var drag = {\n    preTransition: function preTransition(_a) {\n      var dimensions = _a.dimensions;\n      return dimensions.measure();\n    }\n  };\n  var dragEnd = {};\n\n  if (draggable === true || draggable === 'x') {\n    drag.x = dragEnd.x = getCurrent('x');\n  }\n\n  if (draggable === true || draggable === 'y') {\n    drag.y = dragEnd.y = getCurrent('y');\n  }\n\n  return {\n    drag: drag,\n    dragEnd: dragEnd\n  };\n};\n\nvar createPoseConfig = function createPoseConfig(element, _a) {\n  var onDragStart = _a.onDragStart,\n      onDragEnd = _a.onDragEnd,\n      onPressStart = _a.onPressStart,\n      onPressEnd = _a.onPressEnd,\n      draggable = _a.draggable,\n      hoverable = _a.hoverable,\n      focusable = _a.focusable,\n      pressable = _a.pressable,\n      dragBounds = _a.dragBounds,\n      config = __rest$2(_a, [\"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\", \"draggable\", \"hoverable\", \"focusable\", \"pressable\", \"dragBounds\"]);\n\n  var poseConfig = _assign$4({\n    flip: {}\n  }, config, {\n    props: _assign$4({}, config.props, {\n      onDragStart: onDragStart,\n      onDragEnd: onDragEnd,\n      onPressStart: onPressStart,\n      onPressEnd: onPressEnd,\n      dragBounds: dragBounds,\n      draggable: draggable,\n      hoverable: hoverable,\n      focusable: focusable,\n      pressable: pressable,\n      element: element,\n      elementStyler: index(element, {\n        preparseOutput: false\n      }),\n      dimensions: createDimensions(element)\n    })\n  });\n\n  if (draggable) {\n    var _b = dragPoses(draggable),\n        drag = _b.drag,\n        dragEnd = _b.dragEnd;\n\n    poseConfig.drag = _assign$4({}, drag, poseConfig.drag);\n    poseConfig.dragEnd = _assign$4({}, dragEnd, poseConfig.dragEnd);\n  }\n\n  return poseConfig;\n};\n\nvar domPose = /*#__PURE__*/pose({\n  posePriority: ['drag', 'press', 'focus', 'hover'],\n  transformPose: function transformPose(_a, name, state) {\n    var flip = _a.flip,\n        pose$$1 = __rest$2(_a, [\"flip\"]);\n\n    if (isFlipPose(flip, name, state)) {\n      return flipPose(state, pose$$1);\n    } else if (isPositional(pose$$1)) {\n      return convertPositionalUnits(state, pose$$1);\n    }\n\n    return pose$$1;\n  },\n  forceRender: function forceRender(_a) {\n    var elementStyler = _a.elementStyler;\n    elementStyler.render();\n  },\n  addListenerToValue: function addListenerToValue(key, elementStyler) {\n    return function (v) {\n      return elementStyler.set(key, v);\n    };\n  },\n  readValueFromSource: function readValueFromSource(key, _a) {\n    var elementStyler = _a.elementStyler,\n        dragBounds = _a.dragBounds;\n    var value$$1 = elementStyler.get(key);\n\n    if (dragBounds && (key === 'x' || key === 'y')) {\n      var bound = key === 'x' ? dragBounds.left || dragBounds.right : dragBounds.top || dragBounds.bottom;\n\n      if (bound) {\n        var boundType = getValueType$2(bound);\n        value$$1 = boundType.transform(value$$1);\n      }\n    }\n\n    return isNaN(value$$1) ? value$$1 : parseFloat(value$$1);\n  },\n  setValueNative: function setValueNative(key, to, _a) {\n    var elementStyler = _a.elementStyler;\n    return elementStyler.set(key, to);\n  },\n  extendAPI: function extendAPI(api, _a, config) {\n    var props = _a.props,\n        activeActions = _a.activeActions;\n    var measure = props.dimensions.measure;\n\n    var poserApi = _assign$4({}, api, {\n      addChild: function addChild(element, childConfig) {\n        return api._addChild(createPoseConfig(element, childConfig), domPose);\n      },\n      measure: measure,\n      flip: function flip(op) {\n        if (op) {\n          measure();\n          op();\n        }\n\n        return api.set('flip');\n      }\n    });\n\n    props.elementStyler.render();\n    appendEventListeners(props.element, activeActions, poserApi, config);\n    return poserApi;\n  }\n});\n\nvar domPose$1 = function domPose$1(element, config) {\n  return domPose(createPoseConfig(element, config));\n};\n\nfunction memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index$2 = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nvar hasChanged = function hasChanged(prev, next) {\n  if (prev === next) return false;\n  var prevIsArray = Array.isArray(prev);\n  var nextIsArray = Array.isArray(next);\n\n  if (prevIsArray !== nextIsArray || !prevIsArray && !nextIsArray) {\n    return true;\n  } else if (prevIsArray && nextIsArray) {\n    var numPrev = prev.length;\n    var numNext = next.length;\n    if (numPrev !== numNext) return true;\n\n    for (var i = 0; i < numPrev; i++) {\n      if (prev[i] !== next[i]) return true;\n    }\n  }\n\n  return false;\n};\n\nvar pickAssign = function pickAssign(shouldPick, sources) {\n  return sources.reduce(function (picked, source) {\n    for (var key in source) {\n      if (shouldPick(key)) {\n        picked[key] = source[key];\n      }\n    }\n\n    return picked;\n  }, {});\n};\n\nvar _a$1 = createContext({}),\n    PoseParentConsumer = _a$1.Consumer,\n    PoseParentProvider = _a$1.Provider;\n\nvar calcPopFromFlowStyle = function calcPopFromFlowStyle(el) {\n  var offsetTop = el.offsetTop,\n      offsetLeft = el.offsetLeft,\n      offsetWidth = el.offsetWidth,\n      offsetHeight = el.offsetHeight;\n  return {\n    position: 'absolute',\n    top: offsetTop,\n    left: offsetLeft,\n    width: offsetWidth,\n    height: offsetHeight\n  };\n};\n\nvar hasPose = function hasPose(pose, key) {\n  return Array.isArray(pose) ? pose.indexOf(key) !== -1 : pose === key;\n};\n\nvar objectToMap = function objectToMap(obj) {\n  return Object.keys(obj).reduce(function (map, key) {\n    map.set(key, {\n      raw: obj[key]\n    });\n    return map;\n  }, new Map());\n};\n\nvar testAlwaysTrue = function testAlwaysTrue() {\n  return true;\n};\n\nvar filterProps = function filterProps(_a) {\n  var elementType = _a.elementType,\n      poseConfig = _a.poseConfig,\n      onValueChange = _a.onValueChange,\n      innerRef = _a.innerRef,\n      _pose = _a._pose,\n      pose = _a.pose,\n      initialPose = _a.initialPose,\n      poseKey = _a.poseKey,\n      onPoseComplete = _a.onPoseComplete,\n      getParentPoseConfig = _a.getParentPoseConfig,\n      registerChild = _a.registerChild,\n      onUnmount = _a.onUnmount,\n      getInitialPoseFromParent = _a.getInitialPoseFromParent,\n      popFromFlow = _a.popFromFlow,\n      values = _a.values,\n      parentValues = _a.parentValues,\n      onDragStart = _a.onDragStart,\n      onDragEnd = _a.onDragEnd,\n      onPressStart = _a.onPressStart,\n      onPressEnd = _a.onPressEnd,\n      props = __rest(_a, [\"elementType\", \"poseConfig\", \"onValueChange\", \"innerRef\", \"_pose\", \"pose\", \"initialPose\", \"poseKey\", \"onPoseComplete\", \"getParentPoseConfig\", \"registerChild\", \"onUnmount\", \"getInitialPoseFromParent\", \"popFromFlow\", \"values\", \"parentValues\", \"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\"]);\n\n  return props;\n};\n\nvar PoseElement = function (_super) {\n  __extends(PoseElement, _super);\n\n  function PoseElement(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.children = new Set();\n    _this.childrenHandlers = {\n      registerChild: function registerChild(props) {\n        _this.children.add(props);\n\n        if (_this.poser) _this.flushChildren();\n      },\n      onUnmount: function onUnmount(child) {\n        return _this.poser.removeChild(child);\n      },\n      getParentPoseConfig: function getParentPoseConfig() {\n        return _this.poseConfig;\n      },\n      getInitialPoseFromParent: function getInitialPoseFromParent() {\n        return _this.getInitialPose();\n      }\n    };\n\n    _this.setRef = function (ref) {\n      warning(ref === null || ref instanceof Element && _this.ref === undefined, 'ref must be provided to the same DOM component for the entire lifecycle of a posed component.');\n      _this.ref = ref;\n      var innerRef = _this.props.innerRef;\n      if (!innerRef) return;\n\n      if (typeof innerRef === 'function') {\n        innerRef(ref);\n      } else {\n        innerRef.current = ref;\n      }\n    };\n\n    _this.shouldForwardProp = typeof _this.props.elementType === 'string' ? index$2 : testAlwaysTrue;\n    var poseConfig = _this.props.poseConfig;\n    _this.poseConfig = typeof poseConfig === 'function' ? poseConfig(filterProps(props)) : poseConfig;\n    return _this;\n  }\n\n  PoseElement.prototype.getInitialPose = function () {\n    var _a = this.props,\n        getInitialPoseFromParent = _a.getInitialPoseFromParent,\n        pose = _a.pose,\n        _pose = _a._pose,\n        initialPose = _a.initialPose;\n\n    if (initialPose) {\n      return initialPose;\n    } else {\n      var parentPose = getInitialPoseFromParent && getInitialPoseFromParent();\n      var initialPoses = (Array.isArray(parentPose) ? parentPose : [parentPose]).concat(pose, _pose).filter(Boolean);\n      return initialPoses.length > 0 ? initialPoses : undefined;\n    }\n  };\n\n  PoseElement.prototype.getFirstPose = function () {\n    var _a = this.props,\n        initialPose = _a.initialPose,\n        pose = _a.pose,\n        _pose = _a._pose;\n    if (!initialPose) return;\n    var firstPose = (Array.isArray(pose) ? pose : [pose]).concat(_pose).filter(Boolean);\n    return firstPose.length === 1 ? firstPose[0] : firstPose;\n  };\n\n  PoseElement.prototype.getSetProps = function () {\n    var props = filterProps(this.props);\n\n    if (this.props.popFromFlow && this.ref && this.ref instanceof HTMLElement) {\n      if (!this.popStyle) {\n        props.style = _assign({}, props.style, calcPopFromFlowStyle(this.ref));\n        this.popStyle = props.style;\n      } else {\n        props.style = this.popStyle;\n      }\n    } else {\n      this.popStyle = null;\n    }\n\n    return props;\n  };\n\n  PoseElement.prototype.componentDidMount = function () {\n    var _this = this;\n\n    invariant(this.ref instanceof Element, \"No valid DOM ref found. If you're converting an existing component via posed(Component), you must ensure you're passing the ref to the host DOM node via the React.forwardRef function.\");\n    var _a = this.props,\n        onValueChange = _a.onValueChange,\n        registerChild = _a.registerChild,\n        values = _a.values,\n        parentValues = _a.parentValues,\n        onDragStart = _a.onDragStart,\n        onDragEnd = _a.onDragEnd,\n        onPressStart = _a.onPressStart,\n        onPressEnd = _a.onPressEnd;\n\n    var config = _assign({}, this.poseConfig, {\n      initialPose: this.getInitialPose(),\n      values: values || this.poseConfig.values,\n      parentValues: parentValues ? objectToMap(parentValues) : undefined,\n      props: this.getSetProps(),\n      onDragStart: onDragStart,\n      onDragEnd: onDragEnd,\n      onPressStart: onPressStart,\n      onPressEnd: onPressEnd,\n      onChange: onValueChange\n    });\n\n    if (!registerChild) {\n      this.initPoser(domPose$1(this.ref, config));\n    } else {\n      registerChild({\n        element: this.ref,\n        poseConfig: config,\n        onRegistered: function onRegistered(poser) {\n          return _this.initPoser(poser);\n        }\n      });\n    }\n  };\n\n  PoseElement.prototype.getSnapshotBeforeUpdate = function () {\n    var _a = this.props,\n        pose = _a.pose,\n        _pose = _a._pose;\n    if (hasPose(pose, 'flip') || hasPose(_pose, 'flip')) this.poser.measure();\n    return null;\n  };\n\n  PoseElement.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        pose = _a.pose,\n        _pose = _a._pose,\n        poseKey = _a.poseKey;\n    this.poser.setProps(this.getSetProps());\n\n    if (poseKey !== prevProps.poseKey || hasChanged(prevProps.pose, pose) || pose === 'flip') {\n      this.setPose(pose);\n    }\n\n    if (_pose !== prevProps._pose || _pose === 'flip') this.setPose(_pose);\n  };\n\n  PoseElement.prototype.componentWillUnmount = function () {\n    if (!this.poser) return;\n    var onUnmount = this.props.onUnmount;\n    if (onUnmount) onUnmount(this.poser);\n    this.poser.destroy();\n  };\n\n  PoseElement.prototype.initPoser = function (poser) {\n    this.poser = poser;\n    this.flushChildren();\n    var firstPose = this.getFirstPose();\n    if (firstPose) this.setPose(firstPose);\n  };\n\n  PoseElement.prototype.setPose = function (pose) {\n    var _this = this;\n\n    var onPoseComplete = this.props.onPoseComplete;\n    var poseList = Array.isArray(pose) ? pose : [pose];\n    Promise.all(poseList.map(function (key) {\n      return key && _this.poser.set(key);\n    })).then(function () {\n      return onPoseComplete && onPoseComplete(pose);\n    });\n  };\n\n  PoseElement.prototype.flushChildren = function () {\n    var _this = this;\n\n    this.children.forEach(function (_a) {\n      var element = _a.element,\n          poseConfig = _a.poseConfig,\n          onRegistered = _a.onRegistered;\n      return onRegistered(_this.poser.addChild(element, poseConfig));\n    });\n    this.children.clear();\n  };\n\n  PoseElement.prototype.render = function () {\n    var elementType = this.props.elementType;\n    return React.createElement(PoseParentProvider, {\n      value: this.childrenHandlers\n    }, createElement(elementType, pickAssign(this.shouldForwardProp, [this.getSetProps(), {\n      ref: this.setRef\n    }])));\n  };\n\n  return PoseElement;\n}(PureComponent);\n\nvar supportedElements = ['a', 'article', 'aside', 'audio', 'b', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'cite', 'code', 'col', 'colgroup', 'data', 'datalist', 'dialog', 'div', 'em', 'embed', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'i', 'iframe', 'img', 'input', 'label', 'legend', 'li', 'nav', 'object', 'ol', 'option', 'p', 'param', 'picture', 'pre', 'progress', 'q', 'section', 'select', 'span', 'strong', 'table', 'tbody', 'td', 'textarea', 'tfoot', 'th', 'thead', 'time', 'title', 'tr', 'ul', 'video', 'circle', 'clipPath', 'defs', 'ellipse', 'g', 'image', 'line', 'linearGradient', 'mask', 'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect', 'stop', 'svg', 'text', 'tspan'];\nvar componentCache = new Map();\n\nvar createComponentFactory = function createComponentFactory(key) {\n  var componentFactory = function componentFactory(poseConfig) {\n    if (poseConfig === void 0) {\n      poseConfig = {};\n    }\n\n    return forwardRef(function (_a, ref) {\n      var _b = _a.withParent,\n          withParent = _b === void 0 ? true : _b,\n          props = __rest(_a, [\"withParent\"]);\n\n      warning(props.innerRef === undefined, 'innerRef is deprecated. Please use ref instead.');\n      return !withParent || props.parentValues ? React.createElement(PoseElement, _assign({\n        poseConfig: poseConfig,\n        innerRef: ref,\n        elementType: key\n      }, props)) : React.createElement(PoseParentConsumer, null, function (parentCtx) {\n        return React.createElement(PoseElement, _assign({\n          poseConfig: poseConfig,\n          elementType: key,\n          innerRef: ref\n        }, props, parentCtx));\n      });\n    });\n  };\n\n  componentCache.set(key, componentFactory);\n  return componentFactory;\n};\n\nvar getComponentFactory = function getComponentFactory(key) {\n  return componentCache.has(key) ? componentCache.get(key) : createComponentFactory(key);\n};\n\nvar posed = function posed(component) {\n  return getComponentFactory(component);\n};\n\nsupportedElements.reduce(function (acc, key) {\n  acc[key] = createComponentFactory(key);\n  return acc;\n}, posed);\n\nvar getKey = function getKey(child) {\n  invariant(child && child.key !== null, 'Every child of Transition must be given a unique key');\n  var childKey = typeof child.key === 'number' ? child.key.toString() : child.key;\n  return childKey.replace('.$', '');\n};\n\nvar prependProps = function prependProps(element, props) {\n  return createElement(element.type, _assign({\n    key: element.key,\n    ref: element.ref\n  }, props, element.props));\n};\n\nvar handleTransition = function handleTransition(_a, _b) {\n  var displayedChildren = _b.displayedChildren,\n      finishedLeaving = _b.finishedLeaving,\n      hasInitialized = _b.hasInitialized,\n      indexedChildren = _b.indexedChildren,\n      scheduleChildRemoval = _b.scheduleChildRemoval;\n\n  var incomingChildren = _a.children,\n      preEnterPose = _a.preEnterPose,\n      enterPose = _a.enterPose,\n      exitPose = _a.exitPose,\n      animateOnMount = _a.animateOnMount,\n      enterAfterExit = _a.enterAfterExit,\n      flipMove = _a.flipMove,\n      onRest = _a.onRest,\n      propsForChildren = __rest(_a, [\"children\", \"preEnterPose\", \"enterPose\", \"exitPose\", \"animateOnMount\", \"enterAfterExit\", \"flipMove\", \"onRest\"]);\n\n  var targetChildren = makeChildList(incomingChildren);\n  var nextState = {\n    displayedChildren: []\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    warning(!propsForChildren.onPoseComplete, \"<Transition/> (or <PoseGroup/>) doesn't accept onPoseComplete prop.\");\n  }\n\n  var prevKeys = displayedChildren.map(getKey);\n  var nextKeys = targetChildren.map(getKey);\n  var hasPropsForChildren = Object.keys(propsForChildren).length !== 0;\n  var entering = new Set(nextKeys.filter(function (key) {\n    return finishedLeaving.hasOwnProperty(key) || prevKeys.indexOf(key) === -1;\n  }));\n  entering.forEach(function (key) {\n    return delete finishedLeaving[key];\n  });\n  var leaving = [];\n  var newlyLeaving = {};\n  prevKeys.forEach(function (key) {\n    if (entering.has(key)) {\n      return;\n    }\n\n    var isLeaving = finishedLeaving.hasOwnProperty(key);\n\n    if (!isLeaving && nextKeys.indexOf(key) !== -1) {\n      return;\n    }\n\n    leaving.push(key);\n\n    if (!isLeaving) {\n      finishedLeaving[key] = false;\n      newlyLeaving[key] = true;\n    }\n  });\n  var moving = new Set(prevKeys.filter(function (key, i) {\n    return !entering.has(key) || leaving.indexOf(key) === -1;\n  }));\n  targetChildren.forEach(function (child) {\n    var newChildProps = {};\n\n    if (entering.has(child.key)) {\n      if (hasInitialized || animateOnMount) {\n        newChildProps.initialPose = preEnterPose;\n      }\n\n      newChildProps._pose = enterPose;\n    } else if (moving.has(child.key) && flipMove) {\n      newChildProps._pose = [enterPose, 'flip'];\n    } else {\n      newChildProps._pose = enterPose;\n    }\n\n    var newChild = cloneElement(child, newChildProps);\n    indexedChildren[child.key] = newChild;\n    nextState.displayedChildren.push(hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\n  });\n  leaving.forEach(function (key) {\n    var child = indexedChildren[key];\n    var newChild = newlyLeaving[key] ? cloneElement(child, {\n      _pose: exitPose,\n      onPoseComplete: function onPoseComplete(pose) {\n        if (pose === exitPose) scheduleChildRemoval(key);\n        var onPoseComplete = child.props.onPoseComplete;\n        if (onPoseComplete) onPoseComplete(pose);\n      },\n      popFromFlow: flipMove\n    }) : child;\n    var insertionIndex = prevKeys.indexOf(key);\n    indexedChildren[child.key] = newChild;\n    nextState.displayedChildren.splice(insertionIndex, 0, hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\n  });\n  return nextState;\n};\n\nvar handleChildrenTransitions = function handleChildrenTransitions(props, state) {\n  var newState = handleTransition(props, state);\n  newState.hasInitialized = true;\n  return newState;\n};\n\nvar makeChildList = function makeChildList(children) {\n  var list = [];\n  Children.forEach(children, function (child) {\n    return child && list.push(child);\n  });\n  return list;\n};\n\nvar Transition = function (_super) {\n  __extends(Transition, _super);\n\n  function Transition() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      displayedChildren: [],\n      finishedLeaving: {},\n      hasInitialized: false,\n      indexedChildren: {},\n      scheduleChildRemoval: function scheduleChildRemoval(key) {\n        return _this.removeChild(key);\n      }\n    };\n    return _this;\n  }\n\n  Transition.prototype.removeChild = function (key) {\n    var _a = this.state,\n        displayedChildren = _a.displayedChildren,\n        finishedLeaving = _a.finishedLeaving;\n    var _b = this.props,\n        enterAfterExit = _b.enterAfterExit,\n        onRest = _b.onRest;\n    if (!finishedLeaving.hasOwnProperty(key)) return;\n    finishedLeaving[key] = true;\n\n    if (!Object.keys(finishedLeaving).every(function (leavingKey) {\n      return finishedLeaving[leavingKey];\n    })) {\n      return;\n    }\n\n    var targetChildren = displayedChildren.filter(function (child) {\n      return !finishedLeaving.hasOwnProperty(child.key);\n    });\n    var newState = enterAfterExit ? _assign({\n      finishedLeaving: {}\n    }, handleChildrenTransitions(_assign({}, this.props, {\n      enterAfterExit: false\n    }), _assign({}, this.state, {\n      displayedChildren: targetChildren\n    }))) : {\n      finishedLeaving: {},\n      displayedChildren: targetChildren\n    };\n    this.setState(newState, onRest);\n  };\n\n  Transition.prototype.shouldComponentUpdate = function (nextProps, nextState) {\n    return this.state !== nextState;\n  };\n\n  Transition.prototype.render = function () {\n    return this.state.displayedChildren;\n  };\n\n  Transition.defaultProps = {\n    flipMove: false,\n    enterAfterExit: false,\n    preEnterPose: 'exit',\n    enterPose: 'enter',\n    exitPose: 'exit'\n  };\n  Transition.getDerivedStateFromProps = handleChildrenTransitions;\n  return Transition;\n}(Component);\n\nvar PoseGroup = function (_super) {\n  __extends(PoseGroup, _super);\n\n  function PoseGroup() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  PoseGroup.prototype.render = function () {\n    return createElement(Transition, _assign({}, this.props));\n  };\n\n  PoseGroup.defaultProps = {\n    flipMove: true\n  };\n  return PoseGroup;\n}(Component);\n\nvar PI = Math.PI;\nvar defaultColors = ['#A45BF1', '#25C6F6', '#72F753', '#F76C88', '#F5F770'];\n\nvar createElements = function createElements(root, elementCount, elementSize, zIndex, colors) {\n  return Array.from({\n    length: elementCount\n  }).map(function (_, index) {\n    var element = document.createElement('span');\n    var color = colors[index % colors.length];\n    element.style['background-color'] = color;\n    element.style.width = elementSize + 'px';\n    element.style.height = elementSize + 'px';\n    element.style.position = 'absolute';\n    element.style.zIndex = zIndex;\n    root.appendChild(element);\n    return element;\n  });\n};\n\nvar radiansFrom = function radiansFrom(degrees) {\n  return degrees * (PI / 180);\n};\n\nvar generatePhysics = function generatePhysics(angle, spread, startVelocity, random) {\n  var radAngle = radiansFrom(angle);\n  var radSpread = radiansFrom(spread);\n  return {\n    x: 0,\n    y: 0,\n    wobble: random() * 10,\n    velocity: startVelocity * 0.5 + random() * startVelocity,\n    angle2D: -radAngle + (0.5 * radSpread - random() * radSpread),\n    angle3D: -(PI / 4) + random() * (PI / 2),\n    tiltAngle: random() * PI\n  };\n};\n\nvar updateFetti = function updateFetti(fetti, progress, decay, index) {\n  fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.z += Math.sin(fetti.physics.angle3D) * fetti.physics.velocity;\n  fetti.physics.wobble += 0.05;\n  fetti.physics.velocity *= decay;\n  fetti.physics.y += 3.5;\n  fetti.physics.tiltAngle += 0.15;\n  var _fetti$physics = fetti.physics,\n      x = _fetti$physics.x,\n      y = _fetti$physics.y,\n      tiltAngle = _fetti$physics.tiltAngle,\n      wobble = _fetti$physics.wobble;\n  var wobbleX = index % 2 === 0 ? x + (6 * Math.sin(wobble) + progress) : x + (12 * Math.cos(wobble) + progress);\n  var wobbleY = y + 5 * Math.sin(wobble);\n  var transform = 'translate3d(' + wobbleX + 'px, ' + wobbleY + 'px, 0) rotate3d(1, 1, 1, ' + tiltAngle + 'rad)';\n  fetti.element.style.transform = transform;\n  fetti.element.style.scale = 1 - 0.2 * progress;\n  fetti.element.style.opacity = 1 - progress;\n};\n\nvar animate = function animate(root, fettis, decay, lifetime) {\n  var totalTicks = lifetime;\n  var tick = 0;\n\n  var update = function update() {\n    fettis.forEach(function (fetti, index) {\n      return updateFetti(fetti, tick / totalTicks, decay, index);\n    });\n    tick += 1;\n\n    if (tick < totalTicks) {\n      window.requestAnimationFrame(update);\n    } else {\n      fettis.forEach(function (fetti) {\n        if (fetti.element.parentNode === root) {\n          return root.removeChild(fetti.element);\n        }\n      });\n    }\n  };\n\n  window.requestAnimationFrame(update);\n};\n\nvar confetti = function confetti(root) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$elementCount = _ref.elementCount,\n      elementCount = _ref$elementCount === undefined ? 50 : _ref$elementCount,\n      _ref$elementSize = _ref.elementSize,\n      elementSize = _ref$elementSize === undefined ? 8 : _ref$elementSize,\n      _ref$colors = _ref.colors,\n      colors = _ref$colors === undefined ? defaultColors : _ref$colors,\n      _ref$angle = _ref.angle,\n      angle = _ref$angle === undefined ? 90 : _ref$angle,\n      _ref$spread = _ref.spread,\n      spread = _ref$spread === undefined ? 45 : _ref$spread,\n      _ref$decay = _ref.decay,\n      decay = _ref$decay === undefined ? 0.9 : _ref$decay,\n      _ref$lifetime = _ref.lifetime,\n      lifetime = _ref$lifetime === undefined ? 200 : _ref$lifetime,\n      _ref$startVelocity = _ref.startVelocity,\n      startVelocity = _ref$startVelocity === undefined ? 35 : _ref$startVelocity,\n      _ref$zIndex = _ref.zIndex,\n      zIndex = _ref$zIndex === undefined ? 0 : _ref$zIndex,\n      _ref$random = _ref.random,\n      random = _ref$random === undefined ? Math.random : _ref$random;\n\n  var elements = createElements(root, elementCount, elementSize, zIndex, colors);\n  var fettis = elements.map(function (element) {\n    return {\n      element: element,\n      physics: generatePhysics(angle, spread, startVelocity, random)\n    };\n  });\n  animate(root, fettis, decay, lifetime);\n};\n\nvar PI$1 = Math.PI;\nvar defaultEmoji = ['👍', '😊', '🎉'];\n\nvar createElements$1 = function createElements(root, elementCount, elementSize, zIndex, emoji) {\n  return Array.from({\n    length: elementCount\n  }).map(function (_, index) {\n    var element = document.createElement('span');\n    var emojiIcon = emoji[index % emoji.length];\n    element.innerHTML = emojiIcon;\n    element.style.fontSize = elementSize + 'px';\n    element.style.position = 'absolute';\n    element.style.zIndex = zIndex;\n    root.appendChild(element);\n    return element;\n  });\n};\n\nvar radiansFrom$1 = function radiansFrom(degrees) {\n  return degrees * (PI$1 / 180);\n};\n\nvar generatePhysics$1 = function generatePhysics(angle, spread, startVelocity, random) {\n  var radAngle = radiansFrom$1(angle);\n  var radSpread = radiansFrom$1(spread);\n  return {\n    x: 0,\n    y: 0,\n    wobble: random() * 10,\n    velocity: startVelocity * 0.5 + random() * startVelocity,\n    angle2D: -radAngle + (0.5 * radSpread - random() * radSpread),\n    angle3D: -(PI$1 / 4) + random() * (PI$1 / 2),\n    tiltAngle: random() * PI$1\n  };\n};\n\nvar updateMojis = function updateMojis(fetti, progress, decay) {\n  fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.wobble += 0;\n  fetti.physics.velocity *= decay;\n  fetti.physics.y += 5;\n  fetti.physics.tiltAngle += 0.1;\n  var _fetti$physics = fetti.physics,\n      x = _fetti$physics.x,\n      y = _fetti$physics.y,\n      tiltAngle = _fetti$physics.tiltAngle;\n  var wobbleX = x + 0;\n  var wobbleY = y + 0;\n  var transform = 'translate3d(' + wobbleX + 'px, ' + wobbleY + 'px, 0) rotate(' + tiltAngle + 'rad)';\n  fetti.element.style.transform = transform;\n  fetti.element.style.opacity = 1 - progress;\n};\n\nvar animate$1 = function animate(root, mojis, decay, lifetime) {\n  var totalTicks = lifetime;\n  var tick = 0;\n\n  var update = function update() {\n    mojis.forEach(function (fetti) {\n      return updateMojis(fetti, tick / totalTicks, decay);\n    });\n    tick += 1;\n\n    if (tick < totalTicks) {\n      window.requestAnimationFrame(update);\n    } else {\n      mojis.forEach(function (fetti) {\n        if (fetti.element.parentNode === root) {\n          return root.removeChild(fetti.element);\n        }\n      });\n    }\n  };\n\n  window.requestAnimationFrame(update);\n};\n\nvar emoji = function emoji(root) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$angle = _ref.angle,\n      angle = _ref$angle === undefined ? 90 : _ref$angle,\n      _ref$decay = _ref.decay,\n      decay = _ref$decay === undefined ? 0.9 : _ref$decay,\n      _ref$spread = _ref.spread,\n      spread = _ref$spread === undefined ? 45 : _ref$spread,\n      _ref$startVelocity = _ref.startVelocity,\n      startVelocity = _ref$startVelocity === undefined ? 35 : _ref$startVelocity,\n      _ref$elementCount = _ref.elementCount,\n      elementCount = _ref$elementCount === undefined ? 50 : _ref$elementCount,\n      _ref$elementSize = _ref.elementSize,\n      elementSize = _ref$elementSize === undefined ? 25 : _ref$elementSize,\n      _ref$lifetime = _ref.lifetime,\n      lifetime = _ref$lifetime === undefined ? 200 : _ref$lifetime,\n      _ref$zIndex = _ref.zIndex,\n      zIndex = _ref$zIndex === undefined ? 0 : _ref$zIndex,\n      _ref$emoji = _ref.emoji,\n      emoji = _ref$emoji === undefined ? defaultEmoji : _ref$emoji,\n      _ref$random = _ref.random,\n      random = _ref$random === undefined ? Math.random : _ref$random;\n\n  var elements = createElements$1(root, elementCount, elementSize, zIndex, emoji);\n  var mojis = elements.map(function (element) {\n    return {\n      element: element,\n      physics: generatePhysics$1(angle, spread, startVelocity, random)\n    };\n  });\n  animate$1(root, mojis, decay, lifetime);\n};\n\nfunction createCommonjsModule(fn, module) {\n  return module = {\n    exports: {}\n  }, fn(module, module.exports), module.exports;\n}\n\nvar lottie = createCommonjsModule(function (module) {\n  typeof navigator !== \"undefined\" && function (root, factory) {\n    if (module.exports) {\n      module.exports = factory(root);\n    } else {\n      root.lottie = factory(root);\n      root.bodymovin = root.lottie;\n    }\n  }(window || {}, function (window) {\n    var svgNS = \"http://www.w3.org/2000/svg\";\n    var locationHref = '';\n    var initialDefaultFrame = -999999;\n    var subframeEnabled = true;\n    var expressionsPlugin;\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    var bm_pow = Math.pow;\n    var bm_sqrt = Math.sqrt;\n    var bm_floor = Math.floor;\n    var bm_max = Math.max;\n    var bm_min = Math.min;\n    var BMMath = {};\n\n    (function () {\n      var propertyNames = [\"abs\", \"acos\", \"acosh\", \"asin\", \"asinh\", \"atan\", \"atanh\", \"atan2\", \"ceil\", \"cbrt\", \"expm1\", \"clz32\", \"cos\", \"cosh\", \"exp\", \"floor\", \"fround\", \"hypot\", \"imul\", \"log\", \"log1p\", \"log2\", \"log10\", \"max\", \"min\", \"pow\", \"random\", \"round\", \"sign\", \"sin\", \"sinh\", \"sqrt\", \"tan\", \"tanh\", \"trunc\", \"E\", \"LN10\", \"LN2\", \"LOG10E\", \"LOG2E\", \"PI\", \"SQRT1_2\", \"SQRT2\"];\n      var i,\n          len = propertyNames.length;\n\n      for (i = 0; i < len; i += 1) {\n        BMMath[propertyNames[i]] = Math[propertyNames[i]];\n      }\n    })();\n\n    function ProjectInterface() {\n      return {};\n    }\n\n    BMMath.random = Math.random;\n\n    BMMath.abs = function (val) {\n      var tOfVal = typeof val;\n\n      if (tOfVal === 'object' && val.length) {\n        var absArr = createSizedArray(val.length);\n        var i,\n            len = val.length;\n\n        for (i = 0; i < len; i += 1) {\n          absArr[i] = Math.abs(val[i]);\n        }\n\n        return absArr;\n      }\n\n      return Math.abs(val);\n    };\n\n    var defaultCurveSegments = 150;\n    var degToRads = Math.PI / 180;\n    var roundCorner = 0.5519;\n\n    function styleDiv(element) {\n      element.style.position = 'absolute';\n      element.style.top = 0;\n      element.style.left = 0;\n      element.style.display = 'block';\n      element.style.transformOrigin = element.style.webkitTransformOrigin = '0 0';\n      element.style.backfaceVisibility = element.style.webkitBackfaceVisibility = 'visible';\n      element.style.transformStyle = element.style.webkitTransformStyle = element.style.mozTransformStyle = \"preserve-3d\";\n    }\n\n    function BMEnterFrameEvent(n, c, t, d) {\n      this.type = n;\n      this.currentTime = c;\n      this.totalTime = t;\n      this.direction = d < 0 ? -1 : 1;\n    }\n\n    function BMCompleteEvent(n, d) {\n      this.type = n;\n      this.direction = d < 0 ? -1 : 1;\n    }\n\n    function BMCompleteLoopEvent(n, c, t, d) {\n      this.type = n;\n      this.currentLoop = t;\n      this.totalLoops = c;\n      this.direction = d < 0 ? -1 : 1;\n    }\n\n    function BMSegmentStartEvent(n, f, t) {\n      this.type = n;\n      this.firstFrame = f;\n      this.totalFrames = t;\n    }\n\n    function BMDestroyEvent(n, t) {\n      this.type = n;\n      this.target = t;\n    }\n\n    var createElementID = function () {\n      var _count = 0;\n      return function createID() {\n        return '__lottie_element_' + ++_count;\n      };\n    }();\n\n    function HSVtoRGB(h, s, v) {\n      var r, g, b, i, f, p, q, t;\n      i = Math.floor(h * 6);\n      f = h * 6 - i;\n      p = v * (1 - s);\n      q = v * (1 - f * s);\n      t = v * (1 - (1 - f) * s);\n\n      switch (i % 6) {\n        case 0:\n          r = v;\n          g = t;\n          b = p;\n          break;\n\n        case 1:\n          r = q;\n          g = v;\n          b = p;\n          break;\n\n        case 2:\n          r = p;\n          g = v;\n          b = t;\n          break;\n\n        case 3:\n          r = p;\n          g = q;\n          b = v;\n          break;\n\n        case 4:\n          r = t;\n          g = p;\n          b = v;\n          break;\n\n        case 5:\n          r = v;\n          g = p;\n          b = q;\n          break;\n      }\n\n      return [r, g, b];\n    }\n\n    function RGBtoHSV(r, g, b) {\n      var max = Math.max(r, g, b),\n          min = Math.min(r, g, b),\n          d = max - min,\n          h,\n          s = max === 0 ? 0 : d / max,\n          v = max / 255;\n\n      switch (max) {\n        case min:\n          h = 0;\n          break;\n\n        case r:\n          h = g - b + d * (g < b ? 6 : 0);\n          h /= 6 * d;\n          break;\n\n        case g:\n          h = b - r + d * 2;\n          h /= 6 * d;\n          break;\n\n        case b:\n          h = r - g + d * 4;\n          h /= 6 * d;\n          break;\n      }\n\n      return [h, s, v];\n    }\n\n    function addSaturationToRGB(color, offset) {\n      var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n      hsv[1] += offset;\n\n      if (hsv[1] > 1) {\n        hsv[1] = 1;\n      } else if (hsv[1] <= 0) {\n        hsv[1] = 0;\n      }\n\n      return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n    }\n\n    function addBrightnessToRGB(color, offset) {\n      var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n      hsv[2] += offset;\n\n      if (hsv[2] > 1) {\n        hsv[2] = 1;\n      } else if (hsv[2] < 0) {\n        hsv[2] = 0;\n      }\n\n      return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n    }\n\n    function addHueToRGB(color, offset) {\n      var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n      hsv[0] += offset / 360;\n\n      if (hsv[0] > 1) {\n        hsv[0] -= 1;\n      } else if (hsv[0] < 0) {\n        hsv[0] += 1;\n      }\n\n      return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n    }\n\n    var rgbToHex = function () {\n      var colorMap = [];\n      var i;\n      var hex;\n\n      for (i = 0; i < 256; i += 1) {\n        hex = i.toString(16);\n        colorMap[i] = hex.length == 1 ? '0' + hex : hex;\n      }\n\n      return function (r, g, b) {\n        if (r < 0) {\n          r = 0;\n        }\n\n        if (g < 0) {\n          g = 0;\n        }\n\n        if (b < 0) {\n          b = 0;\n        }\n\n        return '#' + colorMap[r] + colorMap[g] + colorMap[b];\n      };\n    }();\n\n    function BaseEvent() {}\n\n    BaseEvent.prototype = {\n      triggerEvent: function triggerEvent(eventName, args) {\n        if (this._cbs[eventName]) {\n          var len = this._cbs[eventName].length;\n\n          for (var i = 0; i < len; i++) {\n            this._cbs[eventName][i](args);\n          }\n        }\n      },\n      addEventListener: function addEventListener(eventName, callback) {\n        if (!this._cbs[eventName]) {\n          this._cbs[eventName] = [];\n        }\n\n        this._cbs[eventName].push(callback);\n\n        return function () {\n          this.removeEventListener(eventName, callback);\n        }.bind(this);\n      },\n      removeEventListener: function removeEventListener(eventName, callback) {\n        if (!callback) {\n          this._cbs[eventName] = null;\n        } else if (this._cbs[eventName]) {\n          var i = 0,\n              len = this._cbs[eventName].length;\n\n          while (i < len) {\n            if (this._cbs[eventName][i] === callback) {\n              this._cbs[eventName].splice(i, 1);\n\n              i -= 1;\n              len -= 1;\n            }\n\n            i += 1;\n          }\n\n          if (!this._cbs[eventName].length) {\n            this._cbs[eventName] = null;\n          }\n        }\n      }\n    };\n\n    var createTypedArray = function () {\n      function createRegularArray(type, len) {\n        var i = 0,\n            arr = [],\n            value;\n\n        switch (type) {\n          case 'int16':\n          case 'uint8c':\n            value = 1;\n            break;\n\n          default:\n            value = 1.1;\n            break;\n        }\n\n        for (i = 0; i < len; i += 1) {\n          arr.push(value);\n        }\n\n        return arr;\n      }\n\n      function createTypedArray(type, len) {\n        if (type === 'float32') {\n          return new Float32Array(len);\n        } else if (type === 'int16') {\n          return new Int16Array(len);\n        } else if (type === 'uint8c') {\n          return new Uint8ClampedArray(len);\n        }\n      }\n\n      if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\n        return createTypedArray;\n      } else {\n        return createRegularArray;\n      }\n    }();\n\n    function createSizedArray(len) {\n      return Array.apply(null, {\n        length: len\n      });\n    }\n\n    function createNS(type) {\n      //return {appendChild:function(){},setAttribute:function(){},style:{}}\n      return document.createElementNS(svgNS, type);\n    }\n\n    function createTag(type) {\n      //return {appendChild:function(){},setAttribute:function(){},style:{}}\n      return document.createElement(type);\n    }\n\n    function DynamicPropertyContainer() {}\n\n    DynamicPropertyContainer.prototype = {\n      addDynamicProperty: function addDynamicProperty(prop) {\n        if (this.dynamicProperties.indexOf(prop) === -1) {\n          this.dynamicProperties.push(prop);\n          this.container.addDynamicProperty(this);\n          this._isAnimated = true;\n        }\n      },\n      iterateDynamicProperties: function iterateDynamicProperties() {\n        this._mdf = false;\n        var i,\n            len = this.dynamicProperties.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.dynamicProperties[i].getValue();\n\n          if (this.dynamicProperties[i]._mdf) {\n            this._mdf = true;\n          }\n        }\n      },\n      initDynamicPropertyContainer: function initDynamicPropertyContainer(container) {\n        this.container = container;\n        this.dynamicProperties = [];\n        this._mdf = false;\n        this._isAnimated = false;\n      }\n    };\n\n    var getBlendMode = function () {\n      var blendModeEnums = {\n        0: 'source-over',\n        1: 'multiply',\n        2: 'screen',\n        3: 'overlay',\n        4: 'darken',\n        5: 'lighten',\n        6: 'color-dodge',\n        7: 'color-burn',\n        8: 'hard-light',\n        9: 'soft-light',\n        10: 'difference',\n        11: 'exclusion',\n        12: 'hue',\n        13: 'saturation',\n        14: 'color',\n        15: 'luminosity'\n      };\n      return function (mode) {\n        return blendModeEnums[mode] || '';\n      };\n    }();\n    /*!\r\n     Transformation Matrix v2.0\r\n     (c) Epistemex 2014-2015\r\n     www.epistemex.com\r\n     By Ken Fyrstenberg\r\n     Contributions by leeoniya.\r\n     License: MIT, header required.\r\n     */\n\n    /**\r\n     * 2D transformation matrix object initialized with identity matrix.\r\n     *\r\n     * The matrix can synchronize a canvas context by supplying the context\r\n     * as an argument, or later apply current absolute transform to an\r\n     * existing context.\r\n     *\r\n     * All values are handled as floating point values.\r\n     *\r\n     * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n     * @prop {number} a - scale x\r\n     * @prop {number} b - shear y\r\n     * @prop {number} c - shear x\r\n     * @prop {number} d - scale y\r\n     * @prop {number} e - translate x\r\n     * @prop {number} f - translate y\r\n     * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n     * @constructor\r\n     */\n\n\n    var Matrix = function () {\n      var _cos = Math.cos;\n      var _sin = Math.sin;\n      var _tan = Math.tan;\n      var _rnd = Math.round;\n\n      function reset() {\n        this.props[0] = 1;\n        this.props[1] = 0;\n        this.props[2] = 0;\n        this.props[3] = 0;\n        this.props[4] = 0;\n        this.props[5] = 1;\n        this.props[6] = 0;\n        this.props[7] = 0;\n        this.props[8] = 0;\n        this.props[9] = 0;\n        this.props[10] = 1;\n        this.props[11] = 0;\n        this.props[12] = 0;\n        this.props[13] = 0;\n        this.props[14] = 0;\n        this.props[15] = 1;\n        return this;\n      }\n\n      function rotate(angle) {\n        if (angle === 0) {\n          return this;\n        }\n\n        var mCos = _cos(angle);\n\n        var mSin = _sin(angle);\n\n        return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      }\n\n      function rotateX(angle) {\n        if (angle === 0) {\n          return this;\n        }\n\n        var mCos = _cos(angle);\n\n        var mSin = _sin(angle);\n\n        return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\n      }\n\n      function rotateY(angle) {\n        if (angle === 0) {\n          return this;\n        }\n\n        var mCos = _cos(angle);\n\n        var mSin = _sin(angle);\n\n        return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\n      }\n\n      function rotateZ(angle) {\n        if (angle === 0) {\n          return this;\n        }\n\n        var mCos = _cos(angle);\n\n        var mSin = _sin(angle);\n\n        return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n      }\n\n      function shear(sx, sy) {\n        return this._t(1, sy, sx, 1, 0, 0);\n      }\n\n      function skew(ax, ay) {\n        return this.shear(_tan(ax), _tan(ay));\n      }\n\n      function skewFromAxis(ax, angle) {\n        var mCos = _cos(angle);\n\n        var mSin = _sin(angle);\n\n        return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); //return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\n      }\n\n      function scale(sx, sy, sz) {\n        if (!sz && sz !== 0) {\n          sz = 1;\n        }\n\n        if (sx === 1 && sy === 1 && sz === 1) {\n          return this;\n        }\n\n        return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\n      }\n\n      function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\n        this.props[0] = a;\n        this.props[1] = b;\n        this.props[2] = c;\n        this.props[3] = d;\n        this.props[4] = e;\n        this.props[5] = f;\n        this.props[6] = g;\n        this.props[7] = h;\n        this.props[8] = i;\n        this.props[9] = j;\n        this.props[10] = k;\n        this.props[11] = l;\n        this.props[12] = m;\n        this.props[13] = n;\n        this.props[14] = o;\n        this.props[15] = p;\n        return this;\n      }\n\n      function translate(tx, ty, tz) {\n        tz = tz || 0;\n\n        if (tx !== 0 || ty !== 0 || tz !== 0) {\n          return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\n        }\n\n        return this;\n      }\n\n      function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\n        var _p = this.props;\n\n        if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\n          //NOTE: commenting this condition because TurboFan deoptimizes code when present\n          //if(m2 !== 0 || n2 !== 0 || o2 !== 0){\n          _p[12] = _p[12] * a2 + _p[15] * m2;\n          _p[13] = _p[13] * f2 + _p[15] * n2;\n          _p[14] = _p[14] * k2 + _p[15] * o2;\n          _p[15] = _p[15] * p2; //}\n\n          this._identityCalculated = false;\n          return this;\n        }\n\n        var a1 = _p[0];\n        var b1 = _p[1];\n        var c1 = _p[2];\n        var d1 = _p[3];\n        var e1 = _p[4];\n        var f1 = _p[5];\n        var g1 = _p[6];\n        var h1 = _p[7];\n        var i1 = _p[8];\n        var j1 = _p[9];\n        var k1 = _p[10];\n        var l1 = _p[11];\n        var m1 = _p[12];\n        var n1 = _p[13];\n        var o1 = _p[14];\n        var p1 = _p[15];\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\n\n        _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\n        _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\n        _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\n        _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\n        _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\n        _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\n        _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\n        _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\n        _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\n        _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\n        _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\n        _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\n        _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\n        _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\n        _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\n        _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\n        this._identityCalculated = false;\n        return this;\n      }\n\n      function isIdentity() {\n        if (!this._identityCalculated) {\n          this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\n          this._identityCalculated = true;\n        }\n\n        return this._identity;\n      }\n\n      function equals(matr) {\n        var i = 0;\n\n        while (i < 16) {\n          if (matr.props[i] !== this.props[i]) {\n            return false;\n          }\n\n          i += 1;\n        }\n\n        return true;\n      }\n\n      function clone(matr) {\n        var i;\n\n        for (i = 0; i < 16; i += 1) {\n          matr.props[i] = this.props[i];\n        }\n      }\n\n      function cloneFromProps(props) {\n        var i;\n\n        for (i = 0; i < 16; i += 1) {\n          this.props[i] = props[i];\n        }\n      }\n\n      function applyToPoint(x, y, z) {\n        return {\n          x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\n          y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\n          z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\n        };\n        /*return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         };*/\n      }\n\n      function applyToX(x, y, z) {\n        return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\n      }\n\n      function applyToY(x, y, z) {\n        return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\n      }\n\n      function applyToZ(x, y, z) {\n        return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\n      }\n\n      function inversePoint(pt) {\n        var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\n        var a = this.props[5] / determinant;\n        var b = -this.props[1] / determinant;\n        var c = -this.props[4] / determinant;\n        var d = this.props[0] / determinant;\n        var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\n        var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\n        return [pt[0] * a + pt[1] * c + e, pt[0] * b + pt[1] * d + f, 0];\n      }\n\n      function inversePoints(pts) {\n        var i,\n            len = pts.length,\n            retPts = [];\n\n        for (i = 0; i < len; i += 1) {\n          retPts[i] = inversePoint(pts[i]);\n        }\n\n        return retPts;\n      }\n\n      function applyToTriplePoints(pt1, pt2, pt3) {\n        var arr = createTypedArray('float32', 6);\n\n        if (this.isIdentity()) {\n          arr[0] = pt1[0];\n          arr[1] = pt1[1];\n          arr[2] = pt2[0];\n          arr[3] = pt2[1];\n          arr[4] = pt3[0];\n          arr[5] = pt3[1];\n        } else {\n          var p0 = this.props[0],\n              p1 = this.props[1],\n              p4 = this.props[4],\n              p5 = this.props[5],\n              p12 = this.props[12],\n              p13 = this.props[13];\n          arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\n          arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\n          arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\n          arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\n          arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\n          arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\n        }\n\n        return arr;\n      }\n\n      function applyToPointArray(x, y, z) {\n        var arr;\n\n        if (this.isIdentity()) {\n          arr = [x, y, z];\n        } else {\n          arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12], x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13], x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\n        }\n\n        return arr;\n      }\n\n      function applyToPointStringified(x, y) {\n        if (this.isIdentity()) {\n          return x + ',' + y;\n        }\n\n        var _p = this.props;\n        return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\n      }\n\n      function toCSS() {\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\n        var i = 0;\n        var props = this.props;\n        var cssValue = 'matrix3d(';\n        var v = 10000;\n\n        while (i < 16) {\n          cssValue += _rnd(props[i] * v) / v;\n          cssValue += i === 15 ? ')' : ',';\n          i += 1;\n        }\n\n        return cssValue;\n      }\n\n      function roundMatrixProperty(val) {\n        var v = 10000;\n\n        if (val < 0.000001 && val > 0 || val > -0.000001 && val < 0) {\n          return _rnd(val * v) / v;\n        }\n\n        return val;\n      }\n\n      function to2dCSS() {\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\n        var props = this.props;\n\n        var _a = roundMatrixProperty(props[0]);\n\n        var _b = roundMatrixProperty(props[1]);\n\n        var _c = roundMatrixProperty(props[4]);\n\n        var _d = roundMatrixProperty(props[5]);\n\n        var _e = roundMatrixProperty(props[12]);\n\n        var _f = roundMatrixProperty(props[13]);\n\n        return \"matrix(\" + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + \")\";\n      }\n\n      return function () {\n        this.reset = reset;\n        this.rotate = rotate;\n        this.rotateX = rotateX;\n        this.rotateY = rotateY;\n        this.rotateZ = rotateZ;\n        this.skew = skew;\n        this.skewFromAxis = skewFromAxis;\n        this.shear = shear;\n        this.scale = scale;\n        this.setTransform = setTransform;\n        this.translate = translate;\n        this.transform = transform;\n        this.applyToPoint = applyToPoint;\n        this.applyToX = applyToX;\n        this.applyToY = applyToY;\n        this.applyToZ = applyToZ;\n        this.applyToPointArray = applyToPointArray;\n        this.applyToTriplePoints = applyToTriplePoints;\n        this.applyToPointStringified = applyToPointStringified;\n        this.toCSS = toCSS;\n        this.to2dCSS = to2dCSS;\n        this.clone = clone;\n        this.cloneFromProps = cloneFromProps;\n        this.equals = equals;\n        this.inversePoints = inversePoints;\n        this.inversePoint = inversePoint;\n        this._t = this.transform;\n        this.isIdentity = isIdentity;\n        this._identity = true;\n        this._identityCalculated = false;\n        this.props = createTypedArray('float32', 16);\n        this.reset();\n      };\n    }();\n    /*\r\n     Copyright 2014 David Bau.\r\n    \r\n     Permission is hereby granted, free of charge, to any person obtaining\r\n     a copy of this software and associated documentation files (the\r\n     \"Software\"), to deal in the Software without restriction, including\r\n     without limitation the rights to use, copy, modify, merge, publish,\r\n     distribute, sublicense, and/or sell copies of the Software, and to\r\n     permit persons to whom the Software is furnished to do so, subject to\r\n     the following conditions:\r\n    \r\n     The above copyright notice and this permission notice shall be\r\n     included in all copies or substantial portions of the Software.\r\n    \r\n     THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n     EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n     MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n     IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n     CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n     TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n     SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n    \r\n     */\n\n\n    (function (pool, math) {\n      //\n      // The following constants are related to IEEE 754 limits.\n      //\n      var global = this,\n          width = 256,\n          // each RC4 output is 0 <= x < 256\n      chunks = 6,\n          // at least six RC4 outputs for each double\n      digits = 52,\n          // there are 52 significant digits in a double\n      rngname = 'random',\n          // rngname: name for Math.random and Math.seedrandom\n      startdenom = math.pow(width, chunks),\n          significance = math.pow(2, digits),\n          overflow = significance * 2,\n          mask = width - 1; // node.js crypto module, initialized at the bottom.\n      //\n      // seedrandom()\n      // This is the seedrandom function described above.\n      //\n\n      function seedrandom(seed, options, callback) {\n        var key = [];\n        options = options === true ? {\n          entropy: true\n        } : options || {}; // Flatten the seed string or build one from local entropy if needed.\n\n        var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed === null ? autoseed() : seed, 3), key); // Use the seed to initialize an ARC4 generator.\n\n        var arc4 = new ARC4(key); // This function returns a random double in [0, 1) that contains\n        // randomness in every bit of the mantissa of the IEEE 754 value.\n\n        var prng = function prng() {\n          var n = arc4.g(chunks),\n              // Start with a numerator n < 2 ^ 48\n          d = startdenom,\n              //   and denominator d = 2 ^ 48.\n          x = 0; //   and no 'extra last byte'.\n\n          while (n < significance) {\n            // Fill up all significant digits by\n            n = (n + x) * width; //   shifting numerator and\n\n            d *= width; //   denominator and generating a\n\n            x = arc4.g(1); //   new least-significant-byte.\n          }\n\n          while (n >= overflow) {\n            // To avoid rounding up, before adding\n            n /= 2; //   last byte, shift everything\n\n            d /= 2; //   right using integer math until\n\n            x >>>= 1; //   we have exactly the desired bits.\n          }\n\n          return (n + x) / d; // Form the number within [0, 1).\n        };\n\n        prng.int32 = function () {\n          return arc4.g(4) | 0;\n        };\n\n        prng.quick = function () {\n          return arc4.g(4) / 0x100000000;\n        };\n\n        prng.double = prng; // Mix the randomness into accumulated entropy.\n\n        mixkey(tostring(arc4.S), pool); // Calling convention: what to return as a function of prng, seed, is_math.\n\n        return (options.pass || callback || function (prng, seed, is_math_call, state) {\n          if (state) {\n            // Load the arc4 state from the given state if it has an S array.\n            if (state.S) {\n              copy(state, arc4);\n            } // Only provide the .state method if requested via options.state.\n\n\n            prng.state = function () {\n              return copy(arc4, {});\n            };\n          } // If called as a method of Math (Math.seedrandom()), mutate\n          // Math.random because that is how seedrandom.js has worked since v1.0.\n\n\n          if (is_math_call) {\n            math[rngname] = prng;\n            return seed;\n          } // Otherwise, it is a newer calling convention, so return the\n          // prng directly.\n          else return prng;\n        })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n      }\n\n      math['seed' + rngname] = seedrandom; //\n      // ARC4\n      //\n      // An ARC4 implementation.  The constructor takes a key in the form of\n      // an array of at most (width) integers that should be 0 <= x < (width).\n      //\n      // The g(count) method returns a pseudorandom integer that concatenates\n      // the next (count) outputs from ARC4.  Its return value is a number x\n      // that is in the range 0 <= x < (width ^ count).\n      //\n\n      function ARC4(key) {\n        var t,\n            keylen = key.length,\n            me = this,\n            i = 0,\n            j = me.i = me.j = 0,\n            s = me.S = []; // The empty key [] is treated as [0].\n\n        if (!keylen) {\n          key = [keylen++];\n        } // Set up S using the standard key scheduling algorithm.\n\n\n        while (i < width) {\n          s[i] = i++;\n        }\n\n        for (i = 0; i < width; i++) {\n          s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n          s[j] = t;\n        } // The \"g\" method returns the next (count) outputs as one number.\n\n\n        me.g = function (count) {\n          // Using instance members instead of closure state nearly doubles speed.\n          var t,\n              r = 0,\n              i = me.i,\n              j = me.j,\n              s = me.S;\n\n          while (count--) {\n            t = s[i = mask & i + 1];\n            r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n          }\n\n          me.i = i;\n          me.j = j;\n          return r; // For robust unpredictability, the function call below automatically\n          // discards an initial batch of values.  This is called RC4-drop[256].\n          // See http://google.com/search?q=rsa+fluhrer+response&btnI\n        };\n      } //\n      // copy()\n      // Copies internal state of ARC4 to or from a plain object.\n      //\n\n\n      function copy(f, t) {\n        t.i = f.i;\n        t.j = f.j;\n        t.S = f.S.slice();\n        return t;\n      } //\n      // flatten()\n      // Converts an object tree to nested arrays of strings.\n      //\n\n\n      function flatten(obj, depth) {\n        var result = [],\n            typ = typeof obj,\n            prop;\n\n        if (depth && typ == 'object') {\n          for (prop in obj) {\n            try {\n              result.push(flatten(obj[prop], depth - 1));\n            } catch (e) {}\n          }\n        }\n\n        return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n      } //\n      // mixkey()\n      // Mixes a string seed into a key that is an array of integers, and\n      // returns a shortened string seed that is equivalent to the result key.\n      //\n\n\n      function mixkey(seed, key) {\n        var stringseed = seed + '',\n            smear,\n            j = 0;\n\n        while (j < stringseed.length) {\n          key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n        }\n\n        return tostring(key);\n      } //\n      // autoseed()\n      // Returns an object for autoseeding, using window.crypto and Node crypto\n      // module if available.\n      //\n\n\n      function autoseed() {\n        try {\n          var out = new Uint8Array(width);\n          (global.crypto || global.msCrypto).getRandomValues(out);\n          return tostring(out);\n        } catch (e) {\n          var browser = global.navigator,\n              plugins = browser && browser.plugins;\n          return [+new Date(), global, plugins, global.screen, tostring(pool)];\n        }\n      } //\n      // tostring()\n      // Converts an array of charcodes to a string\n      //\n\n\n      function tostring(a) {\n        return String.fromCharCode.apply(0, a);\n      } //\n      // When seedrandom.js is loaded, we immediately mix a few bits\n      // from the built-in RNG into the entropy pool.  Because we do\n      // not want to interfere with deterministic PRNG state later,\n      // seedrandom will not call math.random on its own again after\n      // initialization.\n      //\n\n\n      mixkey(math.random(), pool); //\n      // Nodejs and AMD support: export the implementation as a module using\n      // either convention.\n      //\n      // End anonymous scope, and pass initial values.\n    })([], // pool: entropy pool starts empty\n    BMMath // math: package containing random, pow, and seedrandom\n    );\n\n    var BezierFactory = function () {\n      /**\r\n       * BezierEasing - use bezier curve for transition easing function\r\n       * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n       *\r\n       * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n       * Usage:\r\n       * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n       * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n       *\r\n       */\n      var ob = {};\n      ob.getBezierEasing = getBezierEasing;\n      var beziers = {};\n\n      function getBezierEasing(a, b, c, d, nm) {\n        var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\n\n        if (beziers[str]) {\n          return beziers[str];\n        }\n\n        var bezEasing = new BezierEasing([a, b, c, d]);\n        beziers[str] = bezEasing;\n        return bezEasing;\n      } // These values are established by empiricism with tests (tradeoff: performance VS precision)\n\n\n      var NEWTON_ITERATIONS = 4;\n      var NEWTON_MIN_SLOPE = 0.001;\n      var SUBDIVISION_PRECISION = 0.0000001;\n      var SUBDIVISION_MAX_ITERATIONS = 10;\n      var kSplineTableSize = 11;\n      var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n      var float32ArraySupported = typeof Float32Array === \"function\";\n\n      function A(aA1, aA2) {\n        return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n      }\n\n      function B(aA1, aA2) {\n        return 3.0 * aA2 - 6.0 * aA1;\n      }\n\n      function C(aA1) {\n        return 3.0 * aA1;\n      } // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\n\n\n      function calcBezier(aT, aA1, aA2) {\n        return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n      } // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\n\n\n      function getSlope(aT, aA1, aA2) {\n        return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n      }\n\n      function binarySubdivide(aX, aA, aB, mX1, mX2) {\n        var currentX,\n            currentT,\n            i = 0;\n\n        do {\n          currentT = aA + (aB - aA) / 2.0;\n          currentX = calcBezier(currentT, mX1, mX2) - aX;\n\n          if (currentX > 0.0) {\n            aB = currentT;\n          } else {\n            aA = currentT;\n          }\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n\n        return currentT;\n      }\n\n      function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n          var currentSlope = getSlope(aGuessT, mX1, mX2);\n          if (currentSlope === 0.0) return aGuessT;\n          var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n          aGuessT -= currentX / currentSlope;\n        }\n\n        return aGuessT;\n      }\n      /**\r\n       * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n       */\n\n\n      function BezierEasing(points) {\n        this._p = points;\n        this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n        this._precomputed = false;\n        this.get = this.get.bind(this);\n      }\n\n      BezierEasing.prototype = {\n        get: function get(x) {\n          var mX1 = this._p[0],\n              mY1 = this._p[1],\n              mX2 = this._p[2],\n              mY2 = this._p[3];\n          if (!this._precomputed) this._precompute();\n          if (mX1 === mY1 && mX2 === mY2) return x; // linear\n          // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n\n          if (x === 0) return 0;\n          if (x === 1) return 1;\n          return calcBezier(this._getTForX(x), mY1, mY2);\n        },\n        // Private part\n        _precompute: function _precompute() {\n          var mX1 = this._p[0],\n              mY1 = this._p[1],\n              mX2 = this._p[2],\n              mY2 = this._p[3];\n          this._precomputed = true;\n          if (mX1 !== mY1 || mX2 !== mY2) this._calcSampleValues();\n        },\n        _calcSampleValues: function _calcSampleValues() {\n          var mX1 = this._p[0],\n              mX2 = this._p[2];\n\n          for (var i = 0; i < kSplineTableSize; ++i) {\n            this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n          }\n        },\n\n        /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\n        _getTForX: function _getTForX(aX) {\n          var mX1 = this._p[0],\n              mX2 = this._p[2],\n              mSampleValues = this._mSampleValues;\n          var intervalStart = 0.0;\n          var currentSample = 1;\n          var lastSample = kSplineTableSize - 1;\n\n          for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += kSampleStepSize;\n          }\n\n          --currentSample; // Interpolate to provide an initial guess for t\n\n          var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\n          var guessForT = intervalStart + dist * kSampleStepSize;\n          var initialSlope = getSlope(guessForT, mX1, mX2);\n\n          if (initialSlope >= NEWTON_MIN_SLOPE) {\n            return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n          } else if (initialSlope === 0.0) {\n            return guessForT;\n          } else {\n            return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n          }\n        }\n      };\n      return ob;\n    }();\n\n    (function () {\n      var lastTime = 0;\n      var vendors = ['ms', 'moz', 'webkit', 'o'];\n\n      for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n      }\n\n      if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback, element) {\n        var currTime = new Date().getTime();\n        var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n        var id = setTimeout(function () {\n          callback(currTime + timeToCall);\n        }, timeToCall);\n        lastTime = currTime + timeToCall;\n        return id;\n      };\n      if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n        clearTimeout(id);\n      };\n    })();\n\n    function extendPrototype(sources, destination) {\n      var i,\n          len = sources.length,\n          sourcePrototype;\n\n      for (i = 0; i < len; i += 1) {\n        sourcePrototype = sources[i].prototype;\n\n        for (var attr in sourcePrototype) {\n          if (sourcePrototype.hasOwnProperty(attr)) destination.prototype[attr] = sourcePrototype[attr];\n        }\n      }\n    }\n\n    function getDescriptor(object, prop) {\n      return Object.getOwnPropertyDescriptor(object, prop);\n    }\n\n    function createProxyFunction(prototype) {\n      function ProxyFunction() {}\n\n      ProxyFunction.prototype = prototype;\n      return ProxyFunction;\n    }\n\n    function bezFunction() {\n      function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\n        var det1 = x1 * y2 + y1 * x3 + x2 * y3 - x3 * y2 - y3 * x1 - x2 * y1;\n        return det1 > -0.001 && det1 < 0.001;\n      }\n\n      function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\n        if (z1 === 0 && z2 === 0 && z3 === 0) {\n          return pointOnLine2D(x1, y1, x2, y2, x3, y3);\n        }\n\n        var dist1 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) + Math.pow(z2 - z1, 2));\n        var dist2 = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2) + Math.pow(z3 - z1, 2));\n        var dist3 = Math.sqrt(Math.pow(x3 - x2, 2) + Math.pow(y3 - y2, 2) + Math.pow(z3 - z2, 2));\n        var diffDist;\n\n        if (dist1 > dist2) {\n          if (dist1 > dist3) {\n            diffDist = dist1 - dist2 - dist3;\n          } else {\n            diffDist = dist3 - dist2 - dist1;\n          }\n        } else if (dist3 > dist2) {\n          diffDist = dist3 - dist2 - dist1;\n        } else {\n          diffDist = dist2 - dist1 - dist3;\n        }\n\n        return diffDist > -0.0001 && diffDist < 0.0001;\n      }\n\n      var getBezierLength = function () {\n        return function (pt1, pt2, pt3, pt4) {\n          var curveSegments = defaultCurveSegments;\n          var k;\n          var i, len;\n          var ptCoord,\n              perc,\n              addedLength = 0;\n          var ptDistance;\n          var point = [],\n              lastPoint = [];\n          var lengthData = bezier_length_pool.newElement();\n          len = pt3.length;\n\n          for (k = 0; k < curveSegments; k += 1) {\n            perc = k / (curveSegments - 1);\n            ptDistance = 0;\n\n            for (i = 0; i < len; i += 1) {\n              ptCoord = bm_pow(1 - perc, 3) * pt1[i] + 3 * bm_pow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bm_pow(perc, 2) * pt4[i] + bm_pow(perc, 3) * pt2[i];\n              point[i] = ptCoord;\n\n              if (lastPoint[i] !== null) {\n                ptDistance += bm_pow(point[i] - lastPoint[i], 2);\n              }\n\n              lastPoint[i] = point[i];\n            }\n\n            if (ptDistance) {\n              ptDistance = bm_sqrt(ptDistance);\n              addedLength += ptDistance;\n            }\n\n            lengthData.percents[k] = perc;\n            lengthData.lengths[k] = addedLength;\n          }\n\n          lengthData.addedLength = addedLength;\n          return lengthData;\n        };\n      }();\n\n      function getSegmentsLength(shapeData) {\n        var segmentsLength = segments_length_pool.newElement();\n        var closed = shapeData.c;\n        var pathV = shapeData.v;\n        var pathO = shapeData.o;\n        var pathI = shapeData.i;\n        var i,\n            len = shapeData._length;\n        var lengths = segmentsLength.lengths;\n        var totalLength = 0;\n\n        for (i = 0; i < len - 1; i += 1) {\n          lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\n          totalLength += lengths[i].addedLength;\n        }\n\n        if (closed && len) {\n          lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\n          totalLength += lengths[i].addedLength;\n        }\n\n        segmentsLength.totalLength = totalLength;\n        return segmentsLength;\n      }\n\n      function BezierData(length) {\n        this.segmentLength = 0;\n        this.points = new Array(length);\n      }\n\n      function PointData(partial, point) {\n        this.partialLength = partial;\n        this.point = point;\n      }\n\n      var buildBezierData = function () {\n        var storedData = {};\n        return function (pt1, pt2, pt3, pt4) {\n          var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\n\n          if (!storedData[bezierName]) {\n            var curveSegments = defaultCurveSegments;\n            var k, i, len;\n            var ptCoord,\n                perc,\n                addedLength = 0;\n            var ptDistance;\n            var point,\n                lastPoint = null;\n\n            if (pt1.length === 2 && (pt1[0] != pt2[0] || pt1[1] != pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\n              curveSegments = 2;\n            }\n\n            var bezierData = new BezierData(curveSegments);\n            len = pt3.length;\n\n            for (k = 0; k < curveSegments; k += 1) {\n              point = createSizedArray(len);\n              perc = k / (curveSegments - 1);\n              ptDistance = 0;\n\n              for (i = 0; i < len; i += 1) {\n                ptCoord = bm_pow(1 - perc, 3) * pt1[i] + 3 * bm_pow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bm_pow(perc, 2) * (pt2[i] + pt4[i]) + bm_pow(perc, 3) * pt2[i];\n                point[i] = ptCoord;\n\n                if (lastPoint !== null) {\n                  ptDistance += bm_pow(point[i] - lastPoint[i], 2);\n                }\n              }\n\n              ptDistance = bm_sqrt(ptDistance);\n              addedLength += ptDistance;\n              bezierData.points[k] = new PointData(ptDistance, point);\n              lastPoint = point;\n            }\n\n            bezierData.segmentLength = addedLength;\n            storedData[bezierName] = bezierData;\n          }\n\n          return storedData[bezierName];\n        };\n      }();\n\n      function getDistancePerc(perc, bezierData) {\n        var percents = bezierData.percents;\n        var lengths = bezierData.lengths;\n        var len = percents.length;\n        var initPos = bm_floor((len - 1) * perc);\n        var lengthPos = perc * bezierData.addedLength;\n        var lPerc = 0;\n\n        if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\n          return percents[initPos];\n        } else {\n          var dir = lengths[initPos] > lengthPos ? -1 : 1;\n          var flag = true;\n\n          while (flag) {\n            if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\n              lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\n              flag = false;\n            } else {\n              initPos += dir;\n            }\n\n            if (initPos < 0 || initPos >= len - 1) {\n              //FIX for TypedArrays that don't store floating point values with enough accuracy\n              if (initPos === len - 1) {\n                return percents[initPos];\n              }\n\n              flag = false;\n            }\n          }\n\n          return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\n        }\n      }\n\n      function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\n        var t1 = getDistancePerc(percent, bezierData);\n        var u1 = 1 - t1;\n        var ptX = Math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\n        var ptY = Math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\n        return [ptX, ptY];\n      }\n\n      var bezier_segment_points = createTypedArray('float32', 8);\n\n      function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\n        startPerc = startPerc < 0 ? 0 : startPerc > 1 ? 1 : startPerc;\n        var t0 = getDistancePerc(startPerc, bezierData);\n        endPerc = endPerc > 1 ? 1 : endPerc;\n        var t1 = getDistancePerc(endPerc, bezierData);\n        var i,\n            len = pt1.length;\n        var u0 = 1 - t0;\n        var u1 = 1 - t1;\n        var u0u0u0 = u0 * u0 * u0;\n        var t0u0u0_3 = t0 * u0 * u0 * 3;\n        var t0t0u0_3 = t0 * t0 * u0 * 3;\n        var t0t0t0 = t0 * t0 * t0; //\n\n        var u0u0u1 = u0 * u0 * u1;\n        var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1;\n        var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1;\n        var t0t0t1 = t0 * t0 * t1; //\n\n        var u0u1u1 = u0 * u1 * u1;\n        var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1;\n        var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1;\n        var t0t1t1 = t0 * t1 * t1; //\n\n        var u1u1u1 = u1 * u1 * u1;\n        var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1;\n        var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1;\n        var t1t1t1 = t1 * t1 * t1;\n\n        for (i = 0; i < len; i += 1) {\n          bezier_segment_points[i * 4] = Math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000;\n          bezier_segment_points[i * 4 + 1] = Math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000;\n          bezier_segment_points[i * 4 + 2] = Math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000;\n          bezier_segment_points[i * 4 + 3] = Math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000;\n        }\n\n        return bezier_segment_points;\n      }\n\n      return {\n        getSegmentsLength: getSegmentsLength,\n        getNewSegment: getNewSegment,\n        getPointInSegment: getPointInSegment,\n        buildBezierData: buildBezierData,\n        pointOnLine2D: pointOnLine2D,\n        pointOnLine3D: pointOnLine3D\n      };\n    }\n\n    var bez = bezFunction();\n\n    function dataFunctionManager() {\n      //var tCanvasHelper = createTag('canvas').getContext('2d');\n      function completeLayers(layers, comps, fontManager) {\n        var layerData;\n        var i,\n            len = layers.length;\n        var j, jLen, k, kLen;\n\n        for (i = 0; i < len; i += 1) {\n          layerData = layers[i];\n\n          if (!('ks' in layerData) || layerData.completed) {\n            continue;\n          }\n\n          layerData.completed = true;\n\n          if (layerData.tt) {\n            layers[i - 1].td = layerData.tt;\n          }\n\n          if (layerData.hasMask) {\n            var maskProps = layerData.masksProperties;\n            jLen = maskProps.length;\n\n            for (j = 0; j < jLen; j += 1) {\n              if (maskProps[j].pt.k.i) {\n                convertPathsToAbsoluteValues(maskProps[j].pt.k);\n              } else {\n                kLen = maskProps[j].pt.k.length;\n\n                for (k = 0; k < kLen; k += 1) {\n                  if (maskProps[j].pt.k[k].s) {\n                    convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\n                  }\n\n                  if (maskProps[j].pt.k[k].e) {\n                    convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\n                  }\n                }\n              }\n            }\n          }\n\n          if (layerData.ty === 0) {\n            layerData.layers = findCompLayers(layerData.refId, comps);\n            completeLayers(layerData.layers, comps, fontManager);\n          } else if (layerData.ty === 4) {\n            completeShapes(layerData.shapes);\n          } else if (layerData.ty == 5) {\n            completeText(layerData, fontManager);\n          }\n        }\n      }\n\n      function findCompLayers(id, comps) {\n        var i = 0,\n            len = comps.length;\n\n        while (i < len) {\n          if (comps[i].id === id) {\n            if (!comps[i].layers.__used) {\n              comps[i].layers.__used = true;\n              return comps[i].layers;\n            }\n\n            return JSON.parse(JSON.stringify(comps[i].layers));\n          }\n\n          i += 1;\n        }\n      }\n\n      function completeShapes(arr) {\n        var i,\n            len = arr.length;\n        var j, jLen;\n\n        for (i = len - 1; i >= 0; i -= 1) {\n          if (arr[i].ty == 'sh') {\n            if (arr[i].ks.k.i) {\n              convertPathsToAbsoluteValues(arr[i].ks.k);\n            } else {\n              jLen = arr[i].ks.k.length;\n\n              for (j = 0; j < jLen; j += 1) {\n                if (arr[i].ks.k[j].s) {\n                  convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\n                }\n\n                if (arr[i].ks.k[j].e) {\n                  convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\n                }\n              }\n            }\n          } else if (arr[i].ty == 'gr') {\n            completeShapes(arr[i].it);\n          }\n        }\n        /*if(hasPaths){\r\n            //mx: distance\r\n            //ss: sensitivity\r\n            //dc: decay\r\n            arr.splice(arr.length-1,0,{\r\n                \"ty\": \"ms\",\r\n                \"mx\":20,\r\n                \"ss\":10,\r\n                 \"dc\":0.001,\r\n                \"maxDist\":200\r\n            });\r\n        }*/\n\n      }\n\n      function convertPathsToAbsoluteValues(path) {\n        var i,\n            len = path.i.length;\n\n        for (i = 0; i < len; i += 1) {\n          path.i[i][0] += path.v[i][0];\n          path.i[i][1] += path.v[i][1];\n          path.o[i][0] += path.v[i][0];\n          path.o[i][1] += path.v[i][1];\n        }\n      }\n\n      function checkVersion(minimum, animVersionString) {\n        var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\n\n        if (minimum[0] > animVersion[0]) {\n          return true;\n        } else if (animVersion[0] > minimum[0]) {\n          return false;\n        }\n\n        if (minimum[1] > animVersion[1]) {\n          return true;\n        } else if (animVersion[1] > minimum[1]) {\n          return false;\n        }\n\n        if (minimum[2] > animVersion[2]) {\n          return true;\n        } else if (animVersion[2] > minimum[2]) {\n          return false;\n        }\n      }\n\n      var checkText = function () {\n        var minimumVersion = [4, 4, 14];\n\n        function updateTextLayer(textLayer) {\n          var documentData = textLayer.t.d;\n          textLayer.t.d = {\n            k: [{\n              s: documentData,\n              t: 0\n            }]\n          };\n        }\n\n        function iterateLayers(layers) {\n          var i,\n              len = layers.length;\n\n          for (i = 0; i < len; i += 1) {\n            if (layers[i].ty === 5) {\n              updateTextLayer(layers[i]);\n            }\n          }\n        }\n\n        return function (animationData) {\n          if (checkVersion(minimumVersion, animationData.v)) {\n            iterateLayers(animationData.layers);\n\n            if (animationData.assets) {\n              var i,\n                  len = animationData.assets.length;\n\n              for (i = 0; i < len; i += 1) {\n                if (animationData.assets[i].layers) {\n                  iterateLayers(animationData.assets[i].layers);\n                }\n              }\n            }\n          }\n        };\n      }();\n\n      var checkChars = function () {\n        var minimumVersion = [4, 7, 99];\n        return function (animationData) {\n          if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\n            var i,\n                len = animationData.chars.length,\n                j,\n                jLen;\n            var pathData, paths;\n\n            for (i = 0; i < len; i += 1) {\n              if (animationData.chars[i].data && animationData.chars[i].data.shapes) {\n                paths = animationData.chars[i].data.shapes[0].it;\n                jLen = paths.length;\n\n                for (j = 0; j < jLen; j += 1) {\n                  pathData = paths[j].ks.k;\n\n                  if (!pathData.__converted) {\n                    convertPathsToAbsoluteValues(paths[j].ks.k);\n                    pathData.__converted = true;\n                  }\n                }\n              }\n            }\n          }\n        };\n      }();\n\n      var checkColors = function () {\n        var minimumVersion = [4, 1, 9];\n\n        function iterateShapes(shapes) {\n          var i,\n              len = shapes.length;\n          var j, jLen;\n\n          for (i = 0; i < len; i += 1) {\n            if (shapes[i].ty === 'gr') {\n              iterateShapes(shapes[i].it);\n            } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\n              if (shapes[i].c.k && shapes[i].c.k[0].i) {\n                jLen = shapes[i].c.k.length;\n\n                for (j = 0; j < jLen; j += 1) {\n                  if (shapes[i].c.k[j].s) {\n                    shapes[i].c.k[j].s[0] /= 255;\n                    shapes[i].c.k[j].s[1] /= 255;\n                    shapes[i].c.k[j].s[2] /= 255;\n                    shapes[i].c.k[j].s[3] /= 255;\n                  }\n\n                  if (shapes[i].c.k[j].e) {\n                    shapes[i].c.k[j].e[0] /= 255;\n                    shapes[i].c.k[j].e[1] /= 255;\n                    shapes[i].c.k[j].e[2] /= 255;\n                    shapes[i].c.k[j].e[3] /= 255;\n                  }\n                }\n              } else {\n                shapes[i].c.k[0] /= 255;\n                shapes[i].c.k[1] /= 255;\n                shapes[i].c.k[2] /= 255;\n                shapes[i].c.k[3] /= 255;\n              }\n            }\n          }\n        }\n\n        function iterateLayers(layers) {\n          var i,\n              len = layers.length;\n\n          for (i = 0; i < len; i += 1) {\n            if (layers[i].ty === 4) {\n              iterateShapes(layers[i].shapes);\n            }\n          }\n        }\n\n        return function (animationData) {\n          if (checkVersion(minimumVersion, animationData.v)) {\n            iterateLayers(animationData.layers);\n\n            if (animationData.assets) {\n              var i,\n                  len = animationData.assets.length;\n\n              for (i = 0; i < len; i += 1) {\n                if (animationData.assets[i].layers) {\n                  iterateLayers(animationData.assets[i].layers);\n                }\n              }\n            }\n          }\n        };\n      }();\n\n      var checkShapes = function () {\n        var minimumVersion = [4, 4, 18];\n\n        function completeShapes(arr) {\n          var i,\n              len = arr.length;\n          var j, jLen;\n\n          for (i = len - 1; i >= 0; i -= 1) {\n            if (arr[i].ty == 'sh') {\n              if (arr[i].ks.k.i) {\n                arr[i].ks.k.c = arr[i].closed;\n              } else {\n                jLen = arr[i].ks.k.length;\n\n                for (j = 0; j < jLen; j += 1) {\n                  if (arr[i].ks.k[j].s) {\n                    arr[i].ks.k[j].s[0].c = arr[i].closed;\n                  }\n\n                  if (arr[i].ks.k[j].e) {\n                    arr[i].ks.k[j].e[0].c = arr[i].closed;\n                  }\n                }\n              }\n            } else if (arr[i].ty == 'gr') {\n              completeShapes(arr[i].it);\n            }\n          }\n        }\n\n        function iterateLayers(layers) {\n          var layerData;\n          var i,\n              len = layers.length;\n          var j, jLen, k, kLen;\n\n          for (i = 0; i < len; i += 1) {\n            layerData = layers[i];\n\n            if (layerData.hasMask) {\n              var maskProps = layerData.masksProperties;\n              jLen = maskProps.length;\n\n              for (j = 0; j < jLen; j += 1) {\n                if (maskProps[j].pt.k.i) {\n                  maskProps[j].pt.k.c = maskProps[j].cl;\n                } else {\n                  kLen = maskProps[j].pt.k.length;\n\n                  for (k = 0; k < kLen; k += 1) {\n                    if (maskProps[j].pt.k[k].s) {\n                      maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\n                    }\n\n                    if (maskProps[j].pt.k[k].e) {\n                      maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\n                    }\n                  }\n                }\n              }\n            }\n\n            if (layerData.ty === 4) {\n              completeShapes(layerData.shapes);\n            }\n          }\n        }\n\n        return function (animationData) {\n          if (checkVersion(minimumVersion, animationData.v)) {\n            iterateLayers(animationData.layers);\n\n            if (animationData.assets) {\n              var i,\n                  len = animationData.assets.length;\n\n              for (i = 0; i < len; i += 1) {\n                if (animationData.assets[i].layers) {\n                  iterateLayers(animationData.assets[i].layers);\n                }\n              }\n            }\n          }\n        };\n      }();\n\n      function completeData(animationData, fontManager) {\n        if (animationData.__complete) {\n          return;\n        }\n\n        checkColors(animationData);\n        checkText(animationData);\n        checkChars(animationData);\n        checkShapes(animationData);\n        completeLayers(animationData.layers, animationData.assets, fontManager);\n        animationData.__complete = true; //blitAnimation(animationData, animationData.assets, fontManager);\n      }\n\n      function completeText(data, fontManager) {\n        if (data.t.a.length === 0 && !('m' in data.t.p)) {\n          data.singleShape = true;\n        }\n      }\n\n      var moduleOb = {};\n      moduleOb.completeData = completeData;\n      return moduleOb;\n    }\n\n    var dataManager = dataFunctionManager();\n\n    var FontManager = function () {\n      var maxWaitingTime = 5000;\n      var emptyChar = {\n        w: 0,\n        size: 0,\n        shapes: []\n      };\n      var combinedCharacters = []; //Hindi characters\n\n      combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\n\n      function setUpNode(font, family) {\n        var parentNode = createTag('span');\n        parentNode.style.fontFamily = family;\n        var node = createTag('span'); // Characters that vary significantly among different fonts\n\n        node.innerHTML = 'giItT1WQy@!-/#'; // Visible - so we can measure it - but not on the screen\n\n        parentNode.style.position = 'absolute';\n        parentNode.style.left = '-10000px';\n        parentNode.style.top = '-10000px'; // Large font size makes even subtle changes obvious\n\n        parentNode.style.fontSize = '300px'; // Reset any font properties\n\n        parentNode.style.fontVariant = 'normal';\n        parentNode.style.fontStyle = 'normal';\n        parentNode.style.fontWeight = 'normal';\n        parentNode.style.letterSpacing = '0';\n        parentNode.appendChild(node);\n        document.body.appendChild(parentNode); // Remember width with no applied web font\n\n        var width = node.offsetWidth;\n        node.style.fontFamily = font + ', ' + family;\n        return {\n          node: node,\n          w: width,\n          parent: parentNode\n        };\n      }\n\n      function checkLoadedFonts() {\n        var i,\n            len = this.fonts.length;\n        var node, w;\n        var loadedCount = len;\n\n        for (i = 0; i < len; i += 1) {\n          if (this.fonts[i].loaded) {\n            loadedCount -= 1;\n            continue;\n          }\n\n          if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\n            this.fonts[i].loaded = true;\n          } else {\n            node = this.fonts[i].monoCase.node;\n            w = this.fonts[i].monoCase.w;\n\n            if (node.offsetWidth !== w) {\n              loadedCount -= 1;\n              this.fonts[i].loaded = true;\n            } else {\n              node = this.fonts[i].sansCase.node;\n              w = this.fonts[i].sansCase.w;\n\n              if (node.offsetWidth !== w) {\n                loadedCount -= 1;\n                this.fonts[i].loaded = true;\n              }\n            }\n\n            if (this.fonts[i].loaded) {\n              this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\n              this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\n            }\n          }\n        }\n\n        if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\n          setTimeout(this.checkLoadedFonts.bind(this), 20);\n        } else {\n          setTimeout(function () {\n            this.isLoaded = true;\n          }.bind(this), 0);\n        }\n      }\n\n      function createHelper(def, fontData) {\n        var tHelper = createNS('text');\n        tHelper.style.fontSize = '100px'; //tHelper.style.fontFamily = fontData.fFamily;\n\n        tHelper.setAttribute('font-family', fontData.fFamily);\n        tHelper.setAttribute('font-style', fontData.fStyle);\n        tHelper.setAttribute('font-weight', fontData.fWeight);\n        tHelper.textContent = '1';\n\n        if (fontData.fClass) {\n          tHelper.style.fontFamily = 'inherit';\n          tHelper.setAttribute('class', fontData.fClass);\n        } else {\n          tHelper.style.fontFamily = fontData.fFamily;\n        }\n\n        def.appendChild(tHelper);\n        var tCanvasHelper = createTag('canvas').getContext('2d');\n        tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px ' + fontData.fFamily; //tCanvasHelper.font = ' 100px '+ fontData.fFamily;\n\n        return tHelper;\n      }\n\n      function addFonts(fontData, defs) {\n        if (!fontData) {\n          this.isLoaded = true;\n          return;\n        }\n\n        if (this.chars) {\n          this.isLoaded = true;\n          this.fonts = fontData.list;\n          return;\n        }\n\n        var fontArr = fontData.list;\n        var i,\n            len = fontArr.length;\n        var _pendingFonts = len;\n\n        for (i = 0; i < len; i += 1) {\n          var shouldLoadFont = true;\n          var loadedSelector;\n          var j;\n          fontArr[i].loaded = false;\n          fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\n          fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\n\n          if (!fontArr[i].fPath) {\n            fontArr[i].loaded = true;\n            _pendingFonts -= 1;\n          } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\n            loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\n\n            if (loadedSelector.length > 0) {\n              shouldLoadFont = false;\n            }\n\n            if (shouldLoadFont) {\n              var s = createTag('style');\n              s.setAttribute('f-forigin', fontArr[i].fOrigin);\n              s.setAttribute('f-origin', fontArr[i].origin);\n              s.setAttribute('f-family', fontArr[i].fFamily);\n              s.type = \"text/css\";\n              s.innerHTML = \"@font-face {\" + \"font-family: \" + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\n              defs.appendChild(s);\n            }\n          } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\n            loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\n\n            for (j = 0; j < loadedSelector.length; j++) {\n              if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\n                // Font is already loaded\n                shouldLoadFont = false;\n              }\n            }\n\n            if (shouldLoadFont) {\n              var l = createTag('link');\n              l.setAttribute('f-forigin', fontArr[i].fOrigin);\n              l.setAttribute('f-origin', fontArr[i].origin);\n              l.type = \"text/css\";\n              l.rel = \"stylesheet\";\n              l.href = fontArr[i].fPath;\n              document.body.appendChild(l);\n            }\n          } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\n            loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\n\n            for (j = 0; j < loadedSelector.length; j++) {\n              if (fontArr[i].fPath === loadedSelector[j].src) {\n                // Font is already loaded\n                shouldLoadFont = false;\n              }\n            }\n\n            if (shouldLoadFont) {\n              var sc = createTag('link');\n              sc.setAttribute('f-forigin', fontArr[i].fOrigin);\n              sc.setAttribute('f-origin', fontArr[i].origin);\n              sc.setAttribute('rel', 'stylesheet');\n              sc.setAttribute('href', fontArr[i].fPath);\n              defs.appendChild(sc);\n            }\n          }\n\n          fontArr[i].helper = createHelper(defs, fontArr[i]);\n          fontArr[i].cache = {};\n          this.fonts.push(fontArr[i]);\n        }\n\n        if (_pendingFonts === 0) {\n          this.isLoaded = true;\n        } else {\n          //On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\n          //Adding this timeout seems to fix it\n          setTimeout(this.checkLoadedFonts.bind(this), 100);\n        }\n      }\n\n      function addChars(chars) {\n        if (!chars) {\n          return;\n        }\n\n        if (!this.chars) {\n          this.chars = [];\n        }\n\n        var i,\n            len = chars.length;\n        var j,\n            jLen = this.chars.length,\n            found;\n\n        for (i = 0; i < len; i += 1) {\n          j = 0;\n          found = false;\n\n          while (j < jLen) {\n            if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\n              found = true;\n            }\n\n            j += 1;\n          }\n\n          if (!found) {\n            this.chars.push(chars[i]);\n            jLen += 1;\n          }\n        }\n      }\n\n      function getCharData(char, style, font) {\n        var i = 0,\n            len = this.chars.length;\n\n        while (i < len) {\n          if (this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font) {\n            return this.chars[i];\n          }\n\n          i += 1;\n        }\n\n        if ((typeof char === 'string' && char.charCodeAt(0) !== 13 || !char) && console && console.warn) {\n          console.warn('Missing character from exported characters list: ', char, style, font);\n        }\n\n        return emptyChar;\n      }\n\n      function measureText(char, fontName, size) {\n        var fontData = this.getFontByName(fontName);\n        var index = char.charCodeAt(0);\n\n        if (!fontData.cache[index + 1]) {\n          var tHelper = fontData.helper; //Canvas version\n          //fontData.cache[index] = tHelper.measureText(char).width / 100;\n          //SVG version\n          //console.log(tHelper.getBBox().width)\n\n          if (char === ' ') {\n            tHelper.textContent = '|' + char + '|';\n            var doubleSize = tHelper.getComputedTextLength();\n            tHelper.textContent = '||';\n            var singleSize = tHelper.getComputedTextLength();\n            fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\n          } else {\n            tHelper.textContent = char;\n            fontData.cache[index + 1] = tHelper.getComputedTextLength() / 100;\n          }\n        }\n\n        return fontData.cache[index + 1] * size;\n      }\n\n      function getFontByName(name) {\n        var i = 0,\n            len = this.fonts.length;\n\n        while (i < len) {\n          if (this.fonts[i].fName === name) {\n            return this.fonts[i];\n          }\n\n          i += 1;\n        }\n\n        return this.fonts[0];\n      }\n\n      function getCombinedCharacterCodes() {\n        return combinedCharacters;\n      }\n\n      function loaded() {\n        return this.isLoaded;\n      }\n\n      var Font = function Font() {\n        this.fonts = [];\n        this.chars = null;\n        this.typekitLoaded = 0;\n        this.isLoaded = false;\n        this.initTime = Date.now();\n      }; //TODO: for now I'm adding these methods to the Class and not the prototype. Think of a better way to implement it. \n\n\n      Font.getCombinedCharacterCodes = getCombinedCharacterCodes;\n      Font.prototype.addChars = addChars;\n      Font.prototype.addFonts = addFonts;\n      Font.prototype.getCharData = getCharData;\n      Font.prototype.getFontByName = getFontByName;\n      Font.prototype.measureText = measureText;\n      Font.prototype.checkLoadedFonts = checkLoadedFonts;\n      Font.prototype.loaded = loaded;\n      return Font;\n    }();\n\n    var PropertyFactory = function () {\n      var initFrame = initialDefaultFrame;\n      var math_abs = Math.abs;\n\n      function interpolateValue(frameNum, caching) {\n        var offsetTime = this.offsetTime;\n        var newValue;\n\n        if (this.propType === 'multidimensional') {\n          newValue = createTypedArray('float32', this.pv.length);\n        }\n\n        var iterationIndex = caching.lastIndex;\n        var i = iterationIndex;\n        var len = this.keyframes.length - 1,\n            flag = true;\n        var keyData, nextKeyData;\n\n        while (flag) {\n          keyData = this.keyframes[i];\n          nextKeyData = this.keyframes[i + 1];\n\n          if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\n            if (keyData.h) {\n              keyData = nextKeyData;\n            }\n\n            iterationIndex = 0;\n            break;\n          }\n\n          if (nextKeyData.t - offsetTime > frameNum) {\n            iterationIndex = i;\n            break;\n          }\n\n          if (i < len - 1) {\n            i += 1;\n          } else {\n            iterationIndex = 0;\n            flag = false;\n          }\n        }\n\n        var k, kLen, perc, jLen, j, fnc;\n        var nextKeyTime = nextKeyData.t - offsetTime;\n        var keyTime = keyData.t - offsetTime;\n        var endValue;\n\n        if (keyData.to) {\n          if (!keyData.bezierData) {\n            keyData.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\n          }\n\n          var bezierData = keyData.bezierData;\n\n          if (frameNum >= nextKeyTime || frameNum < keyTime) {\n            var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\n            kLen = bezierData.points[ind].point.length;\n\n            for (k = 0; k < kLen; k += 1) {\n              newValue[k] = bezierData.points[ind].point[k];\n            } // caching._lastKeyframeIndex = -1;\n\n          } else {\n            if (keyData.__fnct) {\n              fnc = keyData.__fnct;\n            } else {\n              fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\n              keyData.__fnct = fnc;\n            }\n\n            perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n            var distanceInLine = bezierData.segmentLength * perc;\n            var segmentPerc;\n            var addedLength = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastAddedLength : 0;\n            j = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastPoint : 0;\n            flag = true;\n            jLen = bezierData.points.length;\n\n            while (flag) {\n              addedLength += bezierData.points[j].partialLength;\n\n              if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\n                kLen = bezierData.points[j].point.length;\n\n                for (k = 0; k < kLen; k += 1) {\n                  newValue[k] = bezierData.points[j].point[k];\n                }\n\n                break;\n              } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\n                segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\n                kLen = bezierData.points[j].point.length;\n\n                for (k = 0; k < kLen; k += 1) {\n                  newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\n                }\n\n                break;\n              }\n\n              if (j < jLen - 1) {\n                j += 1;\n              } else {\n                flag = false;\n              }\n            }\n\n            caching._lastPoint = j;\n            caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\n            caching._lastKeyframeIndex = i;\n          }\n        } else {\n          var outX, outY, inX, inY, keyValue;\n          len = keyData.s.length;\n          endValue = nextKeyData.s || keyData.e;\n\n          if (this.sh && keyData.h !== 1) {\n            if (frameNum >= nextKeyTime) {\n              newValue[0] = endValue[0];\n              newValue[1] = endValue[1];\n              newValue[2] = endValue[2];\n            } else if (frameNum <= keyTime) {\n              newValue[0] = keyData.s[0];\n              newValue[1] = keyData.s[1];\n              newValue[2] = keyData.s[2];\n            } else {\n              var quatStart = createQuaternion(keyData.s);\n              var quatEnd = createQuaternion(endValue);\n              var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\n              quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\n            }\n          } else {\n            for (i = 0; i < len; i += 1) {\n              if (keyData.h !== 1) {\n                if (frameNum >= nextKeyTime) {\n                  perc = 1;\n                } else if (frameNum < keyTime) {\n                  perc = 0;\n                } else {\n                  if (keyData.o.x.constructor === Array) {\n                    if (!keyData.__fnct) {\n                      keyData.__fnct = [];\n                    }\n\n                    if (!keyData.__fnct[i]) {\n                      outX = typeof keyData.o.x[i] === 'undefined' ? keyData.o.x[0] : keyData.o.x[i];\n                      outY = typeof keyData.o.y[i] === 'undefined' ? keyData.o.y[0] : keyData.o.y[i];\n                      inX = typeof keyData.i.x[i] === 'undefined' ? keyData.i.x[0] : keyData.i.x[i];\n                      inY = typeof keyData.i.y[i] === 'undefined' ? keyData.i.y[0] : keyData.i.y[i];\n                      fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                      keyData.__fnct[i] = fnc;\n                    } else {\n                      fnc = keyData.__fnct[i];\n                    }\n                  } else {\n                    if (!keyData.__fnct) {\n                      outX = keyData.o.x;\n                      outY = keyData.o.y;\n                      inX = keyData.i.x;\n                      inY = keyData.i.y;\n                      fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                      keyData.__fnct = fnc;\n                    } else {\n                      fnc = keyData.__fnct;\n                    }\n                  }\n\n                  perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n                }\n              }\n\n              endValue = nextKeyData.s || keyData.e;\n              keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\n\n              if (len === 1) {\n                newValue = keyValue;\n              } else {\n                newValue[i] = keyValue;\n              }\n            }\n          }\n        }\n\n        caching.lastIndex = iterationIndex;\n        return newValue;\n      } //based on @Toji's https://github.com/toji/gl-matrix/\n\n\n      function slerp(a, b, t) {\n        var out = [];\n        var ax = a[0],\n            ay = a[1],\n            az = a[2],\n            aw = a[3],\n            bx = b[0],\n            by = b[1],\n            bz = b[2],\n            bw = b[3];\n        var omega, cosom, sinom, scale0, scale1;\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\n\n        if (cosom < 0.0) {\n          cosom = -cosom;\n          bx = -bx;\n          by = -by;\n          bz = -bz;\n          bw = -bw;\n        }\n\n        if (1.0 - cosom > 0.000001) {\n          omega = Math.acos(cosom);\n          sinom = Math.sin(omega);\n          scale0 = Math.sin((1.0 - t) * omega) / sinom;\n          scale1 = Math.sin(t * omega) / sinom;\n        } else {\n          scale0 = 1.0 - t;\n          scale1 = t;\n        }\n\n        out[0] = scale0 * ax + scale1 * bx;\n        out[1] = scale0 * ay + scale1 * by;\n        out[2] = scale0 * az + scale1 * bz;\n        out[3] = scale0 * aw + scale1 * bw;\n        return out;\n      }\n\n      function quaternionToEuler(out, quat) {\n        var qx = quat[0];\n        var qy = quat[1];\n        var qz = quat[2];\n        var qw = quat[3];\n        var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\n        var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\n        var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\n        out[0] = heading / degToRads;\n        out[1] = attitude / degToRads;\n        out[2] = bank / degToRads;\n      }\n\n      function createQuaternion(values) {\n        var heading = values[0] * degToRads;\n        var attitude = values[1] * degToRads;\n        var bank = values[2] * degToRads;\n        var c1 = Math.cos(heading / 2);\n        var c2 = Math.cos(attitude / 2);\n        var c3 = Math.cos(bank / 2);\n        var s1 = Math.sin(heading / 2);\n        var s2 = Math.sin(attitude / 2);\n        var s3 = Math.sin(bank / 2);\n        var w = c1 * c2 * c3 - s1 * s2 * s3;\n        var x = s1 * s2 * c3 + c1 * c2 * s3;\n        var y = s1 * c2 * c3 + c1 * s2 * s3;\n        var z = c1 * s2 * c3 - s1 * c2 * s3;\n        return [x, y, z, w];\n      }\n\n      function getValueAtCurrentTime() {\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\n        var initTime = this.keyframes[0].t - this.offsetTime;\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n\n        if (!(frameNum === this._caching.lastFrame || this._caching.lastFrame !== initFrame && (this._caching.lastFrame >= endTime && frameNum >= endTime || this._caching.lastFrame < initTime && frameNum < initTime))) {\n          if (this._caching.lastFrame >= frameNum) {\n            this._caching._lastKeyframeIndex = -1;\n            this._caching.lastIndex = 0;\n          }\n\n          var renderResult = this.interpolateValue(frameNum, this._caching);\n          this.pv = renderResult;\n        }\n\n        this._caching.lastFrame = frameNum;\n        return this.pv;\n      }\n\n      function setVValue(val) {\n        var multipliedValue;\n\n        if (this.propType === 'unidimensional') {\n          multipliedValue = val * this.mult;\n\n          if (math_abs(this.v - multipliedValue) > 0.00001) {\n            this.v = multipliedValue;\n            this._mdf = true;\n          }\n        } else {\n          var i = 0,\n              len = this.v.length;\n\n          while (i < len) {\n            multipliedValue = val[i] * this.mult;\n\n            if (math_abs(this.v[i] - multipliedValue) > 0.00001) {\n              this.v[i] = multipliedValue;\n              this._mdf = true;\n            }\n\n            i += 1;\n          }\n        }\n      }\n\n      function processEffectsSequence() {\n        if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\n          return;\n        }\n\n        if (this.lock) {\n          this.setVValue(this.pv);\n          return;\n        }\n\n        this.lock = true;\n        this._mdf = this._isFirstFrame;\n        var i,\n            len = this.effectsSequence.length;\n        var finalValue = this.kf ? this.pv : this.data.k;\n\n        for (i = 0; i < len; i += 1) {\n          finalValue = this.effectsSequence[i](finalValue);\n        }\n\n        this.setVValue(finalValue);\n        this._isFirstFrame = false;\n        this.lock = false;\n        this.frameId = this.elem.globalData.frameId;\n      }\n\n      function addEffect(effectFunction) {\n        this.effectsSequence.push(effectFunction);\n        this.container.addDynamicProperty(this);\n      }\n\n      function ValueProperty(elem, data, mult, container) {\n        this.propType = 'unidimensional';\n        this.mult = mult || 1;\n        this.data = data;\n        this.v = mult ? data.k * mult : data.k;\n        this.pv = data.k;\n        this._mdf = false;\n        this.elem = elem;\n        this.container = container;\n        this.comp = elem.comp;\n        this.k = false;\n        this.kf = false;\n        this.vel = 0;\n        this.effectsSequence = [];\n        this._isFirstFrame = true;\n        this.getValue = processEffectsSequence;\n        this.setVValue = setVValue;\n        this.addEffect = addEffect;\n      }\n\n      function MultiDimensionalProperty(elem, data, mult, container) {\n        this.propType = 'multidimensional';\n        this.mult = mult || 1;\n        this.data = data;\n        this._mdf = false;\n        this.elem = elem;\n        this.container = container;\n        this.comp = elem.comp;\n        this.k = false;\n        this.kf = false;\n        this.frameId = -1;\n        var i,\n            len = data.k.length;\n        this.v = createTypedArray('float32', len);\n        this.pv = createTypedArray('float32', len);\n        var arr = createTypedArray('float32', len);\n        this.vel = createTypedArray('float32', len);\n\n        for (i = 0; i < len; i += 1) {\n          this.v[i] = data.k[i] * this.mult;\n          this.pv[i] = data.k[i];\n        }\n\n        this._isFirstFrame = true;\n        this.effectsSequence = [];\n        this.getValue = processEffectsSequence;\n        this.setVValue = setVValue;\n        this.addEffect = addEffect;\n      }\n\n      function KeyframedValueProperty(elem, data, mult, container) {\n        this.propType = 'unidimensional';\n        this.keyframes = data.k;\n        this.offsetTime = elem.data.st;\n        this.frameId = -1;\n        this._caching = {\n          lastFrame: initFrame,\n          lastIndex: 0,\n          value: 0,\n          _lastKeyframeIndex: -1\n        };\n        this.k = true;\n        this.kf = true;\n        this.data = data;\n        this.mult = mult || 1;\n        this.elem = elem;\n        this.container = container;\n        this.comp = elem.comp;\n        this.v = initFrame;\n        this.pv = initFrame;\n        this._isFirstFrame = true;\n        this.getValue = processEffectsSequence;\n        this.setVValue = setVValue;\n        this.interpolateValue = interpolateValue;\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n        this.addEffect = addEffect;\n      }\n\n      function KeyframedMultidimensionalProperty(elem, data, mult, container) {\n        this.propType = 'multidimensional';\n        var i,\n            len = data.k.length;\n        var s, e, to, ti;\n\n        for (i = 0; i < len - 1; i += 1) {\n          if (data.k[i].to && data.k[i].s && data.k[i].e) {\n            s = data.k[i].s;\n            e = data.k[i].e;\n            to = data.k[i].to;\n            ti = data.k[i].ti;\n\n            if (s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1]) || s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2])) {\n              data.k[i].to = null;\n              data.k[i].ti = null;\n            }\n\n            if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\n              if (s.length === 2 || s[2] === e[2] && to[2] === 0 && ti[2] === 0) {\n                data.k[i].to = null;\n                data.k[i].ti = null;\n              }\n            }\n          }\n        }\n\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n        this.keyframes = data.k;\n        this.offsetTime = elem.data.st;\n        this.k = true;\n        this.kf = true;\n        this._isFirstFrame = true;\n        this.mult = mult || 1;\n        this.elem = elem;\n        this.container = container;\n        this.comp = elem.comp;\n        this.getValue = processEffectsSequence;\n        this.setVValue = setVValue;\n        this.interpolateValue = interpolateValue;\n        this.frameId = -1;\n        var arrLen = data.k[0].s.length;\n        this.v = createTypedArray('float32', arrLen);\n        this.pv = createTypedArray('float32', arrLen);\n\n        for (i = 0; i < arrLen; i += 1) {\n          this.v[i] = initFrame;\n          this.pv[i] = initFrame;\n        }\n\n        this._caching = {\n          lastFrame: initFrame,\n          lastIndex: 0,\n          value: createTypedArray('float32', arrLen)\n        };\n        this.addEffect = addEffect;\n      }\n\n      function getProp(elem, data, type, mult, container) {\n        var p;\n\n        if (!data.k.length) {\n          p = new ValueProperty(elem, data, mult, container);\n        } else if (typeof data.k[0] === 'number') {\n          p = new MultiDimensionalProperty(elem, data, mult, container);\n        } else {\n          switch (type) {\n            case 0:\n              p = new KeyframedValueProperty(elem, data, mult, container);\n              break;\n\n            case 1:\n              p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\n              break;\n          }\n        }\n\n        if (p.effectsSequence.length) {\n          container.addDynamicProperty(p);\n        }\n\n        return p;\n      }\n\n      var ob = {\n        getProp: getProp\n      };\n      return ob;\n    }();\n\n    var TransformPropertyFactory = function () {\n      function applyToMatrix(mat) {\n        var _mdf = this._mdf;\n        this.iterateDynamicProperties();\n        this._mdf = this._mdf || _mdf;\n\n        if (this.a) {\n          mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n        }\n\n        if (this.s) {\n          mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n        }\n\n        if (this.sk) {\n          mat.skewFromAxis(-this.sk.v, this.sa.v);\n        }\n\n        if (this.r) {\n          mat.rotate(-this.r.v);\n        } else {\n          mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n        }\n\n        if (this.data.p.s) {\n          if (this.data.p.z) {\n            mat.translate(this.px.v, this.py.v, -this.pz.v);\n          } else {\n            mat.translate(this.px.v, this.py.v, 0);\n          }\n        } else {\n          mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n        }\n      }\n\n      function processKeys(forceRender) {\n        if (this.elem.globalData.frameId === this.frameId) {\n          return;\n        }\n\n        if (this._isDirty) {\n          this.precalculateMatrix();\n          this._isDirty = false;\n        }\n\n        this.iterateDynamicProperties();\n\n        if (this._mdf || forceRender) {\n          this.v.cloneFromProps(this.pre.props);\n\n          if (this.appliedTransformations < 1) {\n            this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n          }\n\n          if (this.appliedTransformations < 2) {\n            this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n          }\n\n          if (this.sk && this.appliedTransformations < 3) {\n            this.v.skewFromAxis(-this.sk.v, this.sa.v);\n          }\n\n          if (this.r && this.appliedTransformations < 4) {\n            this.v.rotate(-this.r.v);\n          } else if (!this.r && this.appliedTransformations < 4) {\n            this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n          }\n\n          if (this.autoOriented) {\n            var v1,\n                v2,\n                frameRate = this.elem.globalData.frameRate;\n\n            if (this.p && this.p.keyframes && this.p.getValueAtTime) {\n              if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\n                v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\n                v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\n              } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\n                v1 = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / frameRate, 0);\n                v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.01) / frameRate, 0);\n              } else {\n                v1 = this.p.pv;\n                v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\n              }\n            } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\n              v1 = [];\n              v2 = [];\n              var px = this.px,\n                  py = this.py,\n                  frameRate;\n\n              if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\n                v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\n                v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\n                v2[0] = px.getValueAtTime(px.keyframes[0].t / frameRate, 0);\n                v2[1] = py.getValueAtTime(py.keyframes[0].t / frameRate, 0);\n              } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\n                v1[0] = px.getValueAtTime(px.keyframes[px.keyframes.length - 1].t / frameRate, 0);\n                v1[1] = py.getValueAtTime(py.keyframes[py.keyframes.length - 1].t / frameRate, 0);\n                v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\n                v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\n              } else {\n                v1 = [px.pv, py.pv];\n                v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\n                v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\n              }\n            }\n\n            this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\n          }\n\n          if (this.data.p && this.data.p.s) {\n            if (this.data.p.z) {\n              this.v.translate(this.px.v, this.py.v, -this.pz.v);\n            } else {\n              this.v.translate(this.px.v, this.py.v, 0);\n            }\n          } else {\n            this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n          }\n        }\n\n        this.frameId = this.elem.globalData.frameId;\n      }\n\n      function precalculateMatrix() {\n        if (!this.a.k) {\n          this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n          this.appliedTransformations = 1;\n        } else {\n          return;\n        }\n\n        if (!this.s.effectsSequence.length) {\n          this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n          this.appliedTransformations = 2;\n        } else {\n          return;\n        }\n\n        if (this.sk) {\n          if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\n            this.pre.skewFromAxis(-this.sk.v, this.sa.v);\n            this.appliedTransformations = 3;\n          } else {\n            return;\n          }\n        }\n\n        if (this.r) {\n          if (!this.r.effectsSequence.length) {\n            this.pre.rotate(-this.r.v);\n            this.appliedTransformations = 4;\n          } else {\n            return;\n          }\n        } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\n          this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n          this.appliedTransformations = 4;\n        }\n      }\n\n      function autoOrient() {//\n        //var prevP = this.getValueAtTime();\n      }\n\n      function addDynamicProperty(prop) {\n        this._addDynamicProperty(prop);\n\n        this.elem.addDynamicProperty(prop);\n        this._isDirty = true;\n      }\n\n      function TransformProperty(elem, data, container) {\n        this.elem = elem;\n        this.frameId = -1;\n        this.propType = 'transform';\n        this.data = data;\n        this.v = new Matrix(); //Precalculated matrix with non animated properties\n\n        this.pre = new Matrix();\n        this.appliedTransformations = 0;\n        this.initDynamicPropertyContainer(container || elem);\n\n        if (data.p && data.p.s) {\n          this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\n          this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\n\n          if (data.p.z) {\n            this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\n          }\n        } else {\n          this.p = PropertyFactory.getProp(elem, data.p || {\n            k: [0, 0, 0]\n          }, 1, 0, this);\n        }\n\n        if (data.rx) {\n          this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\n          this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\n          this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\n\n          if (data.or.k[0].ti) {\n            var i,\n                len = data.or.k.length;\n\n            for (i = 0; i < len; i += 1) {\n              data.or.k[i].to = data.or.k[i].ti = null;\n            }\n          }\n\n          this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this); //sh Indicates it needs to be capped between -180 and 180\n\n          this.or.sh = true;\n        } else {\n          this.r = PropertyFactory.getProp(elem, data.r || {\n            k: 0\n          }, 0, degToRads, this);\n        }\n\n        if (data.sk) {\n          this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\n          this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\n        }\n\n        this.a = PropertyFactory.getProp(elem, data.a || {\n          k: [0, 0, 0]\n        }, 1, 0, this);\n        this.s = PropertyFactory.getProp(elem, data.s || {\n          k: [100, 100, 100]\n        }, 1, 0.01, this); // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\n\n        if (data.o) {\n          this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\n        } else {\n          this.o = {\n            _mdf: false,\n            v: 1\n          };\n        }\n\n        this._isDirty = true;\n\n        if (!this.dynamicProperties.length) {\n          this.getValue(true);\n        }\n      }\n\n      TransformProperty.prototype = {\n        applyToMatrix: applyToMatrix,\n        getValue: processKeys,\n        precalculateMatrix: precalculateMatrix,\n        autoOrient: autoOrient\n      };\n      extendPrototype([DynamicPropertyContainer], TransformProperty);\n      TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\n      TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\n\n      function getTransformProperty(elem, data, container) {\n        return new TransformProperty(elem, data, container);\n      }\n\n      return {\n        getTransformProperty: getTransformProperty\n      };\n    }();\n\n    function ShapePath() {\n      this.c = false;\n      this._length = 0;\n      this._maxLength = 8;\n      this.v = createSizedArray(this._maxLength);\n      this.o = createSizedArray(this._maxLength);\n      this.i = createSizedArray(this._maxLength);\n    }\n\n    ShapePath.prototype.setPathData = function (closed, len) {\n      this.c = closed;\n      this.setLength(len);\n      var i = 0;\n\n      while (i < len) {\n        this.v[i] = point_pool.newElement();\n        this.o[i] = point_pool.newElement();\n        this.i[i] = point_pool.newElement();\n        i += 1;\n      }\n    };\n\n    ShapePath.prototype.setLength = function (len) {\n      while (this._maxLength < len) {\n        this.doubleArrayLength();\n      }\n\n      this._length = len;\n    };\n\n    ShapePath.prototype.doubleArrayLength = function () {\n      this.v = this.v.concat(createSizedArray(this._maxLength));\n      this.i = this.i.concat(createSizedArray(this._maxLength));\n      this.o = this.o.concat(createSizedArray(this._maxLength));\n      this._maxLength *= 2;\n    };\n\n    ShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\n      var arr;\n      this._length = Math.max(this._length, pos + 1);\n\n      if (this._length >= this._maxLength) {\n        this.doubleArrayLength();\n      }\n\n      switch (type) {\n        case 'v':\n          arr = this.v;\n          break;\n\n        case 'i':\n          arr = this.i;\n          break;\n\n        case 'o':\n          arr = this.o;\n          break;\n      }\n\n      if (!arr[pos] || arr[pos] && !replace) {\n        arr[pos] = point_pool.newElement();\n      }\n\n      arr[pos][0] = x;\n      arr[pos][1] = y;\n    };\n\n    ShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\n      this.setXYAt(vX, vY, 'v', pos, replace);\n      this.setXYAt(oX, oY, 'o', pos, replace);\n      this.setXYAt(iX, iY, 'i', pos, replace);\n    };\n\n    ShapePath.prototype.reverse = function () {\n      var newPath = new ShapePath();\n      newPath.setPathData(this.c, this._length);\n      var vertices = this.v,\n          outPoints = this.o,\n          inPoints = this.i;\n      var init = 0;\n\n      if (this.c) {\n        newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\n        init = 1;\n      }\n\n      var cnt = this._length - 1;\n      var len = this._length;\n      var i;\n\n      for (i = init; i < len; i += 1) {\n        newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\n        cnt -= 1;\n      }\n\n      return newPath;\n    };\n\n    var ShapePropertyFactory = function () {\n      var initFrame = -999999;\n\n      function interpolateShape(frameNum, previousValue, caching) {\n        var iterationIndex = caching.lastIndex;\n        var keyPropS, keyPropE, isHold, j, k, jLen, kLen, perc, vertexValue;\n        var kf = this.keyframes;\n\n        if (frameNum < kf[0].t - this.offsetTime) {\n          keyPropS = kf[0].s[0];\n          isHold = true;\n          iterationIndex = 0;\n        } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\n          keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\n          /*if(kf[kf.length - 1].s){\r\n              keyPropS = kf[kf.length - 1].s[0];\r\n          }else{\r\n              keyPropS = kf[kf.length - 2].e[0];\r\n          }*/\n\n          isHold = true;\n        } else {\n          var i = iterationIndex;\n          var len = kf.length - 1,\n              flag = true,\n              keyData,\n              nextKeyData;\n\n          while (flag) {\n            keyData = kf[i];\n            nextKeyData = kf[i + 1];\n\n            if (nextKeyData.t - this.offsetTime > frameNum) {\n              break;\n            }\n\n            if (i < len - 1) {\n              i += 1;\n            } else {\n              flag = false;\n            }\n          }\n\n          isHold = keyData.h === 1;\n          iterationIndex = i;\n\n          if (!isHold) {\n            if (frameNum >= nextKeyData.t - this.offsetTime) {\n              perc = 1;\n            } else if (frameNum < keyData.t - this.offsetTime) {\n              perc = 0;\n            } else {\n              var fnc;\n\n              if (keyData.__fnct) {\n                fnc = keyData.__fnct;\n              } else {\n                fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\n                keyData.__fnct = fnc;\n              }\n\n              perc = fnc((frameNum - (keyData.t - this.offsetTime)) / (nextKeyData.t - this.offsetTime - (keyData.t - this.offsetTime)));\n            }\n\n            keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\n          }\n\n          keyPropS = keyData.s[0];\n        }\n\n        jLen = previousValue._length;\n        kLen = keyPropS.i[0].length;\n        caching.lastIndex = iterationIndex;\n\n        for (j = 0; j < jLen; j += 1) {\n          for (k = 0; k < kLen; k += 1) {\n            vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\n            previousValue.i[j][k] = vertexValue;\n            vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\n            previousValue.o[j][k] = vertexValue;\n            vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\n            previousValue.v[j][k] = vertexValue;\n          }\n        }\n      }\n\n      function interpolateShapeCurrentTime() {\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\n        var initTime = this.keyframes[0].t - this.offsetTime;\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n        var lastFrame = this._caching.lastFrame;\n\n        if (!(lastFrame !== initFrame && (lastFrame < initTime && frameNum < initTime || lastFrame > endTime && frameNum > endTime))) {\n          ////\n          this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\n          this.interpolateShape(frameNum, this.pv, this._caching); ////\n        }\n\n        this._caching.lastFrame = frameNum;\n        return this.pv;\n      }\n\n      function resetShape() {\n        this.paths = this.localShapeCollection;\n      }\n\n      function shapesEqual(shape1, shape2) {\n        if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\n          return false;\n        }\n\n        var i,\n            len = shape1._length;\n\n        for (i = 0; i < len; i += 1) {\n          if (shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]) {\n            return false;\n          }\n        }\n\n        return true;\n      }\n\n      function setVValue(newPath) {\n        if (!shapesEqual(this.v, newPath)) {\n          this.v = shape_pool.clone(newPath);\n          this.localShapeCollection.releaseShapes();\n          this.localShapeCollection.addShape(this.v);\n          this._mdf = true;\n          this.paths = this.localShapeCollection;\n        }\n      }\n\n      function processEffectsSequence() {\n        if (this.elem.globalData.frameId === this.frameId) {\n          return;\n        } else if (!this.effectsSequence.length) {\n          this._mdf = false;\n          return;\n        }\n\n        if (this.lock) {\n          this.setVValue(this.pv);\n          return;\n        }\n\n        this.lock = true;\n        this._mdf = false;\n        var finalValue = this.kf ? this.pv : this.data.ks ? this.data.ks.k : this.data.pt.k;\n        var i,\n            len = this.effectsSequence.length;\n\n        for (i = 0; i < len; i += 1) {\n          finalValue = this.effectsSequence[i](finalValue);\n        }\n\n        this.setVValue(finalValue);\n        this.lock = false;\n        this.frameId = this.elem.globalData.frameId;\n      }\n\n      function ShapeProperty(elem, data, type) {\n        this.propType = 'shape';\n        this.comp = elem.comp;\n        this.container = elem;\n        this.elem = elem;\n        this.data = data;\n        this.k = false;\n        this.kf = false;\n        this._mdf = false;\n        var pathData = type === 3 ? data.pt.k : data.ks.k;\n        this.v = shape_pool.clone(pathData);\n        this.pv = shape_pool.clone(this.v);\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\n        this.paths = this.localShapeCollection;\n        this.paths.addShape(this.v);\n        this.reset = resetShape;\n        this.effectsSequence = [];\n      }\n\n      function addEffect(effectFunction) {\n        this.effectsSequence.push(effectFunction);\n        this.container.addDynamicProperty(this);\n      }\n\n      ShapeProperty.prototype.interpolateShape = interpolateShape;\n      ShapeProperty.prototype.getValue = processEffectsSequence;\n      ShapeProperty.prototype.setVValue = setVValue;\n      ShapeProperty.prototype.addEffect = addEffect;\n\n      function KeyframedShapeProperty(elem, data, type) {\n        this.propType = 'shape';\n        this.comp = elem.comp;\n        this.elem = elem;\n        this.container = elem;\n        this.offsetTime = elem.data.st;\n        this.keyframes = type === 3 ? data.pt.k : data.ks.k;\n        this.k = true;\n        this.kf = true;\n        var len = this.keyframes[0].s[0].i.length;\n        var jLen = this.keyframes[0].s[0].i[0].length;\n        this.v = shape_pool.newElement();\n        this.v.setPathData(this.keyframes[0].s[0].c, len);\n        this.pv = shape_pool.clone(this.v);\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\n        this.paths = this.localShapeCollection;\n        this.paths.addShape(this.v);\n        this.lastFrame = initFrame;\n        this.reset = resetShape;\n        this._caching = {\n          lastFrame: initFrame,\n          lastIndex: 0\n        };\n        this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\n      }\n\n      KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\n      KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\n      KeyframedShapeProperty.prototype.setVValue = setVValue;\n      KeyframedShapeProperty.prototype.addEffect = addEffect;\n\n      var EllShapeProperty = function () {\n        var cPoint = roundCorner;\n\n        function EllShapeProperty(elem, data) {\n          /*this.v = {\r\n              v: createSizedArray(4),\r\n              i: createSizedArray(4),\r\n              o: createSizedArray(4),\r\n              c: true\r\n          };*/\n          this.v = shape_pool.newElement();\n          this.v.setPathData(true, 4);\n          this.localShapeCollection = shapeCollection_pool.newShapeCollection();\n          this.paths = this.localShapeCollection;\n          this.localShapeCollection.addShape(this.v);\n          this.d = data.d;\n          this.elem = elem;\n          this.comp = elem.comp;\n          this.frameId = -1;\n          this.initDynamicPropertyContainer(elem);\n          this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n          this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n\n          if (this.dynamicProperties.length) {\n            this.k = true;\n          } else {\n            this.k = false;\n            this.convertEllToPath();\n          }\n        }\n\n        EllShapeProperty.prototype = {\n          reset: resetShape,\n          getValue: function getValue() {\n            if (this.elem.globalData.frameId === this.frameId) {\n              return;\n            }\n\n            this.frameId = this.elem.globalData.frameId;\n            this.iterateDynamicProperties();\n\n            if (this._mdf) {\n              this.convertEllToPath();\n            }\n          },\n          convertEllToPath: function convertEllToPath() {\n            var p0 = this.p.v[0],\n                p1 = this.p.v[1],\n                s0 = this.s.v[0] / 2,\n                s1 = this.s.v[1] / 2;\n\n            var _cw = this.d !== 3;\n\n            var _v = this.v;\n            _v.v[0][0] = p0;\n            _v.v[0][1] = p1 - s1;\n            _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\n            _v.v[1][1] = p1;\n            _v.v[2][0] = p0;\n            _v.v[2][1] = p1 + s1;\n            _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\n            _v.v[3][1] = p1;\n            _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n            _v.i[0][1] = p1 - s1;\n            _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\n            _v.i[1][1] = p1 - s1 * cPoint;\n            _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n            _v.i[2][1] = p1 + s1;\n            _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\n            _v.i[3][1] = p1 + s1 * cPoint;\n            _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n            _v.o[0][1] = p1 - s1;\n            _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\n            _v.o[1][1] = p1 + s1 * cPoint;\n            _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n            _v.o[2][1] = p1 + s1;\n            _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\n            _v.o[3][1] = p1 - s1 * cPoint;\n          }\n        };\n        extendPrototype([DynamicPropertyContainer], EllShapeProperty);\n        return EllShapeProperty;\n      }();\n\n      var StarShapeProperty = function () {\n        function StarShapeProperty(elem, data) {\n          this.v = shape_pool.newElement();\n          this.v.setPathData(true, 0);\n          this.elem = elem;\n          this.comp = elem.comp;\n          this.data = data;\n          this.frameId = -1;\n          this.d = data.d;\n          this.initDynamicPropertyContainer(elem);\n\n          if (data.sy === 1) {\n            this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\n            this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\n            this.convertToPath = this.convertStarToPath;\n          } else {\n            this.convertToPath = this.convertPolygonToPath;\n          }\n\n          this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\n          this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n          this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\n          this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\n          this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\n          this.localShapeCollection = shapeCollection_pool.newShapeCollection();\n          this.localShapeCollection.addShape(this.v);\n          this.paths = this.localShapeCollection;\n\n          if (this.dynamicProperties.length) {\n            this.k = true;\n          } else {\n            this.k = false;\n            this.convertToPath();\n          }\n        }\n\n        StarShapeProperty.prototype = {\n          reset: resetShape,\n          getValue: function getValue() {\n            if (this.elem.globalData.frameId === this.frameId) {\n              return;\n            }\n\n            this.frameId = this.elem.globalData.frameId;\n            this.iterateDynamicProperties();\n\n            if (this._mdf) {\n              this.convertToPath();\n            }\n          },\n          convertStarToPath: function convertStarToPath() {\n            var numPts = Math.floor(this.pt.v) * 2;\n            var angle = Math.PI * 2 / numPts;\n            /*this.v.v.length = numPts;\r\n            this.v.i.length = numPts;\r\n            this.v.o.length = numPts;*/\n\n            var longFlag = true;\n            var longRad = this.or.v;\n            var shortRad = this.ir.v;\n            var longRound = this.os.v;\n            var shortRound = this.is.v;\n            var longPerimSegment = 2 * Math.PI * longRad / (numPts * 2);\n            var shortPerimSegment = 2 * Math.PI * shortRad / (numPts * 2);\n            var i,\n                rad,\n                roundness,\n                perimSegment,\n                currentAng = -Math.PI / 2;\n            currentAng += this.r.v;\n            var dir = this.data.d === 3 ? -1 : 1;\n            this.v._length = 0;\n\n            for (i = 0; i < numPts; i += 1) {\n              rad = longFlag ? longRad : shortRad;\n              roundness = longFlag ? longRound : shortRound;\n              perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\n              var x = rad * Math.cos(currentAng);\n              var y = rad * Math.sin(currentAng);\n              var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n              var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n              x += +this.p.v[0];\n              y += +this.p.v[1];\n              this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n              /*this.v.v[i] = [x,y];\r\n              this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n              this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n              this.v._length = numPts;*/\n\n              longFlag = !longFlag;\n              currentAng += angle * dir;\n            }\n          },\n          convertPolygonToPath: function convertPolygonToPath() {\n            var numPts = Math.floor(this.pt.v);\n            var angle = Math.PI * 2 / numPts;\n            var rad = this.or.v;\n            var roundness = this.os.v;\n            var perimSegment = 2 * Math.PI * rad / (numPts * 4);\n            var i,\n                currentAng = -Math.PI / 2;\n            var dir = this.data.d === 3 ? -1 : 1;\n            currentAng += this.r.v;\n            this.v._length = 0;\n\n            for (i = 0; i < numPts; i += 1) {\n              var x = rad * Math.cos(currentAng);\n              var y = rad * Math.sin(currentAng);\n              var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n              var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n              x += +this.p.v[0];\n              y += +this.p.v[1];\n              this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n              currentAng += angle * dir;\n            }\n\n            this.paths.length = 0;\n            this.paths[0] = this.v;\n          }\n        };\n        extendPrototype([DynamicPropertyContainer], StarShapeProperty);\n        return StarShapeProperty;\n      }();\n\n      var RectShapeProperty = function () {\n        function RectShapeProperty(elem, data) {\n          this.v = shape_pool.newElement();\n          this.v.c = true;\n          this.localShapeCollection = shapeCollection_pool.newShapeCollection();\n          this.localShapeCollection.addShape(this.v);\n          this.paths = this.localShapeCollection;\n          this.elem = elem;\n          this.comp = elem.comp;\n          this.frameId = -1;\n          this.d = data.d;\n          this.initDynamicPropertyContainer(elem);\n          this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n          this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n          this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\n\n          if (this.dynamicProperties.length) {\n            this.k = true;\n          } else {\n            this.k = false;\n            this.convertRectToPath();\n          }\n        }\n\n        RectShapeProperty.prototype = {\n          convertRectToPath: function convertRectToPath() {\n            var p0 = this.p.v[0],\n                p1 = this.p.v[1],\n                v0 = this.s.v[0] / 2,\n                v1 = this.s.v[1] / 2;\n            var round = bm_min(v0, v1, this.r.v);\n            var cPoint = round * (1 - roundCorner);\n            this.v._length = 0;\n\n            if (this.d === 2 || this.d === 1) {\n              this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\n              this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\n\n              if (round !== 0) {\n                this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\n                this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\n                this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\n                this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\n                this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\n                this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\n              } else {\n                this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\n                this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\n              }\n            } else {\n              this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\n\n              if (round !== 0) {\n                this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\n                this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\n                this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\n                this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\n                this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\n                this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\n                this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\n              } else {\n                this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\n                this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\n                this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\n              }\n            }\n          },\n          getValue: function getValue(frameNum) {\n            if (this.elem.globalData.frameId === this.frameId) {\n              return;\n            }\n\n            this.frameId = this.elem.globalData.frameId;\n            this.iterateDynamicProperties();\n\n            if (this._mdf) {\n              this.convertRectToPath();\n            }\n          },\n          reset: resetShape\n        };\n        extendPrototype([DynamicPropertyContainer], RectShapeProperty);\n        return RectShapeProperty;\n      }();\n\n      function getShapeProp(elem, data, type) {\n        var prop;\n\n        if (type === 3 || type === 4) {\n          var dataProp = type === 3 ? data.pt : data.ks;\n          var keys = dataProp.k;\n\n          if (keys.length) {\n            prop = new KeyframedShapeProperty(elem, data, type);\n          } else {\n            prop = new ShapeProperty(elem, data, type);\n          }\n        } else if (type === 5) {\n          prop = new RectShapeProperty(elem, data);\n        } else if (type === 6) {\n          prop = new EllShapeProperty(elem, data);\n        } else if (type === 7) {\n          prop = new StarShapeProperty(elem, data);\n        }\n\n        if (prop.k) {\n          elem.addDynamicProperty(prop);\n        }\n\n        return prop;\n      }\n\n      function getConstructorFunction() {\n        return ShapeProperty;\n      }\n\n      function getKeyframedConstructorFunction() {\n        return KeyframedShapeProperty;\n      }\n\n      var ob = {};\n      ob.getShapeProp = getShapeProp;\n      ob.getConstructorFunction = getConstructorFunction;\n      ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\n      return ob;\n    }();\n\n    var ShapeModifiers = function () {\n      var ob = {};\n      var modifiers = {};\n      ob.registerModifier = registerModifier;\n      ob.getModifier = getModifier;\n\n      function registerModifier(nm, factory) {\n        if (!modifiers[nm]) {\n          modifiers[nm] = factory;\n        }\n      }\n\n      function getModifier(nm, elem, data) {\n        return new modifiers[nm](elem, data);\n      }\n\n      return ob;\n    }();\n\n    function ShapeModifier() {}\n\n    ShapeModifier.prototype.initModifierProperties = function () {};\n\n    ShapeModifier.prototype.addShapeToModifier = function () {};\n\n    ShapeModifier.prototype.addShape = function (data) {\n      if (!this.closed) {\n        // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\n        data.sh.container.addDynamicProperty(data.sh);\n        var shapeData = {\n          shape: data.sh,\n          data: data,\n          localShapeCollection: shapeCollection_pool.newShapeCollection()\n        };\n        this.shapes.push(shapeData);\n        this.addShapeToModifier(shapeData);\n\n        if (this._isAnimated) {\n          data.setAsAnimated();\n        }\n      }\n    };\n\n    ShapeModifier.prototype.init = function (elem, data) {\n      this.shapes = [];\n      this.elem = elem;\n      this.initDynamicPropertyContainer(elem);\n      this.initModifierProperties(elem, data);\n      this.frameId = initialDefaultFrame;\n      this.closed = false;\n      this.k = false;\n\n      if (this.dynamicProperties.length) {\n        this.k = true;\n      } else {\n        this.getValue(true);\n      }\n    };\n\n    ShapeModifier.prototype.processKeys = function () {\n      if (this.elem.globalData.frameId === this.frameId) {\n        return;\n      }\n\n      this.frameId = this.elem.globalData.frameId;\n      this.iterateDynamicProperties();\n    };\n\n    extendPrototype([DynamicPropertyContainer], ShapeModifier);\n\n    function TrimModifier() {}\n\n    extendPrototype([ShapeModifier], TrimModifier);\n\n    TrimModifier.prototype.initModifierProperties = function (elem, data) {\n      this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\n      this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\n      this.sValue = 0;\n      this.eValue = 0;\n      this.getValue = this.processKeys;\n      this.m = data.m;\n      this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\n    };\n\n    TrimModifier.prototype.addShapeToModifier = function (shapeData) {\n      shapeData.pathsData = [];\n    };\n\n    TrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\n      var segments = [];\n\n      if (e <= 1) {\n        segments.push({\n          s: s,\n          e: e\n        });\n      } else if (s >= 1) {\n        segments.push({\n          s: s - 1,\n          e: e - 1\n        });\n      } else {\n        segments.push({\n          s: s,\n          e: 1\n        });\n        segments.push({\n          s: 0,\n          e: e - 1\n        });\n      }\n\n      var shapeSegments = [];\n      var i,\n          len = segments.length,\n          segmentOb;\n\n      for (i = 0; i < len; i += 1) {\n        segmentOb = segments[i];\n        if (segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength) ;else {\n          var shapeS, shapeE;\n\n          if (segmentOb.s * totalModifierLength <= addedLength) {\n            shapeS = 0;\n          } else {\n            shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\n          }\n\n          if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\n            shapeE = 1;\n          } else {\n            shapeE = (segmentOb.e * totalModifierLength - addedLength) / shapeLength;\n          }\n\n          shapeSegments.push([shapeS, shapeE]);\n        }\n      }\n\n      if (!shapeSegments.length) {\n        shapeSegments.push([0, 0]);\n      }\n\n      return shapeSegments;\n    };\n\n    TrimModifier.prototype.releasePathsData = function (pathsData) {\n      var i,\n          len = pathsData.length;\n\n      for (i = 0; i < len; i += 1) {\n        segments_length_pool.release(pathsData[i]);\n      }\n\n      pathsData.length = 0;\n      return pathsData;\n    };\n\n    TrimModifier.prototype.processShapes = function (_isFirstFrame) {\n      var s, e;\n\n      if (this._mdf || _isFirstFrame) {\n        var o = this.o.v % 360 / 360;\n\n        if (o < 0) {\n          o += 1;\n        }\n\n        s = (this.s.v > 1 ? 1 : this.s.v < 0 ? 0 : this.s.v) + o;\n        e = (this.e.v > 1 ? 1 : this.e.v < 0 ? 0 : this.e.v) + o;\n\n        if (s > e) {\n          var _s = s;\n          s = e;\n          e = _s;\n        }\n\n        s = Math.round(s * 10000) * 0.0001;\n        e = Math.round(e * 10000) * 0.0001;\n        this.sValue = s;\n        this.eValue = e;\n      } else {\n        s = this.sValue;\n        e = this.eValue;\n      }\n\n      var shapePaths;\n      var i,\n          len = this.shapes.length,\n          j,\n          jLen;\n      var pathsData,\n          pathData,\n          totalShapeLength,\n          totalModifierLength = 0;\n\n      if (e === s) {\n        for (i = 0; i < len; i += 1) {\n          this.shapes[i].localShapeCollection.releaseShapes();\n          this.shapes[i].shape._mdf = true;\n          this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\n        }\n      } else if (!(e === 1 && s === 0 || e === 0 && s === 1)) {\n        var segments = [],\n            shapeData,\n            localShapeCollection;\n\n        for (i = 0; i < len; i += 1) {\n          shapeData = this.shapes[i]; // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\n\n          if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\n            shapeData.shape.paths = shapeData.localShapeCollection;\n          } else {\n            shapePaths = shapeData.shape.paths;\n            jLen = shapePaths._length;\n            totalShapeLength = 0;\n\n            if (!shapeData.shape._mdf && shapeData.pathsData.length) {\n              totalShapeLength = shapeData.totalShapeLength;\n            } else {\n              pathsData = this.releasePathsData(shapeData.pathsData);\n\n              for (j = 0; j < jLen; j += 1) {\n                pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\n                pathsData.push(pathData);\n                totalShapeLength += pathData.totalLength;\n              }\n\n              shapeData.totalShapeLength = totalShapeLength;\n              shapeData.pathsData = pathsData;\n            }\n\n            totalModifierLength += totalShapeLength;\n            shapeData.shape._mdf = true;\n          }\n        }\n\n        var shapeS = s,\n            shapeE = e,\n            addedLength = 0,\n            edges;\n\n        for (i = len - 1; i >= 0; i -= 1) {\n          shapeData = this.shapes[i];\n\n          if (shapeData.shape._mdf) {\n            localShapeCollection = shapeData.localShapeCollection;\n            localShapeCollection.releaseShapes(); //if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\n\n            if (this.m === 2 && len > 1) {\n              edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\n              addedLength += shapeData.totalShapeLength;\n            } else {\n              edges = [[shapeS, shapeE]];\n            }\n\n            jLen = edges.length;\n\n            for (j = 0; j < jLen; j += 1) {\n              shapeS = edges[j][0];\n              shapeE = edges[j][1];\n              segments.length = 0;\n\n              if (shapeE <= 1) {\n                segments.push({\n                  s: shapeData.totalShapeLength * shapeS,\n                  e: shapeData.totalShapeLength * shapeE\n                });\n              } else if (shapeS >= 1) {\n                segments.push({\n                  s: shapeData.totalShapeLength * (shapeS - 1),\n                  e: shapeData.totalShapeLength * (shapeE - 1)\n                });\n              } else {\n                segments.push({\n                  s: shapeData.totalShapeLength * shapeS,\n                  e: shapeData.totalShapeLength\n                });\n                segments.push({\n                  s: 0,\n                  e: shapeData.totalShapeLength * (shapeE - 1)\n                });\n              }\n\n              var newShapesData = this.addShapes(shapeData, segments[0]);\n\n              if (segments[0].s !== segments[0].e) {\n                if (segments.length > 1) {\n                  var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\n\n                  if (lastShapeInCollection.c) {\n                    var lastShape = newShapesData.pop();\n                    this.addPaths(newShapesData, localShapeCollection);\n                    newShapesData = this.addShapes(shapeData, segments[1], lastShape);\n                  } else {\n                    this.addPaths(newShapesData, localShapeCollection);\n                    newShapesData = this.addShapes(shapeData, segments[1]);\n                  }\n                }\n\n                this.addPaths(newShapesData, localShapeCollection);\n              }\n            }\n\n            shapeData.shape.paths = localShapeCollection;\n          }\n        }\n      } else if (this._mdf) {\n        for (i = 0; i < len; i += 1) {\n          //Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\n          //Don't remove this even if it's losing cached info.\n          this.shapes[i].pathsData.length = 0;\n          this.shapes[i].shape._mdf = true;\n        }\n      }\n    };\n\n    TrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\n      var i,\n          len = newPaths.length;\n\n      for (i = 0; i < len; i += 1) {\n        localShapeCollection.addShape(newPaths[i]);\n      }\n    };\n\n    TrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\n      shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\n      shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\n\n      if (newShape) {\n        shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\n      }\n\n      shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\n    };\n\n    TrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\n      shapePath.setXYAt(points[1], points[5], 'o', pos);\n      shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\n\n      if (newShape) {\n        shapePath.setXYAt(points[0], points[4], 'v', pos);\n      }\n\n      shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\n    };\n\n    TrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\n      var pathsData = shapeData.pathsData;\n      var shapePaths = shapeData.shape.paths.shapes;\n      var i,\n          len = shapeData.shape.paths._length,\n          j,\n          jLen;\n      var addedLength = 0;\n      var currentLengthData, segmentCount;\n      var lengths;\n      var segment;\n      var shapes = [];\n      var initPos;\n      var newShape = true;\n\n      if (!shapePath) {\n        shapePath = shape_pool.newElement();\n        segmentCount = 0;\n        initPos = 0;\n      } else {\n        segmentCount = shapePath._length;\n        initPos = shapePath._length;\n      }\n\n      shapes.push(shapePath);\n\n      for (i = 0; i < len; i += 1) {\n        lengths = pathsData[i].lengths;\n        shapePath.c = shapePaths[i].c;\n        jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\n\n        for (j = 1; j < jLen; j += 1) {\n          currentLengthData = lengths[j - 1];\n\n          if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\n            addedLength += currentLengthData.addedLength;\n            shapePath.c = false;\n          } else if (addedLength > shapeSegment.e) {\n            shapePath.c = false;\n            break;\n          } else {\n            if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\n              this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\n              newShape = false;\n            } else {\n              segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\n              this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n\n              newShape = false;\n              shapePath.c = false;\n            }\n\n            addedLength += currentLengthData.addedLength;\n            segmentCount += 1;\n          }\n        }\n\n        if (shapePaths[i].c && lengths.length) {\n          currentLengthData = lengths[j - 1];\n\n          if (addedLength <= shapeSegment.e) {\n            var segmentLength = lengths[j - 1].addedLength;\n\n            if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\n              this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\n              newShape = false;\n            } else {\n              segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\n              this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n\n              newShape = false;\n              shapePath.c = false;\n            }\n          } else {\n            shapePath.c = false;\n          }\n\n          addedLength += currentLengthData.addedLength;\n          segmentCount += 1;\n        }\n\n        if (shapePath._length) {\n          shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\n          shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\n        }\n\n        if (addedLength > shapeSegment.e) {\n          break;\n        }\n\n        if (i < len - 1) {\n          shapePath = shape_pool.newElement();\n          newShape = true;\n          shapes.push(shapePath);\n          segmentCount = 0;\n        }\n      }\n\n      return shapes;\n    };\n\n    ShapeModifiers.registerModifier('tm', TrimModifier);\n\n    function RoundCornersModifier() {}\n\n    extendPrototype([ShapeModifier], RoundCornersModifier);\n\n    RoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\n      this.getValue = this.processKeys;\n      this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\n      this._isAnimated = !!this.rd.effectsSequence.length;\n    };\n\n    RoundCornersModifier.prototype.processPath = function (path, round) {\n      var cloned_path = shape_pool.newElement();\n      cloned_path.c = path.c;\n      var i,\n          len = path._length;\n      var currentV,\n          currentI,\n          currentO,\n          closerV,\n          distance,\n          newPosPerc,\n          index = 0;\n      var vX, vY, oX, oY, iX, iY;\n\n      for (i = 0; i < len; i += 1) {\n        currentV = path.v[i];\n        currentO = path.o[i];\n        currentI = path.i[i];\n\n        if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\n          if ((i === 0 || i === len - 1) && !path.c) {\n            cloned_path.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\n            /*cloned_path.v[index] = currentV;\r\n            cloned_path.o[index] = currentO;\r\n            cloned_path.i[index] = currentI;*/\n\n            index += 1;\n          } else {\n            if (i === 0) {\n              closerV = path.v[len - 1];\n            } else {\n              closerV = path.v[i - 1];\n            }\n\n            distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n            newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n            vX = iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n            vY = iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\n            oX = vX - (vX - currentV[0]) * roundCorner;\n            oY = vY - (vY - currentV[1]) * roundCorner;\n            cloned_path.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n            index += 1;\n\n            if (i === len - 1) {\n              closerV = path.v[0];\n            } else {\n              closerV = path.v[i + 1];\n            }\n\n            distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n            newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n            vX = oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n            vY = oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\n            iX = vX - (vX - currentV[0]) * roundCorner;\n            iY = vY - (vY - currentV[1]) * roundCorner;\n            cloned_path.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n            index += 1;\n          }\n        } else {\n          cloned_path.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\n          index += 1;\n        }\n      }\n\n      return cloned_path;\n    };\n\n    RoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\n      var shapePaths;\n      var i,\n          len = this.shapes.length;\n      var j, jLen;\n      var rd = this.rd.v;\n\n      if (rd !== 0) {\n        var shapeData, newPaths, localShapeCollection;\n\n        for (i = 0; i < len; i += 1) {\n          shapeData = this.shapes[i];\n          newPaths = shapeData.shape.paths;\n          localShapeCollection = shapeData.localShapeCollection;\n\n          if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n            localShapeCollection.releaseShapes();\n            shapeData.shape._mdf = true;\n            shapePaths = shapeData.shape.paths.shapes;\n            jLen = shapeData.shape.paths._length;\n\n            for (j = 0; j < jLen; j += 1) {\n              localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\n            }\n          }\n\n          shapeData.shape.paths = shapeData.localShapeCollection;\n        }\n      }\n\n      if (!this.dynamicProperties.length) {\n        this._mdf = false;\n      }\n    };\n\n    ShapeModifiers.registerModifier('rd', RoundCornersModifier);\n\n    function RepeaterModifier() {}\n\n    extendPrototype([ShapeModifier], RepeaterModifier);\n\n    RepeaterModifier.prototype.initModifierProperties = function (elem, data) {\n      this.getValue = this.processKeys;\n      this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\n      this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\n      this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\n      this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\n      this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\n      this.data = data;\n\n      if (!this.dynamicProperties.length) {\n        this.getValue(true);\n      }\n\n      this._isAnimated = !!this.dynamicProperties.length;\n      this.pMatrix = new Matrix();\n      this.rMatrix = new Matrix();\n      this.sMatrix = new Matrix();\n      this.tMatrix = new Matrix();\n      this.matrix = new Matrix();\n    };\n\n    RepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\n      var dir = inv ? -1 : 1;\n      var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\n      var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\n      pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\n      rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n      rMatrix.rotate(-transform.r.v * dir * perc);\n      rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n      sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n      sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\n      sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n    };\n\n    RepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\n      this.elem = elem;\n      this.arr = arr;\n      this.pos = pos;\n      this.elemsData = elemsData;\n      this._currentCopies = 0;\n      this._elements = [];\n      this._groups = [];\n      this.frameId = -1;\n      this.initDynamicPropertyContainer(elem);\n      this.initModifierProperties(elem, arr[pos]);\n\n      while (pos > 0) {\n        pos -= 1; //this._elements.unshift(arr.splice(pos,1)[0]);\n\n        this._elements.unshift(arr[pos]);\n      }\n\n      if (this.dynamicProperties.length) {\n        this.k = true;\n      } else {\n        this.getValue(true);\n      }\n    };\n\n    RepeaterModifier.prototype.resetElements = function (elements) {\n      var i,\n          len = elements.length;\n\n      for (i = 0; i < len; i += 1) {\n        elements[i]._processed = false;\n\n        if (elements[i].ty === 'gr') {\n          this.resetElements(elements[i].it);\n        }\n      }\n    };\n\n    RepeaterModifier.prototype.cloneElements = function (elements) {\n      var len = elements.length;\n      var newElements = JSON.parse(JSON.stringify(elements));\n      this.resetElements(newElements);\n      return newElements;\n    };\n\n    RepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\n      var i,\n          len = elements.length;\n\n      for (i = 0; i < len; i += 1) {\n        elements[i]._render = renderFlag;\n\n        if (elements[i].ty === 'gr') {\n          this.changeGroupRender(elements[i].it, renderFlag);\n        }\n      }\n    };\n\n    RepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\n      var items, itemsTransform, i, dir, cont;\n\n      if (this._mdf || _isFirstFrame) {\n        var copies = Math.ceil(this.c.v);\n\n        if (this._groups.length < copies) {\n          while (this._groups.length < copies) {\n            var group = {\n              it: this.cloneElements(this._elements),\n              ty: 'gr'\n            };\n            group.it.push({\n              \"a\": {\n                \"a\": 0,\n                \"ix\": 1,\n                \"k\": [0, 0]\n              },\n              \"nm\": \"Transform\",\n              \"o\": {\n                \"a\": 0,\n                \"ix\": 7,\n                \"k\": 100\n              },\n              \"p\": {\n                \"a\": 0,\n                \"ix\": 2,\n                \"k\": [0, 0]\n              },\n              \"r\": {\n                \"a\": 1,\n                \"ix\": 6,\n                \"k\": [{\n                  s: 0,\n                  e: 0,\n                  t: 0\n                }, {\n                  s: 0,\n                  e: 0,\n                  t: 1\n                }]\n              },\n              \"s\": {\n                \"a\": 0,\n                \"ix\": 3,\n                \"k\": [100, 100]\n              },\n              \"sa\": {\n                \"a\": 0,\n                \"ix\": 5,\n                \"k\": 0\n              },\n              \"sk\": {\n                \"a\": 0,\n                \"ix\": 4,\n                \"k\": 0\n              },\n              \"ty\": \"tr\"\n            });\n            this.arr.splice(0, 0, group);\n\n            this._groups.splice(0, 0, group);\n\n            this._currentCopies += 1;\n          }\n\n          this.elem.reloadShapes();\n        }\n\n        cont = 0;\n        var renderFlag;\n\n        for (i = 0; i <= this._groups.length - 1; i += 1) {\n          renderFlag = cont < copies;\n          this._groups[i]._render = renderFlag;\n          this.changeGroupRender(this._groups[i].it, renderFlag);\n          cont += 1;\n        }\n\n        this._currentCopies = copies; ////\n\n        var offset = this.o.v;\n        var offsetModulo = offset % 1;\n        var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\n        var tMat = this.tr.v.props;\n        var pProps = this.pMatrix.props;\n        var rProps = this.rMatrix.props;\n        var sProps = this.sMatrix.props;\n        this.pMatrix.reset();\n        this.rMatrix.reset();\n        this.sMatrix.reset();\n        this.tMatrix.reset();\n        this.matrix.reset();\n        var iteration = 0;\n\n        if (offset > 0) {\n          while (iteration < roundOffset) {\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n            iteration += 1;\n          }\n\n          if (offsetModulo) {\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\n            iteration += offsetModulo;\n          }\n        } else if (offset < 0) {\n          while (iteration > roundOffset) {\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\n            iteration -= 1;\n          }\n\n          if (offsetModulo) {\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\n            iteration -= offsetModulo;\n          }\n        }\n\n        i = this.data.m === 1 ? 0 : this._currentCopies - 1;\n        dir = this.data.m === 1 ? 1 : -1;\n        cont = this._currentCopies;\n        var j, jLen;\n\n        while (cont) {\n          items = this.elemsData[i].it;\n          itemsTransform = items[items.length - 1].transform.mProps.v.props;\n          jLen = itemsTransform.length;\n          items[items.length - 1].transform.mProps._mdf = true;\n          items[items.length - 1].transform.op._mdf = true;\n          items[items.length - 1].transform.op.v = this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\n\n          if (iteration !== 0) {\n            if (i !== 0 && dir === 1 || i !== this._currentCopies - 1 && dir === -1) {\n              this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n            }\n\n            this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\n            this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\n            this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\n\n            for (j = 0; j < jLen; j += 1) {\n              itemsTransform[j] = this.matrix.props[j];\n            }\n\n            this.matrix.reset();\n          } else {\n            this.matrix.reset();\n\n            for (j = 0; j < jLen; j += 1) {\n              itemsTransform[j] = this.matrix.props[j];\n            }\n          }\n\n          iteration += 1;\n          cont -= 1;\n          i += dir;\n        }\n      } else {\n        cont = this._currentCopies;\n        i = 0;\n        dir = 1;\n\n        while (cont) {\n          items = this.elemsData[i].it;\n          itemsTransform = items[items.length - 1].transform.mProps.v.props;\n          items[items.length - 1].transform.mProps._mdf = false;\n          items[items.length - 1].transform.op._mdf = false;\n          cont -= 1;\n          i += dir;\n        }\n      }\n    };\n\n    RepeaterModifier.prototype.addShape = function () {};\n\n    ShapeModifiers.registerModifier('rp', RepeaterModifier);\n\n    function ShapeCollection() {\n      this._length = 0;\n      this._maxLength = 4;\n      this.shapes = createSizedArray(this._maxLength);\n    }\n\n    ShapeCollection.prototype.addShape = function (shapeData) {\n      if (this._length === this._maxLength) {\n        this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\n        this._maxLength *= 2;\n      }\n\n      this.shapes[this._length] = shapeData;\n      this._length += 1;\n    };\n\n    ShapeCollection.prototype.releaseShapes = function () {\n      var i;\n\n      for (i = 0; i < this._length; i += 1) {\n        shape_pool.release(this.shapes[i]);\n      }\n\n      this._length = 0;\n    };\n\n    function DashProperty(elem, data, renderer, container) {\n      this.elem = elem;\n      this.frameId = -1;\n      this.dataProps = createSizedArray(data.length);\n      this.renderer = renderer;\n      this.k = false;\n      this.dashStr = '';\n      this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\n      this.dashoffset = createTypedArray('float32', 1);\n      this.initDynamicPropertyContainer(container);\n      var i,\n          len = data.length || 0,\n          prop;\n\n      for (i = 0; i < len; i += 1) {\n        prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\n        this.k = prop.k || this.k;\n        this.dataProps[i] = {\n          n: data[i].n,\n          p: prop\n        };\n      }\n\n      if (!this.k) {\n        this.getValue(true);\n      }\n\n      this._isAnimated = this.k;\n    }\n\n    DashProperty.prototype.getValue = function (forceRender) {\n      if (this.elem.globalData.frameId === this.frameId && !forceRender) {\n        return;\n      }\n\n      this.frameId = this.elem.globalData.frameId;\n      this.iterateDynamicProperties();\n      this._mdf = this._mdf || forceRender;\n\n      if (this._mdf) {\n        var i = 0,\n            len = this.dataProps.length;\n\n        if (this.renderer === 'svg') {\n          this.dashStr = '';\n        }\n\n        for (i = 0; i < len; i += 1) {\n          if (this.dataProps[i].n != 'o') {\n            if (this.renderer === 'svg') {\n              this.dashStr += ' ' + this.dataProps[i].p.v;\n            } else {\n              this.dashArray[i] = this.dataProps[i].p.v;\n            }\n          } else {\n            this.dashoffset[0] = this.dataProps[i].p.v;\n          }\n        }\n      }\n    };\n\n    extendPrototype([DynamicPropertyContainer], DashProperty);\n\n    function GradientProperty(elem, data, container) {\n      this.data = data;\n      this.c = createTypedArray('uint8c', data.p * 4);\n      var cLength = data.k.k[0].s ? data.k.k[0].s.length - data.p * 4 : data.k.k.length - data.p * 4;\n      this.o = createTypedArray('float32', cLength);\n      this._cmdf = false;\n      this._omdf = false;\n      this._collapsable = this.checkCollapsable();\n      this._hasOpacity = cLength;\n      this.initDynamicPropertyContainer(container);\n      this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\n      this.k = this.prop.k;\n      this.getValue(true);\n    }\n\n    GradientProperty.prototype.comparePoints = function (values, points) {\n      var i = 0,\n          len = this.o.length / 2,\n          diff;\n\n      while (i < len) {\n        diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\n\n        if (diff > 0.01) {\n          return false;\n        }\n\n        i += 1;\n      }\n\n      return true;\n    };\n\n    GradientProperty.prototype.checkCollapsable = function () {\n      if (this.o.length / 2 !== this.c.length / 4) {\n        return false;\n      }\n\n      if (this.data.k.k[0].s) {\n        var i = 0,\n            len = this.data.k.k.length;\n\n        while (i < len) {\n          if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\n            return false;\n          }\n\n          i += 1;\n        }\n      } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\n        return false;\n      }\n\n      return true;\n    };\n\n    GradientProperty.prototype.getValue = function (forceRender) {\n      this.prop.getValue();\n      this._mdf = false;\n      this._cmdf = false;\n      this._omdf = false;\n\n      if (this.prop._mdf || forceRender) {\n        var i,\n            len = this.data.p * 4;\n        var mult, val;\n\n        for (i = 0; i < len; i += 1) {\n          mult = i % 4 === 0 ? 100 : 255;\n          val = Math.round(this.prop.v[i] * mult);\n\n          if (this.c[i] !== val) {\n            this.c[i] = val;\n            this._cmdf = !forceRender;\n          }\n        }\n\n        if (this.o.length) {\n          len = this.prop.v.length;\n\n          for (i = this.data.p * 4; i < len; i += 1) {\n            mult = i % 2 === 0 ? 100 : 1;\n            val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\n\n            if (this.o[i - this.data.p * 4] !== val) {\n              this.o[i - this.data.p * 4] = val;\n              this._omdf = !forceRender;\n            }\n          }\n        }\n\n        this._mdf = !forceRender;\n      }\n    };\n\n    extendPrototype([DynamicPropertyContainer], GradientProperty);\n\n    var buildShapeString = function buildShapeString(pathNodes, length, closed, mat) {\n      if (length === 0) {\n        return '';\n      }\n\n      var _o = pathNodes.o;\n      var _i = pathNodes.i;\n      var _v = pathNodes.v;\n      var i,\n          shapeString = \" M\" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n\n      for (i = 1; i < length; i += 1) {\n        shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[i][0], _i[i][1]) + \" \" + mat.applyToPointStringified(_v[i][0], _v[i][1]);\n      }\n\n      if (closed && length) {\n        shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[0][0], _i[0][1]) + \" \" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n        shapeString += 'z';\n      }\n\n      return shapeString;\n    };\n\n    var ImagePreloader = function () {\n      var proxyImage = function () {\n        var canvas = createTag('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = 'rgba(0,0,0,0)';\n        ctx.fillRect(0, 0, 1, 1);\n        return canvas;\n      }();\n\n      function imageLoaded() {\n        this.loadedAssets += 1;\n\n        if (this.loadedAssets === this.totalImages) {\n          if (this.imagesLoadedCb) {\n            this.imagesLoadedCb(null);\n          }\n        }\n      }\n\n      function getAssetsPath(assetData, assetsPath, original_path) {\n        var path = '';\n\n        if (assetData.e) {\n          path = assetData.p;\n        } else if (assetsPath) {\n          var imagePath = assetData.p;\n\n          if (imagePath.indexOf('images/') !== -1) {\n            imagePath = imagePath.split('/')[1];\n          }\n\n          path = assetsPath + imagePath;\n        } else {\n          path = original_path;\n          path += assetData.u ? assetData.u : '';\n          path += assetData.p;\n        }\n\n        return path;\n      }\n\n      function createImageData(assetData) {\n        var path = getAssetsPath(assetData, this.assetsPath, this.path);\n        var img = createTag('img');\n        img.crossOrigin = 'anonymous';\n        img.addEventListener('load', this._imageLoaded.bind(this), false);\n        img.addEventListener('error', function () {\n          ob.img = proxyImage;\n\n          this._imageLoaded();\n        }.bind(this), false);\n        img.src = path;\n        var ob = {\n          img: img,\n          assetData: assetData\n        };\n        return ob;\n      }\n\n      function loadAssets(assets, cb) {\n        this.imagesLoadedCb = cb;\n        var i,\n            len = assets.length;\n\n        for (i = 0; i < len; i += 1) {\n          if (!assets[i].layers) {\n            this.totalImages += 1;\n            this.images.push(this._createImageData(assets[i]));\n          }\n        }\n      }\n\n      function setPath(path) {\n        this.path = path || '';\n      }\n\n      function setAssetsPath(path) {\n        this.assetsPath = path || '';\n      }\n\n      function getImage(assetData) {\n        var i = 0,\n            len = this.images.length;\n\n        while (i < len) {\n          if (this.images[i].assetData === assetData) {\n            return this.images[i].img;\n          }\n\n          i += 1;\n        }\n      }\n\n      function destroy() {\n        this.imagesLoadedCb = null;\n        this.images.length = 0;\n      }\n\n      function loaded() {\n        return this.totalImages === this.loadedAssets;\n      }\n\n      return function ImagePreloader() {\n        this.loadAssets = loadAssets;\n        this.setAssetsPath = setAssetsPath;\n        this.setPath = setPath;\n        this.loaded = loaded;\n        this.destroy = destroy;\n        this.getImage = getImage;\n        this._createImageData = createImageData;\n        this._imageLoaded = imageLoaded;\n        this.assetsPath = '';\n        this.path = '';\n        this.totalImages = 0;\n        this.loadedAssets = 0;\n        this.imagesLoadedCb = null;\n        this.images = [];\n      };\n    }();\n\n    var featureSupport = function () {\n      var ob = {\n        maskType: true\n      };\n\n      if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\n        ob.maskType = false;\n      }\n\n      return ob;\n    }();\n\n    var filtersFactory = function () {\n      var ob = {};\n      ob.createFilter = createFilter;\n      ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\n\n      function createFilter(filId) {\n        var fil = createNS('filter');\n        fil.setAttribute('id', filId);\n        fil.setAttribute('filterUnits', 'objectBoundingBox');\n        fil.setAttribute('x', '0%');\n        fil.setAttribute('y', '0%');\n        fil.setAttribute('width', '100%');\n        fil.setAttribute('height', '100%');\n        return fil;\n      }\n\n      function createAlphaToLuminanceFilter() {\n        var feColorMatrix = createNS('feColorMatrix');\n        feColorMatrix.setAttribute('type', 'matrix');\n        feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n        feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\n        return feColorMatrix;\n      }\n\n      return ob;\n    }();\n\n    var assetLoader = function () {\n      function formatResponse(xhr) {\n        if (xhr.response && typeof xhr.response === 'object') {\n          return xhr.response;\n        } else if (xhr.response && typeof xhr.response === 'string') {\n          return JSON.parse(xhr.response);\n        } else if (xhr.responseText) {\n          return JSON.parse(xhr.responseText);\n        }\n      }\n\n      function loadAsset(path, callback, errorCallback) {\n        var response;\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', path, true); // set responseType after calling open or IE will break.\n\n        try {\n          // This crashes on Android WebView prior to KitKat\n          xhr.responseType = \"json\";\n        } catch (err) {}\n\n        xhr.send();\n\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState == 4) {\n            if (xhr.status == 200) {\n              response = formatResponse(xhr);\n              callback(response);\n            } else {\n              try {\n                response = formatResponse(xhr);\n                callback(response);\n              } catch (err) {\n                if (errorCallback) {\n                  errorCallback(err);\n                }\n              }\n            }\n          }\n        };\n      }\n\n      return {\n        load: loadAsset\n      };\n    }();\n\n    function TextAnimatorProperty(textData, renderType, elem) {\n      this._isFirstFrame = true;\n      this._hasMaskedPath = false;\n      this._frameId = -1;\n      this._textData = textData;\n      this._renderType = renderType;\n      this._elem = elem;\n      this._animatorsData = createSizedArray(this._textData.a.length);\n      this._pathData = {};\n      this._moreOptions = {\n        alignment: {}\n      };\n      this.renderedLetters = [];\n      this.lettersChangedFlag = false;\n      this.initDynamicPropertyContainer(elem);\n    }\n\n    TextAnimatorProperty.prototype.searchProperties = function () {\n      var i,\n          len = this._textData.a.length,\n          animatorProps;\n      var getProp = PropertyFactory.getProp;\n\n      for (i = 0; i < len; i += 1) {\n        animatorProps = this._textData.a[i];\n        this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\n      }\n\n      if (this._textData.p && 'm' in this._textData.p) {\n        this._pathData = {\n          f: getProp(this._elem, this._textData.p.f, 0, 0, this),\n          l: getProp(this._elem, this._textData.p.l, 0, 0, this),\n          r: this._textData.p.r,\n          m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\n        };\n        this._hasMaskedPath = true;\n      } else {\n        this._hasMaskedPath = false;\n      }\n\n      this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\n    };\n\n    TextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\n      this.lettersChangedFlag = lettersChangedFlag;\n\n      if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\n        return;\n      }\n\n      this._isFirstFrame = false;\n      var alignment = this._moreOptions.alignment.v;\n      var animators = this._animatorsData;\n      var textData = this._textData;\n      var matrixHelper = this.mHelper;\n      var renderType = this._renderType;\n      var renderedLettersCount = this.renderedLetters.length;\n      var data = this.data;\n      var xPos, yPos;\n      var i, len;\n      var letters = documentData.l,\n          pathInfo,\n          currentLength,\n          currentPoint,\n          segmentLength,\n          flag,\n          pointInd,\n          segmentInd,\n          prevPoint,\n          points,\n          segments,\n          partialLength,\n          totalLength,\n          perc,\n          tanAngle,\n          mask;\n\n      if (this._hasMaskedPath) {\n        mask = this._pathData.m;\n\n        if (!this._pathData.n || this._pathData._mdf) {\n          var paths = mask.v;\n\n          if (this._pathData.r) {\n            paths = paths.reverse();\n          } // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\n\n\n          pathInfo = {\n            tLength: 0,\n            segments: []\n          };\n          len = paths._length - 1;\n          var bezierData;\n          totalLength = 0;\n\n          for (i = 0; i < len; i += 1) {\n            bezierData = bez.buildBezierData(paths.v[i], paths.v[i + 1], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\n            pathInfo.tLength += bezierData.segmentLength;\n            pathInfo.segments.push(bezierData);\n            totalLength += bezierData.segmentLength;\n          }\n\n          i = len;\n\n          if (mask.v.c) {\n            bezierData = bez.buildBezierData(paths.v[i], paths.v[0], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\n            pathInfo.tLength += bezierData.segmentLength;\n            pathInfo.segments.push(bezierData);\n            totalLength += bezierData.segmentLength;\n          }\n\n          this._pathData.pi = pathInfo;\n        }\n\n        pathInfo = this._pathData.pi;\n        currentLength = this._pathData.f.v;\n        segmentInd = 0;\n        pointInd = 1;\n        segmentLength = 0;\n        flag = true;\n        segments = pathInfo.segments;\n\n        if (currentLength < 0 && mask.v.c) {\n          if (pathInfo.tLength < Math.abs(currentLength)) {\n            currentLength = -Math.abs(currentLength) % pathInfo.tLength;\n          }\n\n          segmentInd = segments.length - 1;\n          points = segments[segmentInd].points;\n          pointInd = points.length - 1;\n\n          while (currentLength < 0) {\n            currentLength += points[pointInd].partialLength;\n            pointInd -= 1;\n\n            if (pointInd < 0) {\n              segmentInd -= 1;\n              points = segments[segmentInd].points;\n              pointInd = points.length - 1;\n            }\n          }\n        }\n\n        points = segments[segmentInd].points;\n        prevPoint = points[pointInd - 1];\n        currentPoint = points[pointInd];\n        partialLength = currentPoint.partialLength;\n      }\n\n      len = letters.length;\n      xPos = 0;\n      yPos = 0;\n      var yOff = documentData.finalSize * 1.2 * 0.714;\n      var firstLine = true;\n      var animatorProps, animatorSelector;\n      var j, jLen;\n      var letterValue;\n      jLen = animators.length;\n      var mult,\n          ind = -1,\n          offf,\n          xPathPos,\n          yPathPos;\n      var initPathPos = currentLength,\n          initSegmentInd = segmentInd,\n          initPointInd = pointInd,\n          currentLine = -1;\n      var elemOpacity;\n      var sc, sw, fc, k;\n      var lineLength = 0;\n      var letterSw,\n          letterSc,\n          letterFc,\n          letterM = '',\n          letterP = this.defaultPropsArray,\n          letterO; //\n\n      if (documentData.j === 2 || documentData.j === 1) {\n        var animatorJustifyOffset = 0;\n        var animatorFirstCharOffset = 0;\n        var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\n        var lastIndex = 0;\n        var isNewLine = true;\n\n        for (i = 0; i < len; i += 1) {\n          if (letters[i].n) {\n            if (animatorJustifyOffset) {\n              animatorJustifyOffset += animatorFirstCharOffset;\n            }\n\n            while (lastIndex < i) {\n              letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n              lastIndex += 1;\n            }\n\n            animatorJustifyOffset = 0;\n            isNewLine = true;\n          } else {\n            for (j = 0; j < jLen; j += 1) {\n              animatorProps = animators[j].a;\n\n              if (animatorProps.t.propType) {\n                if (isNewLine && documentData.j === 2) {\n                  animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\n                }\n\n                animatorSelector = animators[j].s;\n                mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n                if (mult.length) {\n                  animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\n                } else {\n                  animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\n                }\n              }\n            }\n\n            isNewLine = false;\n          }\n        }\n\n        if (animatorJustifyOffset) {\n          animatorJustifyOffset += animatorFirstCharOffset;\n        }\n\n        while (lastIndex < i) {\n          letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n          lastIndex += 1;\n        }\n      } //\n\n\n      for (i = 0; i < len; i += 1) {\n        matrixHelper.reset();\n        elemOpacity = 1;\n\n        if (letters[i].n) {\n          xPos = 0;\n          yPos += documentData.yOffset;\n          yPos += firstLine ? 1 : 0;\n          currentLength = initPathPos;\n          firstLine = false;\n          lineLength = 0;\n\n          if (this._hasMaskedPath) {\n            segmentInd = initSegmentInd;\n            pointInd = initPointInd;\n            points = segments[segmentInd].points;\n            prevPoint = points[pointInd - 1];\n            currentPoint = points[pointInd];\n            partialLength = currentPoint.partialLength;\n            segmentLength = 0;\n          }\n\n          letterO = letterSw = letterFc = letterM = '';\n          letterP = this.defaultPropsArray;\n        } else {\n          if (this._hasMaskedPath) {\n            if (currentLine !== letters[i].line) {\n              switch (documentData.j) {\n                case 1:\n                  currentLength += totalLength - documentData.lineWidths[letters[i].line];\n                  break;\n\n                case 2:\n                  currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\n                  break;\n              }\n\n              currentLine = letters[i].line;\n            }\n\n            if (ind !== letters[i].ind) {\n              if (letters[ind]) {\n                currentLength += letters[ind].extra;\n              }\n\n              currentLength += letters[i].an / 2;\n              ind = letters[i].ind;\n            }\n\n            currentLength += alignment[0] * letters[i].an / 200;\n            var animatorOffset = 0;\n\n            for (j = 0; j < jLen; j += 1) {\n              animatorProps = animators[j].a;\n\n              if (animatorProps.p.propType) {\n                animatorSelector = animators[j].s;\n                mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n                if (mult.length) {\n                  animatorOffset += animatorProps.p.v[0] * mult[0];\n                } else {\n                  animatorOffset += animatorProps.p.v[0] * mult;\n                }\n              }\n\n              if (animatorProps.a.propType) {\n                animatorSelector = animators[j].s;\n                mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n                if (mult.length) {\n                  animatorOffset += animatorProps.a.v[0] * mult[0];\n                } else {\n                  animatorOffset += animatorProps.a.v[0] * mult;\n                }\n              }\n            }\n\n            flag = true;\n\n            while (flag) {\n              if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\n                perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\n                xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\n                yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\n                matrixHelper.translate(-alignment[0] * letters[i].an / 200, -(alignment[1] * yOff / 100));\n                flag = false;\n              } else if (points) {\n                segmentLength += currentPoint.partialLength;\n                pointInd += 1;\n\n                if (pointInd >= points.length) {\n                  pointInd = 0;\n                  segmentInd += 1;\n\n                  if (!segments[segmentInd]) {\n                    if (mask.v.c) {\n                      pointInd = 0;\n                      segmentInd = 0;\n                      points = segments[segmentInd].points;\n                    } else {\n                      segmentLength -= currentPoint.partialLength;\n                      points = null;\n                    }\n                  } else {\n                    points = segments[segmentInd].points;\n                  }\n                }\n\n                if (points) {\n                  prevPoint = currentPoint;\n                  currentPoint = points[pointInd];\n                  partialLength = currentPoint.partialLength;\n                }\n              }\n            }\n\n            offf = letters[i].an / 2 - letters[i].add;\n            matrixHelper.translate(-offf, 0, 0);\n          } else {\n            offf = letters[i].an / 2 - letters[i].add;\n            matrixHelper.translate(-offf, 0, 0); // Grouping alignment\n\n            matrixHelper.translate(-alignment[0] * letters[i].an / 200, -alignment[1] * yOff / 100, 0);\n          }\n\n          lineLength += letters[i].l / 2;\n\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n\n            if (animatorProps.t.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars); //This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\n\n              if (xPos !== 0 || documentData.j !== 0) {\n                if (this._hasMaskedPath) {\n                  if (mult.length) {\n                    currentLength += animatorProps.t.v * mult[0];\n                  } else {\n                    currentLength += animatorProps.t.v * mult;\n                  }\n                } else {\n                  if (mult.length) {\n                    xPos += animatorProps.t.v * mult[0];\n                  } else {\n                    xPos += animatorProps.t.v * mult;\n                  }\n                }\n              }\n            }\n          }\n\n          lineLength += letters[i].l / 2;\n\n          if (documentData.strokeWidthAnim) {\n            sw = documentData.sw || 0;\n          }\n\n          if (documentData.strokeColorAnim) {\n            if (documentData.sc) {\n              sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\n            } else {\n              sc = [0, 0, 0];\n            }\n          }\n\n          if (documentData.fillColorAnim && documentData.fc) {\n            fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\n          }\n\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n\n            if (animatorProps.a.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n              if (mult.length) {\n                matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\n              } else {\n                matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\n              }\n            }\n          }\n\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n\n            if (animatorProps.s.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n              if (mult.length) {\n                matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult[0], 1 + (animatorProps.s.v[1] - 1) * mult[1], 1);\n              } else {\n                matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult, 1 + (animatorProps.s.v[1] - 1) * mult, 1);\n              }\n            }\n          }\n\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n            if (animatorProps.sk.propType) {\n              if (mult.length) {\n                matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\n              } else {\n                matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\n              }\n            }\n\n            if (animatorProps.r.propType) {\n              if (mult.length) {\n                matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\n              } else {\n                matrixHelper.rotateZ(-animatorProps.r.v * mult);\n              }\n            }\n\n            if (animatorProps.ry.propType) {\n              if (mult.length) {\n                matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\n              } else {\n                matrixHelper.rotateY(animatorProps.ry.v * mult);\n              }\n            }\n\n            if (animatorProps.rx.propType) {\n              if (mult.length) {\n                matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\n              } else {\n                matrixHelper.rotateX(animatorProps.rx.v * mult);\n              }\n            }\n\n            if (animatorProps.o.propType) {\n              if (mult.length) {\n                elemOpacity += (animatorProps.o.v * mult[0] - elemOpacity) * mult[0];\n              } else {\n                elemOpacity += (animatorProps.o.v * mult - elemOpacity) * mult;\n              }\n            }\n\n            if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\n              if (mult.length) {\n                sw += animatorProps.sw.v * mult[0];\n              } else {\n                sw += animatorProps.sw.v * mult;\n              }\n            }\n\n            if (documentData.strokeColorAnim && animatorProps.sc.propType) {\n              for (k = 0; k < 3; k += 1) {\n                if (mult.length) {\n                  sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k]) * mult[0];\n                } else {\n                  sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k]) * mult;\n                }\n              }\n            }\n\n            if (documentData.fillColorAnim && documentData.fc) {\n              if (animatorProps.fc.propType) {\n                for (k = 0; k < 3; k += 1) {\n                  if (mult.length) {\n                    fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k]) * mult[0];\n                  } else {\n                    fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k]) * mult;\n                  }\n                }\n              }\n\n              if (animatorProps.fh.propType) {\n                if (mult.length) {\n                  fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\n                } else {\n                  fc = addHueToRGB(fc, animatorProps.fh.v * mult);\n                }\n              }\n\n              if (animatorProps.fs.propType) {\n                if (mult.length) {\n                  fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\n                } else {\n                  fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\n                }\n              }\n\n              if (animatorProps.fb.propType) {\n                if (mult.length) {\n                  fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\n                } else {\n                  fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\n                }\n              }\n            }\n          }\n\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n\n            if (animatorProps.p.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n              if (this._hasMaskedPath) {\n                if (mult.length) {\n                  matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\n                } else {\n                  matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n                }\n              } else {\n                if (mult.length) {\n                  matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\n                } else {\n                  matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n                }\n              }\n            }\n          }\n\n          if (documentData.strokeWidthAnim) {\n            letterSw = sw < 0 ? 0 : sw;\n          }\n\n          if (documentData.strokeColorAnim) {\n            letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\n          }\n\n          if (documentData.fillColorAnim && documentData.fc) {\n            letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\n          }\n\n          if (this._hasMaskedPath) {\n            matrixHelper.translate(0, -documentData.ls);\n            matrixHelper.translate(0, alignment[1] * yOff / 100 + yPos, 0);\n\n            if (textData.p.p) {\n              tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\n              var rot = Math.atan(tanAngle) * 180 / Math.PI;\n\n              if (currentPoint.point[0] < prevPoint.point[0]) {\n                rot += 180;\n              }\n\n              matrixHelper.rotate(-rot * Math.PI / 180);\n            }\n\n            matrixHelper.translate(xPathPos, yPathPos, 0);\n            currentLength -= alignment[0] * letters[i].an / 200;\n\n            if (letters[i + 1] && ind !== letters[i + 1].ind) {\n              currentLength += letters[i].an / 2;\n              currentLength += documentData.tr / 1000 * documentData.finalSize;\n            }\n          } else {\n            matrixHelper.translate(xPos, yPos, 0);\n\n            if (documentData.ps) {\n              //matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\n              matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n            }\n\n            switch (documentData.j) {\n              case 1:\n                matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\n                break;\n\n              case 2:\n                matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\n                break;\n            }\n\n            matrixHelper.translate(0, -documentData.ls);\n            matrixHelper.translate(offf, 0, 0);\n            matrixHelper.translate(alignment[0] * letters[i].an / 200, alignment[1] * yOff / 100, 0);\n            xPos += letters[i].l + documentData.tr / 1000 * documentData.finalSize;\n          }\n\n          if (renderType === 'html') {\n            letterM = matrixHelper.toCSS();\n          } else if (renderType === 'svg') {\n            letterM = matrixHelper.to2dCSS();\n          } else {\n            letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\n          }\n\n          letterO = elemOpacity;\n        }\n\n        if (renderedLettersCount <= i) {\n          letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\n          this.renderedLetters.push(letterValue);\n          renderedLettersCount += 1;\n          this.lettersChangedFlag = true;\n        } else {\n          letterValue = this.renderedLetters[i];\n          this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\n        }\n      }\n    };\n\n    TextAnimatorProperty.prototype.getValue = function () {\n      if (this._elem.globalData.frameId === this._frameId) {\n        return;\n      }\n\n      this._frameId = this._elem.globalData.frameId;\n      this.iterateDynamicProperties();\n    };\n\n    TextAnimatorProperty.prototype.mHelper = new Matrix();\n    TextAnimatorProperty.prototype.defaultPropsArray = [];\n    extendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\n\n    function TextAnimatorDataProperty(elem, animatorProps, container) {\n      var defaultData = {\n        propType: false\n      };\n      var getProp = PropertyFactory.getProp;\n      var textAnimator_animatables = animatorProps.a;\n      this.a = {\n        r: textAnimator_animatables.r ? getProp(elem, textAnimator_animatables.r, 0, degToRads, container) : defaultData,\n        rx: textAnimator_animatables.rx ? getProp(elem, textAnimator_animatables.rx, 0, degToRads, container) : defaultData,\n        ry: textAnimator_animatables.ry ? getProp(elem, textAnimator_animatables.ry, 0, degToRads, container) : defaultData,\n        sk: textAnimator_animatables.sk ? getProp(elem, textAnimator_animatables.sk, 0, degToRads, container) : defaultData,\n        sa: textAnimator_animatables.sa ? getProp(elem, textAnimator_animatables.sa, 0, degToRads, container) : defaultData,\n        s: textAnimator_animatables.s ? getProp(elem, textAnimator_animatables.s, 1, 0.01, container) : defaultData,\n        a: textAnimator_animatables.a ? getProp(elem, textAnimator_animatables.a, 1, 0, container) : defaultData,\n        o: textAnimator_animatables.o ? getProp(elem, textAnimator_animatables.o, 0, 0.01, container) : defaultData,\n        p: textAnimator_animatables.p ? getProp(elem, textAnimator_animatables.p, 1, 0, container) : defaultData,\n        sw: textAnimator_animatables.sw ? getProp(elem, textAnimator_animatables.sw, 0, 0, container) : defaultData,\n        sc: textAnimator_animatables.sc ? getProp(elem, textAnimator_animatables.sc, 1, 0, container) : defaultData,\n        fc: textAnimator_animatables.fc ? getProp(elem, textAnimator_animatables.fc, 1, 0, container) : defaultData,\n        fh: textAnimator_animatables.fh ? getProp(elem, textAnimator_animatables.fh, 0, 0, container) : defaultData,\n        fs: textAnimator_animatables.fs ? getProp(elem, textAnimator_animatables.fs, 0, 0.01, container) : defaultData,\n        fb: textAnimator_animatables.fb ? getProp(elem, textAnimator_animatables.fb, 0, 0.01, container) : defaultData,\n        t: textAnimator_animatables.t ? getProp(elem, textAnimator_animatables.t, 0, 0, container) : defaultData\n      };\n      this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\n      this.s.t = animatorProps.s.t;\n    }\n\n    function LetterProps(o, sw, sc, fc, m, p) {\n      this.o = o;\n      this.sw = sw;\n      this.sc = sc;\n      this.fc = fc;\n      this.m = m;\n      this.p = p;\n      this._mdf = {\n        o: true,\n        sw: !!sw,\n        sc: !!sc,\n        fc: !!fc,\n        m: true,\n        p: true\n      };\n    }\n\n    LetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\n      this._mdf.o = false;\n      this._mdf.sw = false;\n      this._mdf.sc = false;\n      this._mdf.fc = false;\n      this._mdf.m = false;\n      this._mdf.p = false;\n      var updated = false;\n\n      if (this.o !== o) {\n        this.o = o;\n        this._mdf.o = true;\n        updated = true;\n      }\n\n      if (this.sw !== sw) {\n        this.sw = sw;\n        this._mdf.sw = true;\n        updated = true;\n      }\n\n      if (this.sc !== sc) {\n        this.sc = sc;\n        this._mdf.sc = true;\n        updated = true;\n      }\n\n      if (this.fc !== fc) {\n        this.fc = fc;\n        this._mdf.fc = true;\n        updated = true;\n      }\n\n      if (this.m !== m) {\n        this.m = m;\n        this._mdf.m = true;\n        updated = true;\n      }\n\n      if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\n        this.p = p;\n        this._mdf.p = true;\n        updated = true;\n      }\n\n      return updated;\n    };\n\n    function TextProperty(elem, data) {\n      this._frameId = initialDefaultFrame;\n      this.pv = '';\n      this.v = '';\n      this.kf = false;\n      this._isFirstFrame = true;\n      this._mdf = false;\n      this.data = data;\n      this.elem = elem;\n      this.comp = this.elem.comp;\n      this.keysIndex = 0;\n      this.canResize = false;\n      this.minimumFontSize = 1;\n      this.effectsSequence = [];\n      this.currentData = {\n        ascent: 0,\n        boxWidth: this.defaultBoxWidth,\n        f: '',\n        fStyle: '',\n        fWeight: '',\n        fc: '',\n        j: '',\n        justifyOffset: '',\n        l: [],\n        lh: 0,\n        lineWidths: [],\n        ls: '',\n        of: '',\n        s: '',\n        sc: '',\n        sw: 0,\n        t: 0,\n        tr: 0,\n        sz: 0,\n        ps: null,\n        fillColorAnim: false,\n        strokeColorAnim: false,\n        strokeWidthAnim: false,\n        yOffset: 0,\n        finalSize: 0,\n        finalText: [],\n        finalLineHeight: 0,\n        __complete: false\n      };\n      this.copyData(this.currentData, this.data.d.k[0].s);\n\n      if (!this.searchProperty()) {\n        this.completeTextData(this.currentData);\n      }\n    }\n\n    TextProperty.prototype.defaultBoxWidth = [0, 0];\n\n    TextProperty.prototype.copyData = function (obj, data) {\n      for (var s in data) {\n        if (data.hasOwnProperty(s)) {\n          obj[s] = data[s];\n        }\n      }\n\n      return obj;\n    };\n\n    TextProperty.prototype.setCurrentData = function (data) {\n      if (!data.__complete) {\n        this.completeTextData(data);\n      }\n\n      this.currentData = data;\n      this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\n      this._mdf = true;\n    };\n\n    TextProperty.prototype.searchProperty = function () {\n      return this.searchKeyframes();\n    };\n\n    TextProperty.prototype.searchKeyframes = function () {\n      this.kf = this.data.d.k.length > 1;\n\n      if (this.kf) {\n        this.addEffect(this.getKeyframeValue.bind(this));\n      }\n\n      return this.kf;\n    };\n\n    TextProperty.prototype.addEffect = function (effectFunction) {\n      this.effectsSequence.push(effectFunction);\n      this.elem.addDynamicProperty(this);\n    };\n\n    TextProperty.prototype.getValue = function (_finalValue) {\n      if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\n        return;\n      }\n\n      this.currentData.t = this.data.d.k[this.keysIndex].s.t;\n      var currentValue = this.currentData;\n      var currentIndex = this.keysIndex;\n\n      if (this.lock) {\n        this.setCurrentData(this.currentData);\n        return;\n      }\n\n      this.lock = true;\n      this._mdf = false;\n      var i,\n          len = this.effectsSequence.length;\n      var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\n\n      for (i = 0; i < len; i += 1) {\n        //Checking if index changed to prevent creating a new object every time the expression updates.\n        if (currentIndex !== this.keysIndex) {\n          finalValue = this.effectsSequence[i](finalValue, finalValue.t);\n        } else {\n          finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\n        }\n      }\n\n      if (currentValue !== finalValue) {\n        this.setCurrentData(finalValue);\n      }\n\n      this.pv = this.v = this.currentData;\n      this.lock = false;\n      this.frameId = this.elem.globalData.frameId;\n    };\n\n    TextProperty.prototype.getKeyframeValue = function () {\n      var textKeys = this.data.d.k,\n          textDocumentData;\n      var frameNum = this.elem.comp.renderedFrame;\n      var i = 0,\n          len = textKeys.length;\n\n      while (i <= len - 1) {\n        textDocumentData = textKeys[i].s;\n\n        if (i === len - 1 || textKeys[i + 1].t > frameNum) {\n          break;\n        }\n\n        i += 1;\n      }\n\n      if (this.keysIndex !== i) {\n        this.keysIndex = i;\n      }\n\n      return this.data.d.k[this.keysIndex].s;\n    };\n\n    TextProperty.prototype.buildFinalText = function (text) {\n      var combinedCharacters = FontManager.getCombinedCharacterCodes();\n      var charactersArray = [];\n      var i = 0,\n          len = text.length;\n      var charCode;\n\n      while (i < len) {\n        charCode = text.charCodeAt(i);\n\n        if (combinedCharacters.indexOf(charCode) !== -1) {\n          charactersArray[charactersArray.length - 1] += text.charAt(i);\n        } else {\n          if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n            charCode = text.charCodeAt(i + 1);\n\n            if (charCode >= 0xDC00 && charCode <= 0xDFFF) {\n              charactersArray.push(text.substr(i, 2));\n              ++i;\n            } else {\n              charactersArray.push(text.charAt(i));\n            }\n          } else {\n            charactersArray.push(text.charAt(i));\n          }\n        }\n\n        i += 1;\n      }\n\n      return charactersArray;\n    };\n\n    TextProperty.prototype.completeTextData = function (documentData) {\n      documentData.__complete = true;\n      var fontManager = this.elem.globalData.fontManager;\n      var data = this.data;\n      var letters = [];\n      var i, len;\n      var newLineFlag,\n          index = 0,\n          val;\n      var anchorGrouping = data.m.g;\n      var currentSize = 0,\n          currentPos = 0,\n          currentLine = 0,\n          lineWidths = [];\n      var lineWidth = 0;\n      var maxLineWidth = 0;\n      var j, jLen;\n      var fontData = fontManager.getFontByName(documentData.f);\n      var charData,\n          cLength = 0;\n      var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\n      var fWeight = 'normal',\n          fStyle = 'normal';\n      len = styles.length;\n      var styleName;\n\n      for (i = 0; i < len; i += 1) {\n        styleName = styles[i].toLowerCase();\n\n        switch (styleName) {\n          case 'italic':\n            fStyle = 'italic';\n            break;\n\n          case 'bold':\n            fWeight = '700';\n            break;\n\n          case 'black':\n            fWeight = '900';\n            break;\n\n          case 'medium':\n            fWeight = '500';\n            break;\n\n          case 'regular':\n          case 'normal':\n            fWeight = '400';\n            break;\n\n          case 'light':\n          case 'thin':\n            fWeight = '200';\n            break;\n        }\n      }\n\n      documentData.fWeight = fontData.fWeight || fWeight;\n      documentData.fStyle = fStyle;\n      documentData.finalSize = documentData.s;\n      documentData.finalText = this.buildFinalText(documentData.t);\n      len = documentData.finalText.length;\n      documentData.finalLineHeight = documentData.lh;\n      var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n      var charCode;\n\n      if (documentData.sz) {\n        var flag = true;\n        var boxWidth = documentData.sz[0];\n        var boxHeight = documentData.sz[1];\n        var currentHeight, finalText;\n\n        while (flag) {\n          finalText = this.buildFinalText(documentData.t);\n          currentHeight = 0;\n          lineWidth = 0;\n          len = finalText.length;\n          trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n          var lastSpaceIndex = -1;\n\n          for (i = 0; i < len; i += 1) {\n            charCode = finalText[i].charCodeAt(0);\n            newLineFlag = false;\n\n            if (finalText[i] === ' ') {\n              lastSpaceIndex = i;\n            } else if (charCode === 13 || charCode === 3) {\n              lineWidth = 0;\n              newLineFlag = true;\n              currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n            }\n\n            if (fontManager.chars) {\n              charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\n              cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n            } else {\n              //tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\n              cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\n            }\n\n            if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\n              if (lastSpaceIndex === -1) {\n                len += 1;\n              } else {\n                i = lastSpaceIndex;\n              }\n\n              currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n              finalText.splice(i, lastSpaceIndex === i ? 1 : 0, \"\\r\"); //finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\n\n              lastSpaceIndex = -1;\n              lineWidth = 0;\n            } else {\n              lineWidth += cLength;\n              lineWidth += trackingOffset;\n            }\n          }\n\n          currentHeight += fontData.ascent * documentData.finalSize / 100;\n\n          if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\n            documentData.finalSize -= 1;\n            documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\n          } else {\n            documentData.finalText = finalText;\n            len = documentData.finalText.length;\n            flag = false;\n          }\n        }\n      }\n\n      lineWidth = -trackingOffset;\n      cLength = 0;\n      var uncollapsedSpaces = 0;\n      var currentChar;\n\n      for (i = 0; i < len; i += 1) {\n        newLineFlag = false;\n        currentChar = documentData.finalText[i];\n        charCode = currentChar.charCodeAt(0);\n\n        if (currentChar === ' ') {\n          val = \"\\xA0\";\n        } else if (charCode === 13 || charCode === 3) {\n          uncollapsedSpaces = 0;\n          lineWidths.push(lineWidth);\n          maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n          lineWidth = -2 * trackingOffset;\n          val = '';\n          newLineFlag = true;\n          currentLine += 1;\n        } else {\n          val = documentData.finalText[i];\n        }\n\n        if (fontManager.chars) {\n          charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\n          cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n        } else {\n          //var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\n          //tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\n          cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\n        } //\n\n\n        if (currentChar === ' ') {\n          uncollapsedSpaces += cLength + trackingOffset;\n        } else {\n          lineWidth += cLength + trackingOffset + uncollapsedSpaces;\n          uncollapsedSpaces = 0;\n        }\n\n        letters.push({\n          l: cLength,\n          an: cLength,\n          add: currentSize,\n          n: newLineFlag,\n          anIndexes: [],\n          val: val,\n          line: currentLine,\n          animatorJustifyOffset: 0\n        });\n\n        if (anchorGrouping == 2) {\n          currentSize += cLength;\n\n          if (val === '' || val === \"\\xA0\" || i === len - 1) {\n            if (val === '' || val === \"\\xA0\") {\n              currentSize -= cLength;\n            }\n\n            while (currentPos <= i) {\n              letters[currentPos].an = currentSize;\n              letters[currentPos].ind = index;\n              letters[currentPos].extra = cLength;\n              currentPos += 1;\n            }\n\n            index += 1;\n            currentSize = 0;\n          }\n        } else if (anchorGrouping == 3) {\n          currentSize += cLength;\n\n          if (val === '' || i === len - 1) {\n            if (val === '') {\n              currentSize -= cLength;\n            }\n\n            while (currentPos <= i) {\n              letters[currentPos].an = currentSize;\n              letters[currentPos].ind = index;\n              letters[currentPos].extra = cLength;\n              currentPos += 1;\n            }\n\n            currentSize = 0;\n            index += 1;\n          }\n        } else {\n          letters[index].ind = index;\n          letters[index].extra = 0;\n          index += 1;\n        }\n      }\n\n      documentData.l = letters;\n      maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n      lineWidths.push(lineWidth);\n\n      if (documentData.sz) {\n        documentData.boxWidth = documentData.sz[0];\n        documentData.justifyOffset = 0;\n      } else {\n        documentData.boxWidth = maxLineWidth;\n\n        switch (documentData.j) {\n          case 1:\n            documentData.justifyOffset = -documentData.boxWidth;\n            break;\n\n          case 2:\n            documentData.justifyOffset = -documentData.boxWidth / 2;\n            break;\n\n          default:\n            documentData.justifyOffset = 0;\n        }\n      }\n\n      documentData.lineWidths = lineWidths;\n      var animators = data.a,\n          animatorData,\n          letterData;\n      jLen = animators.length;\n      var based,\n          ind,\n          indexes = [];\n\n      for (j = 0; j < jLen; j += 1) {\n        animatorData = animators[j];\n\n        if (animatorData.a.sc) {\n          documentData.strokeColorAnim = true;\n        }\n\n        if (animatorData.a.sw) {\n          documentData.strokeWidthAnim = true;\n        }\n\n        if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\n          documentData.fillColorAnim = true;\n        }\n\n        ind = 0;\n        based = animatorData.s.b;\n\n        for (i = 0; i < len; i += 1) {\n          letterData = letters[i];\n          letterData.anIndexes[j] = ind;\n\n          if (based == 1 && letterData.val !== '' || based == 2 && letterData.val !== '' && letterData.val !== \"\\xA0\" || based == 3 && (letterData.n || letterData.val == \"\\xA0\" || i == len - 1) || based == 4 && (letterData.n || i == len - 1)) {\n            if (animatorData.s.rn === 1) {\n              indexes.push(ind);\n            }\n\n            ind += 1;\n          }\n        }\n\n        data.a[j].s.totalChars = ind;\n        var currentInd = -1,\n            newInd;\n\n        if (animatorData.s.rn === 1) {\n          for (i = 0; i < len; i += 1) {\n            letterData = letters[i];\n\n            if (currentInd != letterData.anIndexes[j]) {\n              currentInd = letterData.anIndexes[j];\n              newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\n            }\n\n            letterData.anIndexes[j] = newInd;\n          }\n        }\n      }\n\n      documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\n      documentData.ls = documentData.ls || 0;\n      documentData.ascent = fontData.ascent * documentData.finalSize / 100;\n    };\n\n    TextProperty.prototype.updateDocumentData = function (newData, index) {\n      index = index === undefined ? this.keysIndex : index;\n      var dData = this.copyData({}, this.data.d.k[index].s);\n      dData = this.copyData(dData, newData);\n      this.data.d.k[index].s = dData;\n      this.recalculate(index);\n      this.elem.addDynamicProperty(this);\n    };\n\n    TextProperty.prototype.recalculate = function (index) {\n      var dData = this.data.d.k[index].s;\n      dData.__complete = false;\n      this.keysIndex = 0;\n      this._isFirstFrame = true;\n      this.getValue(dData);\n    };\n\n    TextProperty.prototype.canResizeFont = function (_canResize) {\n      this.canResize = _canResize;\n      this.recalculate(this.keysIndex);\n      this.elem.addDynamicProperty(this);\n    };\n\n    TextProperty.prototype.setMinimumFontSize = function (_fontValue) {\n      this.minimumFontSize = Math.floor(_fontValue) || 1;\n      this.recalculate(this.keysIndex);\n      this.elem.addDynamicProperty(this);\n    };\n\n    var TextSelectorProp = function () {\n      var max = Math.max;\n      var min = Math.min;\n      var floor = Math.floor;\n\n      function TextSelectorProp(elem, data) {\n        this._currentTextLength = -1;\n        this.k = false;\n        this.data = data;\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.finalS = 0;\n        this.finalE = 0;\n        this.initDynamicPropertyContainer(elem);\n        this.s = PropertyFactory.getProp(elem, data.s || {\n          k: 0\n        }, 0, 0, this);\n\n        if ('e' in data) {\n          this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\n        } else {\n          this.e = {\n            v: 100\n          };\n        }\n\n        this.o = PropertyFactory.getProp(elem, data.o || {\n          k: 0\n        }, 0, 0, this);\n        this.xe = PropertyFactory.getProp(elem, data.xe || {\n          k: 0\n        }, 0, 0, this);\n        this.ne = PropertyFactory.getProp(elem, data.ne || {\n          k: 0\n        }, 0, 0, this);\n        this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\n\n        if (!this.dynamicProperties.length) {\n          this.getValue();\n        }\n      }\n\n      TextSelectorProp.prototype = {\n        getMult: function getMult(ind) {\n          if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\n            this.getValue();\n          } //var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\n\n\n          var easer = BezierFactory.getBezierEasing(this.ne.v / 100, 0, 1 - this.xe.v / 100, 1).get;\n          var mult = 0;\n          var s = this.finalS;\n          var e = this.finalE;\n          var type = this.data.sh;\n\n          if (type == 2) {\n            if (e === s) {\n              mult = ind >= e ? 1 : 0;\n            } else {\n              mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n            }\n\n            mult = easer(mult);\n          } else if (type == 3) {\n            if (e === s) {\n              mult = ind >= e ? 0 : 1;\n            } else {\n              mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n            }\n\n            mult = easer(mult);\n          } else if (type == 4) {\n            if (e === s) {\n              mult = 0;\n            } else {\n              mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n\n              if (mult < 0.5) {\n                mult *= 2;\n              } else {\n                mult = 1 - 2 * (mult - 0.5);\n              }\n            }\n\n            mult = easer(mult);\n          } else if (type == 5) {\n            if (e === s) {\n              mult = 0;\n            } else {\n              var tot = e - s;\n              /*ind += 0.5;\r\n              mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind;*/\n\n              ind = min(max(0, ind + 0.5 - s), e - s);\n              var x = -tot / 2 + ind;\n              var a = tot / 2;\n              mult = Math.sqrt(1 - x * x / (a * a));\n            }\n\n            mult = easer(mult);\n          } else if (type == 6) {\n            if (e === s) {\n              mult = 0;\n            } else {\n              ind = min(max(0, ind + 0.5 - s), e - s);\n              mult = (1 + Math.cos(Math.PI + Math.PI * 2 * ind / (e - s))) / 2;\n              /*\r\n               ind = Math.min(Math.max(s,ind),e-1);\r\n               mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind-s)/(e-1-s)))))/2;\r\n               mult = Math.max(mult,(1/(e-1-s))/(e-1-s));*/\n            }\n\n            mult = easer(mult);\n          } else {\n            if (ind >= floor(s)) {\n              if (ind - s < 0) {\n                mult = 1 - (s - ind);\n              } else {\n                mult = max(0, min(e - ind, 1));\n              }\n            }\n\n            mult = easer(mult);\n          }\n\n          return mult * this.a.v;\n        },\n        getValue: function getValue(newCharsFlag) {\n          this.iterateDynamicProperties();\n          this._mdf = newCharsFlag || this._mdf;\n          this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\n\n          if (newCharsFlag && this.data.r === 2) {\n            this.e.v = this._currentTextLength;\n          }\n\n          var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\n          var o = this.o.v / divisor;\n          var s = this.s.v / divisor + o;\n          var e = this.e.v / divisor + o;\n\n          if (s > e) {\n            var _s = s;\n            s = e;\n            e = _s;\n          }\n\n          this.finalS = s;\n          this.finalE = e;\n        }\n      };\n      extendPrototype([DynamicPropertyContainer], TextSelectorProp);\n\n      function getTextSelectorProp(elem, data, arr) {\n        return new TextSelectorProp(elem, data, arr);\n      }\n\n      return {\n        getTextSelectorProp: getTextSelectorProp\n      };\n    }();\n\n    var pool_factory = function () {\n      return function (initialLength, _create, _release, _clone) {\n        var _length = 0;\n        var _maxLength = initialLength;\n        var pool = createSizedArray(_maxLength);\n        var ob = {\n          newElement: newElement,\n          release: release\n        };\n\n        function newElement() {\n          var element;\n\n          if (_length) {\n            _length -= 1;\n            element = pool[_length];\n          } else {\n            element = _create();\n          }\n\n          return element;\n        }\n\n        function release(element) {\n          if (_length === _maxLength) {\n            pool = pooling.double(pool);\n            _maxLength = _maxLength * 2;\n          }\n\n          if (_release) {\n            _release(element);\n          }\n\n          pool[_length] = element;\n          _length += 1;\n        }\n\n        return ob;\n      };\n    }();\n\n    var pooling = function () {\n      function double(arr) {\n        return arr.concat(createSizedArray(arr.length));\n      }\n\n      return {\n        double: double\n      };\n    }();\n\n    var point_pool = function () {\n      function create() {\n        return createTypedArray('float32', 2);\n      }\n\n      return pool_factory(8, create);\n    }();\n\n    var shape_pool = function () {\n      function create() {\n        return new ShapePath();\n      }\n\n      function release(shapePath) {\n        var len = shapePath._length,\n            i;\n\n        for (i = 0; i < len; i += 1) {\n          point_pool.release(shapePath.v[i]);\n          point_pool.release(shapePath.i[i]);\n          point_pool.release(shapePath.o[i]);\n          shapePath.v[i] = null;\n          shapePath.i[i] = null;\n          shapePath.o[i] = null;\n        }\n\n        shapePath._length = 0;\n        shapePath.c = false;\n      }\n\n      function clone(shape) {\n        var cloned = factory.newElement();\n        var i,\n            len = shape._length === undefined ? shape.v.length : shape._length;\n        cloned.setLength(len);\n        cloned.c = shape.c;\n\n        for (i = 0; i < len; i += 1) {\n          cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\n        }\n\n        return cloned;\n      }\n\n      var factory = pool_factory(4, create, release);\n      factory.clone = clone;\n      return factory;\n    }();\n\n    var shapeCollection_pool = function () {\n      var ob = {\n        newShapeCollection: newShapeCollection,\n        release: release\n      };\n      var _length = 0;\n      var _maxLength = 4;\n      var pool = createSizedArray(_maxLength);\n\n      function newShapeCollection() {\n        var shapeCollection;\n\n        if (_length) {\n          _length -= 1;\n          shapeCollection = pool[_length];\n        } else {\n          shapeCollection = new ShapeCollection();\n        }\n\n        return shapeCollection;\n      }\n\n      function release(shapeCollection) {\n        var i,\n            len = shapeCollection._length;\n\n        for (i = 0; i < len; i += 1) {\n          shape_pool.release(shapeCollection.shapes[i]);\n        }\n\n        shapeCollection._length = 0;\n\n        if (_length === _maxLength) {\n          pool = pooling.double(pool);\n          _maxLength = _maxLength * 2;\n        }\n\n        pool[_length] = shapeCollection;\n        _length += 1;\n      }\n\n      return ob;\n    }();\n\n    var segments_length_pool = function () {\n      function create() {\n        return {\n          lengths: [],\n          totalLength: 0\n        };\n      }\n\n      function release(element) {\n        var i,\n            len = element.lengths.length;\n\n        for (i = 0; i < len; i += 1) {\n          bezier_length_pool.release(element.lengths[i]);\n        }\n\n        element.lengths.length = 0;\n      }\n\n      return pool_factory(8, create, release);\n    }();\n\n    var bezier_length_pool = function () {\n      function create() {\n        return {\n          addedLength: 0,\n          percents: createTypedArray('float32', defaultCurveSegments),\n          lengths: createTypedArray('float32', defaultCurveSegments)\n        };\n      }\n\n      return pool_factory(8, create);\n    }();\n\n    function BaseRenderer() {}\n\n    BaseRenderer.prototype.checkLayers = function (num) {\n      var i,\n          len = this.layers.length,\n          data;\n      this.completeLayers = true;\n\n      for (i = len - 1; i >= 0; i--) {\n        if (!this.elements[i]) {\n          data = this.layers[i];\n\n          if (data.ip - data.st <= num - this.layers[i].st && data.op - data.st > num - this.layers[i].st) {\n            this.buildItem(i);\n          }\n        }\n\n        this.completeLayers = this.elements[i] ? this.completeLayers : false;\n      }\n\n      this.checkPendingElements();\n    };\n\n    BaseRenderer.prototype.createItem = function (layer) {\n      switch (layer.ty) {\n        case 2:\n          return this.createImage(layer);\n\n        case 0:\n          return this.createComp(layer);\n\n        case 1:\n          return this.createSolid(layer);\n\n        case 3:\n          return this.createNull(layer);\n\n        case 4:\n          return this.createShape(layer);\n\n        case 5:\n          return this.createText(layer);\n\n        case 13:\n          return this.createCamera(layer);\n      }\n\n      return this.createNull(layer);\n    };\n\n    BaseRenderer.prototype.createCamera = function () {\n      throw new Error('You\\'re using a 3d camera. Try the html renderer.');\n    };\n\n    BaseRenderer.prototype.buildAllItems = function () {\n      var i,\n          len = this.layers.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.buildItem(i);\n      }\n\n      this.checkPendingElements();\n    };\n\n    BaseRenderer.prototype.includeLayers = function (newLayers) {\n      this.completeLayers = false;\n      var i,\n          len = newLayers.length;\n      var j,\n          jLen = this.layers.length;\n\n      for (i = 0; i < len; i += 1) {\n        j = 0;\n\n        while (j < jLen) {\n          if (this.layers[j].id == newLayers[i].id) {\n            this.layers[j] = newLayers[i];\n            break;\n          }\n\n          j += 1;\n        }\n      }\n    };\n\n    BaseRenderer.prototype.setProjectInterface = function (pInterface) {\n      this.globalData.projectInterface = pInterface;\n    };\n\n    BaseRenderer.prototype.initItems = function () {\n      if (!this.globalData.progressiveLoad) {\n        this.buildAllItems();\n      }\n    };\n\n    BaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\n      var elements = this.elements;\n      var layers = this.layers;\n      var i = 0,\n          len = layers.length;\n\n      while (i < len) {\n        if (layers[i].ind == parentName) {\n          if (!elements[i] || elements[i] === true) {\n            this.buildItem(i);\n            this.addPendingElement(element);\n          } else {\n            hierarchy.push(elements[i]);\n            elements[i].setAsParent();\n\n            if (layers[i].parent !== undefined) {\n              this.buildElementParenting(element, layers[i].parent, hierarchy);\n            } else {\n              element.setHierarchy(hierarchy);\n            }\n          }\n        }\n\n        i += 1;\n      }\n    };\n\n    BaseRenderer.prototype.addPendingElement = function (element) {\n      this.pendingElements.push(element);\n    };\n\n    BaseRenderer.prototype.searchExtraCompositions = function (assets) {\n      var i,\n          len = assets.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (assets[i].xt) {\n          var comp = this.createComp(assets[i]);\n          comp.initExpressions();\n          this.globalData.projectInterface.registerComposition(comp);\n        }\n      }\n    };\n\n    BaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\n      this.globalData.fontManager = new FontManager();\n      this.globalData.fontManager.addChars(animData.chars);\n      this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\n      this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\n      this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\n      this.globalData.imageLoader = this.animationItem.imagePreloader;\n      this.globalData.frameId = 0;\n      this.globalData.frameRate = animData.fr;\n      this.globalData.nm = animData.nm;\n      this.globalData.compSize = {\n        w: animData.w,\n        h: animData.h\n      };\n    };\n\n    function SVGRenderer(animationItem, config) {\n      this.animationItem = animationItem;\n      this.layers = null;\n      this.renderedFrame = -1;\n      this.svgElement = createNS('svg');\n      var ariaLabel = '';\n\n      if (config && config.title) {\n        var titleElement = createNS('title');\n        var titleId = createElementID();\n        titleElement.setAttribute('id', titleId);\n        titleElement.textContent = config.title;\n        this.svgElement.appendChild(titleElement);\n        ariaLabel += titleId;\n      }\n\n      if (config && config.description) {\n        var descElement = createNS('desc');\n        var descId = createElementID();\n        descElement.setAttribute('id', descId);\n        descElement.textContent = config.description;\n        this.svgElement.appendChild(descElement);\n        ariaLabel += ' ' + descId;\n      }\n\n      if (ariaLabel) {\n        this.svgElement.setAttribute('aria-labelledby', ariaLabel);\n      }\n\n      var defs = createNS('defs');\n      this.svgElement.appendChild(defs);\n      var maskElement = createNS('g');\n      this.svgElement.appendChild(maskElement);\n      this.layerElement = maskElement;\n      this.renderConfig = {\n        preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n        imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n        progressiveLoad: config && config.progressiveLoad || false,\n        hideOnTransparent: config && config.hideOnTransparent === false ? false : true,\n        viewBoxOnly: config && config.viewBoxOnly || false,\n        viewBoxSize: config && config.viewBoxSize || false,\n        className: config && config.className || ''\n      };\n      this.globalData = {\n        _mdf: false,\n        frameNum: -1,\n        defs: defs,\n        renderConfig: this.renderConfig\n      };\n      this.elements = [];\n      this.pendingElements = [];\n      this.destroyed = false;\n      this.rendererType = 'svg';\n    }\n\n    extendPrototype([BaseRenderer], SVGRenderer);\n\n    SVGRenderer.prototype.createNull = function (data) {\n      return new NullElement(data, this.globalData, this);\n    };\n\n    SVGRenderer.prototype.createShape = function (data) {\n      return new SVGShapeElement(data, this.globalData, this);\n    };\n\n    SVGRenderer.prototype.createText = function (data) {\n      return new SVGTextElement(data, this.globalData, this);\n    };\n\n    SVGRenderer.prototype.createImage = function (data) {\n      return new IImageElement(data, this.globalData, this);\n    };\n\n    SVGRenderer.prototype.createComp = function (data) {\n      return new SVGCompElement(data, this.globalData, this);\n    };\n\n    SVGRenderer.prototype.createSolid = function (data) {\n      return new ISolidElement(data, this.globalData, this);\n    };\n\n    SVGRenderer.prototype.configAnimation = function (animData) {\n      this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n      if (this.renderConfig.viewBoxSize) {\n        this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\n      } else {\n        this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\n      }\n\n      if (!this.renderConfig.viewBoxOnly) {\n        this.svgElement.setAttribute('width', animData.w);\n        this.svgElement.setAttribute('height', animData.h);\n        this.svgElement.style.width = '100%';\n        this.svgElement.style.height = '100%';\n        this.svgElement.style.transform = 'translate3d(0,0,0)';\n      }\n\n      if (this.renderConfig.className) {\n        this.svgElement.setAttribute('class', this.renderConfig.className);\n      }\n\n      this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio); //this.layerElement.style.transform = 'translate3d(0,0,0)';\n      //this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\n\n      this.animationItem.wrapper.appendChild(this.svgElement); //Mask animation\n\n      var defs = this.globalData.defs;\n      this.setupGlobalData(animData, defs);\n      this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n      this.data = animData;\n      var maskElement = createNS('clipPath');\n      var rect = createNS('rect');\n      rect.setAttribute('width', animData.w);\n      rect.setAttribute('height', animData.h);\n      rect.setAttribute('x', 0);\n      rect.setAttribute('y', 0);\n      var maskId = createElementID();\n      maskElement.setAttribute('id', maskId);\n      maskElement.appendChild(rect);\n      this.layerElement.setAttribute(\"clip-path\", \"url(\" + locationHref + \"#\" + maskId + \")\");\n      defs.appendChild(maskElement);\n      this.layers = animData.layers;\n      this.elements = createSizedArray(animData.layers.length);\n    };\n\n    SVGRenderer.prototype.destroy = function () {\n      this.animationItem.wrapper.innerHTML = '';\n      this.layerElement = null;\n      this.globalData.defs = null;\n      var i,\n          len = this.layers ? this.layers.length : 0;\n\n      for (i = 0; i < len; i++) {\n        if (this.elements[i]) {\n          this.elements[i].destroy();\n        }\n      }\n\n      this.elements.length = 0;\n      this.destroyed = true;\n      this.animationItem = null;\n    };\n\n    SVGRenderer.prototype.updateContainerSize = function () {};\n\n    SVGRenderer.prototype.buildItem = function (pos) {\n      var elements = this.elements;\n\n      if (elements[pos] || this.layers[pos].ty == 99) {\n        return;\n      }\n\n      elements[pos] = true;\n      var element = this.createItem(this.layers[pos]);\n      elements[pos] = element;\n\n      if (expressionsPlugin) {\n        if (this.layers[pos].ty === 0) {\n          this.globalData.projectInterface.registerComposition(element);\n        }\n\n        element.initExpressions();\n      }\n\n      this.appendElementInPos(element, pos);\n\n      if (this.layers[pos].tt) {\n        if (!this.elements[pos - 1] || this.elements[pos - 1] === true) {\n          this.buildItem(pos - 1);\n          this.addPendingElement(element);\n        } else {\n          element.setMatte(elements[pos - 1].layerId);\n        }\n      }\n    };\n\n    SVGRenderer.prototype.checkPendingElements = function () {\n      while (this.pendingElements.length) {\n        var element = this.pendingElements.pop();\n        element.checkParenting();\n\n        if (element.data.tt) {\n          var i = 0,\n              len = this.elements.length;\n\n          while (i < len) {\n            if (this.elements[i] === element) {\n              element.setMatte(this.elements[i - 1].layerId);\n              break;\n            }\n\n            i += 1;\n          }\n        }\n      }\n    };\n\n    SVGRenderer.prototype.renderFrame = function (num) {\n      if (this.renderedFrame === num || this.destroyed) {\n        return;\n      }\n\n      if (num === null) {\n        num = this.renderedFrame;\n      } else {\n        this.renderedFrame = num;\n      } // console.log('-------');\n      // console.log('FRAME ',num);\n\n\n      this.globalData.frameNum = num;\n      this.globalData.frameId += 1;\n      this.globalData.projectInterface.currentFrame = num;\n      this.globalData._mdf = false;\n      var i,\n          len = this.layers.length;\n\n      if (!this.completeLayers) {\n        this.checkLayers(num);\n      }\n\n      for (i = len - 1; i >= 0; i--) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].prepareFrame(num - this.layers[i].st);\n        }\n      }\n\n      if (this.globalData._mdf) {\n        for (i = 0; i < len; i += 1) {\n          if (this.completeLayers || this.elements[i]) {\n            this.elements[i].renderFrame();\n          }\n        }\n      }\n    };\n\n    SVGRenderer.prototype.appendElementInPos = function (element, pos) {\n      var newElement = element.getBaseElement();\n\n      if (!newElement) {\n        return;\n      }\n\n      var i = 0;\n      var nextElement;\n\n      while (i < pos) {\n        if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\n          nextElement = this.elements[i].getBaseElement();\n        }\n\n        i += 1;\n      }\n\n      if (nextElement) {\n        this.layerElement.insertBefore(newElement, nextElement);\n      } else {\n        this.layerElement.appendChild(newElement);\n      }\n    };\n\n    SVGRenderer.prototype.hide = function () {\n      this.layerElement.style.display = 'none';\n    };\n\n    SVGRenderer.prototype.show = function () {\n      this.layerElement.style.display = 'block';\n    };\n\n    function CanvasRenderer(animationItem, config) {\n      this.animationItem = animationItem;\n      this.renderConfig = {\n        clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\n        context: config && config.context || null,\n        progressiveLoad: config && config.progressiveLoad || false,\n        preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n        imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n        className: config && config.className || ''\n      };\n      this.renderConfig.dpr = config && config.dpr || 1;\n\n      if (this.animationItem.wrapper) {\n        this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\n      }\n\n      this.renderedFrame = -1;\n      this.globalData = {\n        frameNum: -1,\n        _mdf: false,\n        renderConfig: this.renderConfig,\n        currentGlobalAlpha: -1\n      };\n      this.contextData = new CVContextData();\n      this.elements = [];\n      this.pendingElements = [];\n      this.transformMat = new Matrix();\n      this.completeLayers = false;\n      this.rendererType = 'canvas';\n    }\n\n    extendPrototype([BaseRenderer], CanvasRenderer);\n\n    CanvasRenderer.prototype.createShape = function (data) {\n      return new CVShapeElement(data, this.globalData, this);\n    };\n\n    CanvasRenderer.prototype.createText = function (data) {\n      return new CVTextElement(data, this.globalData, this);\n    };\n\n    CanvasRenderer.prototype.createImage = function (data) {\n      return new CVImageElement(data, this.globalData, this);\n    };\n\n    CanvasRenderer.prototype.createComp = function (data) {\n      return new CVCompElement(data, this.globalData, this);\n    };\n\n    CanvasRenderer.prototype.createSolid = function (data) {\n      return new CVSolidElement(data, this.globalData, this);\n    };\n\n    CanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\n\n    CanvasRenderer.prototype.ctxTransform = function (props) {\n      if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\n        return;\n      }\n\n      if (!this.renderConfig.clearCanvas) {\n        this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\n        return;\n      }\n\n      this.transformMat.cloneFromProps(props);\n      var cProps = this.contextData.cTr.props;\n      this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]); //this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\n\n      this.contextData.cTr.cloneFromProps(this.transformMat.props);\n      var trProps = this.contextData.cTr.props;\n      this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\n    };\n\n    CanvasRenderer.prototype.ctxOpacity = function (op) {\n      /*if(op === 1){\r\n          return;\r\n      }*/\n      if (!this.renderConfig.clearCanvas) {\n        this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\n        return;\n      }\n\n      this.contextData.cO *= op < 0 ? 0 : op;\n\n      if (this.globalData.currentGlobalAlpha !== this.contextData.cO) {\n        this.canvasContext.globalAlpha = this.contextData.cO;\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\n      }\n    };\n\n    CanvasRenderer.prototype.reset = function () {\n      if (!this.renderConfig.clearCanvas) {\n        this.canvasContext.restore();\n        return;\n      }\n\n      this.contextData.reset();\n    };\n\n    CanvasRenderer.prototype.save = function (actionFlag) {\n      if (!this.renderConfig.clearCanvas) {\n        this.canvasContext.save();\n        return;\n      }\n\n      if (actionFlag) {\n        this.canvasContext.save();\n      }\n\n      var props = this.contextData.cTr.props;\n\n      if (this.contextData._length <= this.contextData.cArrPos) {\n        this.contextData.duplicate();\n      }\n\n      var i,\n          arr = this.contextData.saved[this.contextData.cArrPos];\n\n      for (i = 0; i < 16; i += 1) {\n        arr[i] = props[i];\n      }\n\n      this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\n      this.contextData.cArrPos += 1;\n    };\n\n    CanvasRenderer.prototype.restore = function (actionFlag) {\n      if (!this.renderConfig.clearCanvas) {\n        this.canvasContext.restore();\n        return;\n      }\n\n      if (actionFlag) {\n        this.canvasContext.restore();\n        this.globalData.blendMode = 'source-over';\n      }\n\n      this.contextData.cArrPos -= 1;\n      var popped = this.contextData.saved[this.contextData.cArrPos];\n      var i,\n          arr = this.contextData.cTr.props;\n\n      for (i = 0; i < 16; i += 1) {\n        arr[i] = popped[i];\n      }\n\n      this.canvasContext.setTransform(popped[0], popped[1], popped[4], popped[5], popped[12], popped[13]);\n      popped = this.contextData.savedOp[this.contextData.cArrPos];\n      this.contextData.cO = popped;\n\n      if (this.globalData.currentGlobalAlpha !== popped) {\n        this.canvasContext.globalAlpha = popped;\n        this.globalData.currentGlobalAlpha = popped;\n      }\n    };\n\n    CanvasRenderer.prototype.configAnimation = function (animData) {\n      if (this.animationItem.wrapper) {\n        this.animationItem.container = createTag('canvas');\n        this.animationItem.container.style.width = '100%';\n        this.animationItem.container.style.height = '100%'; //this.animationItem.container.style.transform = 'translate3d(0,0,0)';\n        //this.animationItem.container.style.webkitTransform = 'translate3d(0,0,0)';\n\n        this.animationItem.container.style.transformOrigin = this.animationItem.container.style.mozTransformOrigin = this.animationItem.container.style.webkitTransformOrigin = this.animationItem.container.style['-webkit-transform'] = \"0px 0px 0px\";\n        this.animationItem.wrapper.appendChild(this.animationItem.container);\n        this.canvasContext = this.animationItem.container.getContext('2d');\n\n        if (this.renderConfig.className) {\n          this.animationItem.container.setAttribute('class', this.renderConfig.className);\n        }\n      } else {\n        this.canvasContext = this.renderConfig.context;\n      }\n\n      this.data = animData;\n      this.layers = animData.layers;\n      this.transformCanvas = {\n        w: animData.w,\n        h: animData.h,\n        sx: 0,\n        sy: 0,\n        tx: 0,\n        ty: 0\n      };\n      this.setupGlobalData(animData, document.body);\n      this.globalData.canvasContext = this.canvasContext;\n      this.globalData.renderer = this;\n      this.globalData.isDashed = false;\n      this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n      this.globalData.transformCanvas = this.transformCanvas;\n      this.elements = createSizedArray(animData.layers.length);\n      this.updateContainerSize();\n    };\n\n    CanvasRenderer.prototype.updateContainerSize = function () {\n      this.reset();\n      var elementWidth, elementHeight;\n\n      if (this.animationItem.wrapper && this.animationItem.container) {\n        elementWidth = this.animationItem.wrapper.offsetWidth;\n        elementHeight = this.animationItem.wrapper.offsetHeight;\n        this.animationItem.container.setAttribute('width', elementWidth * this.renderConfig.dpr);\n        this.animationItem.container.setAttribute('height', elementHeight * this.renderConfig.dpr);\n      } else {\n        elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\n        elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\n      }\n\n      var elementRel, animationRel;\n\n      if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\n        var par = this.renderConfig.preserveAspectRatio.split(' ');\n        var fillType = par[1] || 'meet';\n        var pos = par[0] || 'xMidYMid';\n        var xPos = pos.substr(0, 4);\n        var yPos = pos.substr(4);\n        elementRel = elementWidth / elementHeight;\n        animationRel = this.transformCanvas.w / this.transformCanvas.h;\n\n        if (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice') {\n          this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n          this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n        } else {\n          this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n          this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n        }\n\n        if (xPos === 'xMid' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n          this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2 * this.renderConfig.dpr;\n        } else if (xPos === 'xMax' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n          this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\n        } else {\n          this.transformCanvas.tx = 0;\n        }\n\n        if (yPos === 'YMid' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n          this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2 * this.renderConfig.dpr;\n        } else if (yPos === 'YMax' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n          this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) * this.renderConfig.dpr;\n        } else {\n          this.transformCanvas.ty = 0;\n        }\n      } else if (this.renderConfig.preserveAspectRatio == 'none') {\n        this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n        this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n        this.transformCanvas.tx = 0;\n        this.transformCanvas.ty = 0;\n      } else {\n        this.transformCanvas.sx = this.renderConfig.dpr;\n        this.transformCanvas.sy = this.renderConfig.dpr;\n        this.transformCanvas.tx = 0;\n        this.transformCanvas.ty = 0;\n      }\n\n      this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\n      /*var i, len = this.elements.length;\r\n      for(i=0;i<len;i+=1){\r\n          if(this.elements[i] && this.elements[i].data.ty === 0){\r\n              this.elements[i].resize(this.globalData.transformCanvas);\r\n          }\r\n      }*/\n\n      this.ctxTransform(this.transformCanvas.props);\n      this.canvasContext.beginPath();\n      this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n      this.canvasContext.closePath();\n      this.canvasContext.clip();\n      this.renderFrame(this.renderedFrame, true);\n    };\n\n    CanvasRenderer.prototype.destroy = function () {\n      if (this.renderConfig.clearCanvas) {\n        this.animationItem.wrapper.innerHTML = '';\n      }\n\n      var i,\n          len = this.layers ? this.layers.length : 0;\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        if (this.elements[i]) {\n          this.elements[i].destroy();\n        }\n      }\n\n      this.elements.length = 0;\n      this.globalData.canvasContext = null;\n      this.animationItem.container = null;\n      this.destroyed = true;\n    };\n\n    CanvasRenderer.prototype.renderFrame = function (num, forceRender) {\n      if (this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender || this.destroyed || num === -1) {\n        return;\n      }\n\n      this.renderedFrame = num;\n      this.globalData.frameNum = num - this.animationItem._isFirstFrame;\n      this.globalData.frameId += 1;\n      this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\n      this.globalData.projectInterface.currentFrame = num; // console.log('--------');\n      // console.log('NEW: ',num);\n\n      var i,\n          len = this.layers.length;\n\n      if (!this.completeLayers) {\n        this.checkLayers(num);\n      }\n\n      for (i = 0; i < len; i++) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].prepareFrame(num - this.layers[i].st);\n        }\n      }\n\n      if (this.globalData._mdf) {\n        if (this.renderConfig.clearCanvas === true) {\n          this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n        } else {\n          this.save();\n        }\n\n        for (i = len - 1; i >= 0; i -= 1) {\n          if (this.completeLayers || this.elements[i]) {\n            this.elements[i].renderFrame();\n          }\n        }\n\n        if (this.renderConfig.clearCanvas !== true) {\n          this.restore();\n        }\n      }\n    };\n\n    CanvasRenderer.prototype.buildItem = function (pos) {\n      var elements = this.elements;\n\n      if (elements[pos] || this.layers[pos].ty == 99) {\n        return;\n      }\n\n      var element = this.createItem(this.layers[pos], this, this.globalData);\n      elements[pos] = element;\n      element.initExpressions();\n      /*if(this.layers[pos].ty === 0){\r\n          element.resize(this.globalData.transformCanvas);\r\n      }*/\n    };\n\n    CanvasRenderer.prototype.checkPendingElements = function () {\n      while (this.pendingElements.length) {\n        var element = this.pendingElements.pop();\n        element.checkParenting();\n      }\n    };\n\n    CanvasRenderer.prototype.hide = function () {\n      this.animationItem.container.style.display = 'none';\n    };\n\n    CanvasRenderer.prototype.show = function () {\n      this.animationItem.container.style.display = 'block';\n    };\n\n    function HybridRenderer(animationItem, config) {\n      this.animationItem = animationItem;\n      this.layers = null;\n      this.renderedFrame = -1;\n      this.renderConfig = {\n        className: config && config.className || '',\n        imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n        hideOnTransparent: config && config.hideOnTransparent === false ? false : true\n      };\n      this.globalData = {\n        _mdf: false,\n        frameNum: -1,\n        renderConfig: this.renderConfig\n      };\n      this.pendingElements = [];\n      this.elements = [];\n      this.threeDElements = [];\n      this.destroyed = false;\n      this.camera = null;\n      this.supports3d = true;\n      this.rendererType = 'html';\n    }\n\n    extendPrototype([BaseRenderer], HybridRenderer);\n    HybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\n\n    HybridRenderer.prototype.checkPendingElements = function () {\n      while (this.pendingElements.length) {\n        var element = this.pendingElements.pop();\n        element.checkParenting();\n      }\n    };\n\n    HybridRenderer.prototype.appendElementInPos = function (element, pos) {\n      var newDOMElement = element.getBaseElement();\n\n      if (!newDOMElement) {\n        return;\n      }\n\n      var layer = this.layers[pos];\n\n      if (!layer.ddd || !this.supports3d) {\n        if (this.threeDElements) {\n          this.addTo3dContainer(newDOMElement, pos);\n        } else {\n          var i = 0;\n          var nextDOMElement, nextLayer, tmpDOMElement;\n\n          while (i < pos) {\n            if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\n              nextLayer = this.elements[i];\n              tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\n              nextDOMElement = tmpDOMElement || nextDOMElement;\n            }\n\n            i += 1;\n          }\n\n          if (nextDOMElement) {\n            if (!layer.ddd || !this.supports3d) {\n              this.layerElement.insertBefore(newDOMElement, nextDOMElement);\n            }\n          } else {\n            if (!layer.ddd || !this.supports3d) {\n              this.layerElement.appendChild(newDOMElement);\n            }\n          }\n        }\n      } else {\n        this.addTo3dContainer(newDOMElement, pos);\n      }\n    };\n\n    HybridRenderer.prototype.createShape = function (data) {\n      if (!this.supports3d) {\n        return new SVGShapeElement(data, this.globalData, this);\n      }\n\n      return new HShapeElement(data, this.globalData, this);\n    };\n\n    HybridRenderer.prototype.createText = function (data) {\n      if (!this.supports3d) {\n        return new SVGTextElement(data, this.globalData, this);\n      }\n\n      return new HTextElement(data, this.globalData, this);\n    };\n\n    HybridRenderer.prototype.createCamera = function (data) {\n      this.camera = new HCameraElement(data, this.globalData, this);\n      return this.camera;\n    };\n\n    HybridRenderer.prototype.createImage = function (data) {\n      if (!this.supports3d) {\n        return new IImageElement(data, this.globalData, this);\n      }\n\n      return new HImageElement(data, this.globalData, this);\n    };\n\n    HybridRenderer.prototype.createComp = function (data) {\n      if (!this.supports3d) {\n        return new SVGCompElement(data, this.globalData, this);\n      }\n\n      return new HCompElement(data, this.globalData, this);\n    };\n\n    HybridRenderer.prototype.createSolid = function (data) {\n      if (!this.supports3d) {\n        return new ISolidElement(data, this.globalData, this);\n      }\n\n      return new HSolidElement(data, this.globalData, this);\n    };\n\n    HybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\n\n    HybridRenderer.prototype.getThreeDContainerByPos = function (pos) {\n      var i = 0,\n          len = this.threeDElements.length;\n\n      while (i < len) {\n        if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\n          return this.threeDElements[i].perspectiveElem;\n        }\n\n        i += 1;\n      }\n    };\n\n    HybridRenderer.prototype.createThreeDContainer = function (pos, type) {\n      var perspectiveElem = createTag('div');\n      styleDiv(perspectiveElem);\n      var container = createTag('div');\n      styleDiv(container);\n\n      if (type === '3d') {\n        perspectiveElem.style.width = this.globalData.compSize.w + 'px';\n        perspectiveElem.style.height = this.globalData.compSize.h + 'px';\n        perspectiveElem.style.transformOrigin = perspectiveElem.style.mozTransformOrigin = perspectiveElem.style.webkitTransformOrigin = \"50% 50%\";\n        container.style.transform = container.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\n      }\n\n      perspectiveElem.appendChild(container); //this.resizerElem.appendChild(perspectiveElem);\n\n      var threeDContainerData = {\n        container: container,\n        perspectiveElem: perspectiveElem,\n        startPos: pos,\n        endPos: pos,\n        type: type\n      };\n      this.threeDElements.push(threeDContainerData);\n      return threeDContainerData;\n    };\n\n    HybridRenderer.prototype.build3dContainers = function () {\n      var i,\n          len = this.layers.length;\n      var lastThreeDContainerData;\n      var currentContainer = '';\n\n      for (i = 0; i < len; i += 1) {\n        if (this.layers[i].ddd && this.layers[i].ty !== 3) {\n          if (currentContainer !== '3d') {\n            currentContainer = '3d';\n            lastThreeDContainerData = this.createThreeDContainer(i, '3d');\n          }\n\n          lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\n        } else {\n          if (currentContainer !== '2d') {\n            currentContainer = '2d';\n            lastThreeDContainerData = this.createThreeDContainer(i, '2d');\n          }\n\n          lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\n        }\n      }\n\n      len = this.threeDElements.length;\n\n      for (i = len - 1; i >= 0; i--) {\n        this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\n      }\n    };\n\n    HybridRenderer.prototype.addTo3dContainer = function (elem, pos) {\n      var i = 0,\n          len = this.threeDElements.length;\n\n      while (i < len) {\n        if (pos <= this.threeDElements[i].endPos) {\n          var j = this.threeDElements[i].startPos;\n          var nextElement;\n\n          while (j < pos) {\n            if (this.elements[j] && this.elements[j].getBaseElement) {\n              nextElement = this.elements[j].getBaseElement();\n            }\n\n            j += 1;\n          }\n\n          if (nextElement) {\n            this.threeDElements[i].container.insertBefore(elem, nextElement);\n          } else {\n            this.threeDElements[i].container.appendChild(elem);\n          }\n\n          break;\n        }\n\n        i += 1;\n      }\n    };\n\n    HybridRenderer.prototype.configAnimation = function (animData) {\n      var resizerElem = createTag('div');\n      var wrapper = this.animationItem.wrapper;\n      resizerElem.style.width = animData.w + 'px';\n      resizerElem.style.height = animData.h + 'px';\n      this.resizerElem = resizerElem;\n      styleDiv(resizerElem);\n      resizerElem.style.transformStyle = resizerElem.style.webkitTransformStyle = resizerElem.style.mozTransformStyle = \"flat\";\n\n      if (this.renderConfig.className) {\n        resizerElem.setAttribute('class', this.renderConfig.className);\n      }\n\n      wrapper.appendChild(resizerElem);\n      resizerElem.style.overflow = 'hidden';\n      var svg = createNS('svg');\n      svg.setAttribute('width', '1');\n      svg.setAttribute('height', '1');\n      styleDiv(svg);\n      this.resizerElem.appendChild(svg);\n      var defs = createNS('defs');\n      svg.appendChild(defs);\n      this.data = animData; //Mask animation\n\n      this.setupGlobalData(animData, svg);\n      this.globalData.defs = defs;\n      this.layers = animData.layers;\n      this.layerElement = this.resizerElem;\n      this.build3dContainers();\n      this.updateContainerSize();\n    };\n\n    HybridRenderer.prototype.destroy = function () {\n      this.animationItem.wrapper.innerHTML = '';\n      this.animationItem.container = null;\n      this.globalData.defs = null;\n      var i,\n          len = this.layers ? this.layers.length : 0;\n\n      for (i = 0; i < len; i++) {\n        this.elements[i].destroy();\n      }\n\n      this.elements.length = 0;\n      this.destroyed = true;\n      this.animationItem = null;\n    };\n\n    HybridRenderer.prototype.updateContainerSize = function () {\n      var elementWidth = this.animationItem.wrapper.offsetWidth;\n      var elementHeight = this.animationItem.wrapper.offsetHeight;\n      var elementRel = elementWidth / elementHeight;\n      var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\n      var sx, sy, tx, ty;\n\n      if (animationRel > elementRel) {\n        sx = elementWidth / this.globalData.compSize.w;\n        sy = elementWidth / this.globalData.compSize.w;\n        tx = 0;\n        ty = (elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2;\n      } else {\n        sx = elementHeight / this.globalData.compSize.h;\n        sy = elementHeight / this.globalData.compSize.h;\n        tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\n        ty = 0;\n      }\n\n      this.resizerElem.style.transform = this.resizerElem.style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\n    };\n\n    HybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\n\n    HybridRenderer.prototype.hide = function () {\n      this.resizerElem.style.display = 'none';\n    };\n\n    HybridRenderer.prototype.show = function () {\n      this.resizerElem.style.display = 'block';\n    };\n\n    HybridRenderer.prototype.initItems = function () {\n      this.buildAllItems();\n\n      if (this.camera) {\n        this.camera.setup();\n      } else {\n        var cWidth = this.globalData.compSize.w;\n        var cHeight = this.globalData.compSize.h;\n        var i,\n            len = this.threeDElements.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.threeDElements[i].perspectiveElem.style.perspective = this.threeDElements[i].perspectiveElem.style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\n        }\n      }\n    };\n\n    HybridRenderer.prototype.searchExtraCompositions = function (assets) {\n      var i,\n          len = assets.length;\n      var floatingContainer = createTag('div');\n\n      for (i = 0; i < len; i += 1) {\n        if (assets[i].xt) {\n          var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\n          comp.initExpressions();\n          this.globalData.projectInterface.registerComposition(comp);\n        }\n      }\n    };\n\n    function MaskElement(data, element, globalData) {\n      this.data = data;\n      this.element = element;\n      this.globalData = globalData;\n      this.storedData = [];\n      this.masksProperties = this.data.masksProperties || [];\n      this.maskElement = null;\n      var defs = this.globalData.defs;\n      var i,\n          len = this.masksProperties ? this.masksProperties.length : 0;\n      this.viewData = createSizedArray(len);\n      this.solidPath = '';\n      var path,\n          properties = this.masksProperties;\n      var count = 0;\n      var currentMasks = [];\n      var j, jLen;\n      var layerId = createElementID();\n      var rect, expansor, feMorph, x;\n      var maskType = 'clipPath',\n          maskRef = 'clip-path';\n\n      for (i = 0; i < len; i++) {\n        if (properties[i].mode !== 'a' && properties[i].mode !== 'n' || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\n          maskType = 'mask';\n          maskRef = 'mask';\n        }\n\n        if ((properties[i].mode == 's' || properties[i].mode == 'i') && count === 0) {\n          rect = createNS('rect');\n          rect.setAttribute('fill', '#ffffff');\n          rect.setAttribute('width', this.element.comp.data.w || 0);\n          rect.setAttribute('height', this.element.comp.data.h || 0);\n          currentMasks.push(rect);\n        } else {\n          rect = null;\n        }\n\n        path = createNS('path');\n\n        if (properties[i].mode == 'n') {\n          // TODO move this to a factory or to a constructor\n          this.viewData[i] = {\n            op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n            prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n            elem: path,\n            lastPath: ''\n          };\n          defs.appendChild(path);\n          continue;\n        }\n\n        count += 1;\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        path.setAttribute('clip-rule', 'nonzero');\n        var filterID;\n\n        if (properties[i].x.k !== 0) {\n          maskType = 'mask';\n          maskRef = 'mask';\n          x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\n          filterID = createElementID();\n          expansor = createNS('filter');\n          expansor.setAttribute('id', filterID);\n          feMorph = createNS('feMorphology');\n          feMorph.setAttribute('operator', 'erode');\n          feMorph.setAttribute('in', 'SourceGraphic');\n          feMorph.setAttribute('radius', '0');\n          expansor.appendChild(feMorph);\n          defs.appendChild(expansor);\n          path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        } else {\n          feMorph = null;\n          x = null;\n        } // TODO move this to a factory or to a constructor\n\n\n        this.storedData[i] = {\n          elem: path,\n          x: x,\n          expan: feMorph,\n          lastPath: '',\n          lastOperator: '',\n          filterId: filterID,\n          lastRadius: 0\n        };\n\n        if (properties[i].mode == 'i') {\n          jLen = currentMasks.length;\n          var g = createNS('g');\n\n          for (j = 0; j < jLen; j += 1) {\n            g.appendChild(currentMasks[j]);\n          }\n\n          var mask = createNS('mask');\n          mask.setAttribute('mask-type', 'alpha');\n          mask.setAttribute('id', layerId + '_' + count);\n          mask.appendChild(path);\n          defs.appendChild(mask);\n          g.setAttribute('mask', 'url(' + locationHref + '#' + layerId + '_' + count + ')');\n          currentMasks.length = 0;\n          currentMasks.push(g);\n        } else {\n          currentMasks.push(path);\n        }\n\n        if (properties[i].inv && !this.solidPath) {\n          this.solidPath = this.createLayerSolidPath();\n        } // TODO move this to a factory or to a constructor\n\n\n        this.viewData[i] = {\n          elem: path,\n          lastPath: '',\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n          invRect: rect\n        };\n\n        if (!this.viewData[i].prop.k) {\n          this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\n        }\n      }\n\n      this.maskElement = createNS(maskType);\n      len = currentMasks.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.maskElement.appendChild(currentMasks[i]);\n      }\n\n      if (count > 0) {\n        this.maskElement.setAttribute('id', layerId);\n        this.element.maskedElement.setAttribute(maskRef, \"url(\" + locationHref + \"#\" + layerId + \")\");\n        defs.appendChild(this.maskElement);\n      }\n\n      if (this.viewData.length) {\n        this.element.addRenderableComponent(this);\n      }\n    }\n\n    MaskElement.prototype.getMaskProperty = function (pos) {\n      return this.viewData[pos].prop;\n    };\n\n    MaskElement.prototype.renderFrame = function (isFirstFrame) {\n      var finalMat = this.element.finalTransform.mat;\n      var i,\n          len = this.masksProperties.length;\n\n      for (i = 0; i < len; i++) {\n        if (this.viewData[i].prop._mdf || isFirstFrame) {\n          this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\n        }\n\n        if (this.viewData[i].op._mdf || isFirstFrame) {\n          this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\n        }\n\n        if (this.masksProperties[i].mode !== 'n') {\n          if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\n            this.viewData[i].invRect.setAttribute('x', -finalMat.props[12]);\n            this.viewData[i].invRect.setAttribute('y', -finalMat.props[13]);\n          }\n\n          if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\n            var feMorph = this.storedData[i].expan;\n\n            if (this.storedData[i].x.v < 0) {\n              if (this.storedData[i].lastOperator !== 'erode') {\n                this.storedData[i].lastOperator = 'erode';\n                this.storedData[i].elem.setAttribute('filter', 'url(' + locationHref + '#' + this.storedData[i].filterId + ')');\n              }\n\n              feMorph.setAttribute('radius', -this.storedData[i].x.v);\n            } else {\n              if (this.storedData[i].lastOperator !== 'dilate') {\n                this.storedData[i].lastOperator = 'dilate';\n                this.storedData[i].elem.setAttribute('filter', null);\n              }\n\n              this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\n            }\n          }\n        }\n      }\n    };\n\n    MaskElement.prototype.getMaskelement = function () {\n      return this.maskElement;\n    };\n\n    MaskElement.prototype.createLayerSolidPath = function () {\n      var path = 'M0,0 ';\n      path += ' h' + this.globalData.compSize.w;\n      path += ' v' + this.globalData.compSize.h;\n      path += ' h-' + this.globalData.compSize.w;\n      path += ' v-' + this.globalData.compSize.h + ' ';\n      return path;\n    };\n\n    MaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\n      var pathString = \" M\" + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n      var i, len;\n      len = pathNodes._length;\n\n      for (i = 1; i < len; i += 1) {\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\n        pathString += \" C\" + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + \" \" + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + \" \" + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\n      } //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\n\n\n      if (pathNodes.c && len > 1) {\n        pathString += \" C\" + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + \" \" + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + \" \" + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n      } //pathNodes.__renderedString = pathString;\n\n\n      if (viewData.lastPath !== pathString) {\n        var pathShapeValue = '';\n\n        if (viewData.elem) {\n          if (pathNodes.c) {\n            pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\n          }\n\n          viewData.elem.setAttribute('d', pathShapeValue);\n        }\n\n        viewData.lastPath = pathString;\n      }\n    };\n\n    MaskElement.prototype.destroy = function () {\n      this.element = null;\n      this.globalData = null;\n      this.maskElement = null;\n      this.data = null;\n      this.masksProperties = null;\n    };\n    /**\r\n     * @file \r\n     * Handles AE's layer parenting property.\r\n     *\r\n     */\n\n\n    function HierarchyElement() {}\n\n    HierarchyElement.prototype = {\n      /**\r\n          * @function \r\n          * Initializes hierarchy properties\r\n          *\r\n          */\n      initHierarchy: function initHierarchy() {\n        //element's parent list\n        this.hierarchy = []; //if element is parent of another layer _isParent will be true\n\n        this._isParent = false;\n        this.checkParenting();\n      },\n\n      /**\r\n          * @function \r\n          * Sets layer's hierarchy.\r\n          * @param {array} hierarch\r\n          * layer's parent list\r\n          *\r\n          */\n      setHierarchy: function setHierarchy(hierarchy) {\n        this.hierarchy = hierarchy;\n      },\n\n      /**\r\n          * @function \r\n          * Sets layer as parent.\r\n          *\r\n          */\n      setAsParent: function setAsParent() {\n        this._isParent = true;\n      },\n\n      /**\r\n          * @function \r\n          * Searches layer's parenting chain\r\n          *\r\n          */\n      checkParenting: function checkParenting() {\n        if (this.data.parent !== undefined) {\n          this.comp.buildElementParenting(this, this.data.parent, []);\n        }\n      }\n    };\n    /**\r\n     * @file \r\n     * Handles element's layer frame update.\r\n     * Checks layer in point and out point\r\n     *\r\n     */\n\n    function FrameElement() {}\n\n    FrameElement.prototype = {\n      /**\r\n       * @function \r\n       * Initializes frame related properties.\r\n       *\r\n       */\n      initFrame: function initFrame() {\n        //set to true when inpoint is rendered\n        this._isFirstFrame = false; //list of animated properties\n\n        this.dynamicProperties = []; // If layer has been modified in current tick this will be true\n\n        this._mdf = false;\n      },\n\n      /**\r\n       * @function \r\n       * Calculates all dynamic values\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       * @param {boolean} isVisible\r\n       * if layers is currently in range\r\n       * \r\n       */\n      prepareProperties: function prepareProperties(num, isVisible) {\n        var i,\n            len = this.dynamicProperties.length;\n\n        for (i = 0; i < len; i += 1) {\n          if (isVisible || this._isParent && this.dynamicProperties[i].propType === 'transform') {\n            this.dynamicProperties[i].getValue();\n\n            if (this.dynamicProperties[i]._mdf) {\n              this.globalData._mdf = true;\n              this._mdf = true;\n            }\n          }\n        }\n      },\n      addDynamicProperty: function addDynamicProperty(prop) {\n        if (this.dynamicProperties.indexOf(prop) === -1) {\n          this.dynamicProperties.push(prop);\n        }\n      }\n    };\n\n    function TransformElement() {}\n\n    TransformElement.prototype = {\n      initTransform: function initTransform() {\n        this.finalTransform = {\n          mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {\n            o: 0\n          },\n          _matMdf: false,\n          _opMdf: false,\n          mat: new Matrix()\n        };\n\n        if (this.data.ao) {\n          this.finalTransform.mProp.autoOriented = true;\n        } //TODO: check TYPE 11: Guided elements\n\n\n        if (this.data.ty !== 11) ;\n      },\n      renderTransform: function renderTransform() {\n        this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\n        this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\n\n        if (this.hierarchy) {\n          var mat;\n          var finalMat = this.finalTransform.mat;\n          var i = 0,\n              len = this.hierarchy.length; //Checking if any of the transformation matrices in the hierarchy chain has changed.\n\n          if (!this.finalTransform._matMdf) {\n            while (i < len) {\n              if (this.hierarchy[i].finalTransform.mProp._mdf) {\n                this.finalTransform._matMdf = true;\n                break;\n              }\n\n              i += 1;\n            }\n          }\n\n          if (this.finalTransform._matMdf) {\n            mat = this.finalTransform.mProp.v.props;\n            finalMat.cloneFromProps(mat);\n\n            for (i = 0; i < len; i += 1) {\n              mat = this.hierarchy[i].finalTransform.mProp.v.props;\n              finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\n            }\n          }\n        }\n      },\n      globalToLocal: function globalToLocal(pt) {\n        var transforms = [];\n        transforms.push(this.finalTransform);\n        var flag = true;\n        var comp = this.comp;\n\n        while (flag) {\n          if (comp.finalTransform) {\n            if (comp.data.hasMask) {\n              transforms.splice(0, 0, comp.finalTransform);\n            }\n\n            comp = comp.comp;\n          } else {\n            flag = false;\n          }\n        }\n\n        var i,\n            len = transforms.length,\n            ptNew;\n\n        for (i = 0; i < len; i += 1) {\n          ptNew = transforms[i].mat.applyToPointArray(0, 0, 0); //ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\n\n          pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\n        }\n\n        return pt;\n      },\n      mHelper: new Matrix()\n    };\n\n    function RenderableElement() {}\n\n    RenderableElement.prototype = {\n      initRenderable: function initRenderable() {\n        //layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\n        this.isInRange = false; //layer's display state\n\n        this.hidden = false; // If layer's transparency equals 0, it can be hidden\n\n        this.isTransparent = false; //list of animated components\n\n        this.renderableComponents = [];\n      },\n      addRenderableComponent: function addRenderableComponent(component) {\n        if (this.renderableComponents.indexOf(component) === -1) {\n          this.renderableComponents.push(component);\n        }\n      },\n      removeRenderableComponent: function removeRenderableComponent(component) {\n        if (this.renderableComponents.indexOf(component) !== -1) {\n          this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\n        }\n      },\n      prepareRenderableFrame: function prepareRenderableFrame(num) {\n        this.checkLayerLimits(num);\n      },\n      checkTransparency: function checkTransparency() {\n        if (this.finalTransform.mProp.o.v <= 0) {\n          if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\n            this.isTransparent = true;\n            this.hide();\n          }\n        } else if (this.isTransparent) {\n          this.isTransparent = false;\n          this.show();\n        }\n      },\n\n      /**\r\n       * @function \r\n       * Initializes frame related properties.\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       * \r\n       */\n      checkLayerLimits: function checkLayerLimits(num) {\n        if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\n          if (this.isInRange !== true) {\n            this.globalData._mdf = true;\n            this._mdf = true;\n            this.isInRange = true;\n            this.show();\n          }\n        } else {\n          if (this.isInRange !== false) {\n            this.globalData._mdf = true;\n            this.isInRange = false;\n            this.hide();\n          }\n        }\n      },\n      renderRenderable: function renderRenderable() {\n        var i,\n            len = this.renderableComponents.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.renderableComponents[i].renderFrame(this._isFirstFrame);\n        }\n        /*this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame);*/\n\n      },\n      sourceRectAtTime: function sourceRectAtTime() {\n        return {\n          top: 0,\n          left: 0,\n          width: 100,\n          height: 100\n        };\n      },\n      getLayerSize: function getLayerSize() {\n        if (this.data.ty === 5) {\n          return {\n            w: this.data.textData.width,\n            h: this.data.textData.height\n          };\n        } else {\n          return {\n            w: this.data.width,\n            h: this.data.height\n          };\n        }\n      }\n    };\n\n    function RenderableDOMElement() {}\n\n    (function () {\n      var _prototype = {\n        initElement: function initElement(data, globalData, comp) {\n          this.initFrame();\n          this.initBaseData(data, globalData, comp);\n          this.initTransform(data, globalData, comp);\n          this.initHierarchy();\n          this.initRenderable();\n          this.initRendererElement();\n          this.createContainerElements();\n          this.createRenderableComponents();\n          this.createContent();\n          this.hide();\n        },\n        hide: function hide() {\n          if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n            var elem = this.baseElement || this.layerElement;\n            elem.style.display = 'none';\n            this.hidden = true;\n          }\n        },\n        show: function show() {\n          if (this.isInRange && !this.isTransparent) {\n            if (!this.data.hd) {\n              var elem = this.baseElement || this.layerElement;\n              elem.style.display = 'block';\n            }\n\n            this.hidden = false;\n            this._isFirstFrame = true;\n          }\n        },\n        renderFrame: function renderFrame() {\n          //If it is exported as hidden (data.hd === true) no need to render\n          //If it is not visible no need to render\n          if (this.data.hd || this.hidden) {\n            return;\n          }\n\n          this.renderTransform();\n          this.renderRenderable();\n          this.renderElement();\n          this.renderInnerContent();\n\n          if (this._isFirstFrame) {\n            this._isFirstFrame = false;\n          }\n        },\n        renderInnerContent: function renderInnerContent() {},\n        prepareFrame: function prepareFrame(num) {\n          this._mdf = false;\n          this.prepareRenderableFrame(num);\n          this.prepareProperties(num, this.isInRange);\n          this.checkTransparency();\n        },\n        destroy: function destroy() {\n          this.innerElem = null;\n          this.destroyBaseElement();\n        }\n      };\n      extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\n    })();\n\n    function ProcessedElement(element, position) {\n      this.elem = element;\n      this.pos = position;\n    }\n\n    function SVGStyleData(data, level) {\n      this.data = data;\n      this.type = data.ty;\n      this.d = '';\n      this.lvl = level;\n      this._mdf = false;\n      this.closed = data.hd === true;\n      this.pElem = createNS('path');\n      this.msElem = null;\n    }\n\n    SVGStyleData.prototype.reset = function () {\n      this.d = '';\n      this._mdf = false;\n    };\n\n    function SVGShapeData(transformers, level, shape) {\n      this.caches = [];\n      this.styles = [];\n      this.transformers = transformers;\n      this.lStr = '';\n      this.sh = shape;\n      this.lvl = level; //TODO find if there are some cases where _isAnimated can be false. \n      // For now, since shapes add up with other shapes. They have to be calculated every time.\n      // One way of finding out is checking if all styles associated to this shape depend only of this shape\n\n      this._isAnimated = !!shape.k; // TODO: commenting this for now since all shapes are animated\n\n      var i = 0,\n          len = transformers.length;\n\n      while (i < len) {\n        if (transformers[i].mProps.dynamicProperties.length) {\n          this._isAnimated = true;\n          break;\n        }\n\n        i += 1;\n      }\n    }\n\n    SVGShapeData.prototype.setAsAnimated = function () {\n      this._isAnimated = true;\n    };\n\n    function SVGTransformData(mProps, op, container) {\n      this.transform = {\n        mProps: mProps,\n        op: op,\n        container: container\n      };\n      this.elements = [];\n      this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\n    }\n\n    function SVGStrokeStyleData(elem, data, styleOb) {\n      this.initDynamicPropertyContainer(elem);\n      this.getValue = this.iterateDynamicProperties;\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n      this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n      this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n      this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n      this.style = styleOb;\n      this._isAnimated = !!this._isAnimated;\n    }\n\n    extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\n\n    function SVGFillStyleData(elem, data, styleOb) {\n      this.initDynamicPropertyContainer(elem);\n      this.getValue = this.iterateDynamicProperties;\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n      this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n      this.style = styleOb;\n    }\n\n    extendPrototype([DynamicPropertyContainer], SVGFillStyleData);\n\n    function SVGGradientFillStyleData(elem, data, styleOb) {\n      this.initDynamicPropertyContainer(elem);\n      this.getValue = this.iterateDynamicProperties;\n      this.initGradientData(elem, data, styleOb);\n    }\n\n    SVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\n      this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n      this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\n      this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\n      this.h = PropertyFactory.getProp(elem, data.h || {\n        k: 0\n      }, 0, 0.01, this);\n      this.a = PropertyFactory.getProp(elem, data.a || {\n        k: 0\n      }, 0, degToRads, this);\n      this.g = new GradientProperty(elem, data.g, this);\n      this.style = styleOb;\n      this.stops = [];\n      this.setGradientData(styleOb.pElem, data);\n      this.setGradientOpacity(data, styleOb);\n      this._isAnimated = !!this._isAnimated;\n    };\n\n    SVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\n      var gradientId = createElementID();\n      var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n      gfill.setAttribute('id', gradientId);\n      gfill.setAttribute('spreadMethod', 'pad');\n      gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\n      var stops = [];\n      var stop, j, jLen;\n      jLen = data.g.p * 4;\n\n      for (j = 0; j < jLen; j += 4) {\n        stop = createNS('stop');\n        gfill.appendChild(stop);\n        stops.push(stop);\n      }\n\n      pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + locationHref + '#' + gradientId + ')');\n      this.gf = gfill;\n      this.cst = stops;\n    };\n\n    SVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\n      if (this.g._hasOpacity && !this.g._collapsable) {\n        var stop, j, jLen;\n        var mask = createNS(\"mask\");\n        var maskElement = createNS('path');\n        mask.appendChild(maskElement);\n        var opacityId = createElementID();\n        var maskId = createElementID();\n        mask.setAttribute('id', maskId);\n        var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n        opFill.setAttribute('id', opacityId);\n        opFill.setAttribute('spreadMethod', 'pad');\n        opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\n        jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\n        var stops = this.stops;\n\n        for (j = data.g.p * 4; j < jLen; j += 2) {\n          stop = createNS('stop');\n          stop.setAttribute('stop-color', 'rgb(255,255,255)');\n          opFill.appendChild(stop);\n          stops.push(stop);\n        }\n\n        maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + locationHref + '#' + opacityId + ')');\n        this.of = opFill;\n        this.ms = mask;\n        this.ost = stops;\n        this.maskId = maskId;\n        styleOb.msElem = maskElement;\n      }\n    };\n\n    extendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\n\n    function SVGGradientStrokeStyleData(elem, data, styleOb) {\n      this.initDynamicPropertyContainer(elem);\n      this.getValue = this.iterateDynamicProperties;\n      this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n      this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n      this.initGradientData(elem, data, styleOb);\n      this._isAnimated = !!this._isAnimated;\n    }\n\n    extendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\n\n    function ShapeGroupData() {\n      this.it = [];\n      this.prevViewData = [];\n      this.gr = createNS('g');\n    }\n\n    var SVGElementsRenderer = function () {\n      var _identityMatrix = new Matrix();\n\n      var _matrixHelper = new Matrix();\n\n      var ob = {\n        createRenderFunction: createRenderFunction\n      };\n\n      function createRenderFunction(data) {\n        var ty = data.ty;\n\n        switch (data.ty) {\n          case 'fl':\n            return renderFill;\n\n          case 'gf':\n            return renderGradient;\n\n          case 'gs':\n            return renderGradientStroke;\n\n          case 'st':\n            return renderStroke;\n\n          case 'sh':\n          case 'el':\n          case 'rc':\n          case 'sr':\n            return renderPath;\n\n          case 'tr':\n            return renderContentTransform;\n        }\n      }\n\n      function renderContentTransform(styleData, itemData, isFirstFrame) {\n        if (isFirstFrame || itemData.transform.op._mdf) {\n          itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\n        }\n\n        if (isFirstFrame || itemData.transform.mProps._mdf) {\n          itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\n        }\n      }\n\n      function renderPath(styleData, itemData, isFirstFrame) {\n        var j,\n            jLen,\n            pathStringTransformed,\n            redraw,\n            pathNodes,\n            l,\n            lLen = itemData.styles.length;\n        var lvl = itemData.lvl;\n        var paths, mat, props, iterations, k;\n\n        for (l = 0; l < lLen; l += 1) {\n          redraw = itemData.sh._mdf || isFirstFrame;\n\n          if (itemData.styles[l].lvl < lvl) {\n            mat = _matrixHelper.reset();\n            iterations = lvl - itemData.styles[l].lvl;\n            k = itemData.transformers.length - 1;\n\n            while (!redraw && iterations > 0) {\n              redraw = itemData.transformers[k].mProps._mdf || redraw;\n              iterations--;\n              k--;\n            }\n\n            if (redraw) {\n              iterations = lvl - itemData.styles[l].lvl;\n              k = itemData.transformers.length - 1;\n\n              while (iterations > 0) {\n                props = itemData.transformers[k].mProps.v.props;\n                mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n                iterations--;\n                k--;\n              }\n            }\n          } else {\n            mat = _identityMatrix;\n          }\n\n          paths = itemData.sh.paths;\n          jLen = paths._length;\n\n          if (redraw) {\n            pathStringTransformed = '';\n\n            for (j = 0; j < jLen; j += 1) {\n              pathNodes = paths.shapes[j];\n\n              if (pathNodes && pathNodes._length) {\n                pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\n              }\n            }\n\n            itemData.caches[l] = pathStringTransformed;\n          } else {\n            pathStringTransformed = itemData.caches[l];\n          }\n\n          itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\n          itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\n        }\n      }\n\n      function renderFill(styleData, itemData, isFirstFrame) {\n        var styleElem = itemData.style;\n\n        if (itemData.c._mdf || isFirstFrame) {\n          styleElem.pElem.setAttribute('fill', 'rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')');\n        }\n\n        if (itemData.o._mdf || isFirstFrame) {\n          styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\n        }\n      }\n\n      function renderGradientStroke(styleData, itemData, isFirstFrame) {\n        renderGradient(styleData, itemData, isFirstFrame);\n        renderStroke(styleData, itemData, isFirstFrame);\n      }\n\n      function renderGradient(styleData, itemData, isFirstFrame) {\n        var gfill = itemData.gf;\n        var hasOpacity = itemData.g._hasOpacity;\n        var pt1 = itemData.s.v,\n            pt2 = itemData.e.v;\n\n        if (itemData.o._mdf || isFirstFrame) {\n          var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\n          itemData.style.pElem.setAttribute(attr, itemData.o.v);\n        }\n\n        if (itemData.s._mdf || isFirstFrame) {\n          var attr1 = styleData.t === 1 ? 'x1' : 'cx';\n          var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\n          gfill.setAttribute(attr1, pt1[0]);\n          gfill.setAttribute(attr2, pt1[1]);\n\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute(attr1, pt1[0]);\n            itemData.of.setAttribute(attr2, pt1[1]);\n          }\n        }\n\n        var stops, i, len, stop;\n\n        if (itemData.g._cmdf || isFirstFrame) {\n          stops = itemData.cst;\n          var cValues = itemData.g.c;\n          len = stops.length;\n\n          for (i = 0; i < len; i += 1) {\n            stop = stops[i];\n            stop.setAttribute('offset', cValues[i * 4] + '%');\n            stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\n          }\n        }\n\n        if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\n          var oValues = itemData.g.o;\n\n          if (itemData.g._collapsable) {\n            stops = itemData.cst;\n          } else {\n            stops = itemData.ost;\n          }\n\n          len = stops.length;\n\n          for (i = 0; i < len; i += 1) {\n            stop = stops[i];\n\n            if (!itemData.g._collapsable) {\n              stop.setAttribute('offset', oValues[i * 2] + '%');\n            }\n\n            stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\n          }\n        }\n\n        if (styleData.t === 1) {\n          if (itemData.e._mdf || isFirstFrame) {\n            gfill.setAttribute('x2', pt2[0]);\n            gfill.setAttribute('y2', pt2[1]);\n\n            if (hasOpacity && !itemData.g._collapsable) {\n              itemData.of.setAttribute('x2', pt2[0]);\n              itemData.of.setAttribute('y2', pt2[1]);\n            }\n          }\n        } else {\n          var rad;\n\n          if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n            gfill.setAttribute('r', rad);\n\n            if (hasOpacity && !itemData.g._collapsable) {\n              itemData.of.setAttribute('r', rad);\n            }\n          }\n\n          if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\n            if (!rad) {\n              rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n            }\n\n            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99 : itemData.h.v;\n            var dist = rad * percent;\n            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n            gfill.setAttribute('fx', x);\n            gfill.setAttribute('fy', y);\n\n            if (hasOpacity && !itemData.g._collapsable) {\n              itemData.of.setAttribute('fx', x);\n              itemData.of.setAttribute('fy', y);\n            }\n          } //gfill.setAttribute('fy','200');\n\n        }\n      }\n\n      function renderStroke(styleData, itemData, isFirstFrame) {\n        var styleElem = itemData.style;\n        var d = itemData.d;\n\n        if (d && (d._mdf || isFirstFrame) && d.dashStr) {\n          styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\n          styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\n        }\n\n        if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\n          styleElem.pElem.setAttribute('stroke', 'rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')');\n        }\n\n        if (itemData.o._mdf || isFirstFrame) {\n          styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\n        }\n\n        if (itemData.w._mdf || isFirstFrame) {\n          styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\n\n          if (styleElem.msElem) {\n            styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\n          }\n        }\n      }\n\n      return ob;\n    }();\n\n    function ShapeTransformManager() {\n      this.sequences = {};\n      this.sequenceList = [];\n      this.transform_key_count = 0;\n    }\n\n    ShapeTransformManager.prototype = {\n      addTransformSequence: function addTransformSequence(transforms) {\n        var i,\n            len = transforms.length;\n        var key = '_';\n\n        for (i = 0; i < len; i += 1) {\n          key += transforms[i].transform.key + '_';\n        }\n\n        var sequence = this.sequences[key];\n\n        if (!sequence) {\n          sequence = {\n            transforms: [].concat(transforms),\n            finalTransform: new Matrix(),\n            _mdf: false\n          };\n          this.sequences[key] = sequence;\n          this.sequenceList.push(sequence);\n        }\n\n        return sequence;\n      },\n      processSequence: function processSequence(sequence, isFirstFrame) {\n        var i = 0,\n            len = sequence.transforms.length,\n            _mdf = isFirstFrame;\n\n        while (i < len && !isFirstFrame) {\n          if (sequence.transforms[i].transform.mProps._mdf) {\n            _mdf = true;\n            break;\n          }\n\n          i += 1;\n        }\n\n        if (_mdf) {\n          var props;\n          sequence.finalTransform.reset();\n\n          for (i = len - 1; i >= 0; i -= 1) {\n            props = sequence.transforms[i].transform.mProps.v.props;\n            sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n          }\n        }\n\n        sequence._mdf = _mdf;\n      },\n      processSequences: function processSequences(isFirstFrame) {\n        var i,\n            len = this.sequenceList.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.processSequence(this.sequenceList[i], isFirstFrame);\n        }\n      },\n      getNewKey: function getNewKey() {\n        return '_' + this.transform_key_count++;\n      }\n    };\n\n    function CVShapeData(element, data, styles, transformsManager) {\n      this.styledShapes = [];\n      this.tr = [0, 0, 0, 0, 0, 0];\n      var ty = 4;\n\n      if (data.ty == 'rc') {\n        ty = 5;\n      } else if (data.ty == 'el') {\n        ty = 6;\n      } else if (data.ty == 'sr') {\n        ty = 7;\n      }\n\n      this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\n      var i,\n          len = styles.length,\n          styledShape;\n\n      for (i = 0; i < len; i += 1) {\n        if (!styles[i].closed) {\n          styledShape = {\n            transforms: transformsManager.addTransformSequence(styles[i].transforms),\n            trNodes: []\n          };\n          this.styledShapes.push(styledShape);\n          styles[i].elements.push(styledShape);\n        }\n      }\n    }\n\n    CVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\n\n    function BaseElement() {}\n\n    BaseElement.prototype = {\n      checkMasks: function checkMasks() {\n        if (!this.data.hasMask) {\n          return false;\n        }\n\n        var i = 0,\n            len = this.data.masksProperties.length;\n\n        while (i < len) {\n          if (this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false) {\n            return true;\n          }\n\n          i += 1;\n        }\n\n        return false;\n      },\n      initExpressions: function initExpressions() {\n        this.layerInterface = LayerExpressionInterface(this);\n\n        if (this.data.hasMask && this.maskManager) {\n          this.layerInterface.registerMaskInterface(this.maskManager);\n        }\n\n        var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\n        this.layerInterface.registerEffectsInterface(effectsInterface);\n\n        if (this.data.ty === 0 || this.data.xt) {\n          this.compInterface = CompExpressionInterface(this);\n        } else if (this.data.ty === 4) {\n          this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\n          this.layerInterface.content = this.layerInterface.shapeInterface;\n        } else if (this.data.ty === 5) {\n          this.layerInterface.textInterface = TextExpressionInterface(this);\n          this.layerInterface.text = this.layerInterface.textInterface;\n        }\n      },\n      setBlendMode: function setBlendMode() {\n        var blendModeValue = getBlendMode(this.data.bm);\n        var elem = this.baseElement || this.layerElement;\n        elem.style['mix-blend-mode'] = blendModeValue;\n      },\n      initBaseData: function initBaseData(data, globalData, comp) {\n        this.globalData = globalData;\n        this.comp = comp;\n        this.data = data;\n        this.layerId = createElementID(); //Stretch factor for old animations missing this property.\n\n        if (!this.data.sr) {\n          this.data.sr = 1;\n        } // effects manager\n\n\n        this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\n      },\n      getType: function getType() {\n        return this.type;\n      },\n      sourceRectAtTime: function sourceRectAtTime() {}\n    };\n\n    function NullElement(data, globalData, comp) {\n      this.initFrame();\n      this.initBaseData(data, globalData, comp);\n      this.initFrame();\n      this.initTransform(data, globalData, comp);\n      this.initHierarchy();\n    }\n\n    NullElement.prototype.prepareFrame = function (num) {\n      this.prepareProperties(num, true);\n    };\n\n    NullElement.prototype.renderFrame = function () {};\n\n    NullElement.prototype.getBaseElement = function () {\n      return null;\n    };\n\n    NullElement.prototype.destroy = function () {};\n\n    NullElement.prototype.sourceRectAtTime = function () {};\n\n    NullElement.prototype.hide = function () {};\n\n    extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\n\n    function SVGBaseElement() {}\n\n    SVGBaseElement.prototype = {\n      initRendererElement: function initRendererElement() {\n        this.layerElement = createNS('g');\n      },\n      createContainerElements: function createContainerElements() {\n        this.matteElement = createNS('g');\n        this.transformedElement = this.layerElement;\n        this.maskedElement = this.layerElement;\n        this._sizeChanged = false;\n        var layerElementParent = null; //If this layer acts as a mask for the following layer\n\n        var filId, fil, gg;\n\n        if (this.data.td) {\n          if (this.data.td == 3 || this.data.td == 1) {\n            var masker = createNS('mask');\n            masker.setAttribute('id', this.layerId);\n            masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha');\n            masker.appendChild(this.layerElement);\n            layerElementParent = masker;\n            this.globalData.defs.appendChild(masker); // This is only for IE and Edge when mask if of type alpha\n\n            if (!featureSupport.maskType && this.data.td == 1) {\n              masker.setAttribute('mask-type', 'luminance');\n              filId = createElementID();\n              fil = filtersFactory.createFilter(filId);\n              this.globalData.defs.appendChild(fil);\n              fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n              gg = createNS('g');\n              gg.appendChild(this.layerElement);\n              layerElementParent = gg;\n              masker.appendChild(gg);\n              gg.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\n            }\n          } else if (this.data.td == 2) {\n            var maskGroup = createNS('mask');\n            maskGroup.setAttribute('id', this.layerId);\n            maskGroup.setAttribute('mask-type', 'alpha');\n            var maskGrouper = createNS('g');\n            maskGroup.appendChild(maskGrouper);\n            filId = createElementID();\n            fil = filtersFactory.createFilter(filId); ////\n            // This solution doesn't work on Android when meta tag with viewport attribute is set\n\n            /*var feColorMatrix = createNS('feColorMatrix');\r\n            feColorMatrix.setAttribute('type', 'matrix');\r\n            feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n            feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n            fil.appendChild(feColorMatrix);*/\n            ////\n\n            var feCTr = createNS('feComponentTransfer');\n            feCTr.setAttribute('in', 'SourceGraphic');\n            fil.appendChild(feCTr);\n            var feFunc = createNS('feFuncA');\n            feFunc.setAttribute('type', 'table');\n            feFunc.setAttribute('tableValues', '1.0 0.0');\n            feCTr.appendChild(feFunc); ////\n\n            this.globalData.defs.appendChild(fil);\n            var alphaRect = createNS('rect');\n            alphaRect.setAttribute('width', this.comp.data.w);\n            alphaRect.setAttribute('height', this.comp.data.h);\n            alphaRect.setAttribute('x', '0');\n            alphaRect.setAttribute('y', '0');\n            alphaRect.setAttribute('fill', '#ffffff');\n            alphaRect.setAttribute('opacity', '0');\n            maskGrouper.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\n            maskGrouper.appendChild(alphaRect);\n            maskGrouper.appendChild(this.layerElement);\n            layerElementParent = maskGrouper;\n\n            if (!featureSupport.maskType) {\n              maskGroup.setAttribute('mask-type', 'luminance');\n              fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n              gg = createNS('g');\n              maskGrouper.appendChild(alphaRect);\n              gg.appendChild(this.layerElement);\n              layerElementParent = gg;\n              maskGrouper.appendChild(gg);\n            }\n\n            this.globalData.defs.appendChild(maskGroup);\n          }\n        } else if (this.data.tt) {\n          this.matteElement.appendChild(this.layerElement);\n          layerElementParent = this.matteElement;\n          this.baseElement = this.matteElement;\n        } else {\n          this.baseElement = this.layerElement;\n        }\n\n        if (this.data.ln) {\n          this.layerElement.setAttribute('id', this.data.ln);\n        }\n\n        if (this.data.cl) {\n          this.layerElement.setAttribute('class', this.data.cl);\n        } //Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\n\n\n        if (this.data.ty === 0 && !this.data.hd) {\n          var cp = createNS('clipPath');\n          var pt = createNS('path');\n          pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0' + ' L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\n          var clipId = createElementID();\n          cp.setAttribute('id', clipId);\n          cp.appendChild(pt);\n          this.globalData.defs.appendChild(cp);\n\n          if (this.checkMasks()) {\n            var cpGroup = createNS('g');\n            cpGroup.setAttribute('clip-path', 'url(' + locationHref + '#' + clipId + ')');\n            cpGroup.appendChild(this.layerElement);\n            this.transformedElement = cpGroup;\n\n            if (layerElementParent) {\n              layerElementParent.appendChild(this.transformedElement);\n            } else {\n              this.baseElement = this.transformedElement;\n            }\n          } else {\n            this.layerElement.setAttribute('clip-path', 'url(' + locationHref + '#' + clipId + ')');\n          }\n        }\n\n        if (this.data.bm !== 0) {\n          this.setBlendMode();\n        }\n      },\n      renderElement: function renderElement() {\n        if (this.finalTransform._matMdf) {\n          this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\n        }\n\n        if (this.finalTransform._opMdf) {\n          this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\n        }\n      },\n      destroyBaseElement: function destroyBaseElement() {\n        this.layerElement = null;\n        this.matteElement = null;\n        this.maskManager.destroy();\n      },\n      getBaseElement: function getBaseElement() {\n        if (this.data.hd) {\n          return null;\n        }\n\n        return this.baseElement;\n      },\n      createRenderableComponents: function createRenderableComponents() {\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\n        this.renderableEffectsManager = new SVGEffects(this);\n      },\n      setMatte: function setMatte(id) {\n        if (!this.matteElement) {\n          return;\n        }\n\n        this.matteElement.setAttribute(\"mask\", \"url(\" + locationHref + \"#\" + id + \")\");\n      }\n    };\n\n    function IShapeElement() {}\n\n    IShapeElement.prototype = {\n      addShapeToModifiers: function addShapeToModifiers(data) {\n        var i,\n            len = this.shapeModifiers.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.shapeModifiers[i].addShape(data);\n        }\n      },\n      isShapeInAnimatedModifiers: function isShapeInAnimatedModifiers(data) {\n        var i = 0,\n            len = this.shapeModifiers.length;\n\n        while (i < len) {\n          if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\n            return true;\n          }\n        }\n\n        return false;\n      },\n      renderModifiers: function renderModifiers() {\n        if (!this.shapeModifiers.length) {\n          return;\n        }\n\n        var i,\n            len = this.shapes.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.shapes[i].sh.reset();\n        }\n\n        len = this.shapeModifiers.length;\n\n        for (i = len - 1; i >= 0; i -= 1) {\n          this.shapeModifiers[i].processShapes(this._isFirstFrame);\n        }\n      },\n      lcEnum: {\n        '1': 'butt',\n        '2': 'round',\n        '3': 'square'\n      },\n      ljEnum: {\n        '1': 'miter',\n        '2': 'round',\n        '3': 'bevel'\n      },\n      searchProcessedElement: function searchProcessedElement(elem) {\n        var elements = this.processedElements;\n        var i = 0,\n            len = elements.length;\n\n        while (i < len) {\n          if (elements[i].elem === elem) {\n            return elements[i].pos;\n          }\n\n          i += 1;\n        }\n\n        return 0;\n      },\n      addProcessedElement: function addProcessedElement(elem, pos) {\n        var elements = this.processedElements;\n        var i = elements.length;\n\n        while (i) {\n          i -= 1;\n\n          if (elements[i].elem === elem) {\n            elements[i].pos = pos;\n            return;\n          }\n        }\n\n        elements.push(new ProcessedElement(elem, pos));\n      },\n      prepareFrame: function prepareFrame(num) {\n        this.prepareRenderableFrame(num);\n        this.prepareProperties(num, this.isInRange);\n      }\n    };\n\n    function ITextElement() {}\n\n    ITextElement.prototype.initElement = function (data, globalData, comp) {\n      this.lettersChangedFlag = true;\n      this.initFrame();\n      this.initBaseData(data, globalData, comp);\n      this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\n      this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\n      this.initTransform(data, globalData, comp);\n      this.initHierarchy();\n      this.initRenderable();\n      this.initRendererElement();\n      this.createContainerElements();\n      this.createRenderableComponents();\n      this.createContent();\n      this.hide();\n      this.textAnimator.searchProperties(this.dynamicProperties);\n    };\n\n    ITextElement.prototype.prepareFrame = function (num) {\n      this._mdf = false;\n      this.prepareRenderableFrame(num);\n      this.prepareProperties(num, this.isInRange);\n\n      if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\n        this.buildNewText();\n        this.textProperty._isFirstFrame = false;\n        this.textProperty._mdf = false;\n      }\n    };\n\n    ITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\n      var j,\n          jLen = shapes.length;\n      var pathNodes;\n      var shapeStr = '';\n\n      for (j = 0; j < jLen; j += 1) {\n        pathNodes = shapes[j].ks.k;\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\n      }\n\n      return shapeStr;\n    };\n\n    ITextElement.prototype.updateDocumentData = function (newData, index) {\n      this.textProperty.updateDocumentData(newData, index);\n    };\n\n    ITextElement.prototype.canResizeFont = function (_canResize) {\n      this.textProperty.canResizeFont(_canResize);\n    };\n\n    ITextElement.prototype.setMinimumFontSize = function (_fontSize) {\n      this.textProperty.setMinimumFontSize(_fontSize);\n    };\n\n    ITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\n      if (documentData.ps) {\n        matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n      }\n\n      matrixHelper.translate(0, -documentData.ls, 0);\n\n      switch (documentData.j) {\n        case 1:\n          matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\n          break;\n\n        case 2:\n          matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\n          break;\n      }\n\n      matrixHelper.translate(xPos, yPos, 0);\n    };\n\n    ITextElement.prototype.buildColor = function (colorData) {\n      return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\n    };\n\n    ITextElement.prototype.emptyProp = new LetterProps();\n\n    ITextElement.prototype.destroy = function () {};\n\n    function ICompElement() {}\n\n    extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\n\n    ICompElement.prototype.initElement = function (data, globalData, comp) {\n      this.initFrame();\n      this.initBaseData(data, globalData, comp);\n      this.initTransform(data, globalData, comp);\n      this.initRenderable();\n      this.initHierarchy();\n      this.initRendererElement();\n      this.createContainerElements();\n      this.createRenderableComponents();\n\n      if (this.data.xt || !globalData.progressiveLoad) {\n        this.buildAllItems();\n      }\n\n      this.hide();\n    };\n    /*ICompElement.prototype.hide = function(){\r\n        if(!this.hidden){\r\n            this.hideElement();\r\n            var i,len = this.elements.length;\r\n            for( i = 0; i < len; i+=1 ){\r\n                if(this.elements[i]){\r\n                    this.elements[i].hide();\r\n                }\r\n            }\r\n        }\r\n    };*/\n\n\n    ICompElement.prototype.prepareFrame = function (num) {\n      this._mdf = false;\n      this.prepareRenderableFrame(num);\n      this.prepareProperties(num, this.isInRange);\n\n      if (!this.isInRange && !this.data.xt) {\n        return;\n      }\n\n      if (!this.tm._placeholder) {\n        var timeRemapped = this.tm.v;\n\n        if (timeRemapped === this.data.op) {\n          timeRemapped = this.data.op - 1;\n        }\n\n        this.renderedFrame = timeRemapped;\n      } else {\n        this.renderedFrame = num / this.data.sr;\n      }\n\n      var i,\n          len = this.elements.length;\n\n      if (!this.completeLayers) {\n        this.checkLayers(this.renderedFrame);\n      } //This iteration needs to be backwards because of how expressions connect between each other\n\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\n\n          if (this.elements[i]._mdf) {\n            this._mdf = true;\n          }\n        }\n      }\n    };\n\n    ICompElement.prototype.renderInnerContent = function () {\n      var i,\n          len = this.layers.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n    };\n\n    ICompElement.prototype.setElements = function (elems) {\n      this.elements = elems;\n    };\n\n    ICompElement.prototype.getElements = function () {\n      return this.elements;\n    };\n\n    ICompElement.prototype.destroyElements = function () {\n      var i,\n          len = this.layers.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (this.elements[i]) {\n          this.elements[i].destroy();\n        }\n      }\n    };\n\n    ICompElement.prototype.destroy = function () {\n      this.destroyElements();\n      this.destroyBaseElement();\n    };\n\n    function IImageElement(data, globalData, comp) {\n      this.assetData = globalData.getAssetData(data.refId);\n      this.initElement(data, globalData, comp);\n      this.sourceRect = {\n        top: 0,\n        left: 0,\n        width: this.assetData.w,\n        height: this.assetData.h\n      };\n    }\n\n    extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\n\n    IImageElement.prototype.createContent = function () {\n      var assetPath = this.globalData.getAssetsPath(this.assetData);\n      this.innerElem = createNS('image');\n      this.innerElem.setAttribute('width', this.assetData.w + \"px\");\n      this.innerElem.setAttribute('height', this.assetData.h + \"px\");\n      this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\n      this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n      this.layerElement.appendChild(this.innerElem);\n    };\n\n    IImageElement.prototype.sourceRectAtTime = function () {\n      return this.sourceRect;\n    };\n\n    function ISolidElement(data, globalData, comp) {\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([IImageElement], ISolidElement);\n\n    ISolidElement.prototype.createContent = function () {\n      var rect = createNS('rect'); ////rect.style.width = this.data.sw;\n      ////rect.style.height = this.data.sh;\n      ////rect.style.fill = this.data.sc;\n\n      rect.setAttribute('width', this.data.sw);\n      rect.setAttribute('height', this.data.sh);\n      rect.setAttribute('fill', this.data.sc);\n      this.layerElement.appendChild(rect);\n    };\n\n    function SVGCompElement(data, globalData, comp) {\n      this.layers = data.layers;\n      this.supports3d = true;\n      this.completeLayers = false;\n      this.pendingElements = [];\n      this.elements = this.layers ? createSizedArray(this.layers.length) : []; //this.layerElement = createNS('g');\n\n      this.initElement(data, globalData, comp);\n      this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n        _placeholder: true\n      };\n    }\n\n    extendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\n\n    function SVGTextElement(data, globalData, comp) {\n      this.textSpans = [];\n      this.renderType = 'svg';\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextElement);\n\n    SVGTextElement.prototype.createContent = function () {\n      if (this.data.singleShape && !this.globalData.fontManager.chars) {\n        this.textContainer = createNS('text');\n      }\n    };\n\n    SVGTextElement.prototype.buildTextContents = function (textArray) {\n      var i = 0,\n          len = textArray.length;\n      var textContents = [],\n          currentTextContent = '';\n\n      while (i < len) {\n        if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\n          textContents.push(currentTextContent);\n          currentTextContent = '';\n        } else {\n          currentTextContent += textArray[i];\n        }\n\n        i += 1;\n      }\n\n      textContents.push(currentTextContent);\n      return textContents;\n    };\n\n    SVGTextElement.prototype.buildNewText = function () {\n      var i, len;\n      var documentData = this.textProperty.currentData;\n      this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\n\n      if (documentData.fc) {\n        this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\n      } else {\n        this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\n      }\n\n      if (documentData.sc) {\n        this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\n        this.layerElement.setAttribute('stroke-width', documentData.sw);\n      }\n\n      this.layerElement.setAttribute('font-size', documentData.finalSize);\n      var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n\n      if (fontData.fClass) {\n        this.layerElement.setAttribute('class', fontData.fClass);\n      } else {\n        this.layerElement.setAttribute('font-family', fontData.fFamily);\n        var fWeight = documentData.fWeight,\n            fStyle = documentData.fStyle;\n        this.layerElement.setAttribute('font-style', fStyle);\n        this.layerElement.setAttribute('font-weight', fWeight);\n      }\n\n      this.layerElement.setAttribute('aria-label', documentData.t);\n      var letters = documentData.l || [];\n      var usesGlyphs = !!this.globalData.fontManager.chars;\n      len = letters.length;\n      var tSpan;\n      var matrixHelper = this.mHelper;\n      var shapes,\n          shapeStr = '',\n          singleShape = this.data.singleShape;\n      var xPos = 0,\n          yPos = 0,\n          firstLine = true;\n      var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n\n      if (singleShape && !usesGlyphs && !documentData.sz) {\n        var tElement = this.textContainer;\n        var justify = 'start';\n\n        switch (documentData.j) {\n          case 1:\n            justify = 'end';\n            break;\n\n          case 2:\n            justify = 'middle';\n            break;\n        }\n\n        tElement.setAttribute('text-anchor', justify);\n        tElement.setAttribute('letter-spacing', trackingOffset);\n        var textContent = this.buildTextContents(documentData.finalText);\n        len = textContent.length;\n        yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\n\n        for (i = 0; i < len; i += 1) {\n          tSpan = this.textSpans[i] || createNS('tspan');\n          tSpan.textContent = textContent[i];\n          tSpan.setAttribute('x', 0);\n          tSpan.setAttribute('y', yPos);\n          tSpan.style.display = 'inherit';\n          tElement.appendChild(tSpan);\n          this.textSpans[i] = tSpan;\n          yPos += documentData.finalLineHeight;\n        }\n\n        this.layerElement.appendChild(tElement);\n      } else {\n        var cachedSpansLength = this.textSpans.length;\n        var shapeData, charData;\n\n        for (i = 0; i < len; i += 1) {\n          if (!usesGlyphs || !singleShape || i === 0) {\n            tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs ? 'path' : 'text');\n\n            if (cachedSpansLength <= i) {\n              tSpan.setAttribute('stroke-linecap', 'butt');\n              tSpan.setAttribute('stroke-linejoin', 'round');\n              tSpan.setAttribute('stroke-miterlimit', '4');\n              this.textSpans[i] = tSpan;\n              this.layerElement.appendChild(tSpan);\n            }\n\n            tSpan.style.display = 'inherit';\n          }\n\n          matrixHelper.reset();\n          matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n\n          if (singleShape) {\n            if (letters[i].n) {\n              xPos = -trackingOffset;\n              yPos += documentData.yOffset;\n              yPos += firstLine ? 1 : 0;\n              firstLine = false;\n            }\n\n            this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n            xPos += letters[i].l || 0; //xPos += letters[i].val === ' ' ? 0 : trackingOffset;\n\n            xPos += trackingOffset;\n          }\n\n          if (usesGlyphs) {\n            charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n            shapeData = charData && charData.data || {};\n            shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\n\n            if (!singleShape) {\n              tSpan.setAttribute('d', this.createPathShape(matrixHelper, shapes));\n            } else {\n              shapeStr += this.createPathShape(matrixHelper, shapes);\n            }\n          } else {\n            if (singleShape) {\n              tSpan.setAttribute(\"transform\", \"translate(\" + matrixHelper.props[12] + \",\" + matrixHelper.props[13] + \")\");\n            }\n\n            tSpan.textContent = letters[i].val;\n            tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n          } //\n\n        }\n\n        if (singleShape && tSpan) {\n          tSpan.setAttribute('d', shapeStr);\n        }\n      }\n\n      while (i < this.textSpans.length) {\n        this.textSpans[i].style.display = 'none';\n        i += 1;\n      }\n\n      this._sizeChanged = true;\n    };\n\n    SVGTextElement.prototype.sourceRectAtTime = function (time) {\n      this.prepareFrame(this.comp.renderedFrame - this.data.st);\n      this.renderInnerContent();\n\n      if (this._sizeChanged) {\n        this._sizeChanged = false;\n        var textBox = this.layerElement.getBBox();\n        this.bbox = {\n          top: textBox.y,\n          left: textBox.x,\n          width: textBox.width,\n          height: textBox.height\n        };\n      }\n\n      return this.bbox;\n    };\n\n    SVGTextElement.prototype.renderInnerContent = function () {\n      if (!this.data.singleShape) {\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n\n        if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\n          this._sizeChanged = true;\n          var i, len;\n          var renderedLetters = this.textAnimator.renderedLetters;\n          var letters = this.textProperty.currentData.l;\n          len = letters.length;\n          var renderedLetter, textSpan;\n\n          for (i = 0; i < len; i += 1) {\n            if (letters[i].n) {\n              continue;\n            }\n\n            renderedLetter = renderedLetters[i];\n            textSpan = this.textSpans[i];\n\n            if (renderedLetter._mdf.m) {\n              textSpan.setAttribute('transform', renderedLetter.m);\n            }\n\n            if (renderedLetter._mdf.o) {\n              textSpan.setAttribute('opacity', renderedLetter.o);\n            }\n\n            if (renderedLetter._mdf.sw) {\n              textSpan.setAttribute('stroke-width', renderedLetter.sw);\n            }\n\n            if (renderedLetter._mdf.sc) {\n              textSpan.setAttribute('stroke', renderedLetter.sc);\n            }\n\n            if (renderedLetter._mdf.fc) {\n              textSpan.setAttribute('fill', renderedLetter.fc);\n            }\n          }\n        }\n      }\n    };\n\n    function SVGShapeElement(data, globalData, comp) {\n      //List of drawable elements\n      this.shapes = []; // Full shape data\n\n      this.shapesData = data.shapes; //List of styles that will be applied to shapes\n\n      this.stylesList = []; //List of modifiers that will be applied to shapes\n\n      this.shapeModifiers = []; //List of items in shape tree\n\n      this.itemsData = []; //List of items in previous shape tree\n\n      this.processedElements = []; // List of animated components\n\n      this.animatedContents = [];\n      this.initElement(data, globalData, comp); //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n      // List of elements that have been created\n\n      this.prevViewData = []; //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n    }\n\n    extendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\n\n    SVGShapeElement.prototype.initSecondaryElement = function () {};\n\n    SVGShapeElement.prototype.identityMatrix = new Matrix();\n\n    SVGShapeElement.prototype.buildExpressionInterface = function () {};\n\n    SVGShapeElement.prototype.createContent = function () {\n      this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n      this.filterUniqueShapes();\n    };\n    /*\r\n    This method searches for multiple shapes that affect a single element and one of them is animated\r\n    */\n\n\n    SVGShapeElement.prototype.filterUniqueShapes = function () {\n      var i,\n          len = this.shapes.length,\n          shape;\n      var j,\n          jLen = this.stylesList.length;\n      var style;\n      var tempShapes = [];\n      var areAnimated = false;\n\n      for (j = 0; j < jLen; j += 1) {\n        style = this.stylesList[j];\n        areAnimated = false;\n        tempShapes.length = 0;\n\n        for (i = 0; i < len; i += 1) {\n          shape = this.shapes[i];\n\n          if (shape.styles.indexOf(style) !== -1) {\n            tempShapes.push(shape);\n            areAnimated = shape._isAnimated || areAnimated;\n          }\n        }\n\n        if (tempShapes.length > 1 && areAnimated) {\n          this.setShapesAsAnimated(tempShapes);\n        }\n      }\n    };\n\n    SVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\n      var i,\n          len = shapes.length;\n\n      for (i = 0; i < len; i += 1) {\n        shapes[i].setAsAnimated();\n      }\n    };\n\n    SVGShapeElement.prototype.createStyleElement = function (data, level) {\n      //TODO: prevent drawing of hidden styles\n      var elementData;\n      var styleOb = new SVGStyleData(data, level);\n      var pathElement = styleOb.pElem;\n\n      if (data.ty === 'st') {\n        elementData = new SVGStrokeStyleData(this, data, styleOb);\n      } else if (data.ty === 'fl') {\n        elementData = new SVGFillStyleData(this, data, styleOb);\n      } else if (data.ty === 'gf' || data.ty === 'gs') {\n        var gradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\n        elementData = new gradientConstructor(this, data, styleOb);\n        this.globalData.defs.appendChild(elementData.gf);\n\n        if (elementData.maskId) {\n          this.globalData.defs.appendChild(elementData.ms);\n          this.globalData.defs.appendChild(elementData.of);\n          pathElement.setAttribute('mask', 'url(' + locationHref + '#' + elementData.maskId + ')');\n        }\n      }\n\n      if (data.ty === 'st' || data.ty === 'gs') {\n        pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\n        pathElement.setAttribute('stroke-linejoin', this.ljEnum[data.lj] || 'round');\n        pathElement.setAttribute('fill-opacity', '0');\n\n        if (data.lj === 1) {\n          pathElement.setAttribute('stroke-miterlimit', data.ml);\n        }\n      }\n\n      if (data.r === 2) {\n        pathElement.setAttribute('fill-rule', 'evenodd');\n      }\n\n      if (data.ln) {\n        pathElement.setAttribute('id', data.ln);\n      }\n\n      if (data.cl) {\n        pathElement.setAttribute('class', data.cl);\n      }\n\n      if (data.bm) {\n        pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\n      }\n\n      this.stylesList.push(styleOb);\n      this.addToAnimatedContents(data, elementData);\n      return elementData;\n    };\n\n    SVGShapeElement.prototype.createGroupElement = function (data) {\n      var elementData = new ShapeGroupData();\n\n      if (data.ln) {\n        elementData.gr.setAttribute('id', data.ln);\n      }\n\n      if (data.cl) {\n        elementData.gr.setAttribute('class', data.cl);\n      }\n\n      if (data.bm) {\n        elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\n      }\n\n      return elementData;\n    };\n\n    SVGShapeElement.prototype.createTransformElement = function (data, container) {\n      var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\n      var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\n      this.addToAnimatedContents(data, elementData);\n      return elementData;\n    };\n\n    SVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\n      var ty = 4;\n\n      if (data.ty === 'rc') {\n        ty = 5;\n      } else if (data.ty === 'el') {\n        ty = 6;\n      } else if (data.ty === 'sr') {\n        ty = 7;\n      }\n\n      var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\n      var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\n      this.shapes.push(elementData);\n      this.addShapeToModifiers(elementData);\n      this.addToAnimatedContents(data, elementData);\n      return elementData;\n    };\n\n    SVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\n      var i = 0,\n          len = this.animatedContents.length;\n\n      while (i < len) {\n        if (this.animatedContents[i].element === element) {\n          return;\n        }\n\n        i += 1;\n      }\n\n      this.animatedContents.push({\n        fn: SVGElementsRenderer.createRenderFunction(data),\n        element: element,\n        data: data\n      });\n    };\n\n    SVGShapeElement.prototype.setElementStyles = function (elementData) {\n      var arr = elementData.styles;\n      var j,\n          jLen = this.stylesList.length;\n\n      for (j = 0; j < jLen; j += 1) {\n        if (!this.stylesList[j].closed) {\n          arr.push(this.stylesList[j]);\n        }\n      }\n    };\n\n    SVGShapeElement.prototype.reloadShapes = function () {\n      this._isFirstFrame = true;\n      var i,\n          len = this.itemsData.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.prevViewData[i] = this.itemsData[i];\n      }\n\n      this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n      this.filterUniqueShapes();\n      len = this.dynamicProperties.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.dynamicProperties[i].getValue();\n      }\n\n      this.renderModifiers();\n    };\n\n    SVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\n      var ownTransformers = [].concat(transformers);\n      var i,\n          len = arr.length - 1;\n      var j, jLen;\n      var ownStyles = [],\n          ownModifiers = [],\n          currentTransform,\n          modifier,\n          processedPos;\n\n      for (i = len; i >= 0; i -= 1) {\n        processedPos = this.searchProcessedElement(arr[i]);\n\n        if (!processedPos) {\n          arr[i]._render = render;\n        } else {\n          itemsData[i] = prevViewData[processedPos - 1];\n        }\n\n        if (arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs') {\n          if (!processedPos) {\n            itemsData[i] = this.createStyleElement(arr[i], level);\n          } else {\n            itemsData[i].style.closed = false;\n          }\n\n          if (arr[i]._render) {\n            container.appendChild(itemsData[i].style.pElem);\n          }\n\n          ownStyles.push(itemsData[i].style);\n        } else if (arr[i].ty == 'gr') {\n          if (!processedPos) {\n            itemsData[i] = this.createGroupElement(arr[i]);\n          } else {\n            jLen = itemsData[i].it.length;\n\n            for (j = 0; j < jLen; j += 1) {\n              itemsData[i].prevViewData[j] = itemsData[i].it[j];\n            }\n          }\n\n          this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\n\n          if (arr[i]._render) {\n            container.appendChild(itemsData[i].gr);\n          }\n        } else if (arr[i].ty == 'tr') {\n          if (!processedPos) {\n            itemsData[i] = this.createTransformElement(arr[i], container);\n          }\n\n          currentTransform = itemsData[i].transform;\n          ownTransformers.push(currentTransform);\n        } else if (arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr') {\n          if (!processedPos) {\n            itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\n          }\n\n          this.setElementStyles(itemsData[i]);\n        } else if (arr[i].ty == 'tm' || arr[i].ty == 'rd' || arr[i].ty == 'ms') {\n          if (!processedPos) {\n            modifier = ShapeModifiers.getModifier(arr[i].ty);\n            modifier.init(this, arr[i]);\n            itemsData[i] = modifier;\n            this.shapeModifiers.push(modifier);\n          } else {\n            modifier = itemsData[i];\n            modifier.closed = false;\n          }\n\n          ownModifiers.push(modifier);\n        } else if (arr[i].ty == 'rp') {\n          if (!processedPos) {\n            modifier = ShapeModifiers.getModifier(arr[i].ty);\n            itemsData[i] = modifier;\n            modifier.init(this, arr, i, itemsData);\n            this.shapeModifiers.push(modifier);\n            render = false;\n          } else {\n            modifier = itemsData[i];\n            modifier.closed = true;\n          }\n\n          ownModifiers.push(modifier);\n        }\n\n        this.addProcessedElement(arr[i], i + 1);\n      }\n\n      len = ownStyles.length;\n\n      for (i = 0; i < len; i += 1) {\n        ownStyles[i].closed = true;\n      }\n\n      len = ownModifiers.length;\n\n      for (i = 0; i < len; i += 1) {\n        ownModifiers[i].closed = true;\n      }\n    };\n\n    SVGShapeElement.prototype.renderInnerContent = function () {\n      this.renderModifiers();\n      var i,\n          len = this.stylesList.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.stylesList[i].reset();\n      }\n\n      this.renderShape();\n\n      for (i = 0; i < len; i += 1) {\n        if (this.stylesList[i]._mdf || this._isFirstFrame) {\n          if (this.stylesList[i].msElem) {\n            this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d); //Adding M0 0 fixes same mask bug on all browsers\n\n            this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\n          }\n\n          this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\n        }\n      }\n    };\n\n    SVGShapeElement.prototype.renderShape = function () {\n      var i,\n          len = this.animatedContents.length;\n      var animatedContent;\n\n      for (i = 0; i < len; i += 1) {\n        animatedContent = this.animatedContents[i];\n\n        if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\n          animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\n        }\n      }\n    };\n\n    SVGShapeElement.prototype.destroy = function () {\n      this.destroyBaseElement();\n      this.shapesData = null;\n      this.itemsData = null;\n    };\n\n    function SVGTintFilter(filter, filterManager) {\n      this.filterManager = filterManager;\n      var feColorMatrix = createNS('feColorMatrix');\n      feColorMatrix.setAttribute('type', 'matrix');\n      feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\n      feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\n      feColorMatrix.setAttribute('result', 'f1');\n      filter.appendChild(feColorMatrix);\n      feColorMatrix = createNS('feColorMatrix');\n      feColorMatrix.setAttribute('type', 'matrix');\n      feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n      feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\n      feColorMatrix.setAttribute('result', 'f2');\n      filter.appendChild(feColorMatrix);\n      this.matrixFilter = feColorMatrix;\n\n      if (filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k) {\n        var feMerge = createNS('feMerge');\n        filter.appendChild(feMerge);\n        var feMergeNode;\n        feMergeNode = createNS('feMergeNode');\n        feMergeNode.setAttribute('in', 'SourceGraphic');\n        feMerge.appendChild(feMergeNode);\n        feMergeNode = createNS('feMergeNode');\n        feMergeNode.setAttribute('in', 'f2');\n        feMerge.appendChild(feMergeNode);\n      }\n    }\n\n    SVGTintFilter.prototype.renderFrame = function (forceRender) {\n      if (forceRender || this.filterManager._mdf) {\n        var colorBlack = this.filterManager.effectElements[0].p.v;\n        var colorWhite = this.filterManager.effectElements[1].p.v;\n        var opacity = this.filterManager.effectElements[2].p.v / 100;\n        this.matrixFilter.setAttribute('values', colorWhite[0] - colorBlack[0] + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 ' + opacity + ' 0');\n      }\n    };\n\n    function SVGFillFilter(filter, filterManager) {\n      this.filterManager = filterManager;\n      var feColorMatrix = createNS('feColorMatrix');\n      feColorMatrix.setAttribute('type', 'matrix');\n      feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n      feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\n      filter.appendChild(feColorMatrix);\n      this.matrixFilter = feColorMatrix;\n    }\n\n    SVGFillFilter.prototype.renderFrame = function (forceRender) {\n      if (forceRender || this.filterManager._mdf) {\n        var color = this.filterManager.effectElements[2].p.v;\n        var opacity = this.filterManager.effectElements[6].p.v;\n        this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\n      }\n    };\n\n    function SVGGaussianBlurEffect(filter, filterManager) {\n      // Outset the filter region by 100% on all sides to accommodate blur expansion.\n      filter.setAttribute('x', '-100%');\n      filter.setAttribute('y', '-100%');\n      filter.setAttribute('width', '300%');\n      filter.setAttribute('height', '300%');\n      this.filterManager = filterManager;\n      var feGaussianBlur = createNS('feGaussianBlur');\n      filter.appendChild(feGaussianBlur);\n      this.feGaussianBlur = feGaussianBlur;\n    }\n\n    SVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\n      if (forceRender || this.filterManager._mdf) {\n        // Empirical value, matching AE's blur appearance.\n        var kBlurrinessToSigma = 0.3;\n        var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma; // Dimensions mapping:\n        //\n        //   1 -> horizontal & vertical\n        //   2 -> horizontal only\n        //   3 -> vertical only\n        //\n\n        var dimensions = this.filterManager.effectElements[1].p.v;\n        var sigmaX = dimensions == 3 ? 0 : sigma;\n        var sigmaY = dimensions == 2 ? 0 : sigma;\n        this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + \" \" + sigmaY); // Repeat edges mapping:\n        //\n        //   0 -> off -> duplicate\n        //   1 -> on  -> wrap\n\n        var edgeMode = this.filterManager.effectElements[2].p.v == 1 ? 'wrap' : 'duplicate';\n        this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\n      }\n    };\n\n    function SVGStrokeEffect(elem, filterManager) {\n      this.initialized = false;\n      this.filterManager = filterManager;\n      this.elem = elem;\n      this.paths = [];\n    }\n\n    SVGStrokeEffect.prototype.initialize = function () {\n      var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\n      var path, groupPath, i, len;\n\n      if (this.filterManager.effectElements[1].p.v === 1) {\n        len = this.elem.maskManager.masksProperties.length;\n        i = 0;\n      } else {\n        i = this.filterManager.effectElements[0].p.v - 1;\n        len = i + 1;\n      }\n\n      groupPath = createNS('g');\n      groupPath.setAttribute('fill', 'none');\n      groupPath.setAttribute('stroke-linecap', 'round');\n      groupPath.setAttribute('stroke-dashoffset', 1);\n\n      for (i; i < len; i += 1) {\n        path = createNS('path');\n        groupPath.appendChild(path);\n        this.paths.push({\n          p: path,\n          m: i\n        });\n      }\n\n      if (this.filterManager.effectElements[10].p.v === 3) {\n        var mask = createNS('mask');\n        var id = createElementID();\n        mask.setAttribute('id', id);\n        mask.setAttribute('mask-type', 'alpha');\n        mask.appendChild(groupPath);\n        this.elem.globalData.defs.appendChild(mask);\n        var g = createNS('g');\n        g.setAttribute('mask', 'url(' + locationHref + '#' + id + ')');\n\n        while (elemChildren[0]) {\n          g.appendChild(elemChildren[0]);\n        }\n\n        this.elem.layerElement.appendChild(g);\n        this.masker = mask;\n        groupPath.setAttribute('stroke', '#fff');\n      } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\n        if (this.filterManager.effectElements[10].p.v === 2) {\n          elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\n\n          while (elemChildren.length) {\n            this.elem.layerElement.removeChild(elemChildren[0]);\n          }\n        }\n\n        this.elem.layerElement.appendChild(groupPath);\n        this.elem.layerElement.removeAttribute('mask');\n        groupPath.setAttribute('stroke', '#fff');\n      }\n\n      this.initialized = true;\n      this.pathMasker = groupPath;\n    };\n\n    SVGStrokeEffect.prototype.renderFrame = function (forceRender) {\n      if (!this.initialized) {\n        this.initialize();\n      }\n\n      var i,\n          len = this.paths.length;\n      var mask, path;\n\n      for (i = 0; i < len; i += 1) {\n        if (this.paths[i].m === -1) {\n          continue;\n        }\n\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\n        path = this.paths[i].p;\n\n        if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\n          path.setAttribute('d', mask.lastPath);\n        }\n\n        if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\n          var dasharrayValue;\n\n          if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\n            var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) / 100;\n            var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) / 100;\n            var l = path.getTotalLength();\n            dasharrayValue = '0 0 0 ' + l * s + ' ';\n            var lineLength = l * (e - s);\n            var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v / 100;\n            var units = Math.floor(lineLength / segment);\n            var j;\n\n            for (j = 0; j < units; j += 1) {\n              dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v / 100 + ' ';\n            }\n\n            dasharrayValue += '0 ' + l * 10 + ' 0 0';\n          } else {\n            dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v / 100;\n          }\n\n          path.setAttribute('stroke-dasharray', dasharrayValue);\n        }\n      }\n\n      if (forceRender || this.filterManager.effectElements[4].p._mdf) {\n        this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\n      }\n\n      if (forceRender || this.filterManager.effectElements[6].p._mdf) {\n        this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\n      }\n\n      if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\n        if (forceRender || this.filterManager.effectElements[3].p._mdf) {\n          var color = this.filterManager.effectElements[3].p.v;\n          this.pathMasker.setAttribute('stroke', 'rgb(' + bm_floor(color[0] * 255) + ',' + bm_floor(color[1] * 255) + ',' + bm_floor(color[2] * 255) + ')');\n        }\n      }\n    };\n\n    function SVGTritoneFilter(filter, filterManager) {\n      this.filterManager = filterManager;\n      var feColorMatrix = createNS('feColorMatrix');\n      feColorMatrix.setAttribute('type', 'matrix');\n      feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\n      feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\n      feColorMatrix.setAttribute('result', 'f1');\n      filter.appendChild(feColorMatrix);\n      var feComponentTransfer = createNS('feComponentTransfer');\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n      filter.appendChild(feComponentTransfer);\n      this.matrixFilter = feComponentTransfer;\n      var feFuncR = createNS('feFuncR');\n      feFuncR.setAttribute('type', 'table');\n      feComponentTransfer.appendChild(feFuncR);\n      this.feFuncR = feFuncR;\n      var feFuncG = createNS('feFuncG');\n      feFuncG.setAttribute('type', 'table');\n      feComponentTransfer.appendChild(feFuncG);\n      this.feFuncG = feFuncG;\n      var feFuncB = createNS('feFuncB');\n      feFuncB.setAttribute('type', 'table');\n      feComponentTransfer.appendChild(feFuncB);\n      this.feFuncB = feFuncB;\n    }\n\n    SVGTritoneFilter.prototype.renderFrame = function (forceRender) {\n      if (forceRender || this.filterManager._mdf) {\n        var color1 = this.filterManager.effectElements[0].p.v;\n        var color2 = this.filterManager.effectElements[1].p.v;\n        var color3 = this.filterManager.effectElements[2].p.v;\n        var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\n        var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\n        var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\n        this.feFuncR.setAttribute('tableValues', tableR);\n        this.feFuncG.setAttribute('tableValues', tableG);\n        this.feFuncB.setAttribute('tableValues', tableB); //var opacity = this.filterManager.effectElements[2].p.v/100;\n        //this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\n      }\n    };\n\n    function SVGProLevelsFilter(filter, filterManager) {\n      this.filterManager = filterManager;\n      var effectElements = this.filterManager.effectElements;\n      var feComponentTransfer = createNS('feComponentTransfer');\n\n      if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\n        this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\n      }\n\n      if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\n        this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\n      }\n\n      if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\n        this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\n      }\n\n      if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\n        this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\n      }\n\n      if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\n        feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n        filter.appendChild(feComponentTransfer);\n        feComponentTransfer = createNS('feComponentTransfer');\n      }\n\n      if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\n        feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n        filter.appendChild(feComponentTransfer);\n        this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\n        this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\n        this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\n      }\n    }\n\n    SVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\n      var feFunc = createNS(type);\n      feFunc.setAttribute('type', 'table');\n      feComponentTransfer.appendChild(feFunc);\n      return feFunc;\n    };\n\n    SVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\n      var cnt = 0;\n      var segments = 256;\n      var perc;\n      var min = Math.min(inputBlack, inputWhite);\n      var max = Math.max(inputBlack, inputWhite);\n      var table = Array.call(null, {\n        length: segments\n      });\n      var colorValue;\n      var pos = 0;\n      var outputDelta = outputWhite - outputBlack;\n      var inputDelta = inputWhite - inputBlack;\n\n      while (cnt <= 256) {\n        perc = cnt / 256;\n\n        if (perc <= min) {\n          colorValue = inputDelta < 0 ? outputWhite : outputBlack;\n        } else if (perc >= max) {\n          colorValue = inputDelta < 0 ? outputBlack : outputWhite;\n        } else {\n          colorValue = outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma);\n        }\n\n        table[pos++] = colorValue;\n        cnt += 256 / (segments - 1);\n      }\n\n      return table.join(' ');\n    };\n\n    SVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\n      if (forceRender || this.filterManager._mdf) {\n        var val;\n        var effectElements = this.filterManager.effectElements;\n\n        if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\n          val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\n          this.feFuncRComposed.setAttribute('tableValues', val);\n          this.feFuncGComposed.setAttribute('tableValues', val);\n          this.feFuncBComposed.setAttribute('tableValues', val);\n        }\n\n        if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\n          val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\n          this.feFuncR.setAttribute('tableValues', val);\n        }\n\n        if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\n          val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\n          this.feFuncG.setAttribute('tableValues', val);\n        }\n\n        if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\n          val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\n          this.feFuncB.setAttribute('tableValues', val);\n        }\n\n        if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\n          val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\n          this.feFuncA.setAttribute('tableValues', val);\n        }\n      }\n    };\n\n    function SVGDropShadowEffect(filter, filterManager) {\n      filter.setAttribute('x', '-100%');\n      filter.setAttribute('y', '-100%');\n      filter.setAttribute('width', '400%');\n      filter.setAttribute('height', '400%');\n      this.filterManager = filterManager;\n      var feGaussianBlur = createNS('feGaussianBlur');\n      feGaussianBlur.setAttribute('in', 'SourceAlpha');\n      feGaussianBlur.setAttribute('result', 'drop_shadow_1');\n      feGaussianBlur.setAttribute('stdDeviation', '0');\n      this.feGaussianBlur = feGaussianBlur;\n      filter.appendChild(feGaussianBlur);\n      var feOffset = createNS('feOffset');\n      feOffset.setAttribute('dx', '25');\n      feOffset.setAttribute('dy', '0');\n      feOffset.setAttribute('in', 'drop_shadow_1');\n      feOffset.setAttribute('result', 'drop_shadow_2');\n      this.feOffset = feOffset;\n      filter.appendChild(feOffset);\n      var feFlood = createNS('feFlood');\n      feFlood.setAttribute('flood-color', '#00ff00');\n      feFlood.setAttribute('flood-opacity', '1');\n      feFlood.setAttribute('result', 'drop_shadow_3');\n      this.feFlood = feFlood;\n      filter.appendChild(feFlood);\n      var feComposite = createNS('feComposite');\n      feComposite.setAttribute('in', 'drop_shadow_3');\n      feComposite.setAttribute('in2', 'drop_shadow_2');\n      feComposite.setAttribute('operator', 'in');\n      feComposite.setAttribute('result', 'drop_shadow_4');\n      filter.appendChild(feComposite);\n      var feMerge = createNS('feMerge');\n      filter.appendChild(feMerge);\n      var feMergeNode;\n      feMergeNode = createNS('feMergeNode');\n      feMerge.appendChild(feMergeNode);\n      feMergeNode = createNS('feMergeNode');\n      feMergeNode.setAttribute('in', 'SourceGraphic');\n      this.feMergeNode = feMergeNode;\n      this.feMerge = feMerge;\n      this.originalNodeAdded = false;\n      feMerge.appendChild(feMergeNode);\n    }\n\n    SVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\n      if (forceRender || this.filterManager._mdf) {\n        if (forceRender || this.filterManager.effectElements[4].p._mdf) {\n          this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\n        }\n\n        if (forceRender || this.filterManager.effectElements[0].p._mdf) {\n          var col = this.filterManager.effectElements[0].p.v;\n          this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\n        }\n\n        if (forceRender || this.filterManager.effectElements[1].p._mdf) {\n          this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\n        }\n\n        if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\n          var distance = this.filterManager.effectElements[3].p.v;\n          var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\n          var x = distance * Math.cos(angle);\n          var y = distance * Math.sin(angle);\n          this.feOffset.setAttribute('dx', x);\n          this.feOffset.setAttribute('dy', y);\n        }\n        /*if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        }*/\n\n      }\n    };\n\n    var _svgMatteSymbols = [];\n\n    function SVGMatte3Effect(filterElem, filterManager, elem) {\n      this.initialized = false;\n      this.filterManager = filterManager;\n      this.filterElem = filterElem;\n      this.elem = elem;\n      elem.matteElement = createNS('g');\n      elem.matteElement.appendChild(elem.layerElement);\n      elem.matteElement.appendChild(elem.transformedElement);\n      elem.baseElement = elem.matteElement;\n    }\n\n    SVGMatte3Effect.prototype.findSymbol = function (mask) {\n      var i = 0,\n          len = _svgMatteSymbols.length;\n\n      while (i < len) {\n        if (_svgMatteSymbols[i] === mask) {\n          return _svgMatteSymbols[i];\n        }\n\n        i += 1;\n      }\n\n      return null;\n    };\n\n    SVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\n      var parentNode = mask.layerElement.parentNode;\n\n      if (!parentNode) {\n        return;\n      }\n\n      var children = parentNode.children;\n      var i = 0,\n          len = children.length;\n\n      while (i < len) {\n        if (children[i] === mask.layerElement) {\n          break;\n        }\n\n        i += 1;\n      }\n\n      var nextChild;\n\n      if (i <= len - 2) {\n        nextChild = children[i + 1];\n      }\n\n      var useElem = createNS('use');\n      useElem.setAttribute('href', '#' + symbolId);\n\n      if (nextChild) {\n        parentNode.insertBefore(useElem, nextChild);\n      } else {\n        parentNode.appendChild(useElem);\n      }\n    };\n\n    SVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\n      if (!this.findSymbol(mask)) {\n        var symbolId = createElementID();\n        var masker = createNS('mask');\n        masker.setAttribute('id', mask.layerId);\n        masker.setAttribute('mask-type', 'alpha');\n\n        _svgMatteSymbols.push(mask);\n\n        var defs = elem.globalData.defs;\n        defs.appendChild(masker);\n        var symbol = createNS('symbol');\n        symbol.setAttribute('id', symbolId);\n        this.replaceInParent(mask, symbolId);\n        symbol.appendChild(mask.layerElement);\n        defs.appendChild(symbol);\n        var useElem = createNS('use');\n        useElem.setAttribute('href', '#' + symbolId);\n        masker.appendChild(useElem);\n        mask.data.hd = false;\n        mask.show();\n      }\n\n      elem.setMatte(mask.layerId);\n    };\n\n    SVGMatte3Effect.prototype.initialize = function () {\n      var ind = this.filterManager.effectElements[0].p.v;\n      var elements = this.elem.comp.elements;\n      var i = 0,\n          len = elements.length;\n\n      while (i < len) {\n        if (elements[i] && elements[i].data.ind === ind) {\n          this.setElementAsMask(this.elem, elements[i]);\n        }\n\n        i += 1;\n      }\n\n      this.initialized = true;\n    };\n\n    SVGMatte3Effect.prototype.renderFrame = function () {\n      if (!this.initialized) {\n        this.initialize();\n      }\n    };\n\n    function SVGEffects(elem) {\n      var i,\n          len = elem.data.ef ? elem.data.ef.length : 0;\n      var filId = createElementID();\n      var fil = filtersFactory.createFilter(filId);\n      var count = 0;\n      this.filters = [];\n      var filterManager;\n\n      for (i = 0; i < len; i += 1) {\n        filterManager = null;\n\n        if (elem.data.ef[i].ty === 20) {\n          count += 1;\n          filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\n        } else if (elem.data.ef[i].ty === 21) {\n          count += 1;\n          filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\n        } else if (elem.data.ef[i].ty === 22) {\n          filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\n        } else if (elem.data.ef[i].ty === 23) {\n          count += 1;\n          filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\n        } else if (elem.data.ef[i].ty === 24) {\n          count += 1;\n          filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\n        } else if (elem.data.ef[i].ty === 25) {\n          count += 1;\n          filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\n        } else if (elem.data.ef[i].ty === 28) {\n          //count += 1;\n          filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\n        } else if (elem.data.ef[i].ty === 29) {\n          count += 1;\n          filterManager = new SVGGaussianBlurEffect(fil, elem.effectsManager.effectElements[i]);\n        }\n\n        if (filterManager) {\n          this.filters.push(filterManager);\n        }\n      }\n\n      if (count) {\n        elem.globalData.defs.appendChild(fil);\n        elem.layerElement.setAttribute('filter', 'url(' + locationHref + '#' + filId + ')');\n      }\n\n      if (this.filters.length) {\n        elem.addRenderableComponent(this);\n      }\n    }\n\n    SVGEffects.prototype.renderFrame = function (_isFirstFrame) {\n      var i,\n          len = this.filters.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.filters[i].renderFrame(_isFirstFrame);\n      }\n    };\n\n    function CVContextData() {\n      this.saved = [];\n      this.cArrPos = 0;\n      this.cTr = new Matrix();\n      this.cO = 1;\n      var i,\n          len = 15;\n      this.savedOp = createTypedArray('float32', len);\n\n      for (i = 0; i < len; i += 1) {\n        this.saved[i] = createTypedArray('float32', 16);\n      }\n\n      this._length = len;\n    }\n\n    CVContextData.prototype.duplicate = function () {\n      var newLength = this._length * 2;\n      var currentSavedOp = this.savedOp;\n      this.savedOp = createTypedArray('float32', newLength);\n      this.savedOp.set(currentSavedOp);\n      var i = 0;\n\n      for (i = this._length; i < newLength; i += 1) {\n        this.saved[i] = createTypedArray('float32', 16);\n      }\n\n      this._length = newLength;\n    };\n\n    CVContextData.prototype.reset = function () {\n      this.cArrPos = 0;\n      this.cTr.reset();\n      this.cO = 1;\n    };\n\n    function CVBaseElement() {}\n\n    CVBaseElement.prototype = {\n      createElements: function createElements() {},\n      initRendererElement: function initRendererElement() {},\n      createContainerElements: function createContainerElements() {\n        this.canvasContext = this.globalData.canvasContext;\n        this.renderableEffectsManager = new CVEffects(this);\n      },\n      createContent: function createContent() {},\n      setBlendMode: function setBlendMode() {\n        var globalData = this.globalData;\n\n        if (globalData.blendMode !== this.data.bm) {\n          globalData.blendMode = this.data.bm;\n          var blendModeValue = getBlendMode(this.data.bm);\n          globalData.canvasContext.globalCompositeOperation = blendModeValue;\n        }\n      },\n      createRenderableComponents: function createRenderableComponents() {\n        this.maskManager = new CVMaskElement(this.data, this);\n      },\n      hideElement: function hideElement() {\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n          this.hidden = true;\n        }\n      },\n      showElement: function showElement() {\n        if (this.isInRange && !this.isTransparent) {\n          this.hidden = false;\n          this._isFirstFrame = true;\n          this.maskManager._isFirstFrame = true;\n        }\n      },\n      renderFrame: function renderFrame() {\n        if (this.hidden || this.data.hd) {\n          return;\n        }\n\n        this.renderTransform();\n        this.renderRenderable();\n        this.setBlendMode();\n        this.globalData.renderer.save();\n        this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\n        this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\n        this.renderInnerContent();\n        this.globalData.renderer.restore();\n\n        if (this.maskManager.hasMasks) {\n          this.globalData.renderer.restore(true);\n        }\n\n        if (this._isFirstFrame) {\n          this._isFirstFrame = false;\n        }\n      },\n      destroy: function destroy() {\n        this.canvasContext = null;\n        this.data = null;\n        this.globalData = null;\n        this.maskManager.destroy();\n      },\n      mHelper: new Matrix()\n    };\n    CVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\n    CVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\n\n    function CVImageElement(data, globalData, comp) {\n      this.assetData = globalData.getAssetData(data.refId);\n      this.img = globalData.imageLoader.getImage(this.assetData);\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\n    CVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n    CVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n\n    CVImageElement.prototype.createContent = function () {\n      if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\n        var canvas = createTag('canvas');\n        canvas.width = this.assetData.w;\n        canvas.height = this.assetData.h;\n        var ctx = canvas.getContext('2d');\n        var imgW = this.img.width;\n        var imgH = this.img.height;\n        var imgRel = imgW / imgH;\n        var canvasRel = this.assetData.w / this.assetData.h;\n        var widthCrop, heightCrop;\n        var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\n\n        if (imgRel > canvasRel && par === 'xMidYMid slice' || imgRel < canvasRel && par !== 'xMidYMid slice') {\n          heightCrop = imgH;\n          widthCrop = heightCrop * canvasRel;\n        } else {\n          widthCrop = imgW;\n          heightCrop = widthCrop / canvasRel;\n        }\n\n        ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\n        this.img = canvas;\n      }\n    };\n\n    CVImageElement.prototype.renderInnerContent = function (parentMatrix) {\n      this.canvasContext.drawImage(this.img, 0, 0);\n    };\n\n    CVImageElement.prototype.destroy = function () {\n      this.img = null;\n    };\n\n    function CVCompElement(data, globalData, comp) {\n      this.completeLayers = false;\n      this.layers = data.layers;\n      this.pendingElements = [];\n      this.elements = createSizedArray(this.layers.length);\n      this.initElement(data, globalData, comp);\n      this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n        _placeholder: true\n      };\n    }\n\n    extendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement);\n\n    CVCompElement.prototype.renderInnerContent = function () {\n      var i,\n          len = this.layers.length;\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n    };\n\n    CVCompElement.prototype.destroy = function () {\n      var i,\n          len = this.layers.length;\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        if (this.elements[i]) {\n          this.elements[i].destroy();\n        }\n      }\n\n      this.layers = null;\n      this.elements = null;\n    };\n\n    function CVMaskElement(data, element) {\n      this.data = data;\n      this.element = element;\n      this.masksProperties = this.data.masksProperties || [];\n      this.viewData = createSizedArray(this.masksProperties.length);\n      var i,\n          len = this.masksProperties.length,\n          hasMasks = false;\n\n      for (i = 0; i < len; i++) {\n        if (this.masksProperties[i].mode !== 'n') {\n          hasMasks = true;\n        }\n\n        this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\n      }\n\n      this.hasMasks = hasMasks;\n\n      if (hasMasks) {\n        this.element.addRenderableComponent(this);\n      }\n    }\n\n    CVMaskElement.prototype.renderFrame = function () {\n      if (!this.hasMasks) {\n        return;\n      }\n\n      var transform = this.element.finalTransform.mat;\n      var ctx = this.element.canvasContext;\n      var i,\n          len = this.masksProperties.length;\n      var pt, pts, data;\n      ctx.beginPath();\n\n      for (i = 0; i < len; i++) {\n        if (this.masksProperties[i].mode !== 'n') {\n          if (this.masksProperties[i].inv) {\n            ctx.moveTo(0, 0);\n            ctx.lineTo(this.element.globalData.compSize.w, 0);\n            ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\n            ctx.lineTo(0, this.element.globalData.compSize.h);\n            ctx.lineTo(0, 0);\n          }\n\n          data = this.viewData[i].v;\n          pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\n          ctx.moveTo(pt[0], pt[1]);\n          var j,\n              jLen = data._length;\n\n          for (j = 1; j < jLen; j++) {\n            pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\n            ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n          }\n\n          pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\n          ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n        }\n      }\n\n      this.element.globalData.renderer.save(true);\n      ctx.clip();\n    };\n\n    CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\n\n    CVMaskElement.prototype.destroy = function () {\n      this.element = null;\n    };\n\n    function CVShapeElement(data, globalData, comp) {\n      this.shapes = [];\n      this.shapesData = data.shapes;\n      this.stylesList = [];\n      this.itemsData = [];\n      this.prevViewData = [];\n      this.shapeModifiers = [];\n      this.processedElements = [];\n      this.transformsManager = new ShapeTransformManager();\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\n    CVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\n    CVShapeElement.prototype.transformHelper = {\n      opacity: 1,\n      _opMdf: false\n    };\n    CVShapeElement.prototype.dashResetter = [];\n\n    CVShapeElement.prototype.createContent = function () {\n      this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n    };\n\n    CVShapeElement.prototype.createStyleElement = function (data, transforms) {\n      var styleElem = {\n        data: data,\n        type: data.ty,\n        preTransforms: this.transformsManager.addTransformSequence(transforms),\n        transforms: [],\n        elements: [],\n        closed: data.hd === true\n      };\n      var elementData = {};\n\n      if (data.ty == 'fl' || data.ty == 'st') {\n        elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\n\n        if (!elementData.c.k) {\n          styleElem.co = 'rgb(' + bm_floor(elementData.c.v[0]) + ',' + bm_floor(elementData.c.v[1]) + ',' + bm_floor(elementData.c.v[2]) + ')';\n        }\n      } else if (data.ty === 'gf' || data.ty === 'gs') {\n        elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\n        elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\n        elementData.h = PropertyFactory.getProp(this, data.h || {\n          k: 0\n        }, 0, 0.01, this);\n        elementData.a = PropertyFactory.getProp(this, data.a || {\n          k: 0\n        }, 0, degToRads, this);\n        elementData.g = new GradientProperty(this, data.g, this);\n      }\n\n      elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\n\n      if (data.ty == 'st' || data.ty == 'gs') {\n        styleElem.lc = this.lcEnum[data.lc] || 'round';\n        styleElem.lj = this.ljEnum[data.lj] || 'round';\n\n        if (data.lj == 1) {\n          styleElem.ml = data.ml;\n        }\n\n        elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\n\n        if (!elementData.w.k) {\n          styleElem.wi = elementData.w.v;\n        }\n\n        if (data.d) {\n          var d = new DashProperty(this, data.d, 'canvas', this);\n          elementData.d = d;\n\n          if (!elementData.d.k) {\n            styleElem.da = elementData.d.dashArray;\n            styleElem.do = elementData.d.dashoffset[0];\n          }\n        }\n      } else {\n        styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\n      }\n\n      this.stylesList.push(styleElem);\n      elementData.style = styleElem;\n      return elementData;\n    };\n\n    CVShapeElement.prototype.createGroupElement = function (data) {\n      var elementData = {\n        it: [],\n        prevViewData: []\n      };\n      return elementData;\n    };\n\n    CVShapeElement.prototype.createTransformElement = function (data) {\n      var elementData = {\n        transform: {\n          opacity: 1,\n          _opMdf: false,\n          key: this.transformsManager.getNewKey(),\n          op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\n          mProps: TransformPropertyFactory.getTransformProperty(this, data, this)\n        }\n      };\n      return elementData;\n    };\n\n    CVShapeElement.prototype.createShapeElement = function (data) {\n      var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\n      this.shapes.push(elementData);\n      this.addShapeToModifiers(elementData);\n      return elementData;\n    };\n\n    CVShapeElement.prototype.reloadShapes = function () {\n      this._isFirstFrame = true;\n      var i,\n          len = this.itemsData.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.prevViewData[i] = this.itemsData[i];\n      }\n\n      this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n      len = this.dynamicProperties.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.dynamicProperties[i].getValue();\n      }\n\n      this.renderModifiers();\n      this.transformsManager.processSequences(this._isFirstFrame);\n    };\n\n    CVShapeElement.prototype.addTransformToStyleList = function (transform) {\n      var i,\n          len = this.stylesList.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (!this.stylesList[i].closed) {\n          this.stylesList[i].transforms.push(transform);\n        }\n      }\n    };\n\n    CVShapeElement.prototype.removeTransformFromStyleList = function () {\n      var i,\n          len = this.stylesList.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (!this.stylesList[i].closed) {\n          this.stylesList[i].transforms.pop();\n        }\n      }\n    };\n\n    CVShapeElement.prototype.closeStyles = function (styles) {\n      var i,\n          len = styles.length;\n\n      for (i = 0; i < len; i += 1) {\n        styles[i].closed = true;\n      }\n    };\n\n    CVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\n      var i,\n          len = arr.length - 1;\n      var j, jLen;\n      var ownStyles = [],\n          ownModifiers = [],\n          processedPos,\n          modifier,\n          currentTransform;\n      var ownTransforms = [].concat(transforms);\n\n      for (i = len; i >= 0; i -= 1) {\n        processedPos = this.searchProcessedElement(arr[i]);\n\n        if (!processedPos) {\n          arr[i]._shouldRender = shouldRender;\n        } else {\n          itemsData[i] = prevViewData[processedPos - 1];\n        }\n\n        if (arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs') {\n          if (!processedPos) {\n            itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\n          } else {\n            itemsData[i].style.closed = false;\n          }\n\n          ownStyles.push(itemsData[i].style);\n        } else if (arr[i].ty == 'gr') {\n          if (!processedPos) {\n            itemsData[i] = this.createGroupElement(arr[i]);\n          } else {\n            jLen = itemsData[i].it.length;\n\n            for (j = 0; j < jLen; j += 1) {\n              itemsData[i].prevViewData[j] = itemsData[i].it[j];\n            }\n          }\n\n          this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\n        } else if (arr[i].ty == 'tr') {\n          if (!processedPos) {\n            currentTransform = this.createTransformElement(arr[i]);\n            itemsData[i] = currentTransform;\n          }\n\n          ownTransforms.push(itemsData[i]);\n          this.addTransformToStyleList(itemsData[i]);\n        } else if (arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr') {\n          if (!processedPos) {\n            itemsData[i] = this.createShapeElement(arr[i]);\n          }\n        } else if (arr[i].ty == 'tm' || arr[i].ty == 'rd') {\n          if (!processedPos) {\n            modifier = ShapeModifiers.getModifier(arr[i].ty);\n            modifier.init(this, arr[i]);\n            itemsData[i] = modifier;\n            this.shapeModifiers.push(modifier);\n          } else {\n            modifier = itemsData[i];\n            modifier.closed = false;\n          }\n\n          ownModifiers.push(modifier);\n        } else if (arr[i].ty == 'rp') {\n          if (!processedPos) {\n            modifier = ShapeModifiers.getModifier(arr[i].ty);\n            itemsData[i] = modifier;\n            modifier.init(this, arr, i, itemsData);\n            this.shapeModifiers.push(modifier);\n            shouldRender = false;\n          } else {\n            modifier = itemsData[i];\n            modifier.closed = true;\n          }\n\n          ownModifiers.push(modifier);\n        }\n\n        this.addProcessedElement(arr[i], i + 1);\n      }\n\n      this.removeTransformFromStyleList();\n      this.closeStyles(ownStyles);\n      len = ownModifiers.length;\n\n      for (i = 0; i < len; i += 1) {\n        ownModifiers[i].closed = true;\n      }\n    };\n\n    CVShapeElement.prototype.renderInnerContent = function () {\n      this.transformHelper.opacity = 1;\n      this.transformHelper._opMdf = false;\n      this.renderModifiers();\n      this.transformsManager.processSequences(this._isFirstFrame);\n      this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\n    };\n\n    CVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\n      if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\n        groupTransform.opacity = parentTransform.opacity;\n        groupTransform.opacity *= groupTransform.op.v;\n        groupTransform._opMdf = true;\n      }\n    };\n\n    CVShapeElement.prototype.drawLayer = function () {\n      var i,\n          len = this.stylesList.length;\n      var j,\n          jLen,\n          k,\n          kLen,\n          elems,\n          nodes,\n          renderer = this.globalData.renderer,\n          ctx = this.globalData.canvasContext,\n          type,\n          currentStyle;\n\n      for (i = 0; i < len; i += 1) {\n        currentStyle = this.stylesList[i];\n        type = currentStyle.type; //Skipping style when\n        //Stroke width equals 0\n        //style should not be rendered (extra unused repeaters)\n        //current opacity equals 0\n        //global opacity equals 0\n\n        if ((type === 'st' || type === 'gs') && currentStyle.wi === 0 || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0) {\n          continue;\n        }\n\n        renderer.save();\n        elems = currentStyle.elements;\n\n        if (type === 'st' || type === 'gs') {\n          ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\n          ctx.lineWidth = currentStyle.wi;\n          ctx.lineCap = currentStyle.lc;\n          ctx.lineJoin = currentStyle.lj;\n          ctx.miterLimit = currentStyle.ml || 0;\n        } else {\n          ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\n        }\n\n        renderer.ctxOpacity(currentStyle.coOp);\n\n        if (type !== 'st' && type !== 'gs') {\n          ctx.beginPath();\n        }\n\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\n        jLen = elems.length;\n\n        for (j = 0; j < jLen; j += 1) {\n          if (type === 'st' || type === 'gs') {\n            ctx.beginPath();\n\n            if (currentStyle.da) {\n              ctx.setLineDash(currentStyle.da);\n              ctx.lineDashOffset = currentStyle.do;\n            }\n          }\n\n          nodes = elems[j].trNodes;\n          kLen = nodes.length;\n\n          for (k = 0; k < kLen; k += 1) {\n            if (nodes[k].t == 'm') {\n              ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\n            } else if (nodes[k].t == 'c') {\n              ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\n            } else {\n              ctx.closePath();\n            }\n          }\n\n          if (type === 'st' || type === 'gs') {\n            ctx.stroke();\n\n            if (currentStyle.da) {\n              ctx.setLineDash(this.dashResetter);\n            }\n          }\n        }\n\n        if (type !== 'st' && type !== 'gs') {\n          ctx.fill(currentStyle.r);\n        }\n\n        renderer.restore();\n      }\n    };\n\n    CVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\n      var i,\n          len = items.length - 1;\n      var groupTransform;\n      groupTransform = parentTransform;\n\n      for (i = len; i >= 0; i -= 1) {\n        if (items[i].ty == 'tr') {\n          groupTransform = data[i].transform;\n          this.renderShapeTransform(parentTransform, groupTransform);\n        } else if (items[i].ty == 'sh' || items[i].ty == 'el' || items[i].ty == 'rc' || items[i].ty == 'sr') {\n          this.renderPath(items[i], data[i]);\n        } else if (items[i].ty == 'fl') {\n          this.renderFill(items[i], data[i], groupTransform);\n        } else if (items[i].ty == 'st') {\n          this.renderStroke(items[i], data[i], groupTransform);\n        } else if (items[i].ty == 'gf' || items[i].ty == 'gs') {\n          this.renderGradientFill(items[i], data[i], groupTransform);\n        } else if (items[i].ty == 'gr') {\n          this.renderShape(groupTransform, items[i].it, data[i].it);\n        } else if (items[i].ty == 'tm') ;\n      }\n\n      if (isMain) {\n        this.drawLayer();\n      }\n    };\n\n    CVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\n      if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\n        var shapeNodes = styledShape.trNodes;\n        var paths = shape.paths;\n        var i,\n            len,\n            j,\n            jLen = paths._length;\n        shapeNodes.length = 0;\n        var groupTransformMat = styledShape.transforms.finalTransform;\n\n        for (j = 0; j < jLen; j += 1) {\n          var pathNodes = paths.shapes[j];\n\n          if (pathNodes && pathNodes.v) {\n            len = pathNodes._length;\n\n            for (i = 1; i < len; i += 1) {\n              if (i === 1) {\n                shapeNodes.push({\n                  t: 'm',\n                  p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n                });\n              }\n\n              shapeNodes.push({\n                t: 'c',\n                pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\n              });\n            }\n\n            if (len === 1) {\n              shapeNodes.push({\n                t: 'm',\n                p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n              });\n            }\n\n            if (pathNodes.c && len) {\n              shapeNodes.push({\n                t: 'c',\n                pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\n              });\n              shapeNodes.push({\n                t: 'z'\n              });\n            }\n          }\n        }\n\n        styledShape.trNodes = shapeNodes;\n      }\n    };\n\n    CVShapeElement.prototype.renderPath = function (pathData, itemData) {\n      if (pathData.hd !== true && pathData._shouldRender) {\n        var i,\n            len = itemData.styledShapes.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\n        }\n      }\n    };\n\n    CVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\n      var styleElem = itemData.style;\n\n      if (itemData.c._mdf || this._isFirstFrame) {\n        styleElem.co = 'rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')';\n      }\n\n      if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n        styleElem.coOp = itemData.o.v * groupTransform.opacity;\n      }\n    };\n\n    CVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\n      var styleElem = itemData.style;\n\n      if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf)) {\n        var ctx = this.globalData.canvasContext;\n        var grd;\n        var pt1 = itemData.s.v,\n            pt2 = itemData.e.v;\n\n        if (styleData.t === 1) {\n          grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\n        } else {\n          var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n          var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n          var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99 : itemData.h.v;\n          var dist = rad * percent;\n          var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n          var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n          var grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\n        }\n\n        var i,\n            len = styleData.g.p;\n        var cValues = itemData.g.c;\n        var opacity = 1;\n\n        for (i = 0; i < len; i += 1) {\n          if (itemData.g._hasOpacity && itemData.g._collapsable) {\n            opacity = itemData.g.o[i * 2 + 1];\n          }\n\n          grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\n        }\n\n        styleElem.grd = grd;\n      }\n\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\n    };\n\n    CVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\n      var styleElem = itemData.style;\n      var d = itemData.d;\n\n      if (d && (d._mdf || this._isFirstFrame)) {\n        styleElem.da = d.dashArray;\n        styleElem.do = d.dashoffset[0];\n      }\n\n      if (itemData.c._mdf || this._isFirstFrame) {\n        styleElem.co = 'rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')';\n      }\n\n      if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n        styleElem.coOp = itemData.o.v * groupTransform.opacity;\n      }\n\n      if (itemData.w._mdf || this._isFirstFrame) {\n        styleElem.wi = itemData.w.v;\n      }\n    };\n\n    CVShapeElement.prototype.destroy = function () {\n      this.shapesData = null;\n      this.globalData = null;\n      this.canvasContext = null;\n      this.stylesList.length = 0;\n      this.itemsData.length = 0;\n    };\n\n    function CVSolidElement(data, globalData, comp) {\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\n    CVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n    CVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n\n    CVSolidElement.prototype.renderInnerContent = function () {\n      var ctx = this.canvasContext;\n      ctx.fillStyle = this.data.sc;\n      ctx.fillRect(0, 0, this.data.sw, this.data.sh); //\n    };\n\n    function CVTextElement(data, globalData, comp) {\n      this.textSpans = [];\n      this.yOffset = 0;\n      this.fillColorAnim = false;\n      this.strokeColorAnim = false;\n      this.strokeWidthAnim = false;\n      this.stroke = false;\n      this.fill = false;\n      this.justifyOffset = 0;\n      this.currentRender = null;\n      this.renderType = 'canvas';\n      this.values = {\n        fill: 'rgba(0,0,0,0)',\n        stroke: 'rgba(0,0,0,0)',\n        sWidth: 0,\n        fValue: ''\n      };\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\n    CVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\n\n    CVTextElement.prototype.buildNewText = function () {\n      var documentData = this.textProperty.currentData;\n      this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n      var hasFill = false;\n\n      if (documentData.fc) {\n        hasFill = true;\n        this.values.fill = this.buildColor(documentData.fc);\n      } else {\n        this.values.fill = 'rgba(0,0,0,0)';\n      }\n\n      this.fill = hasFill;\n      var hasStroke = false;\n\n      if (documentData.sc) {\n        hasStroke = true;\n        this.values.stroke = this.buildColor(documentData.sc);\n        this.values.sWidth = documentData.sw;\n      }\n\n      var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n      var i, len;\n      var letters = documentData.l;\n      var matrixHelper = this.mHelper;\n      this.stroke = hasStroke;\n      this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\n      len = documentData.finalText.length; //this.tHelper.font = this.values.fValue;\n\n      var charData,\n          shapeData,\n          k,\n          kLen,\n          shapes,\n          j,\n          jLen,\n          pathNodes,\n          commands,\n          pathArr,\n          singleShape = this.data.singleShape;\n      var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n      var xPos = 0,\n          yPos = 0,\n          firstLine = true;\n      var cnt = 0;\n\n      for (i = 0; i < len; i += 1) {\n        charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n        shapeData = charData && charData.data || {};\n        matrixHelper.reset();\n\n        if (singleShape && letters[i].n) {\n          xPos = -trackingOffset;\n          yPos += documentData.yOffset;\n          yPos += firstLine ? 1 : 0;\n          firstLine = false;\n        }\n\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\n        jLen = shapes.length;\n        matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n\n        if (singleShape) {\n          this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n        }\n\n        commands = createSizedArray(jLen);\n\n        for (j = 0; j < jLen; j += 1) {\n          kLen = shapes[j].ks.k.i.length;\n          pathNodes = shapes[j].ks.k;\n          pathArr = [];\n\n          for (k = 1; k < kLen; k += 1) {\n            if (k == 1) {\n              pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n            }\n\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\n          }\n\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n          commands[j] = pathArr;\n        }\n\n        if (singleShape) {\n          xPos += letters[i].l;\n          xPos += trackingOffset;\n        }\n\n        if (this.textSpans[cnt]) {\n          this.textSpans[cnt].elem = commands;\n        } else {\n          this.textSpans[cnt] = {\n            elem: commands\n          };\n        }\n\n        cnt += 1;\n      }\n    };\n\n    CVTextElement.prototype.renderInnerContent = function () {\n      var ctx = this.canvasContext;\n      var finalMat = this.finalTransform.mat.props;\n      ctx.font = this.values.fValue;\n      ctx.lineCap = 'butt';\n      ctx.lineJoin = 'miter';\n      ctx.miterLimit = 4;\n\n      if (!this.data.singleShape) {\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n      }\n\n      var i, len, j, jLen, k, kLen;\n      var renderedLetters = this.textAnimator.renderedLetters;\n      var letters = this.textProperty.currentData.l;\n      len = letters.length;\n      var renderedLetter;\n      var lastFill = null,\n          lastStroke = null,\n          lastStrokeW = null,\n          commands,\n          pathArr;\n\n      for (i = 0; i < len; i += 1) {\n        if (letters[i].n) {\n          continue;\n        }\n\n        renderedLetter = renderedLetters[i];\n\n        if (renderedLetter) {\n          this.globalData.renderer.save();\n          this.globalData.renderer.ctxTransform(renderedLetter.p);\n          this.globalData.renderer.ctxOpacity(renderedLetter.o);\n        }\n\n        if (this.fill) {\n          if (renderedLetter && renderedLetter.fc) {\n            if (lastFill !== renderedLetter.fc) {\n              lastFill = renderedLetter.fc;\n              ctx.fillStyle = renderedLetter.fc;\n            }\n          } else if (lastFill !== this.values.fill) {\n            lastFill = this.values.fill;\n            ctx.fillStyle = this.values.fill;\n          }\n\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n\n          this.globalData.canvasContext.closePath();\n          this.globalData.canvasContext.fill(); ///ctx.fillText(this.textSpans[i].val,0,0);\n        }\n\n        if (this.stroke) {\n          if (renderedLetter && renderedLetter.sw) {\n            if (lastStrokeW !== renderedLetter.sw) {\n              lastStrokeW = renderedLetter.sw;\n              ctx.lineWidth = renderedLetter.sw;\n            }\n          } else if (lastStrokeW !== this.values.sWidth) {\n            lastStrokeW = this.values.sWidth;\n            ctx.lineWidth = this.values.sWidth;\n          }\n\n          if (renderedLetter && renderedLetter.sc) {\n            if (lastStroke !== renderedLetter.sc) {\n              lastStroke = renderedLetter.sc;\n              ctx.strokeStyle = renderedLetter.sc;\n            }\n          } else if (lastStroke !== this.values.stroke) {\n            lastStroke = this.values.stroke;\n            ctx.strokeStyle = this.values.stroke;\n          }\n\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n\n          this.globalData.canvasContext.closePath();\n          this.globalData.canvasContext.stroke(); ///ctx.strokeText(letters[i].val,0,0);\n        }\n\n        if (renderedLetter) {\n          this.globalData.renderer.restore();\n        }\n      }\n    };\n\n    function CVEffects() {}\n\n    CVEffects.prototype.renderFrame = function () {};\n\n    function HBaseElement(data, globalData, comp) {}\n\n    HBaseElement.prototype = {\n      checkBlendMode: function checkBlendMode() {},\n      initRendererElement: function initRendererElement() {\n        this.baseElement = createTag(this.data.tg || 'div');\n\n        if (this.data.hasMask) {\n          this.svgElement = createNS('svg');\n          this.layerElement = createNS('g');\n          this.maskedElement = this.layerElement;\n          this.svgElement.appendChild(this.layerElement);\n          this.baseElement.appendChild(this.svgElement);\n        } else {\n          this.layerElement = this.baseElement;\n        }\n\n        styleDiv(this.baseElement);\n      },\n      createContainerElements: function createContainerElements() {\n        this.renderableEffectsManager = new CVEffects(this);\n        this.transformedElement = this.baseElement;\n        this.maskedElement = this.layerElement;\n\n        if (this.data.ln) {\n          this.layerElement.setAttribute('id', this.data.ln);\n        }\n\n        if (this.data.cl) {\n          this.layerElement.setAttribute('class', this.data.cl);\n        }\n\n        if (this.data.bm !== 0) {\n          this.setBlendMode();\n        }\n      },\n      renderElement: function renderElement() {\n        if (this.finalTransform._matMdf) {\n          this.transformedElement.style.transform = this.transformedElement.style.webkitTransform = this.finalTransform.mat.toCSS();\n        }\n\n        if (this.finalTransform._opMdf) {\n          this.transformedElement.style.opacity = this.finalTransform.mProp.o.v;\n        }\n      },\n      renderFrame: function renderFrame() {\n        //If it is exported as hidden (data.hd === true) no need to render\n        //If it is not visible no need to render\n        if (this.data.hd || this.hidden) {\n          return;\n        }\n\n        this.renderTransform();\n        this.renderRenderable();\n        this.renderElement();\n        this.renderInnerContent();\n\n        if (this._isFirstFrame) {\n          this._isFirstFrame = false;\n        }\n      },\n      destroy: function destroy() {\n        this.layerElement = null;\n        this.transformedElement = null;\n\n        if (this.matteElement) {\n          this.matteElement = null;\n        }\n\n        if (this.maskManager) {\n          this.maskManager.destroy();\n          this.maskManager = null;\n        }\n      },\n      createRenderableComponents: function createRenderableComponents() {\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\n      },\n      addEffects: function addEffects() {},\n      setMatte: function setMatte() {}\n    };\n    HBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\n    HBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\n    HBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\n\n    function HSolidElement(data, globalData, comp) {\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\n\n    HSolidElement.prototype.createContent = function () {\n      var rect;\n\n      if (this.data.hasMask) {\n        rect = createNS('rect');\n        rect.setAttribute('width', this.data.sw);\n        rect.setAttribute('height', this.data.sh);\n        rect.setAttribute('fill', this.data.sc);\n        this.svgElement.setAttribute('width', this.data.sw);\n        this.svgElement.setAttribute('height', this.data.sh);\n      } else {\n        rect = createTag('div');\n        rect.style.width = this.data.sw + 'px';\n        rect.style.height = this.data.sh + 'px';\n        rect.style.backgroundColor = this.data.sc;\n      }\n\n      this.layerElement.appendChild(rect);\n    };\n\n    function HCompElement(data, globalData, comp) {\n      this.layers = data.layers;\n      this.supports3d = !data.hasMask;\n      this.completeLayers = false;\n      this.pendingElements = [];\n      this.elements = this.layers ? createSizedArray(this.layers.length) : [];\n      this.initElement(data, globalData, comp);\n      this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n        _placeholder: true\n      };\n    }\n\n    extendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement);\n    HCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\n\n    HCompElement.prototype.createContainerElements = function () {\n      this._createBaseContainerElements(); //divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\n\n\n      if (this.data.hasMask) {\n        this.svgElement.setAttribute('width', this.data.w);\n        this.svgElement.setAttribute('height', this.data.h);\n        this.transformedElement = this.baseElement;\n      } else {\n        this.transformedElement = this.layerElement;\n      }\n    };\n\n    HCompElement.prototype.addTo3dContainer = function (elem, pos) {\n      var j = 0;\n      var nextElement;\n\n      while (j < pos) {\n        if (this.elements[j] && this.elements[j].getBaseElement) {\n          nextElement = this.elements[j].getBaseElement();\n        }\n\n        j += 1;\n      }\n\n      if (nextElement) {\n        this.layerElement.insertBefore(elem, nextElement);\n      } else {\n        this.layerElement.appendChild(elem);\n      }\n    };\n\n    function HShapeElement(data, globalData, comp) {\n      //List of drawable elements\n      this.shapes = []; // Full shape data\n\n      this.shapesData = data.shapes; //List of styles that will be applied to shapes\n\n      this.stylesList = []; //List of modifiers that will be applied to shapes\n\n      this.shapeModifiers = []; //List of items in shape tree\n\n      this.itemsData = []; //List of items in previous shape tree\n\n      this.processedElements = []; // List of animated components\n\n      this.animatedContents = [];\n      this.shapesContainer = createNS('g');\n      this.initElement(data, globalData, comp); //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n      // List of elements that have been created\n\n      this.prevViewData = [];\n      this.currentBBox = {\n        x: 999999,\n        y: -999999,\n        h: 0,\n        w: 0\n      };\n    }\n\n    extendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\n    HShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\n\n    HShapeElement.prototype.createContent = function () {\n      var cont;\n      this.baseElement.style.fontSize = 0;\n\n      if (this.data.hasMask) {\n        this.layerElement.appendChild(this.shapesContainer);\n        cont = this.svgElement;\n      } else {\n        cont = createNS('svg');\n        var size = this.comp.data ? this.comp.data : this.globalData.compSize;\n        cont.setAttribute('width', size.w);\n        cont.setAttribute('height', size.h);\n        cont.appendChild(this.shapesContainer);\n        this.layerElement.appendChild(cont);\n      }\n\n      this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\n      this.filterUniqueShapes();\n      this.shapeCont = cont;\n    };\n\n    HShapeElement.prototype.getTransformedPoint = function (transformers, point) {\n      var i,\n          len = transformers.length;\n\n      for (i = 0; i < len; i += 1) {\n        point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\n      }\n\n      return point;\n    };\n\n    HShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\n      var shape = item.sh.v;\n      var transformers = item.transformers;\n      var i,\n          len = shape._length,\n          vPoint,\n          oPoint,\n          nextIPoint,\n          nextVPoint;\n\n      if (len <= 1) {\n        return;\n      }\n\n      for (i = 0; i < len - 1; i += 1) {\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\n      }\n\n      if (shape.c) {\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\n      }\n    };\n\n    HShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\n      this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\n      var bounds = this.shapeBoundingBox;\n      boundingBox.x = bm_min(bounds.left, boundingBox.x);\n      boundingBox.xMax = bm_max(bounds.right, boundingBox.xMax);\n      boundingBox.y = bm_min(bounds.top, boundingBox.y);\n      boundingBox.yMax = bm_max(bounds.bottom, boundingBox.yMax);\n    };\n\n    HShapeElement.prototype.shapeBoundingBox = {\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0\n    };\n    HShapeElement.prototype.tempBoundingBox = {\n      x: 0,\n      xMax: 0,\n      y: 0,\n      yMax: 0,\n      width: 0,\n      height: 0\n    };\n\n    HShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\n      var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\n\n      for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\n        b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\n        a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\n        c = 3 * p1[i] - 3 * p0[i];\n        b = b | 0;\n        a = a | 0;\n        c = c | 0;\n\n        if (a === 0) {\n          if (b === 0) {\n            continue;\n          }\n\n          t = -c / b;\n\n          if (0 < t && t < 1) {\n            bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\n          }\n\n          continue;\n        }\n\n        b2ac = b * b - 4 * c * a;\n\n        if (b2ac < 0) {\n          continue;\n        }\n\n        t1 = (-b + bm_sqrt(b2ac)) / (2 * a);\n        if (0 < t1 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\n        t2 = (-b - bm_sqrt(b2ac)) / (2 * a);\n        if (0 < t2 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\n      }\n\n      this.shapeBoundingBox.left = bm_min.apply(null, bounds[0]);\n      this.shapeBoundingBox.top = bm_min.apply(null, bounds[1]);\n      this.shapeBoundingBox.right = bm_max.apply(null, bounds[0]);\n      this.shapeBoundingBox.bottom = bm_max.apply(null, bounds[1]);\n    };\n\n    HShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\n      return bm_pow(1 - t, 3) * p0[i] + 3 * bm_pow(1 - t, 2) * t * p1[i] + 3 * (1 - t) * bm_pow(t, 2) * p2[i] + bm_pow(t, 3) * p3[i];\n    };\n\n    HShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\n      var i,\n          len = itemsData.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (itemsData[i] && itemsData[i].sh) {\n          this.calculateShapeBoundingBox(itemsData[i], boundingBox);\n        } else if (itemsData[i] && itemsData[i].it) {\n          this.calculateBoundingBox(itemsData[i].it, boundingBox);\n        }\n      }\n    };\n\n    HShapeElement.prototype.currentBoxContains = function (box) {\n      return this.currentBBox.x <= box.x && this.currentBBox.y <= box.y && this.currentBBox.width + this.currentBBox.x >= box.x + box.width && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\n    };\n\n    HShapeElement.prototype.renderInnerContent = function () {\n      this._renderShapeFrame();\n\n      if (!this.hidden && (this._isFirstFrame || this._mdf)) {\n        var tempBoundingBox = this.tempBoundingBox;\n        var max = 999999;\n        tempBoundingBox.x = max;\n        tempBoundingBox.xMax = -max;\n        tempBoundingBox.y = max;\n        tempBoundingBox.yMax = -max;\n        this.calculateBoundingBox(this.itemsData, tempBoundingBox);\n        tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\n        tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y; //var tempBoundingBox = this.shapeCont.getBBox();\n\n        if (this.currentBoxContains(tempBoundingBox)) {\n          return;\n        }\n\n        var changed = false;\n\n        if (this.currentBBox.w !== tempBoundingBox.width) {\n          this.currentBBox.w = tempBoundingBox.width;\n          this.shapeCont.setAttribute('width', tempBoundingBox.width);\n          changed = true;\n        }\n\n        if (this.currentBBox.h !== tempBoundingBox.height) {\n          this.currentBBox.h = tempBoundingBox.height;\n          this.shapeCont.setAttribute('height', tempBoundingBox.height);\n          changed = true;\n        }\n\n        if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\n          this.currentBBox.w = tempBoundingBox.width;\n          this.currentBBox.h = tempBoundingBox.height;\n          this.currentBBox.x = tempBoundingBox.x;\n          this.currentBBox.y = tempBoundingBox.y;\n          this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\n          this.shapeCont.style.transform = this.shapeCont.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\n        }\n      }\n    };\n\n    function HTextElement(data, globalData, comp) {\n      this.textSpans = [];\n      this.textPaths = [];\n      this.currentBBox = {\n        x: 999999,\n        y: -999999,\n        h: 0,\n        w: 0\n      };\n      this.renderType = 'svg';\n      this.isMasked = false;\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\n\n    HTextElement.prototype.createContent = function () {\n      this.isMasked = this.checkMasks();\n\n      if (this.isMasked) {\n        this.renderType = 'svg';\n        this.compW = this.comp.data.w;\n        this.compH = this.comp.data.h;\n        this.svgElement.setAttribute('width', this.compW);\n        this.svgElement.setAttribute('height', this.compH);\n        var g = createNS('g');\n        this.maskedElement.appendChild(g);\n        this.innerElem = g;\n      } else {\n        this.renderType = 'html';\n        this.innerElem = this.layerElement;\n      }\n\n      this.checkParenting();\n    };\n\n    HTextElement.prototype.buildNewText = function () {\n      var documentData = this.textProperty.currentData;\n      this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n      var innerElemStyle = this.innerElem.style;\n      innerElemStyle.color = innerElemStyle.fill = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\n\n      if (documentData.sc) {\n        innerElemStyle.stroke = this.buildColor(documentData.sc);\n        innerElemStyle.strokeWidth = documentData.sw + 'px';\n      }\n\n      var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n\n      if (!this.globalData.fontManager.chars) {\n        innerElemStyle.fontSize = documentData.finalSize + 'px';\n        innerElemStyle.lineHeight = documentData.finalSize + 'px';\n\n        if (fontData.fClass) {\n          this.innerElem.className = fontData.fClass;\n        } else {\n          innerElemStyle.fontFamily = fontData.fFamily;\n          var fWeight = documentData.fWeight,\n              fStyle = documentData.fStyle;\n          innerElemStyle.fontStyle = fStyle;\n          innerElemStyle.fontWeight = fWeight;\n        }\n      }\n\n      var i, len;\n      var letters = documentData.l;\n      len = letters.length;\n      var tSpan, tParent, tCont;\n      var matrixHelper = this.mHelper;\n      var shapes,\n          shapeStr = '';\n      var cnt = 0;\n\n      for (i = 0; i < len; i += 1) {\n        if (this.globalData.fontManager.chars) {\n          if (!this.textPaths[cnt]) {\n            tSpan = createNS('path');\n            tSpan.setAttribute('stroke-linecap', 'butt');\n            tSpan.setAttribute('stroke-linejoin', 'round');\n            tSpan.setAttribute('stroke-miterlimit', '4');\n          } else {\n            tSpan = this.textPaths[cnt];\n          }\n\n          if (!this.isMasked) {\n            if (this.textSpans[cnt]) {\n              tParent = this.textSpans[cnt];\n              tCont = tParent.children[0];\n            } else {\n              tParent = createTag('div');\n              tParent.style.lineHeight = 0;\n              tCont = createNS('svg');\n              tCont.appendChild(tSpan);\n              styleDiv(tParent);\n            }\n          }\n        } else {\n          if (!this.isMasked) {\n            if (this.textSpans[cnt]) {\n              tParent = this.textSpans[cnt];\n              tSpan = this.textPaths[cnt];\n            } else {\n              tParent = createTag('span');\n              styleDiv(tParent);\n              tSpan = createTag('span');\n              styleDiv(tSpan);\n              tParent.appendChild(tSpan);\n            }\n          } else {\n            tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\n          }\n        } //tSpan.setAttribute('visibility', 'hidden');\n\n\n        if (this.globalData.fontManager.chars) {\n          var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n          var shapeData;\n\n          if (charData) {\n            shapeData = charData.data;\n          } else {\n            shapeData = null;\n          }\n\n          matrixHelper.reset();\n\n          if (shapeData && shapeData.shapes) {\n            shapes = shapeData.shapes[0].it;\n            matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n            shapeStr = this.createPathShape(matrixHelper, shapes);\n            tSpan.setAttribute('d', shapeStr);\n          }\n\n          if (!this.isMasked) {\n            this.innerElem.appendChild(tParent);\n\n            if (shapeData && shapeData.shapes) {\n              //document.body.appendChild is needed to get exact measure of shape\n              document.body.appendChild(tCont);\n              var boundingBox = tCont.getBBox();\n              tCont.setAttribute('width', boundingBox.width + 2);\n              tCont.setAttribute('height', boundingBox.height + 2);\n              tCont.setAttribute('viewBox', boundingBox.x - 1 + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\n              tCont.style.transform = tCont.style.webkitTransform = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\n              letters[i].yOffset = boundingBox.y - 1;\n            } else {\n              tCont.setAttribute('width', 1);\n              tCont.setAttribute('height', 1);\n            }\n\n            tParent.appendChild(tCont);\n          } else {\n            this.innerElem.appendChild(tSpan);\n          }\n        } else {\n          tSpan.textContent = letters[i].val;\n          tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\", \"preserve\");\n\n          if (!this.isMasked) {\n            this.innerElem.appendChild(tParent); //\n\n            tSpan.style.transform = tSpan.style.webkitTransform = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\n          } else {\n            this.innerElem.appendChild(tSpan);\n          }\n        } //\n\n\n        if (!this.isMasked) {\n          this.textSpans[cnt] = tParent;\n        } else {\n          this.textSpans[cnt] = tSpan;\n        }\n\n        this.textSpans[cnt].style.display = 'block';\n        this.textPaths[cnt] = tSpan;\n        cnt += 1;\n      }\n\n      while (cnt < this.textSpans.length) {\n        this.textSpans[cnt].style.display = 'none';\n        cnt += 1;\n      }\n    };\n\n    HTextElement.prototype.renderInnerContent = function () {\n      if (this.data.singleShape) {\n        if (!this._isFirstFrame && !this.lettersChangedFlag) {\n          return;\n        } else {\n          // Todo Benchmark if using this is better than getBBox\n          if (this.isMasked && this.finalTransform._matMdf) {\n            this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\n            this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\n          }\n        }\n      }\n\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n\n      if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\n        return;\n      }\n\n      var i,\n          len,\n          count = 0;\n      var renderedLetters = this.textAnimator.renderedLetters;\n      var letters = this.textProperty.currentData.l;\n      len = letters.length;\n      var renderedLetter, textSpan, textPath;\n\n      for (i = 0; i < len; i += 1) {\n        if (letters[i].n) {\n          count += 1;\n          continue;\n        }\n\n        textSpan = this.textSpans[i];\n        textPath = this.textPaths[i];\n        renderedLetter = renderedLetters[count];\n        count += 1;\n\n        if (renderedLetter._mdf.m) {\n          if (!this.isMasked) {\n            textSpan.style.transform = textSpan.style.webkitTransform = renderedLetter.m;\n          } else {\n            textSpan.setAttribute('transform', renderedLetter.m);\n          }\n        } ////textSpan.setAttribute('opacity',renderedLetter.o);\n\n\n        textSpan.style.opacity = renderedLetter.o;\n\n        if (renderedLetter.sw && renderedLetter._mdf.sw) {\n          textPath.setAttribute('stroke-width', renderedLetter.sw);\n        }\n\n        if (renderedLetter.sc && renderedLetter._mdf.sc) {\n          textPath.setAttribute('stroke', renderedLetter.sc);\n        }\n\n        if (renderedLetter.fc && renderedLetter._mdf.fc) {\n          textPath.setAttribute('fill', renderedLetter.fc);\n          textPath.style.color = renderedLetter.fc;\n        }\n      }\n\n      if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\n        var boundingBox = this.innerElem.getBBox();\n\n        if (this.currentBBox.w !== boundingBox.width) {\n          this.currentBBox.w = boundingBox.width;\n          this.svgElement.setAttribute('width', boundingBox.width);\n        }\n\n        if (this.currentBBox.h !== boundingBox.height) {\n          this.currentBBox.h = boundingBox.height;\n          this.svgElement.setAttribute('height', boundingBox.height);\n        }\n\n        var margin = 1;\n\n        if (this.currentBBox.w !== boundingBox.width + margin * 2 || this.currentBBox.h !== boundingBox.height + margin * 2 || this.currentBBox.x !== boundingBox.x - margin || this.currentBBox.y !== boundingBox.y - margin) {\n          this.currentBBox.w = boundingBox.width + margin * 2;\n          this.currentBBox.h = boundingBox.height + margin * 2;\n          this.currentBBox.x = boundingBox.x - margin;\n          this.currentBBox.y = boundingBox.y - margin;\n          this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\n          this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\n        }\n      }\n    };\n\n    function HImageElement(data, globalData, comp) {\n      this.assetData = globalData.getAssetData(data.refId);\n      this.initElement(data, globalData, comp);\n    }\n\n    extendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\n\n    HImageElement.prototype.createContent = function () {\n      var assetPath = this.globalData.getAssetsPath(this.assetData);\n      var img = new Image();\n\n      if (this.data.hasMask) {\n        this.imageElem = createNS('image');\n        this.imageElem.setAttribute('width', this.assetData.w + \"px\");\n        this.imageElem.setAttribute('height', this.assetData.h + \"px\");\n        this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n        this.layerElement.appendChild(this.imageElem);\n        this.baseElement.setAttribute('width', this.assetData.w);\n        this.baseElement.setAttribute('height', this.assetData.h);\n      } else {\n        this.layerElement.appendChild(img);\n      }\n\n      img.src = assetPath;\n\n      if (this.data.ln) {\n        this.baseElement.setAttribute('id', this.data.ln);\n      }\n    };\n\n    function HCameraElement(data, globalData, comp) {\n      this.initFrame();\n      this.initBaseData(data, globalData, comp);\n      this.initHierarchy();\n      var getProp = PropertyFactory.getProp;\n      this.pe = getProp(this, data.pe, 0, 0, this);\n\n      if (data.ks.p.s) {\n        this.px = getProp(this, data.ks.p.x, 1, 0, this);\n        this.py = getProp(this, data.ks.p.y, 1, 0, this);\n        this.pz = getProp(this, data.ks.p.z, 1, 0, this);\n      } else {\n        this.p = getProp(this, data.ks.p, 1, 0, this);\n      }\n\n      if (data.ks.a) {\n        this.a = getProp(this, data.ks.a, 1, 0, this);\n      }\n\n      if (data.ks.or.k.length && data.ks.or.k[0].to) {\n        var i,\n            len = data.ks.or.k.length;\n\n        for (i = 0; i < len; i += 1) {\n          data.ks.or.k[i].to = null;\n          data.ks.or.k[i].ti = null;\n        }\n      }\n\n      this.or = getProp(this, data.ks.or, 1, degToRads, this);\n      this.or.sh = true;\n      this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\n      this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\n      this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\n      this.mat = new Matrix();\n      this._prevMat = new Matrix();\n      this._isFirstFrame = true; // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\n\n      this.finalTransform = {\n        mProp: this\n      };\n    }\n\n    extendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\n\n    HCameraElement.prototype.setup = function () {\n      var i,\n          len = this.comp.threeDElements.length,\n          comp;\n\n      for (i = 0; i < len; i += 1) {\n        //[perspectiveElem,container]\n        comp = this.comp.threeDElements[i];\n\n        if (comp.type === '3d') {\n          comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v + 'px';\n          comp.container.style.transformOrigin = comp.container.style.mozTransformOrigin = comp.container.style.webkitTransformOrigin = \"0px 0px 0px\";\n          comp.perspectiveElem.style.transform = comp.perspectiveElem.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\n        }\n      }\n    };\n\n    HCameraElement.prototype.createElements = function () {};\n\n    HCameraElement.prototype.hide = function () {};\n\n    HCameraElement.prototype.renderFrame = function () {\n      var _mdf = this._isFirstFrame;\n      var i, len;\n\n      if (this.hierarchy) {\n        len = this.hierarchy.length;\n\n        for (i = 0; i < len; i += 1) {\n          _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\n        }\n      }\n\n      if (_mdf || this.pe._mdf || this.p && this.p._mdf || this.px && (this.px._mdf || this.py._mdf || this.pz._mdf) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || this.a && this.a._mdf) {\n        this.mat.reset();\n\n        if (this.hierarchy) {\n          len = this.hierarchy.length - 1;\n\n          for (i = len; i >= 0; i -= 1) {\n            /*mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n            console.log(mat)\r\n            this.mat.transform(-mat[0],-mat[1],-mat[2],-mat[3],-mat[4],-mat[5],-mat[6],-mat[7],-mat[8],-mat[9],-mat[10],-mat[11],-mat[12],-mat[13],-mat[14],mat[15]);\r\n            console.log(this.mat.props)*/\n            var mTransf = this.hierarchy[i].finalTransform.mProp;\n            this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\n            this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\n            this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\n            this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\n            this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\n          }\n        }\n\n        if (this.p) {\n          this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\n        } else {\n          this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\n        }\n\n        if (this.a) {\n          var diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\n          var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2)); //var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\n\n          var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\n          var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\n          var m_rotationX = Math.atan2(lookDir[1], lookLengthOnXZ);\n          var m_rotationY = Math.atan2(lookDir[0], -lookDir[2]);\n          this.mat.rotateY(m_rotationY).rotateX(-m_rotationX);\n        }\n\n        this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\n        this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\n        this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\n        this.mat.translate(0, 0, this.pe.v);\n        var hasMatrixChanged = !this._prevMat.equals(this.mat);\n\n        if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\n          len = this.comp.threeDElements.length;\n          var comp;\n\n          for (i = 0; i < len; i += 1) {\n            comp = this.comp.threeDElements[i];\n\n            if (comp.type === '3d') {\n              if (hasMatrixChanged) {\n                comp.container.style.transform = comp.container.style.webkitTransform = this.mat.toCSS();\n              }\n\n              if (this.pe._mdf) {\n                comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v + 'px';\n              }\n            }\n          }\n\n          this.mat.clone(this._prevMat);\n        }\n      }\n\n      this._isFirstFrame = false;\n    };\n\n    HCameraElement.prototype.prepareFrame = function (num) {\n      this.prepareProperties(num, true);\n    };\n\n    HCameraElement.prototype.destroy = function () {};\n\n    HCameraElement.prototype.getBaseElement = function () {\n      return null;\n    };\n\n    var animationManager = function () {\n      var moduleOb = {};\n      var registeredAnimations = [];\n      var initTime = 0;\n      var len = 0;\n      var playingAnimationsNum = 0;\n      var _stopped = true;\n      var _isFrozen = false;\n\n      function removeElement(ev) {\n        var i = 0;\n        var animItem = ev.target;\n\n        while (i < len) {\n          if (registeredAnimations[i].animation === animItem) {\n            registeredAnimations.splice(i, 1);\n            i -= 1;\n            len -= 1;\n\n            if (!animItem.isPaused) {\n              subtractPlayingCount();\n            }\n          }\n\n          i += 1;\n        }\n      }\n\n      function registerAnimation(element, animationData) {\n        if (!element) {\n          return null;\n        }\n\n        var i = 0;\n\n        while (i < len) {\n          if (registeredAnimations[i].elem == element && registeredAnimations[i].elem !== null) {\n            return registeredAnimations[i].animation;\n          }\n\n          i += 1;\n        }\n\n        var animItem = new AnimationItem();\n        setupAnimation(animItem, element);\n        animItem.setData(element, animationData);\n        return animItem;\n      }\n\n      function getRegisteredAnimations() {\n        var i,\n            len = registeredAnimations.length;\n        var animations = [];\n\n        for (i = 0; i < len; i += 1) {\n          animations.push(registeredAnimations[i].animation);\n        }\n\n        return animations;\n      }\n\n      function addPlayingCount() {\n        playingAnimationsNum += 1;\n        activate();\n      }\n\n      function subtractPlayingCount() {\n        playingAnimationsNum -= 1;\n      }\n\n      function setupAnimation(animItem, element) {\n        animItem.addEventListener('destroy', removeElement);\n        animItem.addEventListener('_active', addPlayingCount);\n        animItem.addEventListener('_idle', subtractPlayingCount);\n        registeredAnimations.push({\n          elem: element,\n          animation: animItem\n        });\n        len += 1;\n      }\n\n      function loadAnimation(params) {\n        var animItem = new AnimationItem();\n        setupAnimation(animItem, null);\n        animItem.setParams(params);\n        return animItem;\n      }\n\n      function setSpeed(val, animation) {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.setSpeed(val, animation);\n        }\n      }\n\n      function setDirection(val, animation) {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.setDirection(val, animation);\n        }\n      }\n\n      function play(animation) {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.play(animation);\n        }\n      }\n\n      function resume(nowTime) {\n        var elapsedTime = nowTime - initTime;\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.advanceTime(elapsedTime);\n        }\n\n        initTime = nowTime;\n\n        if (playingAnimationsNum && !_isFrozen) {\n          window.requestAnimationFrame(resume);\n        } else {\n          _stopped = true;\n        }\n      }\n\n      function first(nowTime) {\n        initTime = nowTime;\n        window.requestAnimationFrame(resume);\n      }\n\n      function pause(animation) {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.pause(animation);\n        }\n      }\n\n      function goToAndStop(value, isFrame, animation) {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\n        }\n      }\n\n      function stop(animation) {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.stop(animation);\n        }\n      }\n\n      function togglePause(animation) {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.togglePause(animation);\n        }\n      }\n\n      function destroy(animation) {\n        var i;\n\n        for (i = len - 1; i >= 0; i -= 1) {\n          registeredAnimations[i].animation.destroy(animation);\n        }\n      }\n\n      function searchAnimations(animationData, standalone, renderer) {\n        var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')), [].slice.call(document.getElementsByClassName('bodymovin')));\n        var i,\n            len = animElements.length;\n\n        for (i = 0; i < len; i += 1) {\n          if (renderer) {\n            animElements[i].setAttribute('data-bm-type', renderer);\n          }\n\n          registerAnimation(animElements[i], animationData);\n        }\n\n        if (standalone && len === 0) {\n          if (!renderer) {\n            renderer = 'svg';\n          }\n\n          var body = document.getElementsByTagName('body')[0];\n          body.innerHTML = '';\n          var div = createTag('div');\n          div.style.width = '100%';\n          div.style.height = '100%';\n          div.setAttribute('data-bm-type', renderer);\n          body.appendChild(div);\n          registerAnimation(div, animationData);\n        }\n      }\n\n      function resize() {\n        var i;\n\n        for (i = 0; i < len; i += 1) {\n          registeredAnimations[i].animation.resize();\n        }\n      }\n\n      function activate() {\n        if (!_isFrozen && playingAnimationsNum) {\n          if (_stopped) {\n            window.requestAnimationFrame(first);\n            _stopped = false;\n          }\n        }\n      }\n\n      function freeze() {\n        _isFrozen = true;\n      }\n\n      function unfreeze() {\n        _isFrozen = false;\n        activate();\n      }\n\n      moduleOb.registerAnimation = registerAnimation;\n      moduleOb.loadAnimation = loadAnimation;\n      moduleOb.setSpeed = setSpeed;\n      moduleOb.setDirection = setDirection;\n      moduleOb.play = play;\n      moduleOb.pause = pause;\n      moduleOb.stop = stop;\n      moduleOb.togglePause = togglePause;\n      moduleOb.searchAnimations = searchAnimations;\n      moduleOb.resize = resize; //moduleOb.start = start;\n\n      moduleOb.goToAndStop = goToAndStop;\n      moduleOb.destroy = destroy;\n      moduleOb.freeze = freeze;\n      moduleOb.unfreeze = unfreeze;\n      moduleOb.getRegisteredAnimations = getRegisteredAnimations;\n      return moduleOb;\n    }();\n\n    var AnimationItem = function AnimationItem() {\n      this._cbs = [];\n      this.name = '';\n      this.path = '';\n      this.isLoaded = false;\n      this.currentFrame = 0;\n      this.currentRawFrame = 0;\n      this.totalFrames = 0;\n      this.frameRate = 0;\n      this.frameMult = 0;\n      this.playSpeed = 1;\n      this.playDirection = 1;\n      this.playCount = 0;\n      this.animationData = {};\n      this.assets = [];\n      this.isPaused = true;\n      this.autoplay = false;\n      this.loop = true;\n      this.renderer = null;\n      this.animationID = createElementID();\n      this.assetsPath = '';\n      this.timeCompleted = 0;\n      this.segmentPos = 0;\n      this.subframeEnabled = subframeEnabled;\n      this.segments = [];\n      this._idle = true;\n      this._completedLoop = false;\n      this.projectInterface = ProjectInterface();\n      this.imagePreloader = new ImagePreloader();\n    };\n\n    extendPrototype([BaseEvent], AnimationItem);\n\n    AnimationItem.prototype.setParams = function (params) {\n      if (params.context) {\n        this.context = params.context;\n      }\n\n      if (params.wrapper || params.container) {\n        this.wrapper = params.wrapper || params.container;\n      }\n\n      var animType = params.animType ? params.animType : params.renderer ? params.renderer : 'svg';\n\n      switch (animType) {\n        case 'canvas':\n          this.renderer = new CanvasRenderer(this, params.rendererSettings);\n          break;\n\n        case 'svg':\n          this.renderer = new SVGRenderer(this, params.rendererSettings);\n          break;\n\n        default:\n          this.renderer = new HybridRenderer(this, params.rendererSettings);\n          break;\n      }\n\n      this.renderer.setProjectInterface(this.projectInterface);\n      this.animType = animType;\n      if (params.loop === '' || params.loop === null) ;else if (params.loop === false) {\n        this.loop = false;\n      } else if (params.loop === true) {\n        this.loop = true;\n      } else {\n        this.loop = parseInt(params.loop);\n      }\n      this.autoplay = 'autoplay' in params ? params.autoplay : true;\n      this.name = params.name ? params.name : '';\n      this.autoloadSegments = params.hasOwnProperty('autoloadSegments') ? params.autoloadSegments : true;\n      this.assetsPath = params.assetsPath;\n\n      if (params.animationData) {\n        this.configAnimation(params.animationData);\n      } else if (params.path) {\n        if (params.path.substr(-4) != 'json') {\n          if (params.path.substr(-1, 1) != '/') {\n            params.path += '/';\n          }\n\n          params.path += 'data.json';\n        }\n\n        if (params.path.lastIndexOf('\\\\') != -1) {\n          this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\n        } else {\n          this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\n        }\n\n        this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\n        this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\n        assetLoader.load(params.path, this.configAnimation.bind(this), function () {\n          this.trigger('data_failed');\n        }.bind(this));\n      }\n    };\n\n    AnimationItem.prototype.setData = function (wrapper, animationData) {\n      var params = {\n        wrapper: wrapper,\n        animationData: animationData ? typeof animationData === \"object\" ? animationData : JSON.parse(animationData) : null\n      };\n      var wrapperAttributes = wrapper.attributes;\n      params.path = wrapperAttributes.getNamedItem('data-animation-path') ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') ? wrapperAttributes.getNamedItem('data-bm-path').value : wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\n      params.animType = wrapperAttributes.getNamedItem('data-anim-type') ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') ? wrapperAttributes.getNamedItem('bm-type').value : wrapperAttributes.getNamedItem('data-bm-renderer') ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\n      var loop = wrapperAttributes.getNamedItem('data-anim-loop') ? wrapperAttributes.getNamedItem('data-anim-loop').value : wrapperAttributes.getNamedItem('data-bm-loop') ? wrapperAttributes.getNamedItem('data-bm-loop').value : wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\n      if (loop === '') ;else if (loop === 'false') {\n        params.loop = false;\n      } else if (loop === 'true') {\n        params.loop = true;\n      } else {\n        params.loop = parseInt(loop);\n      }\n      var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') ? wrapperAttributes.getNamedItem('data-anim-autoplay').value : wrapperAttributes.getNamedItem('data-bm-autoplay') ? wrapperAttributes.getNamedItem('data-bm-autoplay').value : wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\n      params.autoplay = autoplay !== \"false\";\n      params.name = wrapperAttributes.getNamedItem('data-name') ? wrapperAttributes.getNamedItem('data-name').value : wrapperAttributes.getNamedItem('data-bm-name') ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value : '';\n      var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') ? wrapperAttributes.getNamedItem('data-anim-prerender').value : wrapperAttributes.getNamedItem('data-bm-prerender') ? wrapperAttributes.getNamedItem('data-bm-prerender').value : wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\n\n      if (prerender === 'false') {\n        params.prerender = false;\n      }\n\n      this.setParams(params);\n    };\n\n    AnimationItem.prototype.includeLayers = function (data) {\n      if (data.op > this.animationData.op) {\n        this.animationData.op = data.op;\n        this.totalFrames = Math.floor(data.op - this.animationData.ip);\n      }\n\n      var layers = this.animationData.layers;\n      var i,\n          len = layers.length;\n      var newLayers = data.layers;\n      var j,\n          jLen = newLayers.length;\n\n      for (j = 0; j < jLen; j += 1) {\n        i = 0;\n\n        while (i < len) {\n          if (layers[i].id == newLayers[j].id) {\n            layers[i] = newLayers[j];\n            break;\n          }\n\n          i += 1;\n        }\n      }\n\n      if (data.chars || data.fonts) {\n        this.renderer.globalData.fontManager.addChars(data.chars);\n        this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\n      }\n\n      if (data.assets) {\n        len = data.assets.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.animationData.assets.push(data.assets[i]);\n        }\n      }\n\n      this.animationData.__complete = false;\n      dataManager.completeData(this.animationData, this.renderer.globalData.fontManager);\n      this.renderer.includeLayers(data.layers);\n\n      if (expressionsPlugin) {\n        expressionsPlugin.initExpressions(this);\n      }\n\n      this.loadNextSegment();\n    };\n\n    AnimationItem.prototype.loadNextSegment = function () {\n      var segments = this.animationData.segments;\n\n      if (!segments || segments.length === 0 || !this.autoloadSegments) {\n        this.trigger('data_ready');\n        this.timeCompleted = this.totalFrames;\n        return;\n      }\n\n      var segment = segments.shift();\n      this.timeCompleted = segment.time * this.frameRate;\n      var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\n      this.segmentPos += 1;\n      assetLoader.load(segmentPath, this.includeLayers.bind(this), function () {\n        this.trigger('data_failed');\n      }.bind(this));\n    };\n\n    AnimationItem.prototype.loadSegments = function () {\n      var segments = this.animationData.segments;\n\n      if (!segments) {\n        this.timeCompleted = this.totalFrames;\n      }\n\n      this.loadNextSegment();\n    };\n\n    AnimationItem.prototype.imagesLoaded = function () {\n      this.trigger('loaded_images');\n      this.checkLoaded();\n    };\n\n    AnimationItem.prototype.preloadImages = function () {\n      this.imagePreloader.setAssetsPath(this.assetsPath);\n      this.imagePreloader.setPath(this.path);\n      this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\n    };\n\n    AnimationItem.prototype.configAnimation = function (animData) {\n      if (!this.renderer) {\n        return;\n      }\n\n      this.animationData = animData;\n      this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\n      this.renderer.configAnimation(animData);\n\n      if (!animData.assets) {\n        animData.assets = [];\n      }\n\n      this.renderer.searchExtraCompositions(animData.assets);\n      this.assets = this.animationData.assets;\n      this.frameRate = this.animationData.fr;\n      this.firstFrame = Math.round(this.animationData.ip);\n      this.frameMult = this.animationData.fr / 1000;\n      this.trigger('config_ready');\n      this.preloadImages();\n      this.loadSegments();\n      this.updaFrameModifier();\n      this.waitForFontsLoaded();\n    };\n\n    AnimationItem.prototype.waitForFontsLoaded = function () {\n      if (!this.renderer) {\n        return;\n      }\n\n      if (this.renderer.globalData.fontManager.loaded()) {\n        this.checkLoaded();\n      } else {\n        setTimeout(this.waitForFontsLoaded.bind(this), 20);\n      }\n    };\n\n    AnimationItem.prototype.checkLoaded = function () {\n      if (!this.isLoaded && this.renderer.globalData.fontManager.loaded() && (this.imagePreloader.loaded() || this.renderer.rendererType !== 'canvas')) {\n        this.isLoaded = true;\n        dataManager.completeData(this.animationData, this.renderer.globalData.fontManager);\n\n        if (expressionsPlugin) {\n          expressionsPlugin.initExpressions(this);\n        }\n\n        this.renderer.initItems();\n        setTimeout(function () {\n          this.trigger('DOMLoaded');\n        }.bind(this), 0);\n        this.gotoFrame();\n\n        if (this.autoplay) {\n          this.play();\n        }\n      }\n    };\n\n    AnimationItem.prototype.resize = function () {\n      this.renderer.updateContainerSize();\n    };\n\n    AnimationItem.prototype.setSubframe = function (flag) {\n      this.subframeEnabled = flag ? true : false;\n    };\n\n    AnimationItem.prototype.gotoFrame = function () {\n      this.currentFrame = this.subframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame;\n\n      if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\n        this.currentFrame = this.timeCompleted;\n      }\n\n      this.trigger('enterFrame');\n      this.renderFrame();\n    };\n\n    AnimationItem.prototype.renderFrame = function () {\n      if (this.isLoaded === false) {\n        return;\n      }\n\n      this.renderer.renderFrame(this.currentFrame + this.firstFrame);\n    };\n\n    AnimationItem.prototype.play = function (name) {\n      if (name && this.name != name) {\n        return;\n      }\n\n      if (this.isPaused === true) {\n        this.isPaused = false;\n\n        if (this._idle) {\n          this._idle = false;\n          this.trigger('_active');\n        }\n      }\n    };\n\n    AnimationItem.prototype.pause = function (name) {\n      if (name && this.name != name) {\n        return;\n      }\n\n      if (this.isPaused === false) {\n        this.isPaused = true;\n        this._idle = true;\n        this.trigger('_idle');\n      }\n    };\n\n    AnimationItem.prototype.togglePause = function (name) {\n      if (name && this.name != name) {\n        return;\n      }\n\n      if (this.isPaused === true) {\n        this.play();\n      } else {\n        this.pause();\n      }\n    };\n\n    AnimationItem.prototype.stop = function (name) {\n      if (name && this.name != name) {\n        return;\n      }\n\n      this.pause();\n      this.playCount = 0;\n      this._completedLoop = false;\n      this.setCurrentRawFrameValue(0);\n    };\n\n    AnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\n      if (name && this.name != name) {\n        return;\n      }\n\n      if (isFrame) {\n        this.setCurrentRawFrameValue(value);\n      } else {\n        this.setCurrentRawFrameValue(value * this.frameModifier);\n      }\n\n      this.pause();\n    };\n\n    AnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\n      this.goToAndStop(value, isFrame, name);\n      this.play();\n    };\n\n    AnimationItem.prototype.advanceTime = function (value) {\n      if (this.isPaused === true || this.isLoaded === false) {\n        return;\n      }\n\n      var nextValue = this.currentRawFrame + value * this.frameModifier;\n      var _isComplete = false; // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\n      // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\n\n      if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\n        if (!this.loop || this.playCount === this.loop) {\n          if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\n            _isComplete = true;\n            nextValue = this.totalFrames - 1;\n          }\n        } else if (nextValue >= this.totalFrames) {\n          this.playCount += 1;\n\n          if (!this.checkSegments(nextValue % this.totalFrames)) {\n            this.setCurrentRawFrameValue(nextValue % this.totalFrames);\n            this._completedLoop = true;\n            this.trigger('loopComplete');\n          }\n        } else {\n          this.setCurrentRawFrameValue(nextValue);\n        }\n      } else if (nextValue < 0) {\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\n          if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\n            this.setCurrentRawFrameValue(this.totalFrames + nextValue % this.totalFrames);\n\n            if (!this._completedLoop) {\n              this._completedLoop = true;\n            } else {\n              this.trigger('loopComplete');\n            }\n          } else {\n            _isComplete = true;\n            nextValue = 0;\n          }\n        }\n      } else {\n        this.setCurrentRawFrameValue(nextValue);\n      }\n\n      if (_isComplete) {\n        this.setCurrentRawFrameValue(nextValue);\n        this.pause();\n        this.trigger('complete');\n      }\n    };\n\n    AnimationItem.prototype.adjustSegment = function (arr, offset) {\n      this.playCount = 0;\n\n      if (arr[1] < arr[0]) {\n        if (this.frameModifier > 0) {\n          if (this.playSpeed < 0) {\n            this.setSpeed(-this.playSpeed);\n          } else {\n            this.setDirection(-1);\n          }\n        }\n\n        this.timeCompleted = this.totalFrames = arr[0] - arr[1];\n        this.firstFrame = arr[1];\n        this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\n      } else if (arr[1] > arr[0]) {\n        if (this.frameModifier < 0) {\n          if (this.playSpeed < 0) {\n            this.setSpeed(-this.playSpeed);\n          } else {\n            this.setDirection(1);\n          }\n        }\n\n        this.timeCompleted = this.totalFrames = arr[1] - arr[0];\n        this.firstFrame = arr[0];\n        this.setCurrentRawFrameValue(0.001 + offset);\n      }\n\n      this.trigger('segmentStart');\n    };\n\n    AnimationItem.prototype.setSegment = function (init, end) {\n      var pendingFrame = -1;\n\n      if (this.isPaused) {\n        if (this.currentRawFrame + this.firstFrame < init) {\n          pendingFrame = init;\n        } else if (this.currentRawFrame + this.firstFrame > end) {\n          pendingFrame = end - init;\n        }\n      }\n\n      this.firstFrame = init;\n      this.timeCompleted = this.totalFrames = end - init;\n\n      if (pendingFrame !== -1) {\n        this.goToAndStop(pendingFrame, true);\n      }\n    };\n\n    AnimationItem.prototype.playSegments = function (arr, forceFlag) {\n      if (forceFlag) {\n        this.segments.length = 0;\n      }\n\n      if (typeof arr[0] === 'object') {\n        var i,\n            len = arr.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.segments.push(arr[i]);\n        }\n      } else {\n        this.segments.push(arr);\n      }\n\n      if (this.segments.length && forceFlag) {\n        this.adjustSegment(this.segments.shift(), 0);\n      }\n\n      if (this.isPaused) {\n        this.play();\n      }\n    };\n\n    AnimationItem.prototype.resetSegments = function (forceFlag) {\n      this.segments.length = 0;\n      this.segments.push([this.animationData.ip, this.animationData.op]); //this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\n\n      if (forceFlag) {\n        this.checkSegments(0);\n      }\n    };\n\n    AnimationItem.prototype.checkSegments = function (offset) {\n      if (this.segments.length) {\n        this.adjustSegment(this.segments.shift(), offset);\n        return true;\n      }\n\n      return false;\n    };\n\n    AnimationItem.prototype.destroy = function (name) {\n      if (name && this.name != name || !this.renderer) {\n        return;\n      }\n\n      this.renderer.destroy();\n      this.imagePreloader.destroy();\n      this.trigger('destroy');\n      this._cbs = null;\n      this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null;\n      this.renderer = null;\n    };\n\n    AnimationItem.prototype.setCurrentRawFrameValue = function (value) {\n      this.currentRawFrame = value;\n      this.gotoFrame();\n    };\n\n    AnimationItem.prototype.setSpeed = function (val) {\n      this.playSpeed = val;\n      this.updaFrameModifier();\n    };\n\n    AnimationItem.prototype.setDirection = function (val) {\n      this.playDirection = val < 0 ? -1 : 1;\n      this.updaFrameModifier();\n    };\n\n    AnimationItem.prototype.updaFrameModifier = function () {\n      this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\n    };\n\n    AnimationItem.prototype.getPath = function () {\n      return this.path;\n    };\n\n    AnimationItem.prototype.getAssetsPath = function (assetData) {\n      var path = '';\n\n      if (assetData.e) {\n        path = assetData.p;\n      } else if (this.assetsPath) {\n        var imagePath = assetData.p;\n\n        if (imagePath.indexOf('images/') !== -1) {\n          imagePath = imagePath.split('/')[1];\n        }\n\n        path = this.assetsPath + imagePath;\n      } else {\n        path = this.path;\n        path += assetData.u ? assetData.u : '';\n        path += assetData.p;\n      }\n\n      return path;\n    };\n\n    AnimationItem.prototype.getAssetData = function (id) {\n      var i = 0,\n          len = this.assets.length;\n\n      while (i < len) {\n        if (id == this.assets[i].id) {\n          return this.assets[i];\n        }\n\n        i += 1;\n      }\n    };\n\n    AnimationItem.prototype.hide = function () {\n      this.renderer.hide();\n    };\n\n    AnimationItem.prototype.show = function () {\n      this.renderer.show();\n    };\n\n    AnimationItem.prototype.getDuration = function (isFrame) {\n      return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\n    };\n\n    AnimationItem.prototype.trigger = function (name) {\n      if (this._cbs && this._cbs[name]) {\n        switch (name) {\n          case 'enterFrame':\n            this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\n            break;\n\n          case 'loopComplete':\n            this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n            break;\n\n          case 'complete':\n            this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\n            break;\n\n          case 'segmentStart':\n            this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n            break;\n\n          case 'destroy':\n            this.triggerEvent(name, new BMDestroyEvent(name, this));\n            break;\n\n          default:\n            this.triggerEvent(name);\n        }\n      }\n\n      if (name === 'enterFrame' && this.onEnterFrame) {\n        this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\n      }\n\n      if (name === 'loopComplete' && this.onLoopComplete) {\n        this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n      }\n\n      if (name === 'complete' && this.onComplete) {\n        this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\n      }\n\n      if (name === 'segmentStart' && this.onSegmentStart) {\n        this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n      }\n\n      if (name === 'destroy' && this.onDestroy) {\n        this.onDestroy.call(this, new BMDestroyEvent(name, this));\n      }\n    };\n\n    var Expressions = function () {\n      var ob = {};\n      ob.initExpressions = initExpressions;\n\n      function initExpressions(animation) {\n        var stackCount = 0;\n        var registers = [];\n\n        function pushExpression() {\n          stackCount += 1;\n        }\n\n        function popExpression() {\n          stackCount -= 1;\n\n          if (stackCount === 0) {\n            releaseInstances();\n          }\n        }\n\n        function registerExpressionProperty(expression) {\n          if (registers.indexOf(expression) === -1) {\n            registers.push(expression);\n          }\n        }\n\n        function releaseInstances() {\n          var i,\n              len = registers.length;\n\n          for (i = 0; i < len; i += 1) {\n            registers[i].release();\n          }\n\n          registers.length = 0;\n        }\n\n        animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\n        animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\n        animation.renderer.globalData.pushExpression = pushExpression;\n        animation.renderer.globalData.popExpression = popExpression;\n        animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\n      }\n\n      return ob;\n    }();\n\n    expressionsPlugin = Expressions;\n\n    var ExpressionManager = function () {\n      var ob = {};\n      var Math = BMMath;\n      var easeInBez = BezierFactory.getBezierEasing(0.333, 0, .833, .833, 'easeIn').get;\n      var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, .667, 1, 'easeOut').get;\n      var easeInOutBez = BezierFactory.getBezierEasing(.33, 0, .667, 1, 'easeInOut').get;\n\n      function initiateExpression(elem, data, property) {\n        var val = data.x;\n        var needsVelocity = /velocity(?![\\w\\d])/.test(val);\n\n        var _needsRandom = val.indexOf('random') !== -1;\n\n        var elemType = elem.data.ty;\n        var transform, content, effect;\n        var thisProperty = property;\n        thisProperty.valueAtTime = thisProperty.getValueAtTime;\n        Object.defineProperty(thisProperty, 'value', {\n          get: function get() {\n            return thisProperty.v;\n          }\n        });\n        elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\n        elem.comp.displayStartTime = 0;\n        var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n        var outPoint = elem.data.op / elem.comp.globalData.frameRate;\n        var width = elem.data.sw ? elem.data.sw : 0;\n        var height = elem.data.sh ? elem.data.sh : 0;\n        var name = elem.data.nm;\n        var loopIn, loopOut, smooth;\n        var toWorld, fromWorld, fromComp, toComp, anchorPoint, thisLayer, thisComp, mask, valueAtTime, velocityAtTime;\n        var __expression_functions = [];\n\n        if (data.xf) {\n          var i,\n              len = data.xf.length;\n\n          for (i = 0; i < len; i += 1) {\n            __expression_functions[i] = eval('(function(){ return ' + data.xf[i] + '}())');\n          }\n        }\n\n        var scoped_bm_rt;\n        var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}' + ']')[0];\n        var numKeys = property.kf ? data.k.length : 0;\n        var active = !this.data || this.data.hd !== true;\n\n        var wiggle = function wiggle(freq, amp) {\n          var i,\n              j,\n              len = this.pv.length ? this.pv.length : 1;\n          var addedAmps = createTypedArray('float32', len);\n          freq = 5;\n          var iterations = Math.floor(time * freq);\n          i = 0;\n          j = 0;\n\n          while (i < iterations) {\n            //var rnd = BMMath.random();\n            for (j = 0; j < len; j += 1) {\n              addedAmps[j] += -amp + amp * 2 * BMMath.random(); //addedAmps[j] += -amp + amp*2*rnd;\n            }\n\n            i += 1;\n          } //var rnd2 = BMMath.random();\n\n\n          var periods = time * freq;\n          var perc = periods - Math.floor(periods);\n          var arr = createTypedArray('float32', len);\n\n          if (len > 1) {\n            for (j = 0; j < len; j += 1) {\n              arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc; //arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\n              //arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\n            }\n\n            return arr;\n          } else {\n            return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\n          }\n        }.bind(this);\n\n        if (thisProperty.loopIn) {\n          loopIn = thisProperty.loopIn.bind(thisProperty);\n        }\n\n        if (thisProperty.loopOut) {\n          loopOut = thisProperty.loopOut.bind(thisProperty);\n        }\n\n        if (thisProperty.smooth) {\n          smooth = thisProperty.smooth.bind(thisProperty);\n        }\n\n        if (this.getValueAtTime) {\n          valueAtTime = this.getValueAtTime.bind(this);\n        }\n\n        if (this.getVelocityAtTime) {\n          velocityAtTime = this.getVelocityAtTime.bind(this);\n        }\n\n        var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\n\n        function seedRandom(seed) {\n          BMMath.seedrandom(randSeed + seed);\n        }\n\n        var time, velocity, value, text, textIndex, textTotal, selectorValue;\n        var index = elem.data.ind;\n        var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n        var parent;\n        var randSeed = Math.floor(Math.random() * 1000000);\n        var globalData = elem.globalData;\n\n        function executeExpression(_value) {\n          // globalData.pushExpression();\n          value = _value;\n\n          if (_needsRandom) {\n            seedRandom(randSeed);\n          }\n\n          if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\n            return value;\n          }\n\n          if (this.propType === 'textSelector') {\n            textIndex = this.textIndex;\n            textTotal = this.textTotal;\n            selectorValue = this.selectorValue;\n          }\n\n          if (!thisLayer) {\n            text = elem.layerInterface.text;\n            thisLayer = elem.layerInterface;\n            thisComp = elem.comp.compInterface;\n            toWorld = thisLayer.toWorld.bind(thisLayer);\n            fromWorld = thisLayer.fromWorld.bind(thisLayer);\n            fromComp = thisLayer.fromComp.bind(thisLayer);\n            toComp = thisLayer.toComp.bind(thisLayer);\n            mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\n          }\n\n          if (!transform) {\n            transform = elem.layerInterface(\"ADBE Transform Group\");\n\n            if (transform) {\n              anchorPoint = transform.anchorPoint;\n              /*position = transform.position;\r\n              rotation = transform.rotation;\r\n              scale = transform.scale;*/\n            }\n          }\n\n          if (elemType === 4 && !content) {\n            content = thisLayer(\"ADBE Root Vectors Group\");\n          }\n\n          if (!effect) {\n            effect = thisLayer(4);\n          }\n\n          hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n\n          if (hasParent && !parent) {\n            parent = elem.hierarchy[0].layerInterface;\n          }\n\n          time = this.comp.renderedFrame / this.comp.globalData.frameRate;\n\n          if (needsVelocity) {\n            velocity = velocityAtTime(time);\n          }\n\n          expression_function();\n          this.frameExpressionId = elem.globalData.frameId; //TODO: Check if it's possible to return on ShapeInterface the .v value\n\n          if (scoped_bm_rt.propType === \"shape\") {\n            scoped_bm_rt = scoped_bm_rt.v;\n          } // globalData.popExpression();\n\n\n          return scoped_bm_rt;\n        }\n\n        return executeExpression;\n      }\n\n      ob.initiateExpression = initiateExpression;\n      return ob;\n    }();\n\n    var expressionHelpers = function () {\n      function searchExpressions(elem, data, prop) {\n        if (data.x) {\n          prop.k = true;\n          prop.x = true;\n          prop.initiateExpression = ExpressionManager.initiateExpression;\n          prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\n        }\n      }\n\n      function getValueAtTime(frameNum) {\n        frameNum *= this.elem.globalData.frameRate;\n        frameNum -= this.offsetTime;\n\n        if (frameNum !== this._cachingAtTime.lastFrame) {\n          this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\n          this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\n          this._cachingAtTime.lastFrame = frameNum;\n        }\n\n        return this._cachingAtTime.value;\n      }\n\n      function getSpeedAtTime(frameNum) {\n        var delta = -0.01;\n        var v1 = this.getValueAtTime(frameNum);\n        var v2 = this.getValueAtTime(frameNum + delta);\n        var speed = 0;\n\n        if (v1.length) {\n          var i;\n\n          for (i = 0; i < v1.length; i += 1) {\n            speed += Math.pow(v2[i] - v1[i], 2);\n          }\n\n          speed = Math.sqrt(speed) * 100;\n        } else {\n          speed = 0;\n        }\n\n        return speed;\n      }\n\n      function getVelocityAtTime(frameNum) {\n        if (this.vel !== undefined) {\n          return this.vel;\n        }\n\n        var delta = -0.001; //frameNum += this.elem.data.st;\n\n        var v1 = this.getValueAtTime(frameNum);\n        var v2 = this.getValueAtTime(frameNum + delta);\n        var velocity;\n\n        if (v1.length) {\n          velocity = createTypedArray('float32', v1.length);\n          var i;\n\n          for (i = 0; i < v1.length; i += 1) {\n            //removing frameRate\n            //if needed, don't add it here\n            //velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\n            velocity[i] = (v2[i] - v1[i]) / delta;\n          }\n        } else {\n          velocity = (v2 - v1) / delta;\n        }\n\n        return velocity;\n      }\n\n      function getStaticValueAtTime() {\n        return this.pv;\n      }\n\n      function setGroupProperty(propertyGroup) {\n        this.propertyGroup = propertyGroup;\n      }\n\n      return {\n        searchExpressions: searchExpressions,\n        getSpeedAtTime: getSpeedAtTime,\n        getVelocityAtTime: getVelocityAtTime,\n        getValueAtTime: getValueAtTime,\n        getStaticValueAtTime: getStaticValueAtTime,\n        setGroupProperty: setGroupProperty\n      };\n    }();\n\n    (function addPropertyDecorator() {\n      function loopOut(type, duration, durationFlag) {\n        if (!this.k || !this.keyframes) {\n          return this.pv;\n        }\n\n        type = type ? type.toLowerCase() : '';\n        var currentFrame = this.comp.renderedFrame;\n        var keyframes = this.keyframes;\n        var lastKeyFrame = keyframes[keyframes.length - 1].t;\n\n        if (currentFrame <= lastKeyFrame) {\n          return this.pv;\n        } else {\n          var cycleDuration, firstKeyFrame;\n\n          if (!durationFlag) {\n            if (!duration || duration > keyframes.length - 1) {\n              duration = keyframes.length - 1;\n            }\n\n            firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\n            cycleDuration = lastKeyFrame - firstKeyFrame;\n          } else {\n            if (!duration) {\n              cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\n            } else {\n              cycleDuration = Math.abs(lastKeyFrame - elem.comp.globalData.frameRate * duration);\n            }\n\n            firstKeyFrame = lastKeyFrame - cycleDuration;\n          }\n\n          var i, len, ret;\n\n          if (type === 'pingpong') {\n            var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n\n            if (iterations % 2 !== 0) {\n              return this.getValueAtTime((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n            }\n          } else if (type === 'offset') {\n            var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n            var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n            var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n            var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n\n            if (this.pv.length) {\n              ret = new Array(initV.length);\n              len = ret.length;\n\n              for (i = 0; i < len; i += 1) {\n                ret[i] = (endV[i] - initV[i]) * repeats + current[i];\n              }\n\n              return ret;\n            }\n\n            return (endV - initV) * repeats + current;\n          } else if (type === 'continue') {\n            var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n            var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\n\n            if (this.pv.length) {\n              ret = new Array(lastValue.length);\n              len = ret.length;\n\n              for (i = 0; i < len; i += 1) {\n                ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005;\n              }\n\n              return ret;\n            }\n\n            return lastValue + (lastValue - nextLastValue) * ((currentFrame - lastKeyFrame) / 0.001);\n          }\n\n          return this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n        }\n      }\n\n      function loopIn(type, duration, durationFlag) {\n        if (!this.k) {\n          return this.pv;\n        }\n\n        type = type ? type.toLowerCase() : '';\n        var currentFrame = this.comp.renderedFrame;\n        var keyframes = this.keyframes;\n        var firstKeyFrame = keyframes[0].t;\n\n        if (currentFrame >= firstKeyFrame) {\n          return this.pv;\n        } else {\n          var cycleDuration, lastKeyFrame;\n\n          if (!durationFlag) {\n            if (!duration || duration > keyframes.length - 1) {\n              duration = keyframes.length - 1;\n            }\n\n            lastKeyFrame = keyframes[duration].t;\n            cycleDuration = lastKeyFrame - firstKeyFrame;\n          } else {\n            if (!duration) {\n              cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\n            } else {\n              cycleDuration = Math.abs(elem.comp.globalData.frameRate * duration);\n            }\n\n            lastKeyFrame = firstKeyFrame + cycleDuration;\n          }\n\n          var i, len, ret;\n\n          if (type === 'pingpong') {\n            var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\n\n            if (iterations % 2 === 0) {\n              return this.getValueAtTime(((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n            }\n          } else if (type === 'offset') {\n            var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n            var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n            var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n            var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\n\n            if (this.pv.length) {\n              ret = new Array(initV.length);\n              len = ret.length;\n\n              for (i = 0; i < len; i += 1) {\n                ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\n              }\n\n              return ret;\n            }\n\n            return current - (endV - initV) * repeats;\n          } else if (type === 'continue') {\n            var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n            var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\n\n            if (this.pv.length) {\n              ret = new Array(firstValue.length);\n              len = ret.length;\n\n              for (i = 0; i < len; i += 1) {\n                ret[i] = firstValue[i] + (firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame) / 0.001;\n              }\n\n              return ret;\n            }\n\n            return firstValue + (firstValue - nextFirstValue) * (firstKeyFrame - currentFrame) / 0.001;\n          }\n\n          return this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n        }\n      }\n\n      function smooth(width, samples) {\n        if (!this.k) {\n          return this.pv;\n        }\n\n        width = (width || 0.4) * 0.5;\n        samples = Math.floor(samples || 5);\n\n        if (samples <= 1) {\n          return this.pv;\n        }\n\n        var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\n        var initFrame = currentTime - width;\n        var endFrame = currentTime + width;\n        var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\n        var i = 0,\n            j = 0;\n        var value;\n\n        if (this.pv.length) {\n          value = createTypedArray('float32', this.pv.length);\n        } else {\n          value = 0;\n        }\n\n        var sampleValue;\n\n        while (i < samples) {\n          sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\n\n          if (this.pv.length) {\n            for (j = 0; j < this.pv.length; j += 1) {\n              value[j] += sampleValue[j];\n            }\n          } else {\n            value += sampleValue;\n          }\n\n          i += 1;\n        }\n\n        if (this.pv.length) {\n          for (j = 0; j < this.pv.length; j += 1) {\n            value[j] /= samples;\n          }\n        } else {\n          value /= samples;\n        }\n\n        return value;\n      }\n\n      function getTransformValueAtTime(time) {\n        console.warn('Transform at time not supported');\n      }\n\n      function getTransformStaticValueAtTime(time) {}\n\n      var getTransformProperty = TransformPropertyFactory.getTransformProperty;\n\n      TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\n        var prop = getTransformProperty(elem, data, container);\n\n        if (prop.dynamicProperties.length) {\n          prop.getValueAtTime = getTransformValueAtTime.bind(prop);\n        } else {\n          prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\n        }\n\n        prop.setGroupProperty = expressionHelpers.setGroupProperty;\n        return prop;\n      };\n\n      var propertyGetProp = PropertyFactory.getProp;\n\n      PropertyFactory.getProp = function (elem, data, type, mult, container) {\n        var prop = propertyGetProp(elem, data, type, mult, container); //prop.getVelocityAtTime = getVelocityAtTime;\n        //prop.loopOut = loopOut;\n        //prop.loopIn = loopIn;\n\n        if (prop.kf) {\n          prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\n        } else {\n          prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\n        }\n\n        prop.setGroupProperty = expressionHelpers.setGroupProperty;\n        prop.loopOut = loopOut;\n        prop.loopIn = loopIn;\n        prop.smooth = smooth;\n        prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\n        prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\n        prop.numKeys = data.a === 1 ? data.k.length : 0;\n        prop.propertyIndex = data.ix;\n        var value = 0;\n\n        if (type !== 0) {\n          value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\n        }\n\n        prop._cachingAtTime = {\n          lastFrame: initialDefaultFrame,\n          lastIndex: 0,\n          value: value\n        };\n        expressionHelpers.searchExpressions(elem, data, prop);\n\n        if (prop.k) {\n          container.addDynamicProperty(prop);\n        }\n\n        return prop;\n      };\n\n      function getShapeValueAtTime(frameNum) {\n        //For now this caching object is created only when needed instead of creating it when the shape is initialized.\n        if (!this._cachingAtTime) {\n          this._cachingAtTime = {\n            shapeValue: shape_pool.clone(this.pv),\n            lastIndex: 0,\n            lastTime: initialDefaultFrame\n          };\n        }\n\n        frameNum *= this.elem.globalData.frameRate;\n        frameNum -= this.offsetTime;\n\n        if (frameNum !== this._cachingAtTime.lastTime) {\n          this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\n          this._cachingAtTime.lastTime = frameNum;\n          this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\n        }\n\n        return this._cachingAtTime.shapeValue;\n      }\n\n      var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\n      var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\n\n      function ShapeExpressions() {}\n\n      ShapeExpressions.prototype = {\n        vertices: function vertices(prop, time) {\n          if (this.k) {\n            this.getValue();\n          }\n\n          var shapePath = this.v;\n\n          if (time !== undefined) {\n            shapePath = this.getValueAtTime(time, 0);\n          }\n\n          var i,\n              len = shapePath._length;\n          var vertices = shapePath[prop];\n          var points = shapePath.v;\n          var arr = createSizedArray(len);\n\n          for (i = 0; i < len; i += 1) {\n            if (prop === 'i' || prop === 'o') {\n              arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\n            } else {\n              arr[i] = [vertices[i][0], vertices[i][1]];\n            }\n          }\n\n          return arr;\n        },\n        points: function points(time) {\n          return this.vertices('v', time);\n        },\n        inTangents: function inTangents(time) {\n          return this.vertices('i', time);\n        },\n        outTangents: function outTangents(time) {\n          return this.vertices('o', time);\n        },\n        isClosed: function isClosed() {\n          return this.v.c;\n        },\n        pointOnPath: function pointOnPath(perc, time) {\n          var shapePath = this.v;\n\n          if (time !== undefined) {\n            shapePath = this.getValueAtTime(time, 0);\n          }\n\n          if (!this._segmentsLength) {\n            this._segmentsLength = bez.getSegmentsLength(shapePath);\n          }\n\n          var segmentsLength = this._segmentsLength;\n          var lengths = segmentsLength.lengths;\n          var lengthPos = segmentsLength.totalLength * perc;\n          var i = 0,\n              len = lengths.length;\n          var accumulatedLength = 0,\n              pt;\n\n          while (i < len) {\n            if (accumulatedLength + lengths[i].addedLength > lengthPos) {\n              var initIndex = i;\n              var endIndex = shapePath.c && i === len - 1 ? 0 : i + 1;\n              var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\n              pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\n              break;\n            } else {\n              accumulatedLength += lengths[i].addedLength;\n            }\n\n            i += 1;\n          }\n\n          if (!pt) {\n            pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\n          }\n\n          return pt;\n        },\n        vectorOnPath: function vectorOnPath(perc, time, vectorType) {\n          //perc doesn't use triple equality because it can be a Number object as well as a primitive.\n          perc = perc == 1 ? this.v.c ? 0 : 0.999 : perc;\n          var pt1 = this.pointOnPath(perc, time);\n          var pt2 = this.pointOnPath(perc + 0.001, time);\n          var xLength = pt2[0] - pt1[0];\n          var yLength = pt2[1] - pt1[1];\n          var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\n\n          if (magnitude === 0) {\n            return [0, 0];\n          }\n\n          var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\n          return unitVector;\n        },\n        tangentOnPath: function tangentOnPath(perc, time) {\n          return this.vectorOnPath(perc, time, 'tangent');\n        },\n        normalOnPath: function normalOnPath(perc, time) {\n          return this.vectorOnPath(perc, time, 'normal');\n        },\n        setGroupProperty: expressionHelpers.setGroupProperty,\n        getValueAtTime: expressionHelpers.getStaticValueAtTime\n      };\n      extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\n      extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\n      KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\n      KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\n      var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\n\n      ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\n        var prop = propertyGetShapeProp(elem, data, type, arr, trims);\n        prop.propertyIndex = data.ix;\n        prop.lock = false;\n\n        if (type === 3) {\n          expressionHelpers.searchExpressions(elem, data.pt, prop);\n        } else if (type === 4) {\n          expressionHelpers.searchExpressions(elem, data.ks, prop);\n        }\n\n        if (prop.k) {\n          elem.addDynamicProperty(prop);\n        }\n\n        return prop;\n      };\n    })();\n\n    (function addDecorator() {\n      function searchExpressions() {\n        if (this.data.d.x) {\n          this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\n          this.addEffect(this.getExpressionValue.bind(this));\n          return true;\n        }\n      }\n\n      TextProperty.prototype.getExpressionValue = function (currentValue, text) {\n        var newValue = this.calculateExpression(text);\n\n        if (currentValue.t !== newValue) {\n          var newData = {};\n          this.copyData(newData, currentValue);\n          newData.t = newValue.toString();\n          newData.__complete = false;\n          return newData;\n        }\n\n        return currentValue;\n      };\n\n      TextProperty.prototype.searchProperty = function () {\n        var isKeyframed = this.searchKeyframes();\n        var hasExpressions = this.searchExpressions();\n        this.kf = isKeyframed || hasExpressions;\n        return this.kf;\n      };\n\n      TextProperty.prototype.searchExpressions = searchExpressions;\n    })();\n\n    var ShapeExpressionInterface = function () {\n      function iterateElements(shapes, view, propertyGroup) {\n        var arr = [];\n        var i,\n            len = shapes ? shapes.length : 0;\n\n        for (i = 0; i < len; i += 1) {\n          if (shapes[i].ty == 'gr') {\n            arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'fl') {\n            arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'st') {\n            arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'tm') {\n            arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'tr') ;else if (shapes[i].ty == 'el') {\n            arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'sr') {\n            arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'sh') {\n            arr.push(pathInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'rc') {\n            arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'rd') {\n            arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\n          } else if (shapes[i].ty == 'rp') {\n            arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\n          }\n        }\n\n        return arr;\n      }\n\n      function contentsInterfaceFactory(shape, view, propertyGroup) {\n        var interfaces;\n\n        var interfaceFunction = function _interfaceFunction(value) {\n          var i = 0,\n              len = interfaces.length;\n\n          while (i < len) {\n            if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\n              return interfaces[i];\n            }\n\n            i += 1;\n          }\n\n          if (typeof value === 'number') {\n            return interfaces[value - 1];\n          }\n        };\n\n        interfaceFunction.propertyGroup = function (val) {\n          if (val === 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(val - 1);\n          }\n        };\n\n        interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\n        interfaceFunction.numProperties = interfaces.length;\n        interfaceFunction.propertyIndex = shape.cix;\n        interfaceFunction._name = shape.nm;\n        return interfaceFunction;\n      }\n\n      function groupInterfaceFactory(shape, view, propertyGroup) {\n        var interfaceFunction = function _interfaceFunction(value) {\n          switch (value) {\n            case 'ADBE Vectors Group':\n            case 'Contents':\n            case 2:\n              return interfaceFunction.content;\n            //Not necessary for now. Keeping them here in case a new case appears\n            //case 'ADBE Vector Transform Group':\n            //case 3:\n\n            default:\n              return interfaceFunction.transform;\n          }\n        };\n\n        interfaceFunction.propertyGroup = function (val) {\n          if (val === 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(val - 1);\n          }\n        };\n\n        var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\n        var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n        interfaceFunction.content = content;\n        interfaceFunction.transform = transformInterface;\n        Object.defineProperty(interfaceFunction, '_name', {\n          get: function get() {\n            return shape.nm;\n          }\n        }); //interfaceFunction.content = interfaceFunction;\n\n        interfaceFunction.numProperties = shape.np;\n        interfaceFunction.propertyIndex = shape.ix;\n        interfaceFunction.nm = shape.nm;\n        interfaceFunction.mn = shape.mn;\n        return interfaceFunction;\n      }\n\n      function fillInterfaceFactory(shape, view, propertyGroup) {\n        function interfaceFunction(val) {\n          if (val === 'Color' || val === 'color') {\n            return interfaceFunction.color;\n          } else if (val === 'Opacity' || val === 'opacity') {\n            return interfaceFunction.opacity;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'color': {\n            get: ExpressionPropertyInterface(view.c)\n          },\n          'opacity': {\n            get: ExpressionPropertyInterface(view.o)\n          },\n          '_name': {\n            value: shape.nm\n          },\n          'mn': {\n            value: shape.mn\n          }\n        });\n        view.c.setGroupProperty(propertyGroup);\n        view.o.setGroupProperty(propertyGroup);\n        return interfaceFunction;\n      }\n\n      function strokeInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val === 1) {\n            return ob;\n          } else {\n            return propertyGroup(val - 1);\n          }\n        }\n\n        function _dashPropertyGroup(val) {\n          if (val === 1) {\n            return dashOb;\n          } else {\n            return _propertyGroup(val - 1);\n          }\n        }\n\n        function addPropertyToDashOb(i) {\n          Object.defineProperty(dashOb, shape.d[i].nm, {\n            get: ExpressionPropertyInterface(view.d.dataProps[i].p)\n          });\n        }\n\n        var i,\n            len = shape.d ? shape.d.length : 0;\n        var dashOb = {};\n\n        for (i = 0; i < len; i += 1) {\n          addPropertyToDashOb(i);\n          view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\n        }\n\n        function interfaceFunction(val) {\n          if (val === 'Color' || val === 'color') {\n            return interfaceFunction.color;\n          } else if (val === 'Opacity' || val === 'opacity') {\n            return interfaceFunction.opacity;\n          } else if (val === 'Stroke Width' || val === 'stroke width') {\n            return interfaceFunction.strokeWidth;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'color': {\n            get: ExpressionPropertyInterface(view.c)\n          },\n          'opacity': {\n            get: ExpressionPropertyInterface(view.o)\n          },\n          'strokeWidth': {\n            get: ExpressionPropertyInterface(view.w)\n          },\n          'dash': {\n            get: function get() {\n              return dashOb;\n            }\n          },\n          '_name': {\n            value: shape.nm\n          },\n          'mn': {\n            value: shape.mn\n          }\n        });\n        view.c.setGroupProperty(_propertyGroup);\n        view.o.setGroupProperty(_propertyGroup);\n        view.w.setGroupProperty(_propertyGroup);\n        return interfaceFunction;\n      }\n\n      function trimInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        interfaceFunction.propertyIndex = shape.ix;\n        view.s.setGroupProperty(_propertyGroup);\n        view.e.setGroupProperty(_propertyGroup);\n        view.o.setGroupProperty(_propertyGroup);\n\n        function interfaceFunction(val) {\n          if (val === shape.e.ix || val === 'End' || val === 'end') {\n            return interfaceFunction.end;\n          }\n\n          if (val === shape.s.ix) {\n            return interfaceFunction.start;\n          }\n\n          if (val === shape.o.ix) {\n            return interfaceFunction.offset;\n          }\n        }\n\n        interfaceFunction.propertyIndex = shape.ix;\n        interfaceFunction.propertyGroup = propertyGroup;\n        Object.defineProperties(interfaceFunction, {\n          'start': {\n            get: ExpressionPropertyInterface(view.s)\n          },\n          'end': {\n            get: ExpressionPropertyInterface(view.e)\n          },\n          'offset': {\n            get: ExpressionPropertyInterface(view.o)\n          },\n          '_name': {\n            value: shape.nm\n          }\n        });\n        interfaceFunction.mn = shape.mn;\n        return interfaceFunction;\n      }\n\n      function transformInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        view.transform.mProps.o.setGroupProperty(_propertyGroup);\n        view.transform.mProps.p.setGroupProperty(_propertyGroup);\n        view.transform.mProps.a.setGroupProperty(_propertyGroup);\n        view.transform.mProps.s.setGroupProperty(_propertyGroup);\n        view.transform.mProps.r.setGroupProperty(_propertyGroup);\n\n        if (view.transform.mProps.sk) {\n          view.transform.mProps.sk.setGroupProperty(_propertyGroup);\n          view.transform.mProps.sa.setGroupProperty(_propertyGroup);\n        }\n\n        view.transform.op.setGroupProperty(_propertyGroup);\n\n        function interfaceFunction(value) {\n          if (shape.a.ix === value || value === 'Anchor Point') {\n            return interfaceFunction.anchorPoint;\n          }\n\n          if (shape.o.ix === value || value === 'Opacity') {\n            return interfaceFunction.opacity;\n          }\n\n          if (shape.p.ix === value || value === 'Position') {\n            return interfaceFunction.position;\n          }\n\n          if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\n            return interfaceFunction.rotation;\n          }\n\n          if (shape.s.ix === value || value === 'Scale') {\n            return interfaceFunction.scale;\n          }\n\n          if (shape.sk && shape.sk.ix === value || value === 'Skew') {\n            return interfaceFunction.skew;\n          }\n\n          if (shape.sa && shape.sa.ix === value || value === 'Skew Axis') {\n            return interfaceFunction.skewAxis;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'opacity': {\n            get: ExpressionPropertyInterface(view.transform.mProps.o)\n          },\n          'position': {\n            get: ExpressionPropertyInterface(view.transform.mProps.p)\n          },\n          'anchorPoint': {\n            get: ExpressionPropertyInterface(view.transform.mProps.a)\n          },\n          'scale': {\n            get: ExpressionPropertyInterface(view.transform.mProps.s)\n          },\n          'rotation': {\n            get: ExpressionPropertyInterface(view.transform.mProps.r)\n          },\n          'skew': {\n            get: ExpressionPropertyInterface(view.transform.mProps.sk)\n          },\n          'skewAxis': {\n            get: ExpressionPropertyInterface(view.transform.mProps.sa)\n          },\n          '_name': {\n            value: shape.nm\n          }\n        });\n        interfaceFunction.ty = 'tr';\n        interfaceFunction.mn = shape.mn;\n        interfaceFunction.propertyGroup = propertyGroup;\n        return interfaceFunction;\n      }\n\n      function ellipseInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        interfaceFunction.propertyIndex = shape.ix;\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n        prop.s.setGroupProperty(_propertyGroup);\n        prop.p.setGroupProperty(_propertyGroup);\n\n        function interfaceFunction(value) {\n          if (shape.p.ix === value) {\n            return interfaceFunction.position;\n          }\n\n          if (shape.s.ix === value) {\n            return interfaceFunction.size;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'size': {\n            get: ExpressionPropertyInterface(prop.s)\n          },\n          'position': {\n            get: ExpressionPropertyInterface(prop.p)\n          },\n          '_name': {\n            value: shape.nm\n          }\n        });\n        interfaceFunction.mn = shape.mn;\n        return interfaceFunction;\n      }\n\n      function starInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n        interfaceFunction.propertyIndex = shape.ix;\n        prop.or.setGroupProperty(_propertyGroup);\n        prop.os.setGroupProperty(_propertyGroup);\n        prop.pt.setGroupProperty(_propertyGroup);\n        prop.p.setGroupProperty(_propertyGroup);\n        prop.r.setGroupProperty(_propertyGroup);\n\n        if (shape.ir) {\n          prop.ir.setGroupProperty(_propertyGroup);\n          prop.is.setGroupProperty(_propertyGroup);\n        }\n\n        function interfaceFunction(value) {\n          if (shape.p.ix === value) {\n            return interfaceFunction.position;\n          }\n\n          if (shape.r.ix === value) {\n            return interfaceFunction.rotation;\n          }\n\n          if (shape.pt.ix === value) {\n            return interfaceFunction.points;\n          }\n\n          if (shape.or.ix === value || 'ADBE Vector Star Outer Radius' === value) {\n            return interfaceFunction.outerRadius;\n          }\n\n          if (shape.os.ix === value) {\n            return interfaceFunction.outerRoundness;\n          }\n\n          if (shape.ir && (shape.ir.ix === value || 'ADBE Vector Star Inner Radius' === value)) {\n            return interfaceFunction.innerRadius;\n          }\n\n          if (shape.is && shape.is.ix === value) {\n            return interfaceFunction.innerRoundness;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'position': {\n            get: ExpressionPropertyInterface(prop.p)\n          },\n          'rotation': {\n            get: ExpressionPropertyInterface(prop.r)\n          },\n          'points': {\n            get: ExpressionPropertyInterface(prop.pt)\n          },\n          'outerRadius': {\n            get: ExpressionPropertyInterface(prop.or)\n          },\n          'outerRoundness': {\n            get: ExpressionPropertyInterface(prop.os)\n          },\n          'innerRadius': {\n            get: ExpressionPropertyInterface(prop.ir)\n          },\n          'innerRoundness': {\n            get: ExpressionPropertyInterface(prop.is)\n          },\n          '_name': {\n            value: shape.nm\n          }\n        });\n        interfaceFunction.mn = shape.mn;\n        return interfaceFunction;\n      }\n\n      function rectInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n        interfaceFunction.propertyIndex = shape.ix;\n        prop.p.setGroupProperty(_propertyGroup);\n        prop.s.setGroupProperty(_propertyGroup);\n        prop.r.setGroupProperty(_propertyGroup);\n\n        function interfaceFunction(value) {\n          if (shape.p.ix === value) {\n            return interfaceFunction.position;\n          }\n\n          if (shape.r.ix === value) {\n            return interfaceFunction.roundness;\n          }\n\n          if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\n            return interfaceFunction.size;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'position': {\n            get: ExpressionPropertyInterface(prop.p)\n          },\n          'roundness': {\n            get: ExpressionPropertyInterface(prop.r)\n          },\n          'size': {\n            get: ExpressionPropertyInterface(prop.s)\n          },\n          '_name': {\n            value: shape.nm\n          }\n        });\n        interfaceFunction.mn = shape.mn;\n        return interfaceFunction;\n      }\n\n      function roundedInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        var prop = view;\n        interfaceFunction.propertyIndex = shape.ix;\n        prop.rd.setGroupProperty(_propertyGroup);\n\n        function interfaceFunction(value) {\n          if (shape.r.ix === value || 'Round Corners 1' === value) {\n            return interfaceFunction.radius;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'radius': {\n            get: ExpressionPropertyInterface(prop.rd)\n          },\n          '_name': {\n            value: shape.nm\n          }\n        });\n        interfaceFunction.mn = shape.mn;\n        return interfaceFunction;\n      }\n\n      function repeaterInterfaceFactory(shape, view, propertyGroup) {\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        var prop = view;\n        interfaceFunction.propertyIndex = shape.ix;\n        prop.c.setGroupProperty(_propertyGroup);\n        prop.o.setGroupProperty(_propertyGroup);\n\n        function interfaceFunction(value) {\n          if (shape.c.ix === value || 'Copies' === value) {\n            return interfaceFunction.copies;\n          } else if (shape.o.ix === value || 'Offset' === value) {\n            return interfaceFunction.offset;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'copies': {\n            get: ExpressionPropertyInterface(prop.c)\n          },\n          'offset': {\n            get: ExpressionPropertyInterface(prop.o)\n          },\n          '_name': {\n            value: shape.nm\n          }\n        });\n        interfaceFunction.mn = shape.mn;\n        return interfaceFunction;\n      }\n\n      function pathInterfaceFactory(shape, view, propertyGroup) {\n        var prop = view.sh;\n\n        function _propertyGroup(val) {\n          if (val == 1) {\n            return interfaceFunction;\n          } else {\n            return propertyGroup(--val);\n          }\n        }\n\n        prop.setGroupProperty(_propertyGroup);\n\n        function interfaceFunction(val) {\n          if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\n            return interfaceFunction.path;\n          }\n        }\n\n        Object.defineProperties(interfaceFunction, {\n          'path': {\n            get: function get() {\n              if (prop.k) {\n                prop.getValue();\n              }\n\n              return prop;\n            }\n          },\n          'shape': {\n            get: function get() {\n              if (prop.k) {\n                prop.getValue();\n              }\n\n              return prop;\n            }\n          },\n          '_name': {\n            value: shape.nm\n          },\n          'ix': {\n            value: shape.ix\n          },\n          'propertyIndex': {\n            value: shape.ix\n          },\n          'mn': {\n            value: shape.mn\n          }\n        });\n        return interfaceFunction;\n      }\n\n      return function (shapes, view, propertyGroup) {\n        var interfaces;\n\n        function _interfaceFunction(value) {\n          if (typeof value === 'number') {\n            return interfaces[value - 1];\n          } else {\n            var i = 0,\n                len = interfaces.length;\n\n            while (i < len) {\n              if (interfaces[i]._name === value) {\n                return interfaces[i];\n              }\n\n              i += 1;\n            }\n          }\n        }\n\n        _interfaceFunction.propertyGroup = propertyGroup;\n        interfaces = iterateElements(shapes, view, _interfaceFunction);\n        _interfaceFunction.numProperties = interfaces.length;\n        return _interfaceFunction;\n      };\n    }();\n\n    var TextExpressionInterface = function () {\n      return function (elem) {\n        var _prevValue, _sourceText;\n\n        function _thisLayerFunction() {}\n\n        Object.defineProperty(_thisLayerFunction, \"sourceText\", {\n          get: function get() {\n            elem.textProperty.getValue();\n            var stringValue = elem.textProperty.currentData.t;\n\n            if (stringValue !== _prevValue) {\n              elem.textProperty.currentData.t = _prevValue;\n              _sourceText = new String(stringValue); //If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\n\n              _sourceText.value = stringValue ? stringValue : new String(stringValue);\n            }\n\n            return _sourceText;\n          }\n        });\n        return _thisLayerFunction;\n      };\n    }();\n\n    var LayerExpressionInterface = function () {\n      function toWorld(arr, time) {\n        var toWorldMat = new Matrix();\n        toWorldMat.reset();\n        var transformMat;\n\n        if (time) {\n          //Todo implement value at time on transform properties\n          //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\n          transformMat = this._elem.finalTransform.mProp;\n        } else {\n          transformMat = this._elem.finalTransform.mProp;\n        }\n\n        transformMat.applyToMatrix(toWorldMat);\n\n        if (this._elem.hierarchy && this._elem.hierarchy.length) {\n          var i,\n              len = this._elem.hierarchy.length;\n\n          for (i = 0; i < len; i += 1) {\n            this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\n          }\n\n          return toWorldMat.applyToPointArray(arr[0], arr[1], arr[2] || 0);\n        }\n\n        return toWorldMat.applyToPointArray(arr[0], arr[1], arr[2] || 0);\n      }\n\n      function fromWorld(arr, time) {\n        var toWorldMat = new Matrix();\n        toWorldMat.reset();\n        var transformMat;\n\n        if (time) {\n          //Todo implement value at time on transform properties\n          //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\n          transformMat = this._elem.finalTransform.mProp;\n        } else {\n          transformMat = this._elem.finalTransform.mProp;\n        }\n\n        transformMat.applyToMatrix(toWorldMat);\n\n        if (this._elem.hierarchy && this._elem.hierarchy.length) {\n          var i,\n              len = this._elem.hierarchy.length;\n\n          for (i = 0; i < len; i += 1) {\n            this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\n          }\n\n          return toWorldMat.inversePoint(arr);\n        }\n\n        return toWorldMat.inversePoint(arr);\n      }\n\n      function fromComp(arr) {\n        var toWorldMat = new Matrix();\n        toWorldMat.reset();\n\n        this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\n\n        if (this._elem.hierarchy && this._elem.hierarchy.length) {\n          var i,\n              len = this._elem.hierarchy.length;\n\n          for (i = 0; i < len; i += 1) {\n            this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\n          }\n\n          return toWorldMat.inversePoint(arr);\n        }\n\n        return toWorldMat.inversePoint(arr);\n      }\n\n      function sampleImage() {\n        return [1, 1, 1, 1];\n      }\n\n      return function (elem) {\n        var transformInterface;\n\n        function _registerMaskInterface(maskManager) {\n          _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\n        }\n\n        function _registerEffectsInterface(effects) {\n          _thisLayerFunction.effect = effects;\n        }\n\n        function _thisLayerFunction(name) {\n          switch (name) {\n            case \"ADBE Root Vectors Group\":\n            case \"Contents\":\n            case 2:\n              return _thisLayerFunction.shapeInterface;\n\n            case 1:\n            case 6:\n            case \"Transform\":\n            case \"transform\":\n            case \"ADBE Transform Group\":\n              return transformInterface;\n\n            case 4:\n            case \"ADBE Effect Parade\":\n            case \"effects\":\n            case \"Effects\":\n              return _thisLayerFunction.effect;\n          }\n        }\n\n        _thisLayerFunction.toWorld = toWorld;\n        _thisLayerFunction.fromWorld = fromWorld;\n        _thisLayerFunction.toComp = toWorld;\n        _thisLayerFunction.fromComp = fromComp;\n        _thisLayerFunction.sampleImage = sampleImage;\n        _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\n        _thisLayerFunction._elem = elem;\n        transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\n        var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\n        Object.defineProperties(_thisLayerFunction, {\n          hasParent: {\n            get: function get() {\n              return elem.hierarchy.length;\n            }\n          },\n          parent: {\n            get: function get() {\n              return elem.hierarchy[0].layerInterface;\n            }\n          },\n          rotation: getDescriptor(transformInterface, 'rotation'),\n          scale: getDescriptor(transformInterface, 'scale'),\n          position: getDescriptor(transformInterface, 'position'),\n          opacity: getDescriptor(transformInterface, 'opacity'),\n          anchorPoint: anchorPointDescriptor,\n          anchor_point: anchorPointDescriptor,\n          transform: {\n            get: function get() {\n              return transformInterface;\n            }\n          },\n          active: {\n            get: function get() {\n              return elem.isInRange;\n            }\n          }\n        });\n        _thisLayerFunction.startTime = elem.data.st;\n        _thisLayerFunction.index = elem.data.ind;\n        _thisLayerFunction.source = elem.data.refId;\n        _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\n        _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\n        _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n        _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\n        _thisLayerFunction._name = elem.data.nm;\n        _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\n        _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\n        return _thisLayerFunction;\n      };\n    }();\n\n    var CompExpressionInterface = function () {\n      return function (comp) {\n        function _thisLayerFunction(name) {\n          var i = 0,\n              len = comp.layers.length;\n\n          while (i < len) {\n            if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\n              return comp.elements[i].layerInterface;\n            }\n\n            i += 1;\n          }\n\n          return null; //return {active:false};\n        }\n\n        Object.defineProperty(_thisLayerFunction, \"_name\", {\n          value: comp.data.nm\n        });\n        _thisLayerFunction.layer = _thisLayerFunction;\n        _thisLayerFunction.pixelAspect = 1;\n        _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\n        _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\n        _thisLayerFunction.pixelAspect = 1;\n        _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\n        _thisLayerFunction.displayStartTime = 0;\n        _thisLayerFunction.numLayers = comp.layers.length;\n        return _thisLayerFunction;\n      };\n    }();\n\n    var TransformExpressionInterface = function () {\n      return function (transform) {\n        function _thisFunction(name) {\n          switch (name) {\n            case \"scale\":\n            case \"Scale\":\n            case \"ADBE Scale\":\n            case 6:\n              return _thisFunction.scale;\n\n            case \"rotation\":\n            case \"Rotation\":\n            case \"ADBE Rotation\":\n            case \"ADBE Rotate Z\":\n            case 10:\n              return _thisFunction.rotation;\n\n            case \"ADBE Rotate X\":\n              return _thisFunction.xRotation;\n\n            case \"ADBE Rotate Y\":\n              return _thisFunction.yRotation;\n\n            case \"position\":\n            case \"Position\":\n            case \"ADBE Position\":\n            case 2:\n              return _thisFunction.position;\n\n            case 'ADBE Position_0':\n              return _thisFunction.xPosition;\n\n            case 'ADBE Position_1':\n              return _thisFunction.yPosition;\n\n            case 'ADBE Position_2':\n              return _thisFunction.zPosition;\n\n            case \"anchorPoint\":\n            case \"AnchorPoint\":\n            case \"Anchor Point\":\n            case \"ADBE AnchorPoint\":\n            case 1:\n              return _thisFunction.anchorPoint;\n\n            case \"opacity\":\n            case \"Opacity\":\n            case 11:\n              return _thisFunction.opacity;\n          }\n        }\n\n        Object.defineProperty(_thisFunction, \"rotation\", {\n          get: ExpressionPropertyInterface(transform.r || transform.rz)\n        });\n        Object.defineProperty(_thisFunction, \"zRotation\", {\n          get: ExpressionPropertyInterface(transform.rz || transform.r)\n        });\n        Object.defineProperty(_thisFunction, \"xRotation\", {\n          get: ExpressionPropertyInterface(transform.rx)\n        });\n        Object.defineProperty(_thisFunction, \"yRotation\", {\n          get: ExpressionPropertyInterface(transform.ry)\n        });\n        Object.defineProperty(_thisFunction, \"scale\", {\n          get: ExpressionPropertyInterface(transform.s)\n        });\n\n        if (transform.p) {\n          var _transformFactory = ExpressionPropertyInterface(transform.p);\n        }\n\n        Object.defineProperty(_thisFunction, \"position\", {\n          get: function get() {\n            if (transform.p) {\n              return _transformFactory();\n            } else {\n              return [transform.px.v, transform.py.v, transform.pz ? transform.pz.v : 0];\n            }\n          }\n        });\n        Object.defineProperty(_thisFunction, \"xPosition\", {\n          get: ExpressionPropertyInterface(transform.px)\n        });\n        Object.defineProperty(_thisFunction, \"yPosition\", {\n          get: ExpressionPropertyInterface(transform.py)\n        });\n        Object.defineProperty(_thisFunction, \"zPosition\", {\n          get: ExpressionPropertyInterface(transform.pz)\n        });\n        Object.defineProperty(_thisFunction, \"anchorPoint\", {\n          get: ExpressionPropertyInterface(transform.a)\n        });\n        Object.defineProperty(_thisFunction, \"opacity\", {\n          get: ExpressionPropertyInterface(transform.o)\n        });\n        Object.defineProperty(_thisFunction, \"skew\", {\n          get: ExpressionPropertyInterface(transform.sk)\n        });\n        Object.defineProperty(_thisFunction, \"skewAxis\", {\n          get: ExpressionPropertyInterface(transform.sa)\n        });\n        Object.defineProperty(_thisFunction, \"orientation\", {\n          get: ExpressionPropertyInterface(transform.or)\n        });\n        return _thisFunction;\n      };\n    }();\n\n    var ProjectInterface = function () {\n      function registerComposition(comp) {\n        this.compositions.push(comp);\n      }\n\n      return function () {\n        function _thisProjectFunction(name) {\n          var i = 0,\n              len = this.compositions.length;\n\n          while (i < len) {\n            if (this.compositions[i].data && this.compositions[i].data.nm === name) {\n              if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\n                this.compositions[i].prepareFrame(this.currentFrame);\n              }\n\n              return this.compositions[i].compInterface;\n            }\n\n            i += 1;\n          }\n        }\n\n        _thisProjectFunction.compositions = [];\n        _thisProjectFunction.currentFrame = 0;\n        _thisProjectFunction.registerComposition = registerComposition;\n        return _thisProjectFunction;\n      };\n    }();\n\n    var EffectsExpressionInterface = function () {\n      var ob = {\n        createEffectsInterface: createEffectsInterface\n      };\n\n      function createEffectsInterface(elem, propertyGroup) {\n        if (elem.effectsManager) {\n          var effectElements = [];\n          var effectsData = elem.data.ef;\n          var i,\n              len = elem.effectsManager.effectElements.length;\n\n          for (i = 0; i < len; i += 1) {\n            effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\n          }\n\n          return function (name) {\n            var effects = elem.data.ef || [],\n                i = 0,\n                len = effects.length;\n\n            while (i < len) {\n              if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n                return effectElements[i];\n              }\n\n              i += 1;\n            }\n          };\n        }\n      }\n\n      function createGroupInterface(data, elements, propertyGroup, elem) {\n        var effectElements = [];\n        var i,\n            len = data.ef.length;\n\n        for (i = 0; i < len; i += 1) {\n          if (data.ef[i].ty === 5) {\n            effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\n          } else {\n            effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\n          }\n        }\n\n        function _propertyGroup(val) {\n          if (val === 1) {\n            return groupInterface;\n          } else {\n            return propertyGroup(val - 1);\n          }\n        }\n\n        var groupInterface = function groupInterface(name) {\n          var effects = data.ef,\n              i = 0,\n              len = effects.length;\n\n          while (i < len) {\n            if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n              if (effects[i].ty === 5) {\n                return effectElements[i];\n              } else {\n                return effectElements[i]();\n              }\n            }\n\n            i += 1;\n          }\n\n          return effectElements[0]();\n        };\n\n        groupInterface.propertyGroup = _propertyGroup;\n\n        if (data.mn === 'ADBE Color Control') {\n          Object.defineProperty(groupInterface, 'color', {\n            get: function get() {\n              return effectElements[0]();\n            }\n          });\n        }\n\n        Object.defineProperty(groupInterface, 'numProperties', {\n          get: function get() {\n            return data.np;\n          }\n        });\n        groupInterface.active = groupInterface.enabled = data.en !== 0;\n        return groupInterface;\n      }\n\n      function createValueInterface(element, type, elem, propertyGroup) {\n        var expressionProperty = ExpressionPropertyInterface(element.p);\n\n        function interfaceFunction() {\n          if (type === 10) {\n            return elem.comp.compInterface(element.p.v);\n          }\n\n          return expressionProperty();\n        }\n\n        if (element.p.setGroupProperty) {\n          element.p.setGroupProperty(propertyGroup);\n        }\n\n        return interfaceFunction;\n      }\n\n      return ob;\n    }();\n\n    var MaskManagerInterface = function () {\n      function MaskInterface(mask, data) {\n        this._mask = mask;\n        this._data = data;\n      }\n\n      Object.defineProperty(MaskInterface.prototype, 'maskPath', {\n        get: function get() {\n          if (this._mask.prop.k) {\n            this._mask.prop.getValue();\n          }\n\n          return this._mask.prop;\n        }\n      });\n      Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\n        get: function get() {\n          if (this._mask.op.k) {\n            this._mask.op.getValue();\n          }\n\n          return this._mask.op.v * 100;\n        }\n      });\n\n      var MaskManager = function MaskManager(maskManager, elem) {\n        var _masksInterfaces = createSizedArray(maskManager.viewData.length);\n\n        var i,\n            len = maskManager.viewData.length;\n\n        for (i = 0; i < len; i += 1) {\n          _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\n        }\n\n        var maskFunction = function maskFunction(name) {\n          i = 0;\n\n          while (i < len) {\n            if (maskManager.masksProperties[i].nm === name) {\n              return _masksInterfaces[i];\n            }\n\n            i += 1;\n          }\n        };\n\n        return maskFunction;\n      };\n\n      return MaskManager;\n    }();\n\n    var ExpressionPropertyInterface = function () {\n      var defaultUnidimensionalValue = {\n        pv: 0,\n        v: 0,\n        mult: 1\n      };\n      var defaultMultidimensionalValue = {\n        pv: [0, 0, 0],\n        v: [0, 0, 0],\n        mult: 1\n      };\n\n      function completeProperty(expressionValue, property, type) {\n        Object.defineProperty(expressionValue, 'velocity', {\n          get: function get() {\n            return property.getVelocityAtTime(property.comp.currentFrame);\n          }\n        });\n        expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\n\n        expressionValue.key = function (pos) {\n          if (!expressionValue.numKeys) {\n            return 0;\n          } else {\n            var value = '';\n\n            if ('s' in property.keyframes[pos - 1]) {\n              value = property.keyframes[pos - 1].s;\n            } else if ('e' in property.keyframes[pos - 2]) {\n              value = property.keyframes[pos - 2].e;\n            } else {\n              value = property.keyframes[pos - 2].s;\n            }\n\n            var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value);\n            valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\n            return valueProp;\n          }\n        };\n\n        expressionValue.valueAtTime = property.getValueAtTime;\n        expressionValue.speedAtTime = property.getSpeedAtTime;\n        expressionValue.velocityAtTime = property.getVelocityAtTime;\n        expressionValue.propertyGroup = property.propertyGroup;\n      }\n\n      function UnidimensionalPropertyInterface(property) {\n        if (!property || !('pv' in property)) {\n          property = defaultUnidimensionalValue;\n        }\n\n        var mult = 1 / property.mult;\n        var val = property.pv * mult;\n        var expressionValue = new Number(val);\n        expressionValue.value = val;\n        completeProperty(expressionValue, property, 'unidimensional');\n        return function () {\n          if (property.k) {\n            property.getValue();\n          }\n\n          val = property.v * mult;\n\n          if (expressionValue.value !== val) {\n            expressionValue = new Number(val);\n            expressionValue.value = val;\n            completeProperty(expressionValue, property, 'unidimensional');\n          }\n\n          return expressionValue;\n        };\n      }\n\n      function MultidimensionalPropertyInterface(property) {\n        if (!property || !('pv' in property)) {\n          property = defaultMultidimensionalValue;\n        }\n\n        var mult = 1 / property.mult;\n        var len = property.pv.length;\n        var expressionValue = createTypedArray('float32', len);\n        var arrValue = createTypedArray('float32', len);\n        expressionValue.value = arrValue;\n        completeProperty(expressionValue, property, 'multidimensional');\n        return function () {\n          if (property.k) {\n            property.getValue();\n          }\n\n          for (var i = 0; i < len; i += 1) {\n            expressionValue[i] = arrValue[i] = property.v[i] * mult;\n          }\n\n          return expressionValue;\n        };\n      } //TODO: try to avoid using this getter\n\n\n      function defaultGetter() {\n        return defaultUnidimensionalValue;\n      }\n\n      return function (property) {\n        if (!property) {\n          return defaultGetter;\n        } else if (property.propType === 'unidimensional') {\n          return UnidimensionalPropertyInterface(property);\n        } else {\n          return MultidimensionalPropertyInterface(property);\n        }\n      };\n    }();\n\n    (function () {\n      var TextExpressionSelectorProp = function () {\n        function getValueProxy(index, total) {\n          this.textIndex = index + 1;\n          this.textTotal = total;\n          this.v = this.getValue() * this.mult;\n          return this.v;\n        }\n\n        return function TextExpressionSelectorProp(elem, data) {\n          this.pv = 1;\n          this.comp = elem.comp;\n          this.elem = elem;\n          this.mult = 0.01;\n          this.propType = 'textSelector';\n          this.textTotal = data.totalChars;\n          this.selectorValue = 100;\n          this.lastValue = [1, 1, 1];\n          this.k = true;\n          this.x = true;\n          this.getValue = ExpressionManager.initiateExpression.bind(this)(elem, data, this);\n          this.getMult = getValueProxy;\n          this.getVelocityAtTime = expressionHelpers.getVelocityAtTime;\n\n          if (this.kf) {\n            this.getValueAtTime = expressionHelpers.getValueAtTime.bind(this);\n          } else {\n            this.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(this);\n          }\n\n          this.setGroupProperty = expressionHelpers.setGroupProperty;\n        };\n      }();\n\n      var propertyGetTextProp = TextSelectorProp.getTextSelectorProp;\n\n      TextSelectorProp.getTextSelectorProp = function (elem, data, arr) {\n        if (data.t === 1) {\n          return new TextExpressionSelectorProp(elem, data, arr);\n        } else {\n          return propertyGetTextProp(elem, data, arr);\n        }\n      };\n    })();\n\n    function SliderEffect(data, elem, container) {\n      this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n    }\n\n    function AngleEffect(data, elem, container) {\n      this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n    }\n\n    function ColorEffect(data, elem, container) {\n      this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n    }\n\n    function PointEffect(data, elem, container) {\n      this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n    }\n\n    function LayerIndexEffect(data, elem, container) {\n      this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n    }\n\n    function MaskIndexEffect(data, elem, container) {\n      this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n    }\n\n    function CheckboxEffect(data, elem, container) {\n      this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n    }\n\n    function NoValueEffect() {\n      this.p = {};\n    }\n\n    function EffectsManager() {}\n\n    function EffectsManager(data, element) {\n      var effects = data.ef || [];\n      this.effectElements = [];\n      var i,\n          len = effects.length;\n      var effectItem;\n\n      for (i = 0; i < len; i++) {\n        effectItem = new GroupEffect(effects[i], element);\n        this.effectElements.push(effectItem);\n      }\n    }\n\n    function GroupEffect(data, element) {\n      this.init(data, element);\n    }\n\n    extendPrototype([DynamicPropertyContainer], GroupEffect);\n    GroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\n\n    GroupEffect.prototype.init = function (data, element) {\n      this.data = data;\n      this.effectElements = [];\n      this.initDynamicPropertyContainer(element);\n      var i,\n          len = this.data.ef.length;\n      var eff,\n          effects = this.data.ef;\n\n      for (i = 0; i < len; i += 1) {\n        eff = null;\n\n        switch (effects[i].ty) {\n          case 0:\n            eff = new SliderEffect(effects[i], element, this);\n            break;\n\n          case 1:\n            eff = new AngleEffect(effects[i], element, this);\n            break;\n\n          case 2:\n            eff = new ColorEffect(effects[i], element, this);\n            break;\n\n          case 3:\n            eff = new PointEffect(effects[i], element, this);\n            break;\n\n          case 4:\n          case 7:\n            eff = new CheckboxEffect(effects[i], element, this);\n            break;\n\n          case 10:\n            eff = new LayerIndexEffect(effects[i], element, this);\n            break;\n\n          case 11:\n            eff = new MaskIndexEffect(effects[i], element, this);\n            break;\n\n          case 5:\n            eff = new EffectsManager(effects[i], element, this);\n            break;\n          //case 6:\n\n          default:\n            eff = new NoValueEffect(effects[i], element, this);\n            break;\n        }\n\n        if (eff) {\n          this.effectElements.push(eff);\n        }\n      }\n    };\n\n    var lottiejs = {};\n\n    function setLocationHref(href) {\n      locationHref = href;\n    }\n\n    function searchAnimations() {\n      {\n        animationManager.searchAnimations();\n      }\n    }\n\n    function setSubframeRendering(flag) {\n      subframeEnabled = flag;\n    }\n\n    function loadAnimation(params) {\n      return animationManager.loadAnimation(params);\n    }\n\n    function setQuality(value) {\n      if (typeof value === 'string') {\n        switch (value) {\n          case 'high':\n            defaultCurveSegments = 200;\n            break;\n\n          case 'medium':\n            defaultCurveSegments = 50;\n            break;\n\n          case 'low':\n            defaultCurveSegments = 10;\n            break;\n        }\n      } else if (!isNaN(value) && value > 1) {\n        defaultCurveSegments = value;\n      }\n    }\n\n    function inBrowser() {\n      return typeof navigator !== 'undefined';\n    }\n\n    function installPlugin(type, plugin) {\n      if (type === 'expressions') {\n        expressionsPlugin = plugin;\n      }\n    }\n\n    function getFactory(name) {\n      switch (name) {\n        case \"propertyFactory\":\n          return PropertyFactory;\n\n        case \"shapePropertyFactory\":\n          return ShapePropertyFactory;\n\n        case \"matrix\":\n          return Matrix;\n      }\n    }\n\n    lottiejs.play = animationManager.play;\n    lottiejs.pause = animationManager.pause;\n    lottiejs.setLocationHref = setLocationHref;\n    lottiejs.togglePause = animationManager.togglePause;\n    lottiejs.setSpeed = animationManager.setSpeed;\n    lottiejs.setDirection = animationManager.setDirection;\n    lottiejs.stop = animationManager.stop;\n    lottiejs.searchAnimations = searchAnimations;\n    lottiejs.registerAnimation = animationManager.registerAnimation;\n    lottiejs.loadAnimation = loadAnimation;\n    lottiejs.setSubframeRendering = setSubframeRendering;\n    lottiejs.resize = animationManager.resize; //lottiejs.start = start;\n\n    lottiejs.goToAndStop = animationManager.goToAndStop;\n    lottiejs.destroy = animationManager.destroy;\n    lottiejs.setQuality = setQuality;\n    lottiejs.inBrowser = inBrowser;\n    lottiejs.installPlugin = installPlugin;\n    lottiejs.freeze = animationManager.freeze;\n    lottiejs.unfreeze = animationManager.unfreeze;\n    lottiejs.getRegisteredAnimations = animationManager.getRegisteredAnimations;\n    lottiejs.__getFactory = getFactory;\n    lottiejs.version = '5.5.7';\n\n    function checkReady() {\n      if (document.readyState === \"complete\") {\n        clearInterval(readyStateCheckInterval);\n        searchAnimations();\n      }\n    }\n\n    function getQueryVariable(variable) {\n      var vars = queryString.split('&');\n\n      for (var i = 0; i < vars.length; i++) {\n        var pair = vars[i].split('=');\n\n        if (decodeURIComponent(pair[0]) == variable) {\n          return decodeURIComponent(pair[1]);\n        }\n      }\n    }\n\n    var renderer = '';\n    {\n      var scripts = document.getElementsByTagName('script');\n      var index = scripts.length - 1;\n      var myScript = scripts[index] || {\n        src: ''\n      };\n      var queryString = myScript.src.replace(/^[^\\?]+\\??/, '');\n      renderer = getQueryVariable('renderer');\n    }\n    var readyStateCheckInterval = setInterval(checkReady, 100);\n    return lottiejs;\n  });\n});\nvar data = {\n  'v': '5.4.1',\n  'fr': 29.9700012207031,\n  'ip': 0,\n  'op': 75.0000030548126,\n  'w': 1280,\n  'h': 800,\n  'nm': 'Confetti',\n  'ddd': 0,\n  'assets': [{\n    'id': 'comp_0',\n    'layers': [{\n      'ddd': 0,\n      'ind': 1,\n      'ty': 4,\n      'nm': 'elems Outlines',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 0,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [648, 408, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [55, 55, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0]],\n              'v': [[0, -56.517], [65.259, 56.517], [-65.26, 56.517]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.96862745098, 0.423529411765, 0.533333333333, 1],\n              'e': [0.701960802078, 0.070588238537, 0.090196080506, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [285.686, 74.119],\n              'to': [-57.8834648132324, -52.8268241882324],\n              'ti': [57.8834648132324, 52.8268241882324]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 18],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 2,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[-78.593, 0], [0.001, -78.593], [78.594, 0], [0.001, 78.593]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.643137276173, 0.35686275363, 0.945098042488, 1],\n              'e': [0.61960786581, 0.243137255311, 0.996078431606, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [629.686, 746.119],\n              'to': [-0.55013018846512, 59.1731758117676],\n              'ti': [0.55013018846512, -59.1731758117676]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 3',\n        'np': 2,\n        'cix': 2,\n        'ix': 2,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[24.5, -23.5], [24.5, -81.5], [-23.5, -81.5], [-23.5, -23.5], [-81.5, -23.5], [-81.5, 23.5], [-23.5, 23.5], [-23.5, 81.5], [24.5, 81.5], [24.5, 23.5], [81.5, 23.5], [81.5, -23.5]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.960784313725, 0.96862745098, 0.439215686275, 1],\n              'e': [0.96928614378, 0.919638156891, 0.541258990765, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [1013.686, 133.119],\n              'to': [63.4498710632324, -42.9934883117676],\n              'ti': [-63.4498710632324, 42.9934883117676]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 5',\n        'np': 2,\n        'cix': 2,\n        'ix': 3,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[-43.406, 0], [0, -43.406], [43.406, 0], [0, 43.406]],\n              'o': [[43.406, 0], [0, 43.406], [-43.406, 0], [0, -43.406]],\n              'v': [[0, -78.593], [78.593, 0], [0, 78.593], [-78.593, 0]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.145098039216, 0.776470588235, 0.964705882353, 1],\n              'e': [0.196078434587, 0.745098054409, 0.996078431606, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [137.686, 622.119],\n              'to': [-82.5501327514648, 38.5065116882324],\n              'ti': [82.5501327514648, -38.5065116882324]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 7',\n        'np': 2,\n        'cix': 2,\n        'ix': 4,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 2,\n      'ty': 4,\n      'nm': 'elems greys',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 50,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 0,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [653, 411, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [55, 55, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0]],\n              'v': [[0, -56.517], [65.259, 56.517], [-65.26, 56.517]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.903109669685, 0.903109669685, 0.903109669685, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [277.686, 123.119],\n              'to': [-59.216796875, -44.66015625],\n              'ti': [59.216796875, 44.66015625]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 18],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 2,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[-78.593, 0], [0.001, -78.593], [78.594, 0], [0.001, 78.593]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [648.686, 706.119],\n              'to': [2.61653637886047, 52.5065116882324],\n              'ti': [-2.61653637886047, -52.5065116882324]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 3',\n        'np': 2,\n        'cix': 2,\n        'ix': 2,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[24.5, -23.5], [24.5, -81.5], [-23.5, -81.5], [-23.5, -23.5], [-81.5, -23.5], [-81.5, 23.5], [-23.5, 23.5], [-23.5, 81.5], [24.5, 81.5], [24.5, 23.5], [81.5, 23.5], [81.5, -23.5]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [992.686, 193.119],\n              'to': [59.9498710632324, -32.9934883117676],\n              'ti': [-59.9498710632324, 32.9934883117676]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 5',\n        'np': 2,\n        'cix': 2,\n        'ix': 3,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[-43.406, 0], [0, -43.406], [43.406, 0], [0, 43.406]],\n              'o': [[43.406, 0], [0, 43.406], [-43.406, 0], [0, -43.406]],\n              'v': [[0, -78.593], [78.593, 0], [0, 78.593], [-78.593, 0]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [171.686, 618.119],\n              'to': [-76.8834609985352, 37.83984375],\n              'ti': [76.8834609985352, -37.83984375]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 7',\n        'np': 2,\n        'cix': 2,\n        'ix': 4,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }]\n  }, {\n    'id': 'comp_1',\n    'layers': [{\n      'ddd': 0,\n      'ind': 1,\n      'ty': 4,\n      'nm': 'twiggle Outlines 10',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 20,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 2,\n      'ty': 4,\n      'nm': 'twiggle Outlines 9',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 308,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 3,\n      'ty': 4,\n      'nm': 'twiggle Outlines 8',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 236,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 4,\n      'ty': 4,\n      'nm': 'twiggle Outlines 7',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 164,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 5,\n      'ty': 4,\n      'nm': 'twiggle Outlines 6',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 92,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 6,\n      'ty': 4,\n      'nm': 'twiggle Outlines 5',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 360,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.96862745285, 0.423529416323, 0.533333361149, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 7,\n      'ty': 4,\n      'nm': 'twiggle Outlines 4',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 288,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.643137276173, 0.35686275363, 0.945098042488, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 8,\n      'ty': 4,\n      'nm': 'twiggle Outlines 3',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 216,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.447058826685, 0.96862745285, 0.32549020648, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 9,\n      'ty': 4,\n      'nm': 'twiggle Outlines 2',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 144,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.145098039216, 0.776470588235, 0.964705882353, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 10,\n      'ty': 4,\n      'nm': 'twiggle Outlines',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 72,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.960784316063, 0.96862745285, 0.439215689898, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }]\n  }],\n  'layers': [{\n    'ddd': 0,\n    'ind': 2,\n    'ty': 0,\n    'nm': 'layer 1',\n    'refId': 'comp_0',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 0,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [67.505, 67.505, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 0,\n    'op': 300.00001221925,\n    'st': 0,\n    'bm': 0\n  }, {\n    'ddd': 0,\n    'ind': 3,\n    'ty': 0,\n    'nm': 'layer 1',\n    'refId': 'comp_0',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 215,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [67.505, 67.505, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 4.00000016292334,\n    'op': 304.000012382174,\n    'st': 4.00000016292334,\n    'bm': 0\n  }, {\n    'ddd': 0,\n    'ind': 4,\n    'ty': 0,\n    'nm': 'layer 1',\n    'refId': 'comp_0',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 58,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [82.5, 82.5, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 9.00000036657752,\n    'op': 309.000012585828,\n    'st': 9.00000036657752,\n    'bm': 0\n  }, {\n    'ddd': 0,\n    'ind': 6,\n    'ty': 0,\n    'nm': 'Twiggles',\n    'refId': 'comp_1',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 0,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [67.505, 67.505, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 6.00000024438501,\n    'op': 306.000012463636,\n    'st': 6.00000024438501,\n    'bm': 0\n  }],\n  'markers': []\n};\n\nfunction styleInject(css, ref) {\n  if (ref === void 0) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') {\n    return;\n  }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css$1 = \".absolute-player {\\n    width: 800px!important;\\n    position: absolute;\\n    bottom: 0;\\n    height: 800px!important;\\n    transform: translate3d(-413px, 409px, 10px) !important;\\n}\";\nstyleInject(css$1);\n\nvar memphis = function memphis(container) {\n  lottie.loadAnimation({\n    container: container,\n    renderer: 'svg',\n    rendererSettings: {\n      className: 'absolute-player'\n    },\n    loop: false,\n    autoplay: true,\n    animationData: data,\n    onComplete: lottie.destroy()\n  });\n};\n\nvar classCallCheck = function classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar transition = {\n  type: 'spring',\n  stiffness: 200,\n  damping: 2\n};\nvar SpringAnim = posed.div({\n  confetti: {\n    y: 5,\n    transition: transition\n  },\n  emoji: {\n    y: 5,\n    transition: transition\n  },\n  memphis: {\n    scale: 1.1,\n    transition: transition\n  },\n  punished: {\n    x: 5,\n    transition: transition\n  },\n  resting: {\n    y: 0,\n    x: 0,\n    scale: 1,\n    transition: transition\n  }\n});\n\nvar Reward = function (_Component) {\n  inherits(Reward, _Component);\n\n  function Reward() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Reward);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Reward.__proto__ || Object.getPrototypeOf(Reward)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      state: 'resting'\n    }, _this.rewardMe = function () {\n      var _this$props = _this.props,\n          type = _this$props.type,\n          config = _this$props.config;\n      var props = [_this.container, config];\n\n      switch (type) {\n        case 'confetti':\n          {\n            _this.handleAnimation(type);\n\n            confetti.apply(undefined, props);\n            break;\n          }\n\n        case 'emoji':\n          {\n            _this.handleAnimation(type);\n\n            emoji.apply(undefined, props);\n            break;\n          }\n\n        case 'memphis':\n          {\n            _this.handleAnimation(type);\n\n            memphis(_this.lottieContainer, config);\n            break;\n          }\n\n        default:\n          {\n            break;\n          }\n      }\n    }, _this.punishMe = function () {\n      _this.handlePunishAnimation();\n    }, _this.rest = function () {\n      setTimeout(function () {\n        _this.setState({\n          state: 'resting'\n        });\n      }, 100);\n    }, _this.handleAnimation = function (type) {\n      _this.setState({\n        state: type\n      }, function () {\n        _this.rest();\n      });\n    }, _this.handlePunishAnimation = function () {\n      _this.setState({\n        state: 'punished'\n      }, function () {\n        _this.rest();\n      });\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n\n  createClass(Reward, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          _props$config = _props.config,\n          config = _props$config === undefined ? {} : _props$config,\n          children = _props.children;\n      var _config$springAnimati = config.springAnimation,\n          springAnimation = _config$springAnimati === undefined ? true : _config$springAnimati;\n      var state = this.state.state;\n      return React.createElement(React.Fragment, null, React.createElement('div', {\n        ref: function ref(_ref2) {\n          _this2.container = _ref2;\n        }\n      }), React.createElement('div', {\n        style: lottieContainerStyles,\n        ref: function ref(_ref3) {\n          _this2.lottieContainer = _ref3;\n        }\n      }), React.createElement(SpringAnim, {\n        pose: springAnimation && state\n      }, children));\n    }\n  }]);\n  return Reward;\n}(Component);\n\nvar lottieContainerStyles = {\n  position: 'relative'\n};\nReward.propTypes = {\n  type: PropTypes.string.isRequired,\n  config: PropTypes.object,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired\n};\nexport default Reward;","map":{"version":3,"sources":["/Users/ashish/Documents/tambola2/frontend/node_modules/react-rewards/dist/index.es.js"],"names":["React","PureComponent","createContext","createElement","forwardRef","Component","cloneElement","Children","PropTypes","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__assign$1","clamp","min","max","v","Math","sanitize","Number","toFixed","floatRegex","colorRegex","singleColorRegex","number","test","parse","parseFloat","transform","alpha","scale","default","createUnitType","unit","endsWith","split","degrees","percent","px","vh","vw","progressPercentage","getValueFromFunctionString","value","substring","lastIndexOf","clampRgbUnit","isRgba","red","undefined","isHsla","hue","splitColorValues","terms","values","valuesArray","rgbaTemplate","_a","green","blue","_b","alpha$$1","hslaTemplate","saturation","lightness","rgbUnit","round","isColorString","color","colorType","startsWith","rgba","hsla","hex","r","g","substr","parseInt","COLOR_TOKEN","NUMBER_TOKEN","convertNumbersToZero","complex","isNaN","numValues","foundNumbers","match","foundColors","input","parsed","replace","push","map","createTransformer","prop","template","token","numColors","numNumbers","output","getAnimatableNone","target","parsedTarget","targetTransformer","warning","invariant","process","env","NODE_ENV","check","message","console","warn","Error","prevTime","onNextFrame","window","requestAnimationFrame","callback","timestamp","Date","now","timeToCall","setTimeout","createStep","setRunNextFrame","processToRun","processToRunNextFrame","numThisFrame","isProcessing","cancelled","WeakSet","toKeepAlive","renderStep","cancel","indexOfCallback","add","splice","frame","process_1","has","schedule","keepAlive","immediate","addToCurrentBuffer","buffer","delete","StepId","maxElapsed","defaultElapsed","useDefaultElapsed","willRunNextFrame","delta","stepsOrder","Read","Update","Render","PostRender","setWillRunNextFrame","willRun","reduce","acc","key","step","sync","startLoop","cancelSync","steps","processStep","stepId","processFrame","forEach","getFrameData","DEFAULT_OVERSHOOT_STRENGTH","reversed","easing","mirrored","createReversedEasing","createExpoIn","power","pow","createBackIn","createAnticipateEasing","backEasing","linear","easeIn","easeOut","easeInOut","circIn","sin","acos","circOut","circInOut","backIn","backOut","backInOut","anticipate","NEWTON_ITERATIONS","NEWTON_MIN_SLOPE","SUBDIVISION_PRECISION","SUBDIVISION_MAX_ITERATIONS","K_SPLINE_TABLE_SIZE","K_SAMPLE_STEP_SIZE","FLOAT_32_SUPPORTED","Float32Array","a","a1","a2","c","getSlope","calcBezier","cubicBezier","mX1","mY1","mX2","mY2","sampleValues","binarySubdivide","aX","aA","aB","currentX","currentT","abs","newtonRaphsonIterate","aGuessT","currentSlope","calcSampleValues","getTForX","intervalStart","currentSample","lastSample","dist","guessForT","initialSlope","resolver","returnValue","zeroPoint","x","y","z","isNum","radiansToDegrees","radians","PI","angle","atan2","applyOffset","from","to","hasReceivedFrom","curryRange","func","cv","clamp$1","clamp$1$1","conditional","degreesToRadians","degrees$$1","isPoint","point","isPoint3D","distance1D","distance","xDelta","yDelta","zDelta","sqrt","progress","toFromDifference","mix","__assign$2","mixLinearColor","fromExpo","toExpo","colorTypes","getColorType","find","type","notAnimatable","color$$1","mixColor","fromColorType","toColorType","fromColor","toColor","blended","mixFunc","combineFunctions","pipe","transformers","_i","getMixer","origin","mixComplex","mixArray","slice","blendValue","fromThis","mixObject","analyse","numRGB","numHSL","originStats","targetStats","mixNumber","detectMixerFactory","isArray","createMixers","ease","customMixer","mixers","mixerFactory","numMixers","mixer","easingFunction","fastInterpolate","slowInterpolate","inputLength","lastInputIndex","mixerIndex","foundMixerIndex","progressInRange","interpolate","_c","concat","reverse","interpolator","pointFromVector","cos","toDecimal","num","precision","smoothFrame","prevValue","nextValue","duration","smoothing","smooth","strength","previousValue","lastUpdated","currentFramestamp","timeDelta","newValue","snap","points","i_1","numPoints_1","lastDistance","identity","springForce","alterDisplacement","constant","displacement","springModifiedDisplacement","springForceLinear","springForceExpo","velocityPerFrame","xps","frameDuration","velocityPerSecond","velocity","wrap","rangeSize","wrap$1","clampProgress","__assign$3","__rest$1","createStyler","onRead","onRender","uncachedValues","Set","useCache","props","state","changedValues","hasChanged","setValue","hasCSSVariable","currentValue","render","styler","get","forceRead","useCached","set","forceRender","CAMEL_CASE_PATTERN","REPLACE_TEMPLATE","camelToDash","str","toLowerCase","setDomAttrs","element","attrs","setAttribute","camelCache","Map","dashCache","prefixes","numPrefixes","isBrowser","document","testElement","setDashPrefix","prefixed","testPrefix","prefix","noPrefix","prefixedPropertyName","charAt","toUpperCase","style","setServerProperty","prefixer","asDashCase","cache","axes","order","transformProps","axesAcc","axesKey","transformPropDictionary","dict","isTransformProp","sortTransformProps","transformOriginProps","isTransformOriginProp","rounded","valueTypes","backgroundColor","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","size","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","opacity","originX","originY","originZ","zIndex","getValueType","getValueAsType","SCROLL_LEFT","SCROLL_TOP","scrollKeys","blacklist","translateAlias","isCustomTemplate","buildTransform","transformKeys","transformIsDefault","enableHardwareAcceleration","transformString","transformHasZ","sort","numTransformKeys","trim","buildStyleProperty","styles","transformOrigin","isDashCase","hasTransform","hasTransformOrigin","valueType","valueAsType","createStyleBuilder","options","preparseOutput","defaultValueType","domValue","getComputedStyle","getPropertyValue","buildStyles","numChangedValues","setProperty","cssStyler","createCssStyler","camelCaseAttributes","ZERO_NOT_ZERO","progressToPixels","build","dimensions","isPath","pathLength","hasDashArray","dashArrayStyles","pathSpacing","scale$$1","transformOriginX","transformOriginY","scaleTransformX","scaleTransformY","scaleReplaceX","scaleReplaceY","translate","attrKey","defaultValue","int","valueTypes$1","fillOpacity","strokeOpacity","numOctaves","getValueType$1","getDimensions","getBBox","getBoundingClientRect","getSVGElementDimensions","svgStyler","getAttribute","svg","tagName","getTotalLength","viewport","pageYOffset","pageXOffset","scrollTop","scrollLeft","scrollTo","WeakMap","createDOMStyler","node","HTMLElement","SVGElement","getStyler","index","nodeOrSelector","querySelector","Chainable","applyMiddleware","middleware","funcs","pipedUpdate","update","while","predicate","complete","filter","Observer","observer","onComplete","_this","isActive","updateObserver","error","err","m","createObserver","observerCandidate","Action","_super","start","isComplete","subscription","stop","init","observerProps","api","registerParent","action","BaseMulticast","subscribers","subscriber","subscribe","unsubscribe","index$$1","parent","Multicast","stepProgress","progress$$1","segment","subsegment","percentProgressOfTarget","subsegmentProgressOfTarget","segmentProgressOfTarget","floor","calc","freeze","dilate","getValueFromProgress","pointFromAngleAndDistance","getProgressFromValue","speedPerFrame","speedPerSecond","isValueList","isSingleValue","typeOfV","ValueReaction","scheduleVelocityCheck","postRender","velocityCheck","prev","current","updateCurrent","getVelocityOfCurrent","getSingleVelocity","getListVelocity","getMapVelocity","initialSubscription","getVelocity","sub","multi","getCount","getFirst","getOutput","mapApi","setProp","startActions","actions","numActions","updateOutput","numCompletedActions","subs","name","hasCompleted","keys","methodName","composite","args","propKey","starter","parallel","parallel$1","createVectorTests","typeTests","testNames","isVectorProp","getVectorKeys","vectorKeys","testVectorProps","some","unitTypes","findUnitType","isUnitProp","Boolean","createAction","reduceArrayValue","createArrayAction","firstVectorKey","actionList","childActionProps","getActionCreator","reduceObjectValue","createObjectAction","actionMap","createUnitAction","unitType","createMixerAction","createColorAction","createComplexAction","createVectorAction","vectorAction","isVector","testKey","testProp","decay","_d","_e","timeConstant","_f","restDelta","modifyTarget","elapsed","amplitude","idealTarget","frameDelta","exp","isMoving","vectorDecay","spring","stiffness","damping","_g","mass","_h","restSpeed","_j","initialVelocity","position","prevPosition","dampingRatio","angularFreq","envelope","expoDecay","isBelowVelocityThreshold","isBelowDisplacementThreshold","vectorSpring","scrubber","reverseEase","seek","vectorScrubber","clampProgress$1","tween","flip","loop","yoyo","repeatDelay","_k","_l","flipCount","_m","yoyoCount","_o","loopCount","playhead","currentProgress","reverseAnimation","isTweenComplete","updateTween","startTimer","stopTimer","getElapsed","getProgress","pause","resume","newProgress","clampProgress$1$1","defaultEasings","easing$$1","defaultTimings","interpolateScrubbers","scrubbers","rangeLength","finalInputIndex","finalScrubberIndex","scrub","keyframes","easings","times","tweenProps","physics","acceleration","friction","springStrength","distanceToTarget","setAcceleration","setFriction","setSpringStrength","setSpringTarget","setVelocity","vectorPhysics","listen","events","eventNames","eventName","addEventListener","removeEventListener","defaultPointerPos","clientX","clientY","pageX","pageY","eventToPoint","isTouchDevice","updatePointsLocation","touches","numTouches","thisTouch","passive","capture","multitouch","preventDefault","initialDistance","initialRotation","isGesture","firstTouch","secondTouch","updatePoint","newDistance","newRotation","onMove","updateOnMove","getIsTouchDevice","isMouseDevice","updatePointLocation","mouse","getFirstTouch","pointer","index$1$1","applyXOffset_1","applyYOffset_1","delta_1","chain","playCurrent","delay","timeToDelay","timeout","clearTimeout","appendUnit","steps$2","st","transformMap","childTransformers","childTransformer","blendArray","blendColor","generateStaticSpring","nonlinearSpring","linearSpring","getPoseValues","transition","delayChildren","staggerChildren","staggerDirection","afterChildren","beforeChildren","preTransition","applyAtStart","applyAtEnd","selectPoses","label","parentValues","ancestorValues","onChange","initialPose","poses","selectAllValues","selectValue","allValues","resolveProp","poseDefault","pose","resolveProps","startChildAnimations","children","next","animations","stagger","maxStaggerDuration","generateStaggerDuration","child","resolveTransition","convertTransitionDefinition","getInstantTransition","resolvedTransition","resolvedTransitionMap","keyTransition","findInsertionIndex","poseList","priorityList","priorityIndex","insertionIndex","nextHighestPriorityIndex","applyValues","toApply","setValueNative","valueToSet","createPoseSetter","setterProps","startAction","stopAction","addActionDelay","getTransitionProps","resolveTarget","transformPose","posePriority","nextProps","propagate","activeActions","activePoses","hasChildren","baseTransitionProps","nextPose","getChildAnimations","getParentAnimations","getTransition","valuePoses","existingIndex","priority","Promise","transitionProps","resolveTransitionProps","poseDelay","resolve","all","then","DEFAULT_INITIAL_POSE","isScale","includes","defaultReadValueFromSource","readValueFromPose","valueToResolve","getPosesToSearch","posesToSearch","getInitialValue","readValueFromSource","thisPose","createValues","userSetValues","createValue","convertValue","initValue","scrapeValuesFromPose","getAncestorValue","fromParent","ancestors","foundAncestor","bindPassiveValues","readValue","valueKey","passiveProps","valueToBind","passiveParentKey","passiveParent","setNativeValues","valuesHaveSet","setValues","poseKey","createValueMap","applyDefaultTransition","defaultTransitions","generateTransitions","sortByReversePriority","priorityOrder","aP","bP","poseFactory","getDefaultProps","bindOnChange","selectValueToRead","extendAPI","config","unshift","poseName","unset","poseProps","posesToSet","poseIndex","currentPose","animationsToResolve","poseToSet","valueName","setProps","newProps","_addChild","childConfig","factory","removeChild","clearChildren","destroy","clear","__assign$4","__rest$2","BoundingBoxDimension","measureWithoutTransform","transform$$1","bbox","resolveProp$1","interpolate$1","singleAxisPointer","axis","pointerX","pointerY","createPointer","axisPointerCreator","measurement","dragBounds","axisPointer","measurementAsPixels","transformQueue","resolvedDragBounds_1","just","underDampedSpring","overDampedSpring","linearTween","intelligentTransition","dragAction","justAxis","intelligentDragEnd","animationLookup","easingLookup","auto","valueTypeTests","testValueType","getValueType$2","createPassiveValue","raw","delay$$1","isCubicBezierArgs","getAction","definedEase","def","x1","y1","x2","y2","baseProps","isAction","action$$1","addListenerToValue","elementStyler","val","_","reaction","remainingDef","outputPipe","createDimensions","hasMeasured","measure","value$$1","makeUIEventApplicator","startEvents","endEvents","startPose","endPose","startCallback","endCallback","useDocumentToEnd","preventScroll","poser","startListener","endListener","moveListener","touchMoveListener","eventStartListener","startEvent","eventEndListener","documentElement","endEvent","buttons","draggable","hoverable","focusable","pressable","eventKeys","appendEventListeners","ORIGIN_START","ORIGIN_CENTER","ORIGIN_END","findCenter","positionalProps","positionalPropsDict","checkPositionalProp","hasPositionalProps","isFlipPose","explicitlyFlipPose","remainingPose","propsToSet","implicitlyFlipPose","prevCenter","nextCenter","flipPose","getPosFromMatrix","matrix","pos","getTranslateFromMatrix","pos2","pos3","matrix3d","positionalValues","isPositionalKey","isPositional","convertPositionalUnits","positionalPoseKeys","changedPositionalKeys","elementComputedStyle","applyAtEndHasBeenCopied","fromValueType","toValueType","originBbox","originComputedStyle","targetBbox","getCurrent","dragPoses","drag","dragEnd","createPoseConfig","onDragStart","onDragEnd","onPressStart","onPressEnd","poseConfig","domPose","pose$$1","bound","boundType","poserApi","addChild","op","domPose$1","memoize","fn","arg","reactPropsRegex","index$2","charCodeAt","prevIsArray","nextIsArray","numPrev","numNext","pickAssign","shouldPick","sources","picked","source","_a$1","PoseParentConsumer","Consumer","PoseParentProvider","Provider","calcPopFromFlowStyle","el","offsetTop","offsetLeft","offsetWidth","offsetHeight","hasPose","objectToMap","obj","testAlwaysTrue","filterProps","elementType","onValueChange","innerRef","_pose","onPoseComplete","getParentPoseConfig","registerChild","onUnmount","getInitialPoseFromParent","popFromFlow","PoseElement","childrenHandlers","flushChildren","getInitialPose","setRef","ref","Element","shouldForwardProp","parentPose","initialPoses","getFirstPose","firstPose","getSetProps","popStyle","componentDidMount","initPoser","onRegistered","getSnapshotBeforeUpdate","componentDidUpdate","prevProps","setPose","componentWillUnmount","supportedElements","componentCache","createComponentFactory","componentFactory","withParent","parentCtx","getComponentFactory","posed","component","getKey","childKey","toString","prependProps","handleTransition","displayedChildren","finishedLeaving","hasInitialized","indexedChildren","scheduleChildRemoval","incomingChildren","preEnterPose","enterPose","exitPose","animateOnMount","enterAfterExit","flipMove","onRest","propsForChildren","targetChildren","makeChildList","nextState","prevKeys","nextKeys","hasPropsForChildren","entering","leaving","newlyLeaving","isLeaving","moving","newChildProps","newChild","handleChildrenTransitions","newState","list","Transition","every","leavingKey","setState","shouldComponentUpdate","defaultProps","getDerivedStateFromProps","PoseGroup","defaultColors","createElements","root","elementCount","elementSize","colors","appendChild","radiansFrom","generatePhysics","spread","startVelocity","random","radAngle","radSpread","wobble","angle2D","angle3D","tiltAngle","updateFetti","fetti","_fetti$physics","wobbleX","wobbleY","animate","fettis","lifetime","totalTicks","tick","parentNode","confetti","_ref","_ref$elementCount","_ref$elementSize","_ref$colors","_ref$angle","_ref$spread","_ref$decay","_ref$lifetime","_ref$startVelocity","_ref$zIndex","_ref$random","elements","PI$1","defaultEmoji","createElements$1","emoji","emojiIcon","innerHTML","fontSize","radiansFrom$1","generatePhysics$1","updateMojis","animate$1","mojis","_ref$emoji","createCommonjsModule","module","exports","lottie","navigator","bodymovin","svgNS","locationHref","initialDefaultFrame","subframeEnabled","expressionsPlugin","isSafari","userAgent","bm_pow","bm_sqrt","bm_floor","bm_max","bm_min","BMMath","propertyNames","len","ProjectInterface","tOfVal","absArr","createSizedArray","defaultCurveSegments","degToRads","roundCorner","styleDiv","display","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","direction","BMCompleteEvent","BMCompleteLoopEvent","currentLoop","totalLoops","BMSegmentStartEvent","f","firstFrame","totalFrames","BMDestroyEvent","createElementID","_count","createID","HSVtoRGB","h","q","RGBtoHSV","addSaturationToRGB","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","colorMap","BaseEvent","triggerEvent","_cbs","bind","createTypedArray","createRegularArray","arr","Int16Array","Uint8ClampedArray","createNS","createElementNS","createTag","DynamicPropertyContainer","addDynamicProperty","dynamicProperties","container","_isAnimated","iterateDynamicProperties","_mdf","getValue","initDynamicPropertyContainer","getBlendMode","blendModeEnums","mode","Matrix","_cos","_sin","_tan","tan","_rnd","reset","mCos","mSin","_t","shear","sx","sy","ax","ay","skewFromAxis","sz","setTransform","j","k","l","o","tx","ty","tz","b2","c2","d2","e2","f2","g2","h2","i2","j2","k2","l2","m2","n2","o2","p2","_p","_identityCalculated","b1","c1","d1","e1","f1","g1","h1","i1","j1","k1","l1","m1","n1","o1","p1","isIdentity","_identity","equals","matr","clone","cloneFromProps","applyToPoint","applyToX","applyToY","applyToZ","inversePoint","pt","determinant","inversePoints","pts","retPts","applyToTriplePoints","pt1","pt2","pt3","p0","p4","p5","p12","p13","applyToPointArray","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","pool","math","global","chunks","digits","rngname","startdenom","significance","overflow","mask","seedrandom","seed","entropy","shortseed","mixkey","flatten","tostring","autoseed","arc4","ARC4","prng","int32","quick","double","S","pass","is_math_call","copy","keylen","me","count","depth","result","typ","stringseed","smear","out","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","screen","String","fromCharCode","BezierFactory","ob","getBezierEasing","beziers","nm","bezEasing","BezierEasing","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","aT","_mSampleValues","_precomputed","_precompute","_getTForX","_calcSampleValues","mSampleValues","lastTime","vendors","cancelAnimationFrame","currTime","getTime","id","extendPrototype","destination","sourcePrototype","attr","getDescriptor","object","getOwnPropertyDescriptor","createProxyFunction","ProxyFunction","bezFunction","pointOnLine2D","x3","y3","det1","pointOnLine3D","z1","z2","z3","dist1","dist2","dist3","diffDist","getBezierLength","pt4","curveSegments","ptCoord","perc","addedLength","ptDistance","lastPoint","lengthData","bezier_length_pool","newElement","percents","lengths","getSegmentsLength","shapeData","segmentsLength","segments_length_pool","closed","pathV","pathO","pathI","_length","totalLength","BezierData","segmentLength","PointData","partial","partialLength","buildBezierData","storedData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","flag","getPointInSegment","t1","u1","ptX","ptY","bezier_segment_points","getNewSegment","startPerc","endPerc","t0","u0","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","bez","dataFunctionManager","completeLayers","layers","comps","fontManager","layerData","jLen","kLen","completed","tt","td","hasMask","maskProps","masksProperties","convertPathsToAbsoluteValues","findCompLayers","refId","completeShapes","shapes","completeText","__used","JSON","stringify","ks","it","path","checkVersion","minimum","animVersionString","animVersion","checkText","minimumVersion","updateTextLayer","textLayer","documentData","iterateLayers","animationData","assets","checkChars","chars","pathData","paths","data","__converted","checkColors","iterateShapes","checkShapes","cl","completeData","__complete","singleShape","moduleOb","dataManager","FontManager","maxWaitingTime","emptyChar","w","combinedCharacters","setUpNode","font","family","fontFamily","fontVariant","fontStyle","fontWeight","letterSpacing","body","checkLoadedFonts","fonts","loadedCount","loaded","fOrigin","monoCase","sansCase","initTime","isLoaded","createHelper","fontData","tHelper","fFamily","fStyle","fWeight","textContent","fClass","tCanvasHelper","getContext","addFonts","defs","fontArr","_pendingFonts","shouldLoadFont","loadedSelector","fPath","querySelectorAll","href","rel","src","sc","helper","addChars","found","ch","getCharData","char","measureText","fontName","getFontByName","doubleSize","getComputedTextLength","singleSize","fName","getCombinedCharacterCodes","Font","typekitLoaded","PropertyFactory","initFrame","math_abs","interpolateValue","frameNum","caching","offsetTime","propType","pv","iterationIndex","lastIndex","keyData","nextKeyData","fnc","nextKeyTime","keyTime","endValue","ti","ind","__fnct","distanceInLine","segmentPerc","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","quatStart","createQuaternion","quatEnd","time","quaternionToEuler","slerp","az","aw","bx","by","bz","bw","omega","cosom","sinom","scale0","scale1","quat","qx","qy","qz","qw","heading","attitude","asin","bank","c3","s1","s2","s3","getValueAtCurrentTime","comp","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","processEffectsSequence","elem","globalData","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","ValueProperty","vel","MultiDimensionalProperty","KeyframedValueProperty","KeyframedMultidimensionalProperty","arrLen","getProp","TransformPropertyFactory","applyToMatrix","mat","sk","sa","rz","ry","rx","or","py","pz","processKeys","_isDirty","precalculateMatrix","pre","appliedTransformations","autoOriented","v1","v2","frameRate","getValueAtTime","autoOrient","_addDynamicProperty","TransformProperty","getTransformProperty","ShapePath","_maxLength","setPathData","setLength","point_pool","doubleArrayLength","setXYAt","setTripleAt","vX","vY","oX","oY","iX","iY","newPath","vertices","outPoints","inPoints","cnt","ShapePropertyFactory","interpolateShape","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","localShapeCollection","shapesEqual","shape1","shape2","shape_pool","releaseShapes","addShape","ShapeProperty","shapeCollection_pool","newShapeCollection","KeyframedShapeProperty","EllShapeProperty","cPoint","convertEllToPath","s0","_cw","_v","StarShapeProperty","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","os","numPts","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","rad","roundness","perimSegment","currentAng","ox","oy","RectShapeProperty","convertRectToPath","v0","getShapeProp","dataProp","getConstructorFunction","getKeyframedConstructorFunction","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","initModifierProperties","addShapeToModifier","shape","setAsAnimated","TrimModifier","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segments","shapeSegments","segmentOb","shapeS","shapeE","releasePathsData","release","processShapes","_s","shapePaths","totalShapeLength","edges","newShapesData","addShapes","lastShapeInCollection","lastShape","pop","addPaths","newPaths","addSegment","shapePath","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","RoundCornersModifier","rd","processPath","cloned_path","currentV","currentI","currentO","closerV","newPosPerc","RepeaterModifier","tr","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","applyTransforms","inv","elemsData","_currentCopies","_elements","_groups","resetElements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","_render","items","itemsTransform","cont","copies","ceil","group","reloadShapes","offsetModulo","roundOffset","tMat","pProps","rProps","sProps","iteration","mProps","ShapeCollection","DashProperty","renderer","dataProps","dashStr","dashArray","dashoffset","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","comparePoints","diff","buildShapeString","pathNodes","shapeString","ImagePreloader","proxyImage","canvas","ctx","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","imagesLoadedCb","getAssetsPath","assetData","assetsPath","original_path","imagePath","u","createImageData","img","crossOrigin","_imageLoaded","loadAssets","cb","images","_createImageData","setPath","setAssetsPath","getImage","featureSupport","maskType","filtersFactory","createFilter","createAlphaToLuminanceFilter","filId","fil","feColorMatrix","assetLoader","formatResponse","xhr","response","responseText","loadAsset","errorCallback","XMLHttpRequest","open","responseType","send","onreadystatechange","readyState","status","load","TextAnimatorProperty","textData","renderType","_hasMaskedPath","_frameId","_textData","_renderType","_elem","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","searchProperties","animatorProps","TextAnimatorDataProperty","maskManager","getMaskProperty","getMeasures","animators","matrixHelper","mHelper","renderedLettersCount","xPos","yPos","letters","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","tLength","pi","yOff","finalSize","firstLine","animatorSelector","letterValue","offf","xPathPos","yPathPos","initPathPos","initSegmentInd","initPointInd","currentLine","elemOpacity","sw","fc","lineLength","letterSw","letterSc","letterFc","letterM","letterP","defaultPropsArray","letterO","animatorJustifyOffset","animatorFirstCharOffset","justifyOffsetMult","isNewLine","getMult","anIndexes","totalChars","yOffset","line","lineWidths","extra","an","animatorOffset","strokeWidthAnim","strokeColorAnim","fillColorAnim","fh","fs","fb","ls","rot","atan","ps","ascent","justifyOffset","boxWidth","LetterProps","defaultData","textAnimator_animatables","TextSelectorProp","getTextSelectorProp","updated","TextProperty","keysIndex","canResize","minimumFontSize","currentData","defaultBoxWidth","lh","of","finalText","finalLineHeight","copyData","searchProperty","completeTextData","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentIndex","textKeys","textDocumentData","buildFinalText","text","charactersArray","charCode","newLineFlag","anchorGrouping","currentSize","currentPos","lineWidth","maxLineWidth","charData","styleName","trackingOffset","boxHeight","currentHeight","lastSpaceIndex","uncollapsedSpaces","currentChar","animatorData","letterData","based","indexes","rn","currentInd","newInd","updateDocumentData","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","_currentTextLength","finalS","finalE","xe","ne","textProperty","easer","tot","newCharsFlag","divisor","pool_factory","initialLength","_create","_release","_clone","pooling","cloned","shapeCollection","BaseRenderer","checkLayers","ip","buildItem","checkPendingElements","createItem","layer","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","buildAllItems","includeLayers","newLayers","setProjectInterface","pInterface","projectInterface","initItems","progressiveLoad","buildElementParenting","parentName","hierarchy","addPendingElement","setAsParent","setHierarchy","pendingElements","searchExtraCompositions","xt","initExpressions","registerComposition","setupGlobalData","animData","fontsContainer","getAssetData","animationItem","imageLoader","imagePreloader","fr","compSize","SVGRenderer","svgElement","ariaLabel","title","titleElement","titleId","description","descElement","descId","maskElement","layerElement","renderConfig","preserveAspectRatio","imagePreserveAspectRatio","hideOnTransparent","viewBoxOnly","viewBoxSize","className","destroyed","rendererType","NullElement","SVGShapeElement","SVGTextElement","IImageElement","SVGCompElement","ISolidElement","configAnimation","wrapper","rect","maskId","updateContainerSize","appendElementInPos","setMatte","layerId","checkParenting","renderFrame","currentFrame","prepareFrame","getBaseElement","nextElement","insertBefore","hide","show","CanvasRenderer","clearCanvas","context","dpr","devicePixelRatio","currentGlobalAlpha","contextData","CVContextData","transformMat","CVShapeElement","CVTextElement","CVImageElement","CVCompElement","CVSolidElement","ctxTransform","canvasContext","cProps","cTr","trProps","ctxOpacity","globalAlpha","cO","restore","save","actionFlag","cArrPos","duplicate","saved","savedOp","blendMode","popped","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","elementRel","animationRel","par","fillType","beginPath","closePath","clip","clearRect","HybridRenderer","threeDElements","camera","supports3d","newDOMElement","ddd","addTo3dContainer","nextDOMElement","nextLayer","tmpDOMElement","getThreeDContainerByPos","HShapeElement","HTextElement","HCameraElement","HImageElement","HCompElement","HSolidElement","startPos","endPos","perspectiveElem","createThreeDContainer","webkitTransform","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","setup","cWidth","cHeight","webkitPerspective","floatingContainer","MaskElement","viewData","solidPath","properties","currentMasks","expansor","feMorph","maskRef","lastPath","filterID","expan","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","addRenderableComponent","isFirstFrame","finalMat","finalTransform","mProp","getMaskelement","pathString","pathShapeValue","HierarchyElement","initHierarchy","_isParent","FrameElement","prepareProperties","isVisible","TransformElement","initTransform","_matMdf","_opMdf","ao","renderTransform","globalToLocal","transforms","ptNew","RenderableElement","initRenderable","isInRange","hidden","isTransparent","renderableComponents","removeRenderableComponent","prepareRenderableFrame","checkLayerLimits","checkTransparency","renderRenderable","sourceRectAtTime","getLayerSize","RenderableDOMElement","_prototype","initElement","initBaseData","initRendererElement","createContainerElements","createRenderableComponents","createContent","baseElement","hd","renderElement","renderInnerContent","innerElem","destroyBaseElement","ProcessedElement","SVGStyleData","level","lvl","pElem","msElem","SVGShapeData","caches","lStr","SVGTransformData","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGGradientFillStyleData","initGradientData","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","gf","cst","opacityId","opFill","ms","ost","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","SVGElementsRenderer","_identityMatrix","_matrixHelper","createRenderFunction","renderFill","renderGradient","renderGradientStroke","renderStroke","renderPath","renderContentTransform","styleData","itemData","pathStringTransformed","redraw","lLen","iterations","styleElem","hasOpacity","attr1","attr2","cValues","oValues","ang","ShapeTransformManager","sequences","sequenceList","transform_key_count","addTransformSequence","sequence","processSequence","processSequences","getNewKey","CVShapeData","transformsManager","styledShapes","styledShape","trNodes","BaseElement","checkMasks","layerInterface","LayerExpressionInterface","registerMaskInterface","effectsInterface","EffectsExpressionInterface","createEffectsInterface","registerEffectsInterface","compInterface","CompExpressionInterface","shapeInterface","ShapeExpressionInterface","shapesData","itemsData","content","textInterface","TextExpressionInterface","setBlendMode","blendModeValue","bm","sr","effectsManager","EffectsManager","getType","SVGBaseElement","matteElement","transformedElement","_sizeChanged","layerElementParent","gg","masker","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","ln","cp","clipId","cpGroup","renderableEffectsManager","SVGEffects","IShapeElement","addShapeToModifiers","shapeModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","lcEnum","ljEnum","searchProcessedElement","processedElements","addProcessedElement","ITextElement","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","ICompElement","tm","_placeholder","timeRemapped","setElements","elems","getElements","destroyElements","sourceRect","assetPath","pr","setAttributeNS","textSpans","textContainer","buildTextContents","textArray","textContents","currentTextContent","usesGlyphs","tSpan","tElement","justify","cachedSpansLength","textBox","renderedLetter","textSpan","stylesList","animatedContents","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","gradientConstructor","lc","lj","ml","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","shapeProperty","setElementStyles","ownStyles","ownModifiers","currentTransform","modifier","processedPos","renderShape","animatedContent","SVGTintFilter","filterManager","matrixFilter","effectElements","feMerge","feMergeNode","colorBlack","colorWhite","SVGFillFilter","SVGGaussianBlurEffect","feGaussianBlur","kBlurrinessToSigma","sigma","sigmaX","sigmaY","edgeMode","SVGStrokeEffect","initialized","initialize","elemChildren","childNodes","groupPath","removeAttribute","pathMasker","dasharrayValue","units","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","color1","color2","color3","tableR","tableG","tableB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","table","colorValue","outputDelta","inputDelta","join","SVGDropShadowEffect","feOffset","feFlood","feComposite","originalNodeAdded","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","ef","filters","newLength","currentSavedOp","CVBaseElement","CVEffects","globalCompositeOperation","CVMaskElement","hideElement","showElement","hasMasks","imgW","imgH","imgRel","canvasRel","widthCrop","heightCrop","drawImage","parentMatrix","moveTo","lineTo","bezierCurveTo","transformHelper","dashResetter","preTransforms","co","wi","da","do","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","strokeStyle","grd","lineCap","lineJoin","miterLimit","setLineDash","lineDashOffset","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","currentRender","sWidth","fValue","hasFill","hasStroke","commands","pathArr","lastFill","lastStroke","lastStrokeW","HBaseElement","checkBlendMode","tg","addEffects","_createBaseContainerElements","shapesContainer","currentBBox","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","item","boundingBox","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","bounds","shapeBoundingBox","xMax","yMax","tempBoundingBox","p3","b2ac","t2","calculateF","calculateBoundingBox","currentBoxContains","box","changed","textPaths","isMasked","compW","compH","innerElemStyle","strokeWidth","lineHeight","tParent","tCont","textPath","Image","imageElem","pe","_prevMat","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","m_rotationX","m_rotationY","hasMatrixChanged","animationManager","registeredAnimations","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","animation","isPaused","subtractPlayingCount","registerAnimation","AnimationItem","setupAnimation","setData","getRegisteredAnimations","addPlayingCount","activate","loadAnimation","params","setParams","setSpeed","setDirection","play","nowTime","elapsedTime","advanceTime","first","goToAndStop","isFrame","togglePause","searchAnimations","standalone","animElements","getElementsByClassName","getElementsByTagName","div","resize","unfreeze","currentRawFrame","frameMult","playSpeed","playDirection","playCount","autoplay","animationID","timeCompleted","segmentPos","_idle","_completedLoop","animType","rendererSettings","autoloadSegments","fileName","trigger","wrapperAttributes","attributes","getNamedItem","prerender","loadNextSegment","shift","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","updaFrameModifier","waitForFontsLoaded","gotoFrame","setSubframe","setCurrentRawFrameValue","frameModifier","goToAndPlay","_isComplete","checkSegments","adjustSegment","setSegment","end","pendingFrame","playSegments","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onSegmentStart","onDestroy","getPath","getDuration","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","ExpressionManager","easeInBez","easeOutBez","easeInOutBez","initiateExpression","property","needsVelocity","_needsRandom","elemType","effect","thisProperty","valueAtTime","defineProperty","displayStartTime","inPoint","outPoint","loopIn","loopOut","toWorld","fromWorld","fromComp","toComp","anchorPoint","thisLayer","thisComp","velocityAtTime","__expression_functions","xf","eval","scoped_bm_rt","expression_function","numKeys","active","wiggle","freq","amp","addedAmps","periods","getVelocityAtTime","seedRandom","randSeed","textIndex","textTotal","selectorValue","hasParent","executeExpression","_value","frameExpressionId","expressionHelpers","searchExpressions","_cachingAtTime","getSpeedAtTime","speed","getStaticValueAtTime","setGroupProperty","propertyGroup","addPropertyDecorator","durationFlag","lastKeyFrame","cycleDuration","firstKeyFrame","ret","initV","endV","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","endFrame","sampleFrequency","sampleValue","getTransformValueAtTime","getTransformStaticValueAtTime","propertyGetProp","propertyIndex","ix","getShapeValueAtTime","shapeValue","ShapePropertyConstructorFunction","KeyframedShapePropertyConstructorFunction","ShapeExpressions","inTangents","outTangents","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","unitVector","tangentOnPath","normalOnPath","propertyGetShapeProp","trims","addDecorator","calculateExpression","getExpressionValue","isKeyframed","hasExpressions","iterateElements","view","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","pathInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","contentsInterfaceFactory","interfaces","interfaceFunction","_interfaceFunction","_name","mn","numProperties","cix","transformInterface","transformInterfaceFactory","np","defineProperties","ExpressionPropertyInterface","_propertyGroup","_dashPropertyGroup","dashOb","addPropertyToDashOb","rotation","skewAxis","outerRadius","outerRoundness","innerRadius","innerRoundness","_prevValue","_sourceText","_thisLayerFunction","stringValue","toWorldMat","sampleImage","_registerMaskInterface","MaskManagerInterface","_registerEffectsInterface","effects","TransformExpressionInterface","anchorPointDescriptor","anchor_point","startTime","pixelAspect","numLayers","_thisFunction","xRotation","yRotation","xPosition","yPosition","zPosition","_transformFactory","compositions","_thisProjectFunction","effectsData","createGroupInterface","createValueInterface","groupInterface","enabled","en","expressionProperty","MaskInterface","_mask","_data","MaskManager","_masksInterfaces","maskFunction","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","valueProp","speedAtTime","UnidimensionalPropertyInterface","MultidimensionalPropertyInterface","arrValue","defaultGetter","TextExpressionSelectorProp","getValueProxy","total","propertyGetTextProp","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","effectItem","GroupEffect","eff","lottiejs","setLocationHref","setSubframeRendering","setQuality","inBrowser","installPlugin","plugin","getFactory","__getFactory","version","checkReady","clearInterval","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","scripts","myScript","setInterval","styleInject","css","insertAt","head","firstChild","styleSheet","cssText","createTextNode","css$1","memphis","classCallCheck","instance","Constructor","TypeError","createClass","descriptor","enumerable","configurable","writable","protoProps","staticProps","inherits","subClass","superClass","possibleConstructorReturn","self","ReferenceError","SpringAnim","punished","resting","Reward","_Component","_temp","_ret","_len","_key","getPrototypeOf","rewardMe","_this$props","handleAnimation","lottieContainer","punishMe","handlePunishAnimation","rest","_this2","_props","_props$config","_config$springAnimati","springAnimation","Fragment","_ref2","lottieContainerStyles","_ref3","propTypes","string","isRequired","oneOfType","arrayOf"],"mappings":"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","sourcesContent":["import React, { PureComponent, createContext, createElement, forwardRef, Component, cloneElement, Children } from 'react';\nimport PropTypes from 'prop-types';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign$1 = function() {\r\n    __assign$1 = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$1.apply(this, arguments);\r\n};\n\nvar clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\r\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))/gi;\r\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[\\d\\.]+%?\\))$/i;\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = __assign$1({}, number, { transform: clamp(0, 1) });\r\nvar scale = __assign$1({}, number, { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\r\nvar progressPercentage = __assign$1({}, percent, { parse: function (v) { return percent.parse(v) / 100; }, transform: function (v) { return percent.transform(v * 100); } });\n\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar clampRgbUnit = clamp(0, 255);\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nvar splitColorValues = function (terms) {\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = getValueFromFunctionString(v).split(/,\\s*/);\r\n        for (var i = 0; i < 4; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha$$1 + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha$$1 + \")\";\r\n};\r\nvar rgbUnit = __assign$1({}, number, { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nfunction isColorString(color, colorType) {\r\n    return color.startsWith(colorType) && singleColorRegex.test(color);\r\n}\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'rgb') : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'hsl') : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$$1 = _b === void 0 ? 1 : _b;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha.transform(alpha$$1))\r\n        });\r\n    }\r\n};\r\nvar hex = __assign$1({}, rgba, { test: function (v) { return typeof v === 'string' && isColorString(v, '#'); }, parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && singleColorRegex.test(v)) ||\r\n            isRgba(v) ||\r\n            isHsla(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar convertNumbersToZero = function (v) {\r\n    return typeof v === 'number' ? 0 : v;\r\n};\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    },\r\n    getAnimatableNone: function (target) {\r\n        var parsedTarget = complex.parse(target);\r\n        var targetTransformer = complex.createTransformer(target);\r\n        return targetTransformer(parsedTarget.map(convertNumbersToZero));\r\n    }\r\n};\n\nvar warning = function () { };\r\nvar invariant = function () { };\r\nif (process.env.NODE_ENV !== 'production') {\r\n    warning = function (check, message) {\r\n        if (!check && typeof console !== 'undefined') {\r\n            console.warn(message);\r\n        }\r\n    };\r\n    invariant = function (check, message) {\r\n        if (!check) {\r\n            throw new Error(message);\r\n        }\r\n    };\r\n}\n\nvar prevTime = 0;\r\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined\r\n    ? function (callback) { return window.requestAnimationFrame(callback); }\r\n    : function (callback) {\r\n        var timestamp = Date.now();\r\n        var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\r\n        prevTime = timestamp + timeToCall;\r\n        setTimeout(function () { return callback(prevTime); }, timeToCall);\r\n    };\n\nvar createStep = (function (setRunNextFrame) {\r\n    var processToRun = [];\r\n    var processToRunNextFrame = [];\r\n    var numThisFrame = 0;\r\n    var isProcessing = false;\r\n    var i = 0;\r\n    var cancelled = new WeakSet();\r\n    var toKeepAlive = new WeakSet();\r\n    var renderStep = {\r\n        cancel: function (process) {\r\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\r\n            cancelled.add(process);\r\n            if (indexOfCallback !== -1) {\r\n                processToRunNextFrame.splice(indexOfCallback, 1);\r\n            }\r\n        },\r\n        process: function (frame) {\r\n            var _a;\r\n            isProcessing = true;\r\n            _a = [\r\n                processToRunNextFrame,\r\n                processToRun\r\n            ], processToRun = _a[0], processToRunNextFrame = _a[1];\r\n            processToRunNextFrame.length = 0;\r\n            numThisFrame = processToRun.length;\r\n            if (numThisFrame) {\r\n                var process_1;\r\n                for (i = 0; i < numThisFrame; i++) {\r\n                    process_1 = processToRun[i];\r\n                    process_1(frame);\r\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\r\n                        renderStep.schedule(process_1);\r\n                        setRunNextFrame(true);\r\n                    }\r\n                }\r\n            }\r\n            isProcessing = false;\r\n        },\r\n        schedule: function (process, keepAlive, immediate) {\r\n            if (keepAlive === void 0) { keepAlive = false; }\r\n            if (immediate === void 0) { immediate = false; }\r\n            invariant(typeof process === 'function', 'Argument must be a function');\r\n            var addToCurrentBuffer = immediate && isProcessing;\r\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\r\n            cancelled.delete(process);\r\n            if (keepAlive)\r\n                toKeepAlive.add(process);\r\n            if (buffer.indexOf(process) === -1) {\r\n                buffer.push(process);\r\n                if (addToCurrentBuffer)\r\n                    numThisFrame = processToRun.length;\r\n            }\r\n        }\r\n    };\r\n    return renderStep;\r\n});\n\nvar StepId;\r\n(function (StepId) {\r\n    StepId[\"Read\"] = \"read\";\r\n    StepId[\"Update\"] = \"update\";\r\n    StepId[\"Render\"] = \"render\";\r\n    StepId[\"PostRender\"] = \"postRender\";\r\n    StepId[\"FixedUpdate\"] = \"fixedUpdate\";\r\n})(StepId || (StepId = {}));\n\nvar maxElapsed = 40;\r\nvar defaultElapsed = (1 / 60) * 1000;\r\nvar useDefaultElapsed = true;\r\nvar willRunNextFrame = false;\r\nvar isProcessing = false;\r\nvar frame = {\r\n    delta: 0,\r\n    timestamp: 0\r\n};\r\nvar stepsOrder = [\r\n    StepId.Read,\r\n    StepId.Update,\r\n    StepId.Render,\r\n    StepId.PostRender\r\n];\r\nvar setWillRunNextFrame = function (willRun) { return (willRunNextFrame = willRun); };\r\nvar _a = stepsOrder.reduce(function (acc, key) {\r\n    var step = createStep(setWillRunNextFrame);\r\n    acc.sync[key] = function (process, keepAlive, immediate) {\r\n        if (keepAlive === void 0) { keepAlive = false; }\r\n        if (immediate === void 0) { immediate = false; }\r\n        if (!willRunNextFrame)\r\n            startLoop();\r\n        step.schedule(process, keepAlive, immediate);\r\n        return process;\r\n    };\r\n    acc.cancelSync[key] = function (process) { return step.cancel(process); };\r\n    acc.steps[key] = step;\r\n    return acc;\r\n}, {\r\n    steps: {},\r\n    sync: {},\r\n    cancelSync: {}\r\n}), steps = _a.steps, sync = _a.sync, cancelSync = _a.cancelSync;\r\nvar processStep = function (stepId) { return steps[stepId].process(frame); };\r\nvar processFrame = function (timestamp) {\r\n    willRunNextFrame = false;\r\n    frame.delta = useDefaultElapsed\r\n        ? defaultElapsed\r\n        : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\r\n    if (!useDefaultElapsed)\r\n        defaultElapsed = frame.delta;\r\n    frame.timestamp = timestamp;\r\n    isProcessing = true;\r\n    stepsOrder.forEach(processStep);\r\n    isProcessing = false;\r\n    if (willRunNextFrame) {\r\n        useDefaultElapsed = false;\r\n        onNextFrame(processFrame);\r\n    }\r\n};\r\nvar startLoop = function () {\r\n    willRunNextFrame = true;\r\n    useDefaultElapsed = true;\r\n    if (!isProcessing)\r\n        onNextFrame(processFrame);\r\n};\r\nvar getFrameData = function () { return frame; };\n\nvar DEFAULT_OVERSHOOT_STRENGTH = 1.525;\nvar reversed = function (easing) {\n    return function (p) {\n        return 1 - easing(1 - p);\n    };\n};\nvar mirrored = function (easing) {\n    return function (p) {\n        return p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n    };\n};\nvar createReversedEasing = reversed;\nvar createExpoIn = function (power) {\n    return function (p) {\n        return Math.pow(p, power);\n    };\n};\nvar createBackIn = function (power) {\n    return function (p) {\n        return p * p * ((power + 1) * p - power);\n    };\n};\nvar createAnticipateEasing = function (power) {\n    var backEasing = createBackIn(power);\n    return function (p) {\n        return (p *= 2) < 1 ? 0.5 * backEasing(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n    };\n};\nvar linear = function (p) {\n    return p;\n};\nvar easeIn = /*#__PURE__*/createExpoIn(2);\nvar easeOut = /*#__PURE__*/reversed(easeIn);\nvar easeInOut = /*#__PURE__*/mirrored(easeIn);\nvar circIn = function (p) {\n    return 1 - Math.sin(Math.acos(p));\n};\nvar circOut = /*#__PURE__*/reversed(circIn);\nvar circInOut = /*#__PURE__*/mirrored(circOut);\nvar backIn = /*#__PURE__*/createBackIn(DEFAULT_OVERSHOOT_STRENGTH);\nvar backOut = /*#__PURE__*/reversed(backIn);\nvar backInOut = /*#__PURE__*/mirrored(backIn);\nvar anticipate = /*#__PURE__*/createAnticipateEasing(DEFAULT_OVERSHOOT_STRENGTH);\nvar NEWTON_ITERATIONS = 8;\nvar NEWTON_MIN_SLOPE = 0.001;\nvar SUBDIVISION_PRECISION = 0.0000001;\nvar SUBDIVISION_MAX_ITERATIONS = 10;\nvar K_SPLINE_TABLE_SIZE = 11;\nvar K_SAMPLE_STEP_SIZE = 1.0 / (K_SPLINE_TABLE_SIZE - 1.0);\nvar FLOAT_32_SUPPORTED = typeof Float32Array !== 'undefined';\nvar a = function (a1, a2) {\n    return 1.0 - 3.0 * a2 + 3.0 * a1;\n};\nvar b = function (a1, a2) {\n    return 3.0 * a2 - 6.0 * a1;\n};\nvar c = function (a1) {\n    return 3.0 * a1;\n};\nvar getSlope = function (t, a1, a2) {\n    return 3.0 * a(a1, a2) * t * t + 2.0 * b(a1, a2) * t + c(a1);\n};\nvar calcBezier = function (t, a1, a2) {\n    return ((a(a1, a2) * t + b(a1, a2)) * t + c(a1)) * t;\n};\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    var sampleValues = FLOAT_32_SUPPORTED ? new Float32Array(K_SPLINE_TABLE_SIZE) : new Array(K_SPLINE_TABLE_SIZE);\n    var binarySubdivide = function (aX, aA, aB) {\n        var i = 0;\n        var currentX;\n        var currentT;\n        do {\n            currentT = aA + (aB - aA) / 2.0;\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\n            if (currentX > 0.0) {\n                aB = currentT;\n            } else {\n                aA = currentT;\n            }\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n        return currentT;\n    };\n    var newtonRaphsonIterate = function (aX, aGuessT) {\n        var i = 0;\n        var currentSlope = 0;\n        var currentX;\n        for (; i < NEWTON_ITERATIONS; ++i) {\n            currentSlope = getSlope(aGuessT, mX1, mX2);\n            if (currentSlope === 0.0) {\n                return aGuessT;\n            }\n            currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n            aGuessT -= currentX / currentSlope;\n        }\n        return aGuessT;\n    };\n    var calcSampleValues = function () {\n        for (var i = 0; i < K_SPLINE_TABLE_SIZE; ++i) {\n            sampleValues[i] = calcBezier(i * K_SAMPLE_STEP_SIZE, mX1, mX2);\n        }\n    };\n    var getTForX = function (aX) {\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = K_SPLINE_TABLE_SIZE - 1;\n        var dist = 0.0;\n        var guessForT = 0.0;\n        var initialSlope = 0.0;\n        for (; currentSample !== lastSample && sampleValues[currentSample] <= aX; ++currentSample) {\n            intervalStart += K_SAMPLE_STEP_SIZE;\n        }\n        --currentSample;\n        dist = (aX - sampleValues[currentSample]) / (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n        guessForT = intervalStart + dist * K_SAMPLE_STEP_SIZE;\n        initialSlope = getSlope(guessForT, mX1, mX2);\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n            return newtonRaphsonIterate(aX, guessForT);\n        } else if (initialSlope === 0.0) {\n            return guessForT;\n        } else {\n            return binarySubdivide(aX, intervalStart, intervalStart + K_SAMPLE_STEP_SIZE);\n        }\n    };\n    calcSampleValues();\n    var resolver = function (aX) {\n        var returnValue;\n        if (mX1 === mY1 && mX2 === mY2) {\n            returnValue = aX;\n        } else if (aX === 0) {\n            returnValue = 0;\n        } else if (aX === 1) {\n            returnValue = 1;\n        } else {\n            returnValue = calcBezier(getTForX(aX), mY1, mY2);\n        }\n        return returnValue;\n    };\n    return resolver;\n}\n\nvar zeroPoint = {\r\n    x: 0,\r\n    y: 0,\r\n    z: 0\r\n};\r\nvar isNum = function (v) { return typeof v === 'number'; };\n\nvar radiansToDegrees = (function (radians) { return (radians * 180) / Math.PI; });\n\nvar angle = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    return radiansToDegrees(Math.atan2(b.y - a.y, b.x - a.x));\r\n});\n\nvar applyOffset = (function (from, to) {\r\n    var hasReceivedFrom = true;\r\n    if (to === undefined) {\r\n        to = from;\r\n        hasReceivedFrom = false;\r\n    }\r\n    return function (v) {\r\n        if (hasReceivedFrom) {\r\n            return v - from + to;\r\n        }\r\n        else {\r\n            from = v;\r\n            hasReceivedFrom = true;\r\n            return to;\r\n        }\r\n    };\r\n});\n\nvar curryRange = (function (func) { return function (min, max, v) { return (v !== undefined ? func(min, max, v) : function (cv) { return func(min, max, cv); }); }; });\n\nvar clamp$1 = function (min, max, v) {\r\n    return Math.min(Math.max(v, min), max);\r\n};\r\nvar clamp$1$1 = curryRange(clamp$1);\n\nvar conditional = (function (check, apply) { return function (v) {\r\n    return check(v) ? apply(v) : v;\r\n}; });\n\nvar degreesToRadians = (function (degrees$$1) { return (degrees$$1 * Math.PI) / 180; });\n\nvar isPoint = (function (point) {\r\n    return point.hasOwnProperty('x') && point.hasOwnProperty('y');\r\n});\n\nvar isPoint3D = (function (point) {\r\n    return isPoint(point) && point.hasOwnProperty('z');\r\n});\n\nvar distance1D = function (a, b) { return Math.abs(a - b); };\r\nvar distance = (function (a, b) {\r\n    if (b === void 0) { b = zeroPoint; }\r\n    if (isNum(a) && isNum(b)) {\r\n        return distance1D(a, b);\r\n    }\r\n    else if (isPoint(a) && isPoint(b)) {\r\n        var xDelta = distance1D(a.x, b.x);\r\n        var yDelta = distance1D(a.y, b.y);\r\n        var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\r\n        return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\r\n    }\r\n    return 0;\r\n});\n\nvar progress = (function (from, to, value) {\r\n    var toFromDifference = to - from;\r\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\r\n});\n\nvar mix = (function (from, to, progress) {\r\n    return -progress * from + progress * to + from;\r\n});\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nvar __assign$2 = function() {\r\n    __assign$2 = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign$2.apply(this, arguments);\r\n};\n\nvar mixLinearColor = function (from, to, v) {\r\n    var fromExpo = from * from;\r\n    var toExpo = to * to;\r\n    return Math.sqrt(Math.max(0, v * (toExpo - fromExpo) + fromExpo));\r\n};\r\nvar colorTypes = [hex, rgba, hsla];\r\nvar getColorType = function (v) {\r\n    return colorTypes.find(function (type) { return type.test(v); });\r\n};\r\nvar notAnimatable = function (color$$1) {\r\n    return \"'\" + color$$1 + \"' is not an animatable color. Use the equivalent color code instead.\";\r\n};\r\nvar mixColor = (function (from, to) {\r\n    var fromColorType = getColorType(from);\r\n    var toColorType = getColorType(to);\r\n    invariant(!!fromColorType, notAnimatable(from));\r\n    invariant(!!toColorType, notAnimatable(to));\r\n    invariant(fromColorType.transform === toColorType.transform, 'Both colors must be hex/RGBA, OR both must be HSLA.');\r\n    var fromColor = fromColorType.parse(from);\r\n    var toColor = toColorType.parse(to);\r\n    var blended = __assign$2({}, fromColor);\r\n    var mixFunc = fromColorType === hsla ? mix : mixLinearColor;\r\n    return function (v) {\r\n        for (var key in blended) {\r\n            if (key !== 'alpha') {\r\n                blended[key] = mixFunc(fromColor[key], toColor[key], v);\r\n            }\r\n        }\r\n        blended.alpha = mix(fromColor.alpha, toColor.alpha, v);\r\n        return fromColorType.transform(blended);\r\n    };\r\n});\n\nvar combineFunctions = function (a, b) { return function (v) { return b(a(v)); }; };\r\nvar pipe = (function () {\r\n    var transformers = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        transformers[_i] = arguments[_i];\r\n    }\r\n    return transformers.reduce(combineFunctions);\r\n});\n\nfunction getMixer(origin, target) {\r\n    if (isNum(origin)) {\r\n        return function (v) { return mix(origin, target, v); };\r\n    }\r\n    else if (color.test(origin)) {\r\n        return mixColor(origin, target);\r\n    }\r\n    else {\r\n        return mixComplex(origin, target);\r\n    }\r\n}\r\nvar mixArray = function (from, to) {\r\n    var output = from.slice();\r\n    var numValues = output.length;\r\n    var blendValue = from.map(function (fromThis, i) { return getMixer(fromThis, to[i]); });\r\n    return function (v) {\r\n        for (var i = 0; i < numValues; i++) {\r\n            output[i] = blendValue[i](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nvar mixObject = function (origin, target) {\r\n    var output = __assign$2({}, origin, target);\r\n    var blendValue = {};\r\n    for (var key in output) {\r\n        if (origin[key] !== undefined && target[key] !== undefined) {\r\n            blendValue[key] = getMixer(origin[key], target[key]);\r\n        }\r\n    }\r\n    return function (v) {\r\n        for (var key in blendValue) {\r\n            output[key] = blendValue[key](v);\r\n        }\r\n        return output;\r\n    };\r\n};\r\nfunction analyse(value) {\r\n    var parsed = complex.parse(value);\r\n    var numValues = parsed.length;\r\n    var numNumbers = 0;\r\n    var numRGB = 0;\r\n    var numHSL = 0;\r\n    for (var i = 0; i < numValues; i++) {\r\n        if (numNumbers || typeof parsed[i] === 'number') {\r\n            numNumbers++;\r\n        }\r\n        else {\r\n            if (parsed[i].hue !== undefined) {\r\n                numHSL++;\r\n            }\r\n            else {\r\n                numRGB++;\r\n            }\r\n        }\r\n    }\r\n    return { parsed: parsed, numNumbers: numNumbers, numRGB: numRGB, numHSL: numHSL };\r\n}\r\nvar mixComplex = function (origin, target) {\r\n    var template = complex.createTransformer(target);\r\n    var originStats = analyse(origin);\r\n    var targetStats = analyse(target);\r\n    invariant(originStats.numHSL === targetStats.numHSL &&\r\n        originStats.numRGB === targetStats.numRGB &&\r\n        originStats.numNumbers >= targetStats.numNumbers, \"Complex values '\" + origin + \"' and '\" + target + \"' too different to mix. Ensure all colors are of the same type.\");\r\n    return pipe(mixArray(originStats.parsed, targetStats.parsed), template);\r\n};\n\nvar mixNumber = function (from, to) { return function (p) { return mix(from, to, p); }; };\r\nfunction detectMixerFactory(v) {\r\n    if (typeof v === 'number') {\r\n        return mixNumber;\r\n    }\r\n    else if (typeof v === 'string') {\r\n        if (color.test(v)) {\r\n            return mixColor;\r\n        }\r\n        else {\r\n            return mixComplex;\r\n        }\r\n    }\r\n    else if (Array.isArray(v)) {\r\n        return mixArray;\r\n    }\r\n    else if (typeof v === 'object') {\r\n        return mixObject;\r\n    }\r\n}\r\nfunction createMixers(output, ease, customMixer) {\r\n    var mixers = [];\r\n    var mixerFactory = customMixer || detectMixerFactory(output[0]);\r\n    var numMixers = output.length - 1;\r\n    for (var i = 0; i < numMixers; i++) {\r\n        var mixer = mixerFactory(output[i], output[i + 1]);\r\n        if (ease) {\r\n            var easingFunction = Array.isArray(ease) ? ease[i] : ease;\r\n            mixer = pipe(easingFunction, mixer);\r\n        }\r\n        mixers.push(mixer);\r\n    }\r\n    return mixers;\r\n}\r\nfunction fastInterpolate(_a, _b) {\r\n    var from = _a[0], to = _a[1];\r\n    var mixer = _b[0];\r\n    return function (v) { return mixer(progress(from, to, v)); };\r\n}\r\nfunction slowInterpolate(input, mixers) {\r\n    var inputLength = input.length;\r\n    var lastInputIndex = inputLength - 1;\r\n    return function (v) {\r\n        var mixerIndex = 0;\r\n        var foundMixerIndex = false;\r\n        if (v <= input[0]) {\r\n            foundMixerIndex = true;\r\n        }\r\n        else if (v >= input[lastInputIndex]) {\r\n            mixerIndex = lastInputIndex - 1;\r\n            foundMixerIndex = true;\r\n        }\r\n        if (!foundMixerIndex) {\r\n            var i = 1;\r\n            for (; i < inputLength; i++) {\r\n                if (input[i] > v || i === lastInputIndex) {\r\n                    break;\r\n                }\r\n            }\r\n            mixerIndex = i - 1;\r\n        }\r\n        var progressInRange = progress(input[mixerIndex], input[mixerIndex + 1], v);\r\n        return mixers[mixerIndex](progressInRange);\r\n    };\r\n}\r\nfunction interpolate(input, output, _a) {\r\n    var _b = _a === void 0 ? {} : _a, _c = _b.clamp, clamp = _c === void 0 ? true : _c, ease = _b.ease, mixer = _b.mixer;\r\n    var inputLength = input.length;\r\n    invariant(inputLength === output.length, 'Both input and output ranges must be the same length');\r\n    invariant(!ease || !Array.isArray(ease) || ease.length === inputLength - 1, 'Array of easing functions must be of length `input.length - 1`, as it applies to the transitions **between** the defined values.');\r\n    if (input[0] > input[inputLength - 1]) {\r\n        input = [].concat(input);\r\n        output = [].concat(output);\r\n        input.reverse();\r\n        output.reverse();\r\n    }\r\n    var mixers = createMixers(output, ease, mixer);\r\n    var interpolator = inputLength === 2\r\n        ? fastInterpolate(input, mixers)\r\n        : slowInterpolate(input, mixers);\r\n    return clamp\r\n        ? pipe(clamp$1$1(input[0], input[inputLength - 1]), interpolator)\r\n        : interpolator;\r\n}\n\nvar pointFromVector = (function (origin, angle, distance) {\r\n    angle = degreesToRadians(angle);\r\n    return {\r\n        x: distance * Math.cos(angle) + origin.x,\r\n        y: distance * Math.sin(angle) + origin.y\r\n    };\r\n});\n\nvar toDecimal = (function (num, precision) {\r\n    if (precision === void 0) { precision = 2; }\r\n    precision = Math.pow(10, precision);\r\n    return Math.round(num * precision) / precision;\r\n});\n\nvar smoothFrame = (function (prevValue, nextValue, duration, smoothing) {\r\n    if (smoothing === void 0) { smoothing = 0; }\r\n    return toDecimal(prevValue +\r\n        (duration * (nextValue - prevValue)) / Math.max(smoothing, duration));\r\n});\n\nvar smooth = (function (strength) {\r\n    if (strength === void 0) { strength = 50; }\r\n    var previousValue = 0;\r\n    var lastUpdated = 0;\r\n    return function (v) {\r\n        var currentFramestamp = getFrameData().timestamp;\r\n        var timeDelta = currentFramestamp !== lastUpdated ? currentFramestamp - lastUpdated : 0;\r\n        var newValue = timeDelta\r\n            ? smoothFrame(previousValue, v, timeDelta, strength)\r\n            : previousValue;\r\n        lastUpdated = currentFramestamp;\r\n        previousValue = newValue;\r\n        return newValue;\r\n    };\r\n});\n\nvar snap = (function (points) {\r\n    if (typeof points === 'number') {\r\n        return function (v) { return Math.round(v / points) * points; };\r\n    }\r\n    else {\r\n        var i_1 = 0;\r\n        var numPoints_1 = points.length;\r\n        return function (v) {\r\n            var lastDistance = Math.abs(points[0] - v);\r\n            for (i_1 = 1; i_1 < numPoints_1; i_1++) {\r\n                var point = points[i_1];\r\n                var distance = Math.abs(point - v);\r\n                if (distance === 0)\r\n                    return point;\r\n                if (distance > lastDistance)\r\n                    return points[i_1 - 1];\r\n                if (i_1 === numPoints_1 - 1)\r\n                    return point;\r\n                lastDistance = distance;\r\n            }\r\n        };\r\n    }\r\n});\n\nvar identity = function (v) { return v; };\r\nvar springForce = function (alterDisplacement) {\r\n    if (alterDisplacement === void 0) { alterDisplacement = identity; }\r\n    return curryRange(function (constant, origin, v) {\r\n        var displacement = origin - v;\r\n        var springModifiedDisplacement = -(0 - constant + 1) * (0 - alterDisplacement(Math.abs(displacement)));\r\n        return displacement <= 0\r\n            ? origin + springModifiedDisplacement\r\n            : origin - springModifiedDisplacement;\r\n    });\r\n};\r\nvar springForceLinear = springForce();\r\nvar springForceExpo = springForce(Math.sqrt);\n\nvar velocityPerFrame = (function (xps, frameDuration) {\r\n    return isNum(xps) ? xps / (1000 / frameDuration) : 0;\r\n});\n\nvar velocityPerSecond = (function (velocity, frameDuration) {\r\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\r\n});\n\nvar wrap = function (min, max, v) {\r\n    var rangeSize = max - min;\r\n    return ((((v - min) % rangeSize) + rangeSize) % rangeSize) + min;\r\n};\r\nvar wrap$1 = curryRange(wrap);\n\nvar clampProgress = clamp$1$1(0, 1);\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar __assign$3 = function () {\n    __assign$3 = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$3.apply(this, arguments);\n};\n\nfunction __rest$1(s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    return t;\n}\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.uncachedValues,\n        uncachedValues = _b === void 0 ? new Set() : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (_a) {\n        if (_a === void 0) {\n            _a = {};\n        }\n        var props = __rest$1(_a, []);\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        function setValue(key, value) {\n            if (key.startsWith('--')) {\n                props.hasCSSVariable = true;\n            }\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] === currentValue) return;\n            if (changedValues.indexOf(key) === -1) {\n                changedValues.push(key);\n            }\n            if (!hasChanged) {\n                hasChanged = true;\n                sync.render(styler.render);\n            }\n        }\n        var styler = {\n            get: function (key, forceRead) {\n                if (forceRead === void 0) {\n                    forceRead = false;\n                }\n                var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n                return useCached ? state[key] : onRead(key, props);\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    setValue(values, value);\n                } else {\n                    for (var key in values) {\n                        setValue(key, values[key]);\n                    }\n                }\n                return this;\n            },\n            render: function (forceRender) {\n                if (forceRender === void 0) {\n                    forceRender = false;\n                }\n                if (hasChanged || forceRender === true) {\n                    onRender(state, props, changedValues);\n                    hasChanged = false;\n                    changedValues.length = 0;\n                }\n                return this;\n            }\n        };\n        return styler;\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\nvar setDomAttrs = function (element, attrs) {\n    for (var key in attrs) {\n        if (attrs.hasOwnProperty(key)) {\n            element.setAttribute(key, attrs[key]);\n        }\n    }\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\nvar setDashPrefix = function (key, prefixed) {\n    return dashCache.set(key, camelToDash(prefixed));\n};\nvar testPrefix = function (key) {\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style || noPrefix) {\n            camelCache.set(key, prefixedPropertyName);\n            setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar setServerProperty = function (key) {\n    return setDashPrefix(key, key);\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) isBrowser ? testPrefix(key) : setServerProperty(key);\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nfunction isTransformProp(key) {\n    return transformPropDictionary[key] === true;\n}\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar rounded = /*#__PURE__*/__assign$3({}, number, { transform: Math.round });\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    zIndex: rounded\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\nvar getValueAsType = function (value, type) {\n    return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\n\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ'\n};\nfunction isCustomTemplate(v) {\n    return typeof v === 'function';\n}\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration) {\n    var transformString = '';\n    var transformHasZ = false;\n    transformKeys.sort(sortTransformProps);\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        transformHasZ = key === 'z' ? true : transformHasZ;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += 'translateZ(0)';\n    } else {\n        transformString = transformString.trim();\n    }\n    if (isCustomTemplate(state.transform)) {\n        transformString = state.transform(transform, transformString);\n    } else if (transformIsDefault) {\n        transformString = 'none';\n    }\n    return transformString;\n}\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (styles === void 0) {\n        styles = {};\n    }\n    if (transform === void 0) {\n        transform = {};\n    }\n    if (transformOrigin === void 0) {\n        transformOrigin = {};\n    }\n    if (transformKeys === void 0) {\n        transformKeys = [];\n    }\n    if (isDashCase === void 0) {\n        isDashCase = false;\n    }\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    for (var key in state) {\n        var value = state[key];\n        var valueType = getValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (transformIsDefault) {\n                if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                    transformIsDefault = false;\n                }\n            }\n        } else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n            styles[prefixer(key, isDashCase)] = valueAsType;\n        }\n    }\n    if (hasTransform || typeof state.transform === 'function') {\n        styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration);\n    }\n    if (hasTransformOrigin) {\n        styles.transformOrigin = (transformOrigin.originX || 0) + \" \" + (transformOrigin.originY || 0) + \" \" + (transformOrigin.originZ || 0);\n    }\n    return styles;\n}\nfunction createStyleBuilder(enableHardwareAcceleration) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    var styles = {};\n    var transform = {};\n    var transformOrigin = {};\n    var transformKeys = [];\n    return function (state) {\n        transformKeys.length = 0;\n        buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, true);\n        return styles;\n    };\n}\n\nfunction onRead(key, options) {\n    var element = options.element,\n        preparseOutput = options.preparseOutput;\n    var defaultValueType = getValueType(key);\n    if (isTransformProp(key)) {\n        return defaultValueType ? defaultValueType.default || 0 : 0;\n    } else if (scrollKeys.has(key)) {\n        return element[key];\n    } else {\n        var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n        return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n    }\n}\nfunction onRender(state, _a, changedValues) {\n    var element = _a.element,\n        buildStyles = _a.buildStyles,\n        hasCSSVariable = _a.hasCSSVariable;\n    Object.assign(element.style, buildStyles(state));\n    if (hasCSSVariable) {\n        var numChangedValues = changedValues.length;\n        for (var i = 0; i < numChangedValues; i++) {\n            var key = changedValues[i];\n            if (key.startsWith('--')) {\n                element.style.setProperty(key, state[key]);\n            }\n        }\n    }\n    if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n        element[SCROLL_LEFT] = state[SCROLL_LEFT];\n    }\n    if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n        element[SCROLL_TOP] = state[SCROLL_TOP];\n    }\n}\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: onRead,\n    onRender: onRender,\n    uncachedValues: scrollKeys\n});\nfunction createCssStyler(element, _a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n        props = __rest$1(_a, [\"enableHardwareAcceleration\"]);\n    return cssStyler(__assign$3({ element: element, buildStyles: createStyleBuilder(enableHardwareAcceleration), preparseOutput: true }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\n\nvar ZERO_NOT_ZERO = 0.0000001;\nvar progressToPixels = function (progress, length) {\n    return progress * length + 'px';\n};\nvar build = function (state, dimensions, isPath, pathLength) {\n    var hasTransform = false;\n    var hasDashArray = false;\n    var props = {};\n    var dashArrayStyles = isPath ? {\n        pathLength: '0',\n        pathSpacing: \"\" + pathLength\n    } : undefined;\n    var scale$$1 = state.scale !== undefined ? state.scale || ZERO_NOT_ZERO : state.scaleX || 1;\n    var scaleY = state.scaleY !== undefined ? state.scaleY || ZERO_NOT_ZERO : scale$$1 || 1;\n    var transformOriginX = dimensions.width * (state.originX || 50) + dimensions.x;\n    var transformOriginY = dimensions.height * (state.originY || 50) + dimensions.y;\n    var scaleTransformX = -transformOriginX * (scale$$1 * 1);\n    var scaleTransformY = -transformOriginY * (scaleY * 1);\n    var scaleReplaceX = transformOriginX / scale$$1;\n    var scaleReplaceY = transformOriginY / scaleY;\n    var transform = {\n        translate: \"translate(\" + state.x + \", \" + state.y + \") \",\n        scale: \"translate(\" + scaleTransformX + \", \" + scaleTransformY + \") scale(\" + scale$$1 + \", \" + scaleY + \") translate(\" + scaleReplaceX + \", \" + scaleReplaceY + \") \",\n        rotate: \"rotate(\" + state.rotate + \", \" + transformOriginX + \", \" + transformOriginY + \") \",\n        skewX: \"skewX(\" + state.skewX + \") \",\n        skewY: \"skewY(\" + state.skewY + \") \"\n    };\n    for (var key in state) {\n        if (state.hasOwnProperty(key)) {\n            var value = state[key];\n            if (isTransformProp(key)) {\n                hasTransform = true;\n            } else if (isPath && (key === 'pathLength' || key === 'pathSpacing') && typeof value === 'number') {\n                hasDashArray = true;\n                dashArrayStyles[key] = progressToPixels(value, pathLength);\n            } else if (isPath && key === 'pathOffset') {\n                props['stroke-dashoffset'] = progressToPixels(-value, pathLength);\n            } else {\n                var attrKey = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n                props[attrKey] = value;\n            }\n        }\n    }\n    if (hasDashArray) {\n        props['stroke-dasharray'] = dashArrayStyles.pathLength + ' ' + dashArrayStyles.pathSpacing;\n    }\n    if (hasTransform) {\n        props.transform = '';\n        for (var key in transform) {\n            if (transform.hasOwnProperty(key)) {\n                var defaultValue = key === 'scale' ? '1' : '0';\n                props.transform += transform[key].replace(/undefined/g, defaultValue);\n            }\n        }\n    }\n    return props;\n};\n\nvar int = /*#__PURE__*/__assign$3({}, number, { transform: Math.round });\nvar valueTypes$1 = {\n    fill: color,\n    stroke: color,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    opacity: alpha,\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int\n};\nvar getValueType$1 = function (key) {\n    return valueTypes$1[key];\n};\n\nvar getDimensions = function (element) {\n    return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\nvar getSVGElementDimensions = function (element) {\n    try {\n        return getDimensions(element);\n    } catch (e) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n};\n\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType$1(key);\n            return valueType ? valueType.default : 0;\n        }\n    },\n    onRender: function (state, _a) {\n        var dimensions = _a.dimensions,\n            element = _a.element,\n            isPath = _a.isPath,\n            pathLength = _a.pathLength;\n        setDomAttrs(element, build(state, dimensions, isPath, pathLength));\n    }\n});\nvar svg = function (element) {\n    var dimensions = getSVGElementDimensions(element);\n    var props = {\n        element: element,\n        dimensions: dimensions,\n        isPath: false\n    };\n    if (element.tagName === 'path') {\n        props.isPath = true;\n        props.pathLength = element.getTotalLength();\n    }\n    return svgStyler(props);\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node instanceof HTMLElement) {\n        styler = createCssStyler(node, props);\n    } else if (node instanceof SVGElement) {\n        styler = svg(node);\n    } else if (node === window) {\n        styler = viewport(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\nvar Chainable = /*#__PURE__*/function () {\n    function Chainable(props) {\n        if (props === void 0) {\n            props = {};\n        }\n        this.props = props;\n    }\n    Chainable.prototype.applyMiddleware = function (middleware) {\n        return this.create(__assign({}, this.props, { middleware: this.props.middleware ? [middleware].concat(this.props.middleware) : [middleware] }));\n    };\n    Chainable.prototype.pipe = function () {\n        var funcs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            funcs[_i] = arguments[_i];\n        }\n        var pipedUpdate = funcs.length === 1 ? funcs[0] : pipe.apply(void 0, funcs);\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return update(pipedUpdate(v));\n            };\n        });\n    };\n    Chainable.prototype.while = function (predicate) {\n        return this.applyMiddleware(function (update, complete) {\n            return function (v) {\n                return predicate(v) ? update(v) : complete();\n            };\n        });\n    };\n    Chainable.prototype.filter = function (predicate) {\n        return this.applyMiddleware(function (update) {\n            return function (v) {\n                return predicate(v) && update(v);\n            };\n        });\n    };\n    return Chainable;\n}();\n\nvar Observer = /*#__PURE__*/function () {\n    function Observer(_a, observer) {\n        var middleware = _a.middleware,\n            onComplete = _a.onComplete;\n        var _this = this;\n        this.isActive = true;\n        this.update = function (v) {\n            if (_this.observer.update) _this.updateObserver(v);\n        };\n        this.complete = function () {\n            if (_this.observer.complete && _this.isActive) _this.observer.complete();\n            if (_this.onComplete) _this.onComplete();\n            _this.isActive = false;\n        };\n        this.error = function (err) {\n            if (_this.observer.error && _this.isActive) _this.observer.error(err);\n            _this.isActive = false;\n        };\n        this.observer = observer;\n        this.updateObserver = function (v) {\n            return observer.update(v);\n        };\n        this.onComplete = onComplete;\n        if (observer.update && middleware && middleware.length) {\n            middleware.forEach(function (m) {\n                return _this.updateObserver = m(_this.updateObserver, _this.complete);\n            });\n        }\n    }\n    return Observer;\n}();\nvar createObserver = function (observerCandidate, _a, onComplete) {\n    var middleware = _a.middleware;\n    if (typeof observerCandidate === 'function') {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, { update: observerCandidate });\n    } else {\n        return new Observer({ middleware: middleware, onComplete: onComplete }, observerCandidate);\n    }\n};\n\nvar Action = /*#__PURE__*/function (_super) {\n    __extends(Action, _super);\n    function Action() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Action.prototype.create = function (props) {\n        return new Action(props);\n    };\n    Action.prototype.start = function (observerCandidate) {\n        if (observerCandidate === void 0) {\n            observerCandidate = {};\n        }\n        var isComplete = false;\n        var subscription = {\n            stop: function () {\n                return undefined;\n            }\n        };\n        var _a = this.props,\n            init = _a.init,\n            observerProps = __rest(_a, [\"init\"]);\n        var observer = createObserver(observerCandidate, observerProps, function () {\n            isComplete = true;\n            subscription.stop();\n        });\n        var api = init(observer);\n        subscription = api ? __assign({}, subscription, api) : subscription;\n        if (observerCandidate.registerParent) {\n            observerCandidate.registerParent(subscription);\n        }\n        if (isComplete) subscription.stop();\n        return subscription;\n    };\n    return Action;\n}(Chainable);\nvar action = function (init) {\n    return new Action({ init: init });\n};\n\nvar BaseMulticast = /*#__PURE__*/function (_super) {\n    __extends(BaseMulticast, _super);\n    function BaseMulticast() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.subscribers = [];\n        return _this;\n    }\n    BaseMulticast.prototype.complete = function () {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.complete();\n        });\n    };\n    BaseMulticast.prototype.error = function (err) {\n        this.subscribers.forEach(function (subscriber) {\n            return subscriber.error(err);\n        });\n    };\n    BaseMulticast.prototype.update = function (v) {\n        for (var i = 0; i < this.subscribers.length; i++) {\n            this.subscribers[i].update(v);\n        }\n    };\n    BaseMulticast.prototype.subscribe = function (observerCandidate) {\n        var _this = this;\n        var observer = createObserver(observerCandidate, this.props);\n        this.subscribers.push(observer);\n        var subscription = {\n            unsubscribe: function () {\n                var index$$1 = _this.subscribers.indexOf(observer);\n                if (index$$1 !== -1) _this.subscribers.splice(index$$1, 1);\n            }\n        };\n        return subscription;\n    };\n    BaseMulticast.prototype.stop = function () {\n        if (this.parent) this.parent.stop();\n    };\n    BaseMulticast.prototype.registerParent = function (subscription) {\n        this.stop();\n        this.parent = subscription;\n    };\n    return BaseMulticast;\n}(Chainable);\n\nvar Multicast = /*#__PURE__*/function (_super) {\n    __extends(Multicast, _super);\n    function Multicast() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Multicast.prototype.create = function (props) {\n        return new Multicast(props);\n    };\n    return Multicast;\n}(BaseMulticast);\n\nvar stepProgress = function (steps, progress$$1) {\n    var segment = 1 / (steps - 1);\n    var subsegment = 1 / (2 * (steps - 1));\n    var percentProgressOfTarget = Math.min(progress$$1, 1);\n    var subsegmentProgressOfTarget = percentProgressOfTarget / subsegment;\n    var segmentProgressOfTarget = Math.floor((subsegmentProgressOfTarget + 1) / 2);\n    return segmentProgressOfTarget * segment;\n};\n\nvar calc = /*#__PURE__*/Object.freeze({\n    angle: angle,\n    degreesToRadians: degreesToRadians,\n    distance: distance,\n    isPoint3D: isPoint3D,\n    isPoint: isPoint,\n    dilate: mix,\n    getValueFromProgress: mix,\n    pointFromAngleAndDistance: pointFromVector,\n    getProgressFromValue: progress,\n    radiansToDegrees: radiansToDegrees,\n    smooth: smoothFrame,\n    speedPerFrame: velocityPerFrame,\n    speedPerSecond: velocityPerSecond,\n    stepProgress: stepProgress\n});\n\nvar isValueList = function (v) {\n    return Array.isArray(v);\n};\nvar isSingleValue = function (v) {\n    var typeOfV = typeof v;\n    return typeOfV === 'string' || typeOfV === 'number';\n};\nvar ValueReaction = /*#__PURE__*/function (_super) {\n    __extends(ValueReaction, _super);\n    function ValueReaction(props) {\n        var _this = _super.call(this, props) || this;\n        _this.scheduleVelocityCheck = function () {\n            return sync.postRender(_this.velocityCheck);\n        };\n        _this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        _this.prev = _this.current = props.value || 0;\n        if (isSingleValue(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v;\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getSingleVelocity(_this.current, _this.prev);\n            };\n        } else if (isValueList(_this.current)) {\n            _this.updateCurrent = function (v) {\n                return _this.current = v.slice();\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getListVelocity();\n            };\n        } else {\n            _this.updateCurrent = function (v) {\n                _this.current = {};\n                for (var key in v) {\n                    if (v.hasOwnProperty(key)) {\n                        _this.current[key] = v[key];\n                    }\n                }\n            };\n            _this.getVelocityOfCurrent = function () {\n                return _this.getMapVelocity();\n            };\n        }\n        if (props.initialSubscription) _this.subscribe(props.initialSubscription);\n        return _this;\n    }\n    ValueReaction.prototype.create = function (props) {\n        return new ValueReaction(props);\n    };\n    ValueReaction.prototype.get = function () {\n        return this.current;\n    };\n    ValueReaction.prototype.getVelocity = function () {\n        return this.getVelocityOfCurrent();\n    };\n    ValueReaction.prototype.update = function (v) {\n        _super.prototype.update.call(this, v);\n        this.prev = this.current;\n        this.updateCurrent(v);\n        var _a = getFrameData(),\n            delta = _a.delta,\n            timestamp = _a.timestamp;\n        this.timeDelta = delta;\n        this.lastUpdated = timestamp;\n        sync.postRender(this.scheduleVelocityCheck);\n    };\n    ValueReaction.prototype.subscribe = function (observerCandidate) {\n        var sub = _super.prototype.subscribe.call(this, observerCandidate);\n        this.subscribers[this.subscribers.length - 1].update(this.current);\n        return sub;\n    };\n    ValueReaction.prototype.getSingleVelocity = function (current, prev) {\n        return typeof current === 'number' && typeof prev === 'number' ? velocityPerSecond(current - prev, this.timeDelta) : velocityPerSecond(parseFloat(current) - parseFloat(prev), this.timeDelta) || 0;\n    };\n    ValueReaction.prototype.getListVelocity = function () {\n        var _this = this;\n        return this.current.map(function (c, i) {\n            return _this.getSingleVelocity(c, _this.prev[i]);\n        });\n    };\n    ValueReaction.prototype.getMapVelocity = function () {\n        var velocity = {};\n        for (var key in this.current) {\n            if (this.current.hasOwnProperty(key)) {\n                velocity[key] = this.getSingleVelocity(this.current[key], this.prev[key]);\n            }\n        }\n        return velocity;\n    };\n    return ValueReaction;\n}(BaseMulticast);\nvar value = function (value, initialSubscription) {\n    return new ValueReaction({ value: value, initialSubscription: initialSubscription });\n};\n\nvar multi = function (_a) {\n    var getCount = _a.getCount,\n        getFirst = _a.getFirst,\n        getOutput = _a.getOutput,\n        mapApi = _a.mapApi,\n        setProp = _a.setProp,\n        startActions = _a.startActions;\n    return function (actions) {\n        return action(function (_a) {\n            var update = _a.update,\n                complete = _a.complete,\n                error = _a.error;\n            var numActions = getCount(actions);\n            var output = getOutput();\n            var updateOutput = function () {\n                return update(output);\n            };\n            var numCompletedActions = 0;\n            var subs = startActions(actions, function (a, name) {\n                var hasCompleted = false;\n                return a.start({\n                    complete: function () {\n                        if (!hasCompleted) {\n                            hasCompleted = true;\n                            numCompletedActions++;\n                            if (numCompletedActions === numActions) sync.update(complete);\n                        }\n                    },\n                    error: error,\n                    update: function (v) {\n                        setProp(output, name, v);\n                        sync.update(updateOutput, false, true);\n                    }\n                });\n            });\n            return Object.keys(getFirst(subs)).reduce(function (api, methodName) {\n                api[methodName] = mapApi(subs, methodName);\n                return api;\n            }, {});\n        });\n    };\n};\n\nvar composite = /*#__PURE__*/multi({\n    getOutput: function () {\n        return {};\n    },\n    getCount: function (subs) {\n        return Object.keys(subs).length;\n    },\n    getFirst: function (subs) {\n        return subs[Object.keys(subs)[0]];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return Object.keys(subs).reduce(function (output, propKey) {\n                var _a;\n                if (subs[propKey][methodName]) {\n                    args[0] && args[0][propKey] !== undefined ? output[propKey] = subs[propKey][methodName](args[0][propKey]) : output[propKey] = (_a = subs[propKey])[methodName].apply(_a, args);\n                }\n                return output;\n            }, {});\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return Object.keys(actions).reduce(function (subs, key) {\n            subs[key] = starter(actions[key], key);\n            return subs;\n        }, {});\n    }\n});\n\nvar parallel = /*#__PURE__*/multi({\n    getOutput: function () {\n        return [];\n    },\n    getCount: function (subs) {\n        return subs.length;\n    },\n    getFirst: function (subs) {\n        return subs[0];\n    },\n    mapApi: function (subs, methodName) {\n        return function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            return subs.map(function (sub, i) {\n                if (sub[methodName]) {\n                    return Array.isArray(args[0]) ? sub[methodName](args[0][i]) : sub[methodName].apply(sub, args);\n                }\n            });\n        };\n    },\n    setProp: function (output, name, v) {\n        return output[name] = v;\n    },\n    startActions: function (actions, starter) {\n        return actions.map(function (action, i) {\n            return starter(action, i);\n        });\n    }\n});\nvar parallel$1 = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return parallel(actions);\n};\n\nvar createVectorTests = function (typeTests) {\n    var testNames = Object.keys(typeTests);\n    var isVectorProp = function (prop, key) {\n        return prop !== undefined && !typeTests[key](prop);\n    };\n    var getVectorKeys = function (props) {\n        return testNames.reduce(function (vectorKeys, key) {\n            if (isVectorProp(props[key], key)) vectorKeys.push(key);\n            return vectorKeys;\n        }, []);\n    };\n    var testVectorProps = function (props) {\n        return props && testNames.some(function (key) {\n            return isVectorProp(props[key], key);\n        });\n    };\n    return { getVectorKeys: getVectorKeys, testVectorProps: testVectorProps };\n};\nvar unitTypes = [px, percent, degrees, vh, vw];\nvar findUnitType = function (prop) {\n    return unitTypes.find(function (type) {\n        return type.test(prop);\n    });\n};\nvar isUnitProp = function (prop) {\n    return Boolean(findUnitType(prop));\n};\nvar createAction = function (action, props) {\n    return action(props);\n};\nvar reduceArrayValue = function (i) {\n    return function (props, key) {\n        props[key] = props[key][i];\n        return props;\n    };\n};\nvar createArrayAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionList = props[firstVectorKey].map(function (v, i) {\n        var childActionProps = vectorKeys.reduce(reduceArrayValue(i), __assign({}, props));\n        return getActionCreator(v)(action, childActionProps);\n    });\n    return parallel$1.apply(void 0, actionList);\n};\nvar reduceObjectValue = function (key) {\n    return function (props, propKey) {\n        props[propKey] = props[propKey][key];\n        return props;\n    };\n};\nvar createObjectAction = function (action, props, vectorKeys) {\n    var firstVectorKey = vectorKeys[0];\n    var actionMap = Object.keys(props[firstVectorKey]).reduce(function (map, key) {\n        var childActionProps = vectorKeys.reduce(reduceObjectValue(key), __assign({}, props));\n        map[key] = getActionCreator(props[firstVectorKey][key])(action, childActionProps);\n        return map;\n    }, {});\n    return composite(actionMap);\n};\nvar createUnitAction = function (action, _a) {\n    var from = _a.from,\n        to = _a.to,\n        props = __rest(_a, [\"from\", \"to\"]);\n    var unitType = findUnitType(from) || findUnitType(to);\n    var transform = unitType.transform,\n        parse = unitType.parse;\n    return action(__assign({}, props, { from: typeof from === 'string' ? parse(from) : from, to: typeof to === 'string' ? parse(to) : to })).pipe(transform);\n};\nvar createMixerAction = function (mixer) {\n    return function (action, _a) {\n        var from = _a.from,\n            to = _a.to,\n            props = __rest(_a, [\"from\", \"to\"]);\n        return action(__assign({}, props, { from: 0, to: 1 })).pipe(mixer(from, to));\n    };\n};\nvar createColorAction = /*#__PURE__*/createMixerAction(mixColor);\nvar createComplexAction = /*#__PURE__*/createMixerAction(mixComplex);\nvar createVectorAction = function (action, typeTests) {\n    var _a = createVectorTests(typeTests),\n        testVectorProps = _a.testVectorProps,\n        getVectorKeys = _a.getVectorKeys;\n    var vectorAction = function (props) {\n        var isVector = testVectorProps(props);\n        if (!isVector) return action(props);\n        var vectorKeys = getVectorKeys(props);\n        var testKey = vectorKeys[0];\n        var testProp = props[testKey];\n        return getActionCreator(testProp)(action, props, vectorKeys);\n    };\n    return vectorAction;\n};\nvar getActionCreator = function (prop) {\n    if (typeof prop === 'number') {\n        return createAction;\n    } else if (Array.isArray(prop)) {\n        return createArrayAction;\n    } else if (isUnitProp(prop)) {\n        return createUnitAction;\n    } else if (color.test(prop)) {\n        return createColorAction;\n    } else if (complex.test(prop)) {\n        return createComplexAction;\n    } else if (typeof prop === 'object') {\n        return createObjectAction;\n    } else {\n        return createAction;\n    }\n};\n\nvar decay = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0 : _b,\n            _c = props.from,\n            from = _c === void 0 ? 0 : _c,\n            _d = props.power,\n            power = _d === void 0 ? 0.8 : _d,\n            _e = props.timeConstant,\n            timeConstant = _e === void 0 ? 350 : _e,\n            _f = props.restDelta,\n            restDelta = _f === void 0 ? 0.5 : _f,\n            modifyTarget = props.modifyTarget;\n        var elapsed = 0;\n        var amplitude = power * velocity;\n        var idealTarget = Math.round(from + amplitude);\n        var target = typeof modifyTarget === 'undefined' ? idealTarget : modifyTarget(idealTarget);\n        var process = sync.update(function (_a) {\n            var frameDelta = _a.delta;\n            elapsed += frameDelta;\n            var delta = -amplitude * Math.exp(-elapsed / timeConstant);\n            var isMoving = delta > restDelta || delta < -restDelta;\n            var current = isMoving ? target + delta : target;\n            update(current);\n            if (!isMoving) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorDecay = /*#__PURE__*/createVectorAction(decay, {\n    from: number.test,\n    modifyTarget: function (func) {\n        return typeof func === 'function';\n    },\n    velocity: number.test\n});\n\nvar spring = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.velocity,\n            velocity = _b === void 0 ? 0.0 : _b;\n        var _c = props.from,\n            from = _c === void 0 ? 0.0 : _c,\n            _d = props.to,\n            to = _d === void 0 ? 0.0 : _d,\n            _e = props.stiffness,\n            stiffness = _e === void 0 ? 100 : _e,\n            _f = props.damping,\n            damping = _f === void 0 ? 10 : _f,\n            _g = props.mass,\n            mass = _g === void 0 ? 1.0 : _g,\n            _h = props.restSpeed,\n            restSpeed = _h === void 0 ? 0.01 : _h,\n            _j = props.restDelta,\n            restDelta = _j === void 0 ? 0.01 : _j;\n        var initialVelocity = velocity ? -(velocity / 1000) : 0.0;\n        var t = 0;\n        var delta = to - from;\n        var position = from;\n        var prevPosition = position;\n        var process = sync.update(function (_a) {\n            var timeDelta = _a.delta;\n            t += timeDelta;\n            var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n            var angularFreq = Math.sqrt(stiffness / mass) / 1000;\n            prevPosition = position;\n            if (dampingRatio < 1) {\n                var envelope = Math.exp(-dampingRatio * angularFreq * t);\n                var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n                position = to - envelope * ((initialVelocity + dampingRatio * angularFreq * delta) / expoDecay * Math.sin(expoDecay * t) + delta * Math.cos(expoDecay * t));\n            } else {\n                var envelope = Math.exp(-angularFreq * t);\n                position = to - envelope * (delta + (initialVelocity + angularFreq * delta) * t);\n            }\n            velocity = velocityPerSecond(position - prevPosition, timeDelta);\n            var isBelowVelocityThreshold = Math.abs(velocity) <= restSpeed;\n            var isBelowDisplacementThreshold = Math.abs(to - position) <= restDelta;\n            if (isBelowVelocityThreshold && isBelowDisplacementThreshold) {\n                position = to;\n                update(position);\n                cancelSync.update(process);\n                complete();\n            } else {\n                update(position);\n            }\n        }, true);\n        return {\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorSpring = /*#__PURE__*/createVectorAction(spring, {\n    from: number.test,\n    to: number.test,\n    stiffness: number.test,\n    damping: number.test,\n    mass: number.test,\n    velocity: number.test\n});\n\nvar scrubber = function (_a) {\n    var _b = _a.from,\n        from = _b === void 0 ? 0 : _b,\n        _c = _a.to,\n        to = _c === void 0 ? 1 : _c,\n        _d = _a.ease,\n        ease = _d === void 0 ? linear : _d,\n        _e = _a.reverseEase,\n        reverseEase = _e === void 0 ? false : _e;\n    if (reverseEase) {\n        ease = createReversedEasing(ease);\n    }\n    return action(function (_a) {\n        var update = _a.update;\n        return {\n            seek: function (progress$$1) {\n                return update(progress$$1);\n            }\n        };\n    }).pipe(ease, function (v) {\n        return mix(from, to, v);\n    });\n};\nvar vectorScrubber = /*#__PURE__*/createVectorAction(scrubber, {\n    ease: function (func) {\n        return typeof func === 'function';\n    },\n    from: number.test,\n    to: number.test\n});\n\nvar clampProgress$1 = /*#__PURE__*/clamp$1$1(0, 1);\nvar tween = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var _b = props.duration,\n            duration = _b === void 0 ? 300 : _b,\n            _c = props.ease,\n            ease = _c === void 0 ? easeOut : _c,\n            _d = props.flip,\n            flip = _d === void 0 ? 0 : _d,\n            _e = props.loop,\n            loop = _e === void 0 ? 0 : _e,\n            _f = props.yoyo,\n            yoyo = _f === void 0 ? 0 : _f,\n            _g = props.repeatDelay,\n            repeatDelay = _g === void 0 ? 0 : _g;\n        var _h = props.from,\n            from = _h === void 0 ? 0 : _h,\n            _j = props.to,\n            to = _j === void 0 ? 1 : _j,\n            _k = props.elapsed,\n            elapsed = _k === void 0 ? 0 : _k,\n            _l = props.flipCount,\n            flipCount = _l === void 0 ? 0 : _l,\n            _m = props.yoyoCount,\n            yoyoCount = _m === void 0 ? 0 : _m,\n            _o = props.loopCount,\n            loopCount = _o === void 0 ? 0 : _o;\n        var playhead = vectorScrubber({ from: from, to: to, ease: ease }).start(update);\n        var currentProgress = 0;\n        var process;\n        var isActive = false;\n        var reverseAnimation = function (reverseEase) {\n            if (reverseEase === void 0) {\n                reverseEase = false;\n            }\n            var _a;\n            _a = [to, from], from = _a[0], to = _a[1];\n            playhead = vectorScrubber({ from: from, to: to, ease: ease, reverseEase: reverseEase }).start(update);\n        };\n        var isTweenComplete = function () {\n            var isComplete = isActive && elapsed > duration + repeatDelay;\n            if (!isComplete) return false;\n            if (isComplete && !loop && !flip && !yoyo) return true;\n            elapsed = duration - (elapsed - repeatDelay);\n            if (loop && loopCount < loop) {\n                loopCount++;\n                return false;\n            } else if (flip && flipCount < flip) {\n                flipCount++;\n                reverseAnimation();\n                return false;\n            } else if (yoyo && yoyoCount < yoyo) {\n                yoyoCount++;\n                reverseAnimation(yoyoCount % 2 !== 0);\n                return false;\n            }\n            return true;\n        };\n        var updateTween = function () {\n            currentProgress = clampProgress$1(progress(0, duration, elapsed));\n            playhead.seek(currentProgress);\n        };\n        var startTimer = function () {\n            isActive = true;\n            process = sync.update(function (_a) {\n                var delta = _a.delta;\n                elapsed += delta;\n                updateTween();\n                if (isTweenComplete()) {\n                    cancelSync.update(process);\n                    complete && sync.update(complete, false, true);\n                }\n            }, true);\n        };\n        var stopTimer = function () {\n            isActive = false;\n            if (process) cancelSync.update(process);\n        };\n        startTimer();\n        return {\n            isActive: function () {\n                return isActive;\n            },\n            getElapsed: function () {\n                return clamp$1$1(0, duration, elapsed);\n            },\n            getProgress: function () {\n                return currentProgress;\n            },\n            stop: function () {\n                stopTimer();\n            },\n            pause: function () {\n                stopTimer();\n                return this;\n            },\n            resume: function () {\n                if (!isActive) startTimer();\n                return this;\n            },\n            seek: function (newProgress) {\n                elapsed = mix(0, duration, newProgress);\n                sync.update(updateTween, false, true);\n                return this;\n            },\n            reverse: function () {\n                reverseAnimation();\n                return this;\n            }\n        };\n    });\n};\n\nvar clampProgress$1$1 = /*#__PURE__*/clamp$1$1(0, 1);\nvar defaultEasings = function (values, easing$$1) {\n    return values.map(function () {\n        return easing$$1 || easeOut;\n    }).splice(0, values.length - 1);\n};\nvar defaultTimings = function (values) {\n    var numValues = values.length;\n    return values.map(function (value, i) {\n        return i !== 0 ? i / (numValues - 1) : 0;\n    });\n};\nvar interpolateScrubbers = function (input, scrubbers, update) {\n    var rangeLength = input.length;\n    var finalInputIndex = rangeLength - 1;\n    var finalScrubberIndex = finalInputIndex - 1;\n    var subs = scrubbers.map(function (scrub) {\n        return scrub.start(update);\n    });\n    return function (v) {\n        if (v <= input[0]) {\n            subs[0].seek(0);\n        }\n        if (v >= input[finalInputIndex]) {\n            subs[finalScrubberIndex].seek(1);\n        }\n        var i = 1;\n        for (; i < rangeLength; i++) {\n            if (input[i] > v || i === finalInputIndex) break;\n        }\n        var progressInRange = progress(input[i - 1], input[i], v);\n        subs[i - 1].seek(clampProgress$1$1(progressInRange));\n    };\n};\nvar keyframes = function (_a) {\n    var easings = _a.easings,\n        _b = _a.ease,\n        ease = _b === void 0 ? linear : _b,\n        times = _a.times,\n        values = _a.values,\n        tweenProps = __rest(_a, [\"easings\", \"ease\", \"times\", \"values\"]);\n    easings = Array.isArray(easings) ? easings : defaultEasings(values, easings);\n    times = times || defaultTimings(values);\n    var scrubbers = easings.map(function (easing$$1, i) {\n        return vectorScrubber({\n            from: values[i],\n            to: values[i + 1],\n            ease: easing$$1\n        });\n    });\n    return tween(__assign({}, tweenProps, { ease: ease })).applyMiddleware(function (update) {\n        return interpolateScrubbers(times, scrubbers, update);\n    });\n};\n\nvar physics = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return action(function (_a) {\n        var complete = _a.complete,\n            update = _a.update;\n        var _b = props.acceleration,\n            acceleration = _b === void 0 ? 0 : _b,\n            _c = props.friction,\n            friction = _c === void 0 ? 0 : _c,\n            _d = props.velocity,\n            velocity = _d === void 0 ? 0 : _d,\n            springStrength = props.springStrength,\n            to = props.to;\n        var _e = props.restSpeed,\n            restSpeed = _e === void 0 ? 0.001 : _e,\n            _f = props.from,\n            from = _f === void 0 ? 0 : _f;\n        var current = from;\n        var process = sync.update(function (_a) {\n            var delta = _a.delta;\n            var elapsed = Math.max(delta, 16);\n            if (acceleration) velocity += velocityPerFrame(acceleration, elapsed);\n            if (friction) velocity *= Math.pow(1 - friction, elapsed / 100);\n            if (springStrength !== undefined && to !== undefined) {\n                var distanceToTarget = to - current;\n                velocity += distanceToTarget * velocityPerFrame(springStrength, elapsed);\n            }\n            current += velocityPerFrame(velocity, elapsed);\n            update(current);\n            var isComplete = restSpeed !== false && (!velocity || Math.abs(velocity) <= restSpeed);\n            if (isComplete) {\n                cancelSync.update(process);\n                complete();\n            }\n        }, true);\n        return {\n            set: function (v) {\n                current = v;\n                return this;\n            },\n            setAcceleration: function (v) {\n                acceleration = v;\n                return this;\n            },\n            setFriction: function (v) {\n                friction = v;\n                return this;\n            },\n            setSpringStrength: function (v) {\n                springStrength = v;\n                return this;\n            },\n            setSpringTarget: function (v) {\n                to = v;\n                return this;\n            },\n            setVelocity: function (v) {\n                velocity = v;\n                return this;\n            },\n            stop: function () {\n                return cancelSync.update(process);\n            }\n        };\n    });\n};\nvar vectorPhysics = /*#__PURE__*/createVectorAction(physics, {\n    acceleration: number.test,\n    friction: number.test,\n    velocity: number.test,\n    from: number.test,\n    to: number.test,\n    springStrength: number.test\n});\n\nvar listen = function (element, events, options) {\n    return action(function (_a) {\n        var update = _a.update;\n        var eventNames = events.split(' ').map(function (eventName) {\n            element.addEventListener(eventName, update, options);\n            return eventName;\n        });\n        return {\n            stop: function () {\n                return eventNames.forEach(function (eventName) {\n                    return element.removeEventListener(eventName, update, options);\n                });\n            }\n        };\n    });\n};\n\nvar defaultPointerPos = function () {\n    return {\n        clientX: 0,\n        clientY: 0,\n        pageX: 0,\n        pageY: 0,\n        x: 0,\n        y: 0\n    };\n};\nvar eventToPoint = function (e, point) {\n    if (point === void 0) {\n        point = defaultPointerPos();\n    }\n    point.clientX = point.x = e.clientX;\n    point.clientY = point.y = e.clientY;\n    point.pageX = e.pageX;\n    point.pageY = e.pageY;\n    return point;\n};\n\nvar points = [/*#__PURE__*/defaultPointerPos()];\nvar isTouchDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointsLocation = function (_a) {\n        var touches = _a.touches;\n        isTouchDevice = true;\n        var numTouches = touches.length;\n        points.length = 0;\n        for (var i = 0; i < numTouches; i++) {\n            var thisTouch = touches[i];\n            points.push(eventToPoint(thisTouch));\n        }\n    };\n    listen(document, 'touchstart touchmove', {\n        passive: true,\n        capture: true\n    }).start(updatePointsLocation);\n}\nvar multitouch = function (_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.preventDefault,\n        preventDefault = _c === void 0 ? true : _c,\n        _d = _b.scale,\n        scale$$1 = _d === void 0 ? 1.0 : _d,\n        _e = _b.rotate,\n        rotate = _e === void 0 ? 0.0 : _e;\n    return action(function (_a) {\n        var update = _a.update;\n        var output = {\n            touches: points,\n            scale: scale$$1,\n            rotate: rotate\n        };\n        var initialDistance = 0.0;\n        var initialRotation = 0.0;\n        var isGesture = points.length > 1;\n        if (isGesture) {\n            var firstTouch = points[0],\n                secondTouch = points[1];\n            initialDistance = distance(firstTouch, secondTouch);\n            initialRotation = angle(firstTouch, secondTouch);\n        }\n        var updatePoint = function () {\n            if (isGesture) {\n                var firstTouch = points[0],\n                    secondTouch = points[1];\n                var newDistance = distance(firstTouch, secondTouch);\n                var newRotation = angle(firstTouch, secondTouch);\n                output.scale = scale$$1 * (newDistance / initialDistance);\n                output.rotate = rotate + (newRotation - initialRotation);\n            }\n            update(output);\n        };\n        var onMove = function (e) {\n            if (preventDefault || e.touches.length > 1) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'touchmove', {\n            passive: !preventDefault\n        }).start(onMove);\n        if (isTouchDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\nvar getIsTouchDevice = function () {\n    return isTouchDevice;\n};\n\nvar point = /*#__PURE__*/defaultPointerPos();\nvar isMouseDevice = false;\nif (typeof document !== 'undefined') {\n    var updatePointLocation = function (e) {\n        isMouseDevice = true;\n        eventToPoint(e, point);\n    };\n    listen(document, 'mousedown mousemove', true).start(updatePointLocation);\n}\nvar mouse = function (_a) {\n    var _b = (_a === void 0 ? {} : _a).preventDefault,\n        preventDefault = _b === void 0 ? true : _b;\n    return action(function (_a) {\n        var update = _a.update;\n        var updatePoint = function () {\n            return update(point);\n        };\n        var onMove = function (e) {\n            if (preventDefault) e.preventDefault();\n            sync.update(updatePoint);\n        };\n        var updateOnMove = listen(document, 'mousemove').start(onMove);\n        if (isMouseDevice) sync.update(updatePoint);\n        return {\n            stop: function () {\n                cancelSync.update(updatePoint);\n                updateOnMove.stop();\n            }\n        };\n    });\n};\n\nvar getFirstTouch = function (_a) {\n    var firstTouch = _a[0];\n    return firstTouch;\n};\nvar pointer = function (props) {\n    if (props === void 0) {\n        props = {};\n    }\n    return getIsTouchDevice() ? multitouch(props).pipe(function (_a) {\n        var touches = _a.touches;\n        return touches;\n    }, getFirstTouch) : mouse(props);\n};\nvar index$1$1 = function (_a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var x = _a.x,\n        y = _a.y,\n        props = __rest(_a, [\"x\", \"y\"]);\n    if (x !== undefined || y !== undefined) {\n        var applyXOffset_1 = applyOffset(x || 0);\n        var applyYOffset_1 = applyOffset(y || 0);\n        var delta_1 = { x: 0, y: 0 };\n        return pointer(props).pipe(function (point) {\n            delta_1.x = applyXOffset_1(point.x);\n            delta_1.y = applyYOffset_1(point.y);\n            return delta_1;\n        });\n    } else {\n        return pointer(props);\n    }\n};\n\nvar chain = function () {\n    var actions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        actions[_i] = arguments[_i];\n    }\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        var i = 0;\n        var current;\n        var playCurrent = function () {\n            current = actions[i].start({\n                complete: function () {\n                    i++;\n                    i >= actions.length ? complete() : playCurrent();\n                },\n                update: update\n            });\n        };\n        playCurrent();\n        return {\n            stop: function () {\n                return current && current.stop();\n            }\n        };\n    });\n};\n\nvar delay = function (timeToDelay) {\n    return action(function (_a) {\n        var complete = _a.complete;\n        var timeout = setTimeout(complete, timeToDelay);\n        return {\n            stop: function () {\n                return clearTimeout(timeout);\n            }\n        };\n    });\n};\n\nvar appendUnit = function (unit) {\n    return function (v) {\n        return \"\" + v + unit;\n    };\n};\nvar steps$2 = function (st, min, max) {\n    if (min === void 0) {\n        min = 0;\n    }\n    if (max === void 0) {\n        max = 1;\n    }\n    return function (v) {\n        var current = progress(min, max, v);\n        return mix(min, max, stepProgress(st, current));\n    };\n};\nvar transformMap = function (childTransformers) {\n    return function (v) {\n        var output = __assign({}, v);\n        for (var key in childTransformers) {\n            if (childTransformers.hasOwnProperty(key)) {\n                var childTransformer = childTransformers[key];\n                output[key] = childTransformer(v[key]);\n            }\n        }\n        return output;\n    };\n};\n\nvar transformers = /*#__PURE__*/Object.freeze({\n    applyOffset: applyOffset,\n    clamp: clamp$1$1,\n    conditional: conditional,\n    interpolate: interpolate,\n    blendArray: mixArray,\n    blendColor: mixColor,\n    pipe: pipe,\n    smooth: smooth,\n    snap: snap,\n    generateStaticSpring: springForce,\n    nonlinearSpring: springForceExpo,\n    linearSpring: springForceLinear,\n    wrap: wrap$1,\n    appendUnit: appendUnit,\n    steps: steps$2,\n    transformMap: transformMap\n});\n\nvar getPoseValues = function (_a) {\n    var transition = _a.transition,\n        flip = _a.flip,\n        delay = _a.delay,\n        delayChildren = _a.delayChildren,\n        staggerChildren = _a.staggerChildren,\n        staggerDirection = _a.staggerDirection,\n        afterChildren = _a.afterChildren,\n        beforeChildren = _a.beforeChildren,\n        preTransition = _a.preTransition,\n        applyAtStart = _a.applyAtStart,\n        applyAtEnd = _a.applyAtEnd,\n        props = __rest(_a, [\"transition\", \"flip\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"afterChildren\", \"beforeChildren\", \"preTransition\", \"applyAtStart\", \"applyAtEnd\"]);\n    return props;\n};\nvar selectPoses = function (_a) {\n    var label = _a.label,\n        props = _a.props,\n        values = _a.values,\n        parentValues = _a.parentValues,\n        ancestorValues = _a.ancestorValues,\n        onChange = _a.onChange,\n        passive = _a.passive,\n        initialPose = _a.initialPose,\n        poses = __rest(_a, [\"label\", \"props\", \"values\", \"parentValues\", \"ancestorValues\", \"onChange\", \"passive\", \"initialPose\"]);\n    return poses;\n};\nvar selectAllValues = function (values, selectValue) {\n    var allValues = {};\n    values.forEach(function (value, key) {\n        return allValues[key] = selectValue(value);\n    });\n    return allValues;\n};\n\nvar resolveProp = function (target, props) {\n    return typeof target === 'function' ? target(props) : target;\n};\nvar poseDefault = function (pose, prop, defaultValue, resolveProps) {\n    return pose && pose[prop] !== undefined ? resolveProp(pose[prop], resolveProps) : defaultValue;\n};\nvar startChildAnimations = function (children, next, pose, props) {\n    var animations = [];\n    var delay = poseDefault(pose, 'delayChildren', 0, props);\n    var stagger = poseDefault(pose, 'staggerChildren', 0, props);\n    var staggerDirection = poseDefault(pose, 'staggerDirection', 1, props);\n    var maxStaggerDuration = (children.size - 1) * stagger;\n    var generateStaggerDuration = staggerDirection === 1 ? function (i) {\n        return i * stagger;\n    } : function (i) {\n        return maxStaggerDuration - i * stagger;\n    };\n    Array.from(children).forEach(function (child, i) {\n        animations.push(child.set(next, {\n            delay: delay + generateStaggerDuration(i)\n        }));\n    });\n    return animations;\n};\nvar resolveTransition = function (transition, key, value, props, convertTransitionDefinition, getInstantTransition) {\n    var resolvedTransition;\n    if (typeof transition === 'function') {\n        var resolvedTransitionMap = transition(props);\n        resolvedTransition = resolveTransition(resolvedTransitionMap, key, value, props, convertTransitionDefinition, getInstantTransition);\n    } else if (transition[key] || transition.default) {\n        var keyTransition = transition[key] || transition.default;\n        if (typeof keyTransition === 'function') {\n            resolvedTransition = keyTransition(props);\n        } else {\n            resolvedTransition = keyTransition;\n        }\n    } else {\n        resolvedTransition = transition;\n    }\n    return resolvedTransition === false ? getInstantTransition(value, props) : convertTransitionDefinition(value, resolvedTransition, props);\n};\nvar findInsertionIndex = function (poseList, priorityList, priorityIndex) {\n    var insertionIndex = 0;\n    for (var i = priorityIndex - 1; i >= 0; i--) {\n        var nextHighestPriorityIndex = poseList.indexOf(priorityList[i]);\n        if (nextHighestPriorityIndex !== -1) {\n            insertionIndex = nextHighestPriorityIndex + 1;\n            break;\n        }\n    }\n    return insertionIndex;\n};\nvar applyValues = function (toApply, values, props, setValue, setValueNative) {\n    invariant(typeof toApply === 'object', 'applyAtStart and applyAtEnd must be of type object');\n    return Object.keys(toApply).forEach(function (key) {\n        var valueToSet = resolveProp(toApply[key], props);\n        values.has(key) ? setValue(values.get(key), valueToSet) : setValueNative(key, valueToSet, props);\n    });\n};\nvar createPoseSetter = function (setterProps) {\n    var state = setterProps.state,\n        poses = setterProps.poses,\n        startAction = setterProps.startAction,\n        stopAction = setterProps.stopAction,\n        getInstantTransition = setterProps.getInstantTransition,\n        addActionDelay = setterProps.addActionDelay,\n        getTransitionProps = setterProps.getTransitionProps,\n        resolveTarget = setterProps.resolveTarget,\n        transformPose = setterProps.transformPose,\n        posePriority = setterProps.posePriority,\n        convertTransitionDefinition = setterProps.convertTransitionDefinition,\n        setValue = setterProps.setValue,\n        setValueNative = setterProps.setValueNative,\n        forceRender = setterProps.forceRender;\n    return function (next, nextProps, propagate) {\n        if (nextProps === void 0) {\n            nextProps = {};\n        }\n        if (propagate === void 0) {\n            propagate = true;\n        }\n        var children = state.children,\n            values = state.values,\n            props = state.props,\n            activeActions = state.activeActions,\n            activePoses = state.activePoses;\n        var _a = nextProps.delay,\n            delay = _a === void 0 ? 0 : _a;\n        var hasChildren = children.size;\n        var baseTransitionProps = __assign({}, props, nextProps);\n        var nextPose = poses[next];\n        var getChildAnimations = function () {\n            return hasChildren && propagate ? startChildAnimations(children, next, nextPose, baseTransitionProps) : [];\n        };\n        var getParentAnimations = function () {\n            if (!nextPose) return [];\n            var applyAtStart = nextPose.applyAtStart;\n            if (applyAtStart) {\n                applyValues(applyAtStart, values, baseTransitionProps, setValue, setValueNative);\n                if (forceRender) forceRender(baseTransitionProps);\n            }\n            if (transformPose) nextPose = transformPose(nextPose, next, state);\n            var preTransition = nextPose.preTransition,\n                getTransition = nextPose.transition,\n                applyAtEnd = nextPose.applyAtEnd;\n            if (preTransition) preTransition(baseTransitionProps);\n            var animations = Object.keys(getPoseValues(nextPose)).map(function (key) {\n                var valuePoses = activePoses.has(key) ? activePoses.get(key) : (activePoses.set(key, []), activePoses.get(key));\n                var existingIndex = valuePoses.indexOf(next);\n                if (existingIndex !== -1) valuePoses.splice(existingIndex, 1);\n                var priority = posePriority ? posePriority.indexOf(next) : 0;\n                var insertionIndex = priority <= 0 ? 0 : findInsertionIndex(valuePoses, posePriority, priority);\n                valuePoses.splice(insertionIndex, 0, next);\n                return insertionIndex === 0 ? new Promise(function (complete) {\n                    var value = values.get(key);\n                    var transitionProps = __assign({}, baseTransitionProps, { key: key,\n                        value: value });\n                    var target = resolveTarget(value, resolveProp(nextPose[key], transitionProps));\n                    if (activeActions.has(key)) stopAction(activeActions.get(key));\n                    var resolveTransitionProps = __assign({ to: target }, transitionProps, getTransitionProps(value, target, transitionProps));\n                    var transition = resolveTransition(getTransition, key, value, resolveTransitionProps, convertTransitionDefinition, getInstantTransition);\n                    var poseDelay = delay || resolveProp(nextPose.delay, transitionProps);\n                    if (poseDelay) {\n                        transition = addActionDelay(poseDelay, transition);\n                    }\n                    activeActions.set(key, startAction(value, transition, complete));\n                }) : Promise.resolve();\n            });\n            return applyAtEnd ? [Promise.all(animations).then(function () {\n                applyValues(applyAtEnd, values, baseTransitionProps, setValue, setValueNative);\n            })] : animations;\n        };\n        if (nextPose && hasChildren) {\n            if (resolveProp(nextPose.beforeChildren, baseTransitionProps)) {\n                return Promise.all(getParentAnimations()).then(function () {\n                    return Promise.all(getChildAnimations());\n                });\n            } else if (resolveProp(nextPose.afterChildren, baseTransitionProps)) {\n                return Promise.all(getChildAnimations()).then(function () {\n                    return Promise.all(getParentAnimations());\n                });\n            }\n        }\n        return Promise.all(getParentAnimations().concat(getChildAnimations()));\n    };\n};\n\nvar DEFAULT_INITIAL_POSE = 'init';\nvar isScale = function (key) {\n    return key.includes('scale');\n};\nvar defaultReadValueFromSource = function (key) {\n    return isScale(key) ? 1 : 0;\n};\nvar readValueFromPose = function (pose, key, props) {\n    var valueToResolve = pose.applyAtEnd && pose.applyAtEnd[key] !== undefined ? pose.applyAtEnd[key] : pose[key] !== undefined ? pose[key] : pose.applyAtStart && pose.applyAtStart[key] !== undefined ? pose.applyAtStart[key] : 0;\n    return resolveProp(valueToResolve, props);\n};\nvar getPosesToSearch = function (pose) {\n    var posesToSearch = Array.isArray(pose) ? pose : [pose];\n    posesToSearch.push(DEFAULT_INITIAL_POSE);\n    return posesToSearch;\n};\nvar getInitialValue = function (poses, key, initialPose, props, readValueFromSource, activePoses) {\n    if (readValueFromSource === void 0) {\n        readValueFromSource = defaultReadValueFromSource;\n    }\n    var posesToSearch = getPosesToSearch(initialPose);\n    var pose = posesToSearch.filter(Boolean).find(function (name) {\n        var thisPose = poses[name];\n        return thisPose && (thisPose[key] !== undefined || thisPose.applyAtStart && thisPose.applyAtStart[key] !== undefined || thisPose.applyAtEnd && thisPose.applyAtEnd[key] !== undefined);\n    });\n    activePoses.set(key, [pose || DEFAULT_INITIAL_POSE]);\n    return pose ? readValueFromPose(poses[pose], key, props) : readValueFromSource(key, props);\n};\nvar createValues = function (values, _a) {\n    var userSetValues = _a.userSetValues,\n        createValue = _a.createValue,\n        convertValue = _a.convertValue,\n        readValueFromSource = _a.readValueFromSource,\n        initialPose = _a.initialPose,\n        poses = _a.poses,\n        activePoses = _a.activePoses,\n        props = _a.props;\n    return function (key) {\n        if (values.has(key)) return;\n        var value;\n        if (userSetValues && userSetValues[key] !== undefined) {\n            value = convertValue(userSetValues[key], key, props);\n        } else {\n            var initValue = getInitialValue(poses, key, initialPose, props, readValueFromSource, activePoses);\n            value = createValue(initValue, key, props);\n        }\n        values.set(key, value);\n    };\n};\nvar scrapeValuesFromPose = function (values, props) {\n    return function (key) {\n        var pose = props.poses[key];\n        Object.keys(getPoseValues(pose)).forEach(createValues(values, props));\n    };\n};\nvar getAncestorValue = function (key, fromParent, ancestors) {\n    if (fromParent === true) {\n        return ancestors[0] && ancestors[0].values.get(key);\n    } else {\n        var foundAncestor = ancestors.find(function (_a) {\n            var label = _a.label;\n            return label === fromParent;\n        });\n        return foundAncestor && foundAncestor.values.get(key);\n    }\n};\nvar bindPassiveValues = function (values, _a) {\n    var passive = _a.passive,\n        ancestorValues = _a.ancestorValues,\n        createValue = _a.createValue,\n        readValue = _a.readValue,\n        props = _a.props;\n    return function (key) {\n        var _a = passive[key],\n            valueKey = _a[0],\n            passiveProps = _a[1],\n            fromParent = _a[2];\n        var valueToBind = fromParent && ancestorValues.length ? getAncestorValue(valueKey, fromParent, ancestorValues) : values.has(valueKey) ? values.get(valueKey) : false;\n        if (!valueToBind) return;\n        var newValue = createValue(readValue(valueToBind), key, props, {\n            passiveParentKey: valueKey,\n            passiveParent: valueToBind,\n            passiveProps: passiveProps\n        });\n        values.set(key, newValue);\n    };\n};\nvar setNativeValues = function (_a) {\n    var setValueNative = _a.setValueNative,\n        initialPose = _a.initialPose,\n        props = _a.props,\n        poses = _a.poses;\n    var valuesHaveSet = new Set();\n    var setValues = function (pose, propKey) {\n        if (pose[propKey]) {\n            for (var key in pose[propKey]) {\n                if (!valuesHaveSet.has(key)) {\n                    valuesHaveSet.add(key);\n                    setValueNative(key, resolveProp(pose[propKey][key], props), props);\n                }\n            }\n        }\n    };\n    getPosesToSearch(initialPose).forEach(function (poseKey) {\n        var pose = poses[poseKey];\n        if (pose) {\n            setValues(pose, 'applyAtEnd');\n            setValues(pose, 'applyAtStart');\n        }\n    });\n};\nvar createValueMap = function (props) {\n    var poses = props.poses,\n        passive = props.passive;\n    var values = new Map();\n    Object.keys(poses).forEach(scrapeValuesFromPose(values, props));\n    setNativeValues(props);\n    if (passive) Object.keys(passive).forEach(bindPassiveValues(values, props));\n    return values;\n};\n\nvar applyDefaultTransition = function (pose, key, defaultTransitions) {\n    return __assign({}, pose, { transition: defaultTransitions.has(key) ? defaultTransitions.get(key) : defaultTransitions.get('default') });\n};\nvar generateTransitions = function (poses, defaultTransitions) {\n    Object.keys(poses).forEach(function (key) {\n        var pose = poses[key];\n        invariant(typeof pose === 'object', \"Pose '\" + key + \"' is of invalid type. All poses should be objects.\");\n        poses[key] = pose.transition !== undefined ? pose : applyDefaultTransition(pose, key, defaultTransitions);\n    });\n    return poses;\n};\n\nvar sortByReversePriority = function (priorityOrder) {\n    return function (a, b) {\n        var aP = priorityOrder.indexOf(a);\n        var bP = priorityOrder.indexOf(b);\n        if (aP === -1 && bP !== -1) return -1;\n        if (aP !== -1 && bP === -1) return 1;\n        return aP - bP;\n    };\n};\n\nvar poseFactory = function (_a) {\n    var getDefaultProps = _a.getDefaultProps,\n        defaultTransitions = _a.defaultTransitions,\n        bindOnChange = _a.bindOnChange,\n        startAction = _a.startAction,\n        stopAction = _a.stopAction,\n        readValue = _a.readValue,\n        readValueFromSource = _a.readValueFromSource,\n        resolveTarget = _a.resolveTarget,\n        setValue = _a.setValue,\n        setValueNative = _a.setValueNative,\n        createValue = _a.createValue,\n        convertValue = _a.convertValue,\n        getInstantTransition = _a.getInstantTransition,\n        getTransitionProps = _a.getTransitionProps,\n        addActionDelay = _a.addActionDelay,\n        selectValueToRead = _a.selectValueToRead,\n        convertTransitionDefinition = _a.convertTransitionDefinition,\n        transformPose = _a.transformPose,\n        posePriority = _a.posePriority,\n        forceRender = _a.forceRender,\n        extendAPI = _a.extendAPI;\n    return function (config) {\n        var parentValues = config.parentValues,\n            _a = config.ancestorValues,\n            ancestorValues = _a === void 0 ? [] : _a;\n        if (parentValues) ancestorValues.unshift({ values: parentValues });\n        var activeActions = new Map();\n        var activePoses = new Map();\n        var children = new Set();\n        var poses = generateTransitions(selectPoses(config), defaultTransitions);\n        var _b = config.props,\n            props = _b === void 0 ? {} : _b;\n        if (getDefaultProps) props = __assign({}, getDefaultProps(config), props);\n        var passive = config.passive,\n            userSetValues = config.values,\n            _c = config.initialPose,\n            initialPose = _c === void 0 ? DEFAULT_INITIAL_POSE : _c;\n        var values = createValueMap({\n            poses: poses,\n            passive: passive,\n            ancestorValues: ancestorValues,\n            readValue: readValue,\n            setValueNative: setValueNative,\n            createValue: createValue,\n            convertValue: convertValue,\n            readValueFromSource: readValueFromSource,\n            userSetValues: userSetValues,\n            initialPose: initialPose,\n            activePoses: activePoses,\n            props: props\n        });\n        var state = {\n            activeActions: activeActions,\n            activePoses: activePoses,\n            children: children,\n            props: props,\n            values: values\n        };\n        var onChange = config.onChange;\n        if (onChange) Object.keys(onChange).forEach(bindOnChange(values, onChange));\n        var set = createPoseSetter({\n            state: state,\n            poses: poses,\n            getInstantTransition: getInstantTransition,\n            getTransitionProps: getTransitionProps,\n            convertTransitionDefinition: convertTransitionDefinition,\n            setValue: setValue,\n            setValueNative: setValueNative,\n            startAction: startAction,\n            stopAction: stopAction,\n            resolveTarget: resolveTarget,\n            addActionDelay: addActionDelay,\n            transformPose: transformPose,\n            posePriority: posePriority,\n            forceRender: forceRender\n        });\n        var has = function (poseName) {\n            return !!poses[poseName];\n        };\n        var api = {\n            set: set,\n            unset: function (poseName, poseProps) {\n                var posesToSet = [];\n                activePoses.forEach(function (valuePoses) {\n                    var poseIndex = valuePoses.indexOf(poseName);\n                    if (poseIndex === -1) return;\n                    var currentPose = valuePoses[0];\n                    valuePoses.splice(poseIndex, 1);\n                    var nextPose = valuePoses[0];\n                    if (nextPose === currentPose) return;\n                    if (posesToSet.indexOf(nextPose) === -1) {\n                        posesToSet.push(nextPose);\n                    }\n                });\n                var animationsToResolve = posesToSet.sort(sortByReversePriority(posePriority)).map(function (poseToSet) {\n                    return set(poseToSet, poseProps, false);\n                });\n                children.forEach(function (child) {\n                    return animationsToResolve.push(child.unset(poseName));\n                });\n                return Promise.all(animationsToResolve);\n            },\n            get: function (valueName) {\n                return valueName ? selectValueToRead(values.get(valueName)) : selectAllValues(values, selectValueToRead);\n            },\n            has: has,\n            setProps: function (newProps) {\n                return state.props = __assign({}, state.props, newProps);\n            },\n            _addChild: function (childConfig, factory) {\n                var child = factory(__assign({ initialPose: initialPose }, childConfig, { ancestorValues: [{ label: config.label, values: values }].concat(ancestorValues) }));\n                children.add(child);\n                return child;\n            },\n            removeChild: function (child) {\n                return children.delete(child);\n            },\n            clearChildren: function () {\n                children.forEach(function (child) {\n                    return child.destroy();\n                });\n                children.clear();\n            },\n            destroy: function () {\n                activeActions.forEach(stopAction);\n                children.forEach(function (child) {\n                    return child.destroy();\n                });\n            }\n        };\n        return extendAPI(api, state, config);\n    };\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\n\nvar __assign$4 = function () {\n    __assign$4 = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign$4.apply(this, arguments);\n};\n\nfunction __rest$2(s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n    return t;\n}\n\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n    BoundingBoxDimension[\"width\"] = \"width\";\n    BoundingBoxDimension[\"height\"] = \"height\";\n    BoundingBoxDimension[\"left\"] = \"left\";\n    BoundingBoxDimension[\"right\"] = \"right\";\n    BoundingBoxDimension[\"top\"] = \"top\";\n    BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar measureWithoutTransform = function (element) {\n    var transform$$1 = element.style.transform;\n    element.style.transform = '';\n    var bbox = element.getBoundingClientRect();\n    element.style.transform = transform$$1;\n    return bbox;\n};\nvar resolveProp$1 = function (target, props) {\n    return typeof target === 'function' ? target(props) : target;\n};\n\nvar interpolate$1 = transformers.interpolate;\nvar singleAxisPointer = function (axis) {\n    return function (from) {\n        var _a;\n        return index$1$1((_a = {}, _a[axis] = typeof from === 'string' ? parseFloat(from) : from, _a)).pipe(function (v) {\n            return v[axis];\n        });\n    };\n};\nvar pointerX = /*#__PURE__*/singleAxisPointer('x');\nvar pointerY = /*#__PURE__*/singleAxisPointer('y');\nvar createPointer = function (axisPointerCreator, min, max, measurement) {\n    return function (transitionProps) {\n        var from = transitionProps.from,\n            type = transitionProps.type,\n            dimensions = transitionProps.dimensions,\n            dragBounds = transitionProps.dragBounds;\n        var axisPointer = axisPointerCreator(dimensions.measurementAsPixels(measurement, from, type));\n        var transformQueue = [];\n        if (dragBounds) {\n            var resolvedDragBounds_1 = resolveProp$1(dragBounds, transitionProps);\n            if (resolvedDragBounds_1[min] !== undefined) {\n                transformQueue.push(function (v) {\n                    return Math.max(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[min], type));\n                });\n            }\n            if (resolvedDragBounds_1[max] !== undefined) {\n                transformQueue.push(function (v) {\n                    return Math.min(v, dimensions.measurementAsPixels(measurement, resolvedDragBounds_1[max], type));\n                });\n            }\n        }\n        if (type === percent) {\n            transformQueue.push(interpolate$1([0, dimensions.get(measurement)], [0, 100], { clamp: false }), function (v) {\n                return v + '%';\n            });\n        }\n        return transformQueue.length ? axisPointer.pipe.apply(axisPointer, transformQueue) : axisPointer;\n    };\n};\nvar just = function (from) {\n    return action(function (_a) {\n        var update = _a.update,\n            complete = _a.complete;\n        update(from);\n        complete();\n    });\n};\nvar underDampedSpring = function (_a) {\n    var from = _a.from,\n        velocity = _a.velocity,\n        to = _a.to;\n    return vectorSpring({\n        from: from,\n        to: to,\n        velocity: velocity,\n        stiffness: 500,\n        damping: 25,\n        restDelta: 0.5,\n        restSpeed: 10\n    });\n};\nvar overDampedSpring = function (_a) {\n    var from = _a.from,\n        velocity = _a.velocity,\n        to = _a.to;\n    return vectorSpring({ from: from, to: to, velocity: velocity, stiffness: 700, damping: to === 0 ? 100 : 35 });\n};\nvar linearTween = function (_a) {\n    var from = _a.from,\n        to = _a.to;\n    return tween({ from: from, to: to, ease: linear });\n};\nvar intelligentTransition = {\n    x: underDampedSpring,\n    y: underDampedSpring,\n    z: underDampedSpring,\n    rotate: underDampedSpring,\n    rotateX: underDampedSpring,\n    rotateY: underDampedSpring,\n    rotateZ: underDampedSpring,\n    scaleX: overDampedSpring,\n    scaleY: overDampedSpring,\n    scale: overDampedSpring,\n    opacity: linearTween,\n    default: tween\n};\nvar dragAction = /*#__PURE__*/__assign$4({}, intelligentTransition, { x: /*#__PURE__*/createPointer(pointerX, 'left', 'right', BoundingBoxDimension.width), y: /*#__PURE__*/createPointer(pointerY, 'top', 'bottom', BoundingBoxDimension.height) });\nvar justAxis = function (_a) {\n    var from = _a.from;\n    return just(from);\n};\nvar intelligentDragEnd = /*#__PURE__*/__assign$4({}, intelligentTransition, { x: justAxis, y: justAxis });\nvar defaultTransitions = /*#__PURE__*/new Map([['default', intelligentTransition], ['drag', dragAction], ['dragEnd', intelligentDragEnd]]);\n\nvar animationLookup = {\n    tween: tween,\n    spring: vectorSpring,\n    decay: vectorDecay,\n    keyframes: keyframes,\n    physics: vectorPhysics\n};\nvar easingLookup = {\n    linear: linear,\n    easeIn: easeIn,\n    easeOut: easeOut,\n    easeInOut: easeInOut,\n    circIn: circIn,\n    circOut: circOut,\n    circInOut: circInOut,\n    backIn: backIn,\n    backOut: backOut,\n    backInOut: backInOut,\n    anticipate: anticipate\n};\n\nvar auto = {\n    test: function (v) {\n        return v === 'auto';\n    },\n    parse: function (v) {\n        return v;\n    }\n};\nvar valueTypeTests = [number, degrees, percent, px, vw, vh, auto];\nvar testValueType = function (v) {\n    return function (type) {\n        return type.test(v);\n    };\n};\nvar getValueType$2 = function (v) {\n    return valueTypeTests.find(testValueType(v));\n};\n\nvar createPassiveValue = function (init, parent, transform$$1) {\n    var raw = value(transform$$1(init));\n    parent.raw.subscribe(function (v) {\n        return raw.update(transform$$1(v));\n    });\n    return { raw: raw };\n};\nvar createValue = function (init) {\n    var type = getValueType$2(init);\n    var raw = value(init);\n    return { raw: raw, type: type };\n};\nvar addActionDelay = function (delay$$1, transition) {\n    if (delay$$1 === void 0) {\n        delay$$1 = 0;\n    }\n    return chain(delay(delay$$1), transition);\n};\nvar isCubicBezierArgs = function (args) {\n    return typeof args[0] === 'number';\n};\nvar getAction = function (v, _a, _b) {\n    var from = _b.from,\n        to = _b.to,\n        velocity = _b.velocity;\n    var _c = _a.type,\n        type = _c === void 0 ? 'tween' : _c,\n        definedEase = _a.ease,\n        def = __rest$2(_a, [\"type\", \"ease\"]);\n    invariant(animationLookup[type] !== undefined, \"Invalid transition type '\" + type + \"'. Valid transition types are: tween, spring, decay, physics and keyframes.\");\n    var ease;\n    if (type === 'tween') {\n        if (typeof definedEase !== 'function') {\n            if (typeof definedEase === 'string') {\n                invariant(easingLookup[definedEase] !== undefined, \"Invalid easing type '\" + definedEase + \"'. popmotion.io/pose/api/config\");\n                ease = easingLookup[definedEase];\n            } else if (Array.isArray(definedEase) && isCubicBezierArgs(definedEase)) {\n                invariant(definedEase.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n                var x1 = definedEase[0],\n                    y1 = definedEase[1],\n                    x2 = definedEase[2],\n                    y2 = definedEase[3];\n                ease = cubicBezier(x1, y1, x2, y2);\n            }\n        }\n    }\n    ease = ease || definedEase;\n    var baseProps = type !== 'keyframes' ? {\n        from: from,\n        to: to,\n        velocity: velocity,\n        ease: ease\n    } : { ease: ease };\n    return animationLookup[type](__assign$4({}, baseProps, def));\n};\nvar isAction = function (action$$1) {\n    return typeof action$$1.start !== 'undefined';\n};\nvar pose = function (_a) {\n    var transformPose = _a.transformPose,\n        addListenerToValue = _a.addListenerToValue,\n        extendAPI = _a.extendAPI,\n        readValueFromSource = _a.readValueFromSource,\n        posePriority = _a.posePriority,\n        setValueNative = _a.setValueNative;\n    return poseFactory({\n        bindOnChange: function (values, onChange) {\n            return function (key) {\n                if (!values.has(key)) return;\n                var raw = values.get(key).raw;\n                raw.subscribe(onChange[key]);\n            };\n        },\n        readValue: function (_a) {\n            var raw = _a.raw;\n            return raw.get();\n        },\n        setValue: function (_a, to) {\n            var raw = _a.raw;\n            return raw.update(to);\n        },\n        createValue: function (init, key, _a, _b) {\n            var elementStyler = _a.elementStyler;\n            var _c = _b === void 0 ? {} : _b,\n                passiveParent = _c.passiveParent,\n                passiveProps = _c.passiveProps;\n            var val = passiveParent ? createPassiveValue(init, passiveParent, passiveProps) : createValue(init);\n            val.raw.subscribe(addListenerToValue(key, elementStyler));\n            return val;\n        },\n        convertValue: function (raw, key, _a) {\n            var elementStyler = _a.elementStyler;\n            raw.subscribe(addListenerToValue(key, elementStyler));\n            return {\n                raw: raw,\n                type: getValueType$2(raw.get())\n            };\n        },\n        getTransitionProps: function (_a, to) {\n            var raw = _a.raw,\n                type = _a.type;\n            return {\n                from: raw.get(),\n                velocity: raw.getVelocity(),\n                to: to,\n                type: type\n            };\n        },\n        resolveTarget: function (_, to) {\n            return to;\n        },\n        selectValueToRead: function (_a) {\n            var raw = _a.raw;\n            return raw;\n        },\n        startAction: function (_a, action$$1, complete) {\n            var raw = _a.raw;\n            var reaction = {\n                update: function (v) {\n                    return raw.update(v);\n                },\n                complete: complete\n            };\n            return action$$1.start(reaction);\n        },\n        stopAction: function (action$$1) {\n            return action$$1.stop();\n        },\n        getInstantTransition: function (_, _a) {\n            var to = _a.to;\n            return just(to);\n        },\n        convertTransitionDefinition: function (val, def, props) {\n            if (isAction(def)) return def;\n            var delay$$1 = def.delay,\n                min = def.min,\n                max = def.max,\n                round = def.round,\n                remainingDef = __rest$2(def, [\"delay\", \"min\", \"max\", \"round\"]);\n            var action$$1 = getAction(val, remainingDef, props);\n            var outputPipe = [];\n            if (delay$$1) action$$1 = addActionDelay(delay$$1, action$$1);\n            if (min !== undefined) outputPipe.push(function (v) {\n                return Math.max(v, min);\n            });\n            if (max !== undefined) outputPipe.push(function (v) {\n                return Math.min(v, max);\n            });\n            if (round) outputPipe.push(Math.round);\n            return outputPipe.length ? action$$1.pipe.apply(action$$1, outputPipe) : action$$1;\n        },\n        setValueNative: setValueNative,\n        addActionDelay: addActionDelay,\n        defaultTransitions: defaultTransitions,\n        transformPose: transformPose,\n        readValueFromSource: readValueFromSource,\n        posePriority: posePriority,\n        extendAPI: extendAPI\n    });\n};\n\nvar createDimensions = function (element) {\n    var hasMeasured = false;\n    var current = {\n        width: 0,\n        height: 0,\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: 0\n    };\n    return {\n        get: function (measurement) {\n            return measurement ? current[measurement] : current;\n        },\n        measure: function () {\n            current = element.getBoundingClientRect();\n            hasMeasured = true;\n            return current;\n        },\n        measurementAsPixels: function (measurement, value$$1, type) {\n            return type === percent ? (typeof value$$1 === 'string' ? parseFloat(value$$1) : value$$1) / 100 * current[measurement] : value$$1;\n        },\n        has: function () {\n            return hasMeasured;\n        }\n    };\n};\n\nvar makeUIEventApplicator = function (_a) {\n    var startEvents = _a.startEvents,\n        endEvents = _a.endEvents,\n        startPose = _a.startPose,\n        endPose = _a.endPose,\n        startCallback = _a.startCallback,\n        endCallback = _a.endCallback,\n        useDocumentToEnd = _a.useDocumentToEnd,\n        preventScroll = _a.preventScroll;\n    return function (element, activeActions, poser, config) {\n        var startListener = startPose + 'Start';\n        var endListener = startPose + 'End';\n        var moveListener = startPose + 'Move';\n        if (preventScroll) {\n            var touchMoveListener = listen(element, 'touchmove', {\n                passive: false\n            }).start(function (e) {\n                e.preventDefault();\n            });\n            activeActions.set(moveListener, touchMoveListener);\n        }\n        var eventStartListener = listen(element, startEvents).start(function (startEvent) {\n            poser.unset(endPose);\n            poser.set(startPose);\n            if (startCallback && config[startCallback]) config[startCallback](startEvent);\n            var eventEndListener = listen(useDocumentToEnd ? document.documentElement : element, endEvents + (useDocumentToEnd ? ' mouseenter' : '')).start(function (endEvent) {\n                if (useDocumentToEnd && endEvent.type === 'mouseenter' && endEvent.buttons === 1) {\n                    return;\n                }\n                activeActions.get(endListener).stop();\n                poser.unset(startPose);\n                poser.set(endPose);\n                if (endCallback && config[endCallback]) config[endCallback](endEvent);\n            });\n            activeActions.set(endListener, eventEndListener);\n        });\n        activeActions.set(startListener, eventStartListener);\n    };\n};\nvar events = {\n    draggable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mousedown touchstart',\n        endEvents: 'mouseup touchend',\n        startPose: 'drag',\n        endPose: 'dragEnd',\n        startCallback: 'onDragStart',\n        endCallback: 'onDragEnd',\n        useDocumentToEnd: true,\n        preventScroll: true\n    }),\n    hoverable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mouseenter',\n        endEvents: 'mouseleave',\n        startPose: 'hover',\n        endPose: 'hoverEnd'\n    }),\n    focusable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'focus',\n        endEvents: 'blur',\n        startPose: 'focus',\n        endPose: 'blur'\n    }),\n    pressable: /*#__PURE__*/makeUIEventApplicator({\n        startEvents: 'mousedown touchstart',\n        endEvents: 'mouseup touchend',\n        startPose: 'press',\n        endPose: 'pressEnd',\n        startCallback: 'onPressStart',\n        endCallback: 'onPressEnd',\n        useDocumentToEnd: true\n    })\n};\nvar eventKeys = /*#__PURE__*/Object.keys(events);\nvar appendEventListeners = function (element, activeActions, poser, _a) {\n    var props = _a.props;\n    return eventKeys.forEach(function (key) {\n        if (props[key]) events[key](element, activeActions, poser, props);\n    });\n};\n\nvar ORIGIN_START = 0;\nvar ORIGIN_CENTER = '50%';\nvar ORIGIN_END = '100%';\nvar findCenter = function (_a) {\n    var top = _a.top,\n        right = _a.right,\n        bottom = _a.bottom,\n        left = _a.left;\n    return {\n        x: (left + right) / 2,\n        y: (top + bottom) / 2\n    };\n};\nvar positionalProps = ['width', 'height', 'top', 'left', 'bottom', 'right'];\nvar positionalPropsDict = /*#__PURE__*/new Set(positionalProps);\nvar checkPositionalProp = function (key) {\n    return positionalPropsDict.has(key);\n};\nvar hasPositionalProps = function (pose) {\n    return Object.keys(pose).some(checkPositionalProp);\n};\nvar isFlipPose = function (flip, key, state) {\n    return state.props.element instanceof HTMLElement && (flip === true || key === 'flip');\n};\nvar setValue = function (_a, key, to) {\n    var values = _a.values,\n        props = _a.props;\n    if (values.has(key)) {\n        var raw = values.get(key).raw;\n        raw.update(to);\n        raw.update(to);\n    } else {\n        values.set(key, {\n            raw: value(to, function (v) {\n                return props.elementStyler.set(key, v);\n            })\n        });\n    }\n};\nvar explicitlyFlipPose = function (state, nextPose) {\n    var _a = state.props,\n        dimensions = _a.dimensions,\n        elementStyler = _a.elementStyler;\n    dimensions.measure();\n    var width = nextPose.width,\n        height = nextPose.height,\n        top = nextPose.top,\n        left = nextPose.left,\n        bottom = nextPose.bottom,\n        right = nextPose.right,\n        position = nextPose.position,\n        remainingPose = __rest$2(nextPose, [\"width\", \"height\", \"top\", \"left\", \"bottom\", \"right\", \"position\"]);\n    var propsToSet = positionalProps.concat('position').reduce(function (acc, key) {\n        if (nextPose[key] !== undefined) {\n            acc[key] = resolveProp$1(nextPose[key], state.props);\n        }\n        return acc;\n    }, {});\n    elementStyler.set(propsToSet).render();\n    return implicitlyFlipPose(state, remainingPose);\n};\nvar implicitlyFlipPose = function (state, nextPose) {\n    var _a = state.props,\n        dimensions = _a.dimensions,\n        element = _a.element,\n        elementStyler = _a.elementStyler;\n    if (!dimensions.has()) return {};\n    var prev = dimensions.get();\n    var next = measureWithoutTransform(element);\n    var originX = prev.left === next.left ? ORIGIN_START : prev.right === next.right ? ORIGIN_END : ORIGIN_CENTER;\n    var originY = prev.top === next.top ? ORIGIN_START : prev.bottom === next.bottom ? ORIGIN_END : ORIGIN_CENTER;\n    elementStyler.set({ originX: originX, originY: originY });\n    if (prev.width !== next.width) {\n        setValue(state, 'scaleX', prev.width / next.width);\n        nextPose.scaleX = 1;\n    }\n    if (prev.height !== next.height) {\n        setValue(state, 'scaleY', prev.height / next.height);\n        nextPose.scaleY = 1;\n    }\n    var prevCenter = findCenter(prev);\n    var nextCenter = findCenter(next);\n    if (originX === ORIGIN_CENTER) {\n        setValue(state, 'x', prevCenter.x - nextCenter.x);\n        nextPose.x = 0;\n    }\n    if (originY === ORIGIN_CENTER) {\n        setValue(state, 'y', prevCenter.y - nextCenter.y);\n        nextPose.y = 0;\n    }\n    elementStyler.render();\n    return nextPose;\n};\nvar flipPose = function (props, nextPose) {\n    return hasPositionalProps(nextPose) ? explicitlyFlipPose(props, nextPose) : implicitlyFlipPose(props, nextPose);\n};\n\nvar getPosFromMatrix = function (matrix, pos) {\n    return parseFloat(matrix.split(', ')[pos]);\n};\nvar getTranslateFromMatrix = function (pos2, pos3) {\n    return function (element, bbox, _a) {\n        var transform$$1 = _a.transform;\n        if (transform$$1 === 'none') return 0;\n        var matrix3d = transform$$1.match(/^matrix3d\\((.+)\\)$/);\n        if (matrix3d) return getPosFromMatrix(matrix3d[1], pos3);\n        return getPosFromMatrix(transform$$1.match(/^matrix\\((.+)\\)$/)[1], pos2);\n    };\n};\nvar positionalValues = {\n    width: function (element, _a) {\n        var width = _a.width;\n        return width;\n    },\n    height: function (element, _a) {\n        var height = _a.height;\n        return height;\n    },\n    top: function (element, bbox, _a) {\n        var top = _a.top;\n        return parseFloat(top);\n    },\n    left: function (element, bbox, _a) {\n        var left = _a.left;\n        return parseFloat(left);\n    },\n    bottom: function (element, _a, _b) {\n        var height = _a.height;\n        var top = _b.top;\n        return parseFloat(top) + height;\n    },\n    right: function (element, _a, _b) {\n        var width = _a.width;\n        var left = _b.left;\n        return parseFloat(left) + width;\n    },\n    x: /*#__PURE__*/getTranslateFromMatrix(4, 13),\n    y: /*#__PURE__*/getTranslateFromMatrix(5, 14)\n};\nvar isPositionalKey = function (v) {\n    return positionalValues[v] !== undefined;\n};\nvar isPositional = function (pose) {\n    return Object.keys(pose).some(isPositionalKey);\n};\nvar convertPositionalUnits = function (state, nextPose) {\n    var values = state.values,\n        props = state.props;\n    var element = props.element,\n        elementStyler = props.elementStyler;\n    var positionalPoseKeys = Object.keys(nextPose).filter(isPositionalKey);\n    var changedPositionalKeys = [];\n    var elementComputedStyle = getComputedStyle(element);\n    var applyAtEndHasBeenCopied = false;\n    positionalPoseKeys.forEach(function (key) {\n        var value$$1 = values.get(key);\n        var fromValueType = getValueType$2(value$$1.raw.get());\n        var to = resolveProp$1(nextPose[key], props);\n        var toValueType = getValueType$2(to);\n        if (fromValueType !== toValueType) {\n            changedPositionalKeys.push(key);\n            if (!applyAtEndHasBeenCopied) {\n                applyAtEndHasBeenCopied = true;\n                nextPose.applyAtEnd = nextPose.applyAtEnd ? __assign$4({}, nextPose.applyAtEnd) : {};\n            }\n            nextPose.applyAtEnd[key] = nextPose.applyAtEnd[key] || nextPose[key];\n            setValue(state, key, to);\n        }\n    });\n    if (!changedPositionalKeys.length) return nextPose;\n    var originBbox = element.getBoundingClientRect();\n    var top = elementComputedStyle.top,\n        left = elementComputedStyle.left,\n        bottom = elementComputedStyle.bottom,\n        right = elementComputedStyle.right,\n        transform$$1 = elementComputedStyle.transform;\n    var originComputedStyle = { top: top, left: left, bottom: bottom, right: right, transform: transform$$1 };\n    elementStyler.render();\n    var targetBbox = element.getBoundingClientRect();\n    changedPositionalKeys.forEach(function (key) {\n        setValue(state, key, positionalValues[key](element, originBbox, originComputedStyle));\n        nextPose[key] = positionalValues[key](element, targetBbox, elementComputedStyle);\n    });\n    elementStyler.render();\n    return nextPose;\n};\n\nvar getCurrent = function (prop) {\n    return function (_a) {\n        var elementStyler = _a.elementStyler;\n        return elementStyler.get(prop);\n    };\n};\nvar dragPoses = function (draggable) {\n    var drag = {\n        preTransition: function (_a) {\n            var dimensions = _a.dimensions;\n            return dimensions.measure();\n        }\n    };\n    var dragEnd = {};\n    if (draggable === true || draggable === 'x') {\n        drag.x = dragEnd.x = getCurrent('x');\n    }\n    if (draggable === true || draggable === 'y') {\n        drag.y = dragEnd.y = getCurrent('y');\n    }\n    return { drag: drag, dragEnd: dragEnd };\n};\nvar createPoseConfig = function (element, _a) {\n    var onDragStart = _a.onDragStart,\n        onDragEnd = _a.onDragEnd,\n        onPressStart = _a.onPressStart,\n        onPressEnd = _a.onPressEnd,\n        draggable = _a.draggable,\n        hoverable = _a.hoverable,\n        focusable = _a.focusable,\n        pressable = _a.pressable,\n        dragBounds = _a.dragBounds,\n        config = __rest$2(_a, [\"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\", \"draggable\", \"hoverable\", \"focusable\", \"pressable\", \"dragBounds\"]);\n    var poseConfig = __assign$4({ flip: {} }, config, { props: __assign$4({}, config.props, { onDragStart: onDragStart,\n            onDragEnd: onDragEnd,\n            onPressStart: onPressStart,\n            onPressEnd: onPressEnd,\n            dragBounds: dragBounds,\n            draggable: draggable,\n            hoverable: hoverable,\n            focusable: focusable,\n            pressable: pressable,\n            element: element, elementStyler: index(element, { preparseOutput: false }), dimensions: createDimensions(element) }) });\n    if (draggable) {\n        var _b = dragPoses(draggable),\n            drag = _b.drag,\n            dragEnd = _b.dragEnd;\n        poseConfig.drag = __assign$4({}, drag, poseConfig.drag);\n        poseConfig.dragEnd = __assign$4({}, dragEnd, poseConfig.dragEnd);\n    }\n    return poseConfig;\n};\nvar domPose = /*#__PURE__*/pose({\n    posePriority: ['drag', 'press', 'focus', 'hover'],\n    transformPose: function (_a, name, state) {\n        var flip = _a.flip,\n            pose$$1 = __rest$2(_a, [\"flip\"]);\n        if (isFlipPose(flip, name, state)) {\n            return flipPose(state, pose$$1);\n        } else if (isPositional(pose$$1)) {\n            return convertPositionalUnits(state, pose$$1);\n        }\n        return pose$$1;\n    },\n    forceRender: function (_a) {\n        var elementStyler = _a.elementStyler;\n        elementStyler.render();\n    },\n    addListenerToValue: function (key, elementStyler) {\n        return function (v) {\n            return elementStyler.set(key, v);\n        };\n    },\n    readValueFromSource: function (key, _a) {\n        var elementStyler = _a.elementStyler,\n            dragBounds = _a.dragBounds;\n        var value$$1 = elementStyler.get(key);\n        if (dragBounds && (key === 'x' || key === 'y')) {\n            var bound = key === 'x' ? dragBounds.left || dragBounds.right : dragBounds.top || dragBounds.bottom;\n            if (bound) {\n                var boundType = getValueType$2(bound);\n                value$$1 = boundType.transform(value$$1);\n            }\n        }\n        return isNaN(value$$1) ? value$$1 : parseFloat(value$$1);\n    },\n    setValueNative: function (key, to, _a) {\n        var elementStyler = _a.elementStyler;\n        return elementStyler.set(key, to);\n    },\n    extendAPI: function (api, _a, config) {\n        var props = _a.props,\n            activeActions = _a.activeActions;\n        var measure = props.dimensions.measure;\n        var poserApi = __assign$4({}, api, { addChild: function (element, childConfig) {\n                return api._addChild(createPoseConfig(element, childConfig), domPose);\n            }, measure: measure, flip: function (op) {\n                if (op) {\n                    measure();\n                    op();\n                }\n                return api.set('flip');\n            } });\n        props.elementStyler.render();\n        appendEventListeners(props.element, activeActions, poserApi, config);\n        return poserApi;\n    }\n});\nvar domPose$1 = function (element, config) {\n    return domPose(createPoseConfig(element, config));\n};\n\nfunction memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|default|defer|dir|disabled|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|itemProp|itemScope|itemType|itemID|itemRef|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index$2 = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\n\nvar hasChanged = function (prev, next) {\r\n    if (prev === next)\r\n        return false;\r\n    var prevIsArray = Array.isArray(prev);\r\n    var nextIsArray = Array.isArray(next);\r\n    if (prevIsArray !== nextIsArray || (!prevIsArray && !nextIsArray)) {\r\n        return true;\r\n    }\r\n    else if (prevIsArray && nextIsArray) {\r\n        var numPrev = prev.length;\r\n        var numNext = next.length;\r\n        if (numPrev !== numNext)\r\n            return true;\r\n        for (var i = 0; i < numPrev; i++) {\r\n            if (prev[i] !== next[i])\r\n                return true;\r\n        }\r\n    }\r\n    return false;\r\n};\n\nvar pickAssign = function (shouldPick, sources) {\r\n    return sources.reduce(function (picked, source) {\r\n        for (var key in source) {\r\n            if (shouldPick(key)) {\r\n                picked[key] = source[key];\r\n            }\r\n        }\r\n        return picked;\r\n    }, {});\r\n};\n\nvar _a$1 = createContext({}), PoseParentConsumer = _a$1.Consumer, PoseParentProvider = _a$1.Provider;\r\nvar calcPopFromFlowStyle = function (el) {\r\n    var offsetTop = el.offsetTop, offsetLeft = el.offsetLeft, offsetWidth = el.offsetWidth, offsetHeight = el.offsetHeight;\r\n    return {\r\n        position: 'absolute',\r\n        top: offsetTop,\r\n        left: offsetLeft,\r\n        width: offsetWidth,\r\n        height: offsetHeight\r\n    };\r\n};\r\nvar hasPose = function (pose, key) {\r\n    return Array.isArray(pose) ? pose.indexOf(key) !== -1 : pose === key;\r\n};\r\nvar objectToMap = function (obj) {\r\n    return Object.keys(obj).reduce(function (map, key) {\r\n        map.set(key, { raw: obj[key] });\r\n        return map;\r\n    }, new Map());\r\n};\r\nvar testAlwaysTrue = function () { return true; };\r\nvar filterProps = function (_a) {\r\n    var elementType = _a.elementType, poseConfig = _a.poseConfig, onValueChange = _a.onValueChange, innerRef = _a.innerRef, _pose = _a._pose, pose = _a.pose, initialPose = _a.initialPose, poseKey = _a.poseKey, onPoseComplete = _a.onPoseComplete, getParentPoseConfig = _a.getParentPoseConfig, registerChild = _a.registerChild, onUnmount = _a.onUnmount, getInitialPoseFromParent = _a.getInitialPoseFromParent, popFromFlow = _a.popFromFlow, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd, props = __rest(_a, [\"elementType\", \"poseConfig\", \"onValueChange\", \"innerRef\", \"_pose\", \"pose\", \"initialPose\", \"poseKey\", \"onPoseComplete\", \"getParentPoseConfig\", \"registerChild\", \"onUnmount\", \"getInitialPoseFromParent\", \"popFromFlow\", \"values\", \"parentValues\", \"onDragStart\", \"onDragEnd\", \"onPressStart\", \"onPressEnd\"]);\r\n    return props;\r\n};\r\nvar PoseElement = (function (_super) {\r\n    __extends(PoseElement, _super);\r\n    function PoseElement(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.children = new Set();\r\n        _this.childrenHandlers = {\r\n            registerChild: function (props) {\r\n                _this.children.add(props);\r\n                if (_this.poser)\r\n                    _this.flushChildren();\r\n            },\r\n            onUnmount: function (child) { return _this.poser.removeChild(child); },\r\n            getParentPoseConfig: function () { return _this.poseConfig; },\r\n            getInitialPoseFromParent: function () { return _this.getInitialPose(); }\r\n        };\r\n        _this.setRef = function (ref) {\r\n            warning(ref === null || (ref instanceof Element && _this.ref === undefined), 'ref must be provided to the same DOM component for the entire lifecycle of a posed component.');\r\n            _this.ref = ref;\r\n            var innerRef = _this.props.innerRef;\r\n            if (!innerRef)\r\n                return;\r\n            if (typeof innerRef === 'function') {\r\n                innerRef(ref);\r\n            }\r\n            else {\r\n                innerRef.current = ref;\r\n            }\r\n        };\r\n        _this.shouldForwardProp =\r\n            typeof _this.props.elementType === 'string' ? index$2 : testAlwaysTrue;\r\n        var poseConfig = _this.props.poseConfig;\r\n        _this.poseConfig =\r\n            typeof poseConfig === 'function'\r\n                ? poseConfig(filterProps(props))\r\n                : poseConfig;\r\n        return _this;\r\n    }\r\n    PoseElement.prototype.getInitialPose = function () {\r\n        var _a = this.props, getInitialPoseFromParent = _a.getInitialPoseFromParent, pose = _a.pose, _pose = _a._pose, initialPose = _a.initialPose;\r\n        if (initialPose) {\r\n            return initialPose;\r\n        }\r\n        else {\r\n            var parentPose = getInitialPoseFromParent && getInitialPoseFromParent();\r\n            var initialPoses = (Array.isArray(parentPose)\r\n                ? parentPose\r\n                : [parentPose])\r\n                .concat(pose, _pose)\r\n                .filter(Boolean);\r\n            return initialPoses.length > 0 ? initialPoses : undefined;\r\n        }\r\n    };\r\n    PoseElement.prototype.getFirstPose = function () {\r\n        var _a = this.props, initialPose = _a.initialPose, pose = _a.pose, _pose = _a._pose;\r\n        if (!initialPose)\r\n            return;\r\n        var firstPose = (Array.isArray(pose) ? pose : [pose])\r\n            .concat(_pose)\r\n            .filter(Boolean);\r\n        return firstPose.length === 1 ? firstPose[0] : firstPose;\r\n    };\r\n    PoseElement.prototype.getSetProps = function () {\r\n        var props = filterProps(this.props);\r\n        if (this.props.popFromFlow && this.ref && this.ref instanceof HTMLElement) {\r\n            if (!this.popStyle) {\r\n                props.style = __assign({}, props.style, calcPopFromFlowStyle(this.ref));\r\n                this.popStyle = props.style;\r\n            }\r\n            else {\r\n                props.style = this.popStyle;\r\n            }\r\n        }\r\n        else {\r\n            this.popStyle = null;\r\n        }\r\n        return props;\r\n    };\r\n    PoseElement.prototype.componentDidMount = function () {\r\n        var _this = this;\r\n        invariant(this.ref instanceof Element, \"No valid DOM ref found. If you're converting an existing component via posed(Component), you must ensure you're passing the ref to the host DOM node via the React.forwardRef function.\");\r\n        var _a = this.props, onValueChange = _a.onValueChange, registerChild = _a.registerChild, values = _a.values, parentValues = _a.parentValues, onDragStart = _a.onDragStart, onDragEnd = _a.onDragEnd, onPressStart = _a.onPressStart, onPressEnd = _a.onPressEnd;\r\n        var config = __assign({}, this.poseConfig, { initialPose: this.getInitialPose(), values: values || this.poseConfig.values, parentValues: parentValues ? objectToMap(parentValues) : undefined, props: this.getSetProps(), onDragStart: onDragStart,\r\n            onDragEnd: onDragEnd,\r\n            onPressStart: onPressStart,\r\n            onPressEnd: onPressEnd, onChange: onValueChange });\r\n        if (!registerChild) {\r\n            this.initPoser(domPose$1(this.ref, config));\r\n        }\r\n        else {\r\n            registerChild({\r\n                element: this.ref,\r\n                poseConfig: config,\r\n                onRegistered: function (poser) { return _this.initPoser(poser); }\r\n            });\r\n        }\r\n    };\r\n    PoseElement.prototype.getSnapshotBeforeUpdate = function () {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose;\r\n        if (hasPose(pose, 'flip') || hasPose(_pose, 'flip'))\r\n            this.poser.measure();\r\n        return null;\r\n    };\r\n    PoseElement.prototype.componentDidUpdate = function (prevProps) {\r\n        var _a = this.props, pose = _a.pose, _pose = _a._pose, poseKey = _a.poseKey;\r\n        this.poser.setProps(this.getSetProps());\r\n        if (poseKey !== prevProps.poseKey ||\r\n            hasChanged(prevProps.pose, pose) ||\r\n            pose === 'flip') {\r\n            this.setPose(pose);\r\n        }\r\n        if (_pose !== prevProps._pose || _pose === 'flip')\r\n            this.setPose(_pose);\r\n    };\r\n    PoseElement.prototype.componentWillUnmount = function () {\r\n        if (!this.poser)\r\n            return;\r\n        var onUnmount = this.props.onUnmount;\r\n        if (onUnmount)\r\n            onUnmount(this.poser);\r\n        this.poser.destroy();\r\n    };\r\n    PoseElement.prototype.initPoser = function (poser) {\r\n        this.poser = poser;\r\n        this.flushChildren();\r\n        var firstPose = this.getFirstPose();\r\n        if (firstPose)\r\n            this.setPose(firstPose);\r\n    };\r\n    PoseElement.prototype.setPose = function (pose) {\r\n        var _this = this;\r\n        var onPoseComplete = this.props.onPoseComplete;\r\n        var poseList = Array.isArray(pose) ? pose : [pose];\r\n        Promise.all(poseList.map(function (key) { return key && _this.poser.set(key); })).then(function () { return onPoseComplete && onPoseComplete(pose); });\r\n    };\r\n    PoseElement.prototype.flushChildren = function () {\r\n        var _this = this;\r\n        this.children.forEach(function (_a) {\r\n            var element = _a.element, poseConfig = _a.poseConfig, onRegistered = _a.onRegistered;\r\n            return onRegistered(_this.poser.addChild(element, poseConfig));\r\n        });\r\n        this.children.clear();\r\n    };\r\n    PoseElement.prototype.render = function () {\r\n        var elementType = this.props.elementType;\r\n        return (React.createElement(PoseParentProvider, { value: this.childrenHandlers }, createElement(elementType, pickAssign(this.shouldForwardProp, [\r\n            this.getSetProps(),\r\n            { ref: this.setRef }\r\n        ]))));\r\n    };\r\n    return PoseElement;\r\n}(PureComponent));\n\nvar supportedElements = [\r\n    'a',\r\n    'article',\r\n    'aside',\r\n    'audio',\r\n    'b',\r\n    'blockquote',\r\n    'body',\r\n    'br',\r\n    'button',\r\n    'canvas',\r\n    'caption',\r\n    'cite',\r\n    'code',\r\n    'col',\r\n    'colgroup',\r\n    'data',\r\n    'datalist',\r\n    'dialog',\r\n    'div',\r\n    'em',\r\n    'embed',\r\n    'fieldset',\r\n    'figcaption',\r\n    'figure',\r\n    'footer',\r\n    'form',\r\n    'h1',\r\n    'h2',\r\n    'h3',\r\n    'h4',\r\n    'h5',\r\n    'h6',\r\n    'head',\r\n    'header',\r\n    'hgroup',\r\n    'hr',\r\n    'i',\r\n    'iframe',\r\n    'img',\r\n    'input',\r\n    'label',\r\n    'legend',\r\n    'li',\r\n    'nav',\r\n    'object',\r\n    'ol',\r\n    'option',\r\n    'p',\r\n    'param',\r\n    'picture',\r\n    'pre',\r\n    'progress',\r\n    'q',\r\n    'section',\r\n    'select',\r\n    'span',\r\n    'strong',\r\n    'table',\r\n    'tbody',\r\n    'td',\r\n    'textarea',\r\n    'tfoot',\r\n    'th',\r\n    'thead',\r\n    'time',\r\n    'title',\r\n    'tr',\r\n    'ul',\r\n    'video',\r\n    'circle',\r\n    'clipPath',\r\n    'defs',\r\n    'ellipse',\r\n    'g',\r\n    'image',\r\n    'line',\r\n    'linearGradient',\r\n    'mask',\r\n    'path',\r\n    'pattern',\r\n    'polygon',\r\n    'polyline',\r\n    'radialGradient',\r\n    'rect',\r\n    'stop',\r\n    'svg',\r\n    'text',\r\n    'tspan'\r\n];\n\nvar componentCache = new Map();\r\nvar createComponentFactory = function (key) {\r\n    var componentFactory = function (poseConfig) {\r\n        if (poseConfig === void 0) { poseConfig = {}; }\r\n        return forwardRef(function (_a, ref) {\r\n            var _b = _a.withParent, withParent = _b === void 0 ? true : _b, props = __rest(_a, [\"withParent\"]);\r\n            warning(props.innerRef === undefined, 'innerRef is deprecated. Please use ref instead.');\r\n            return !withParent || props.parentValues ? (React.createElement(PoseElement, __assign({ poseConfig: poseConfig, innerRef: ref, elementType: key }, props))) : (React.createElement(PoseParentConsumer, null, function (parentCtx) { return (React.createElement(PoseElement, __assign({ poseConfig: poseConfig, elementType: key, innerRef: ref }, props, parentCtx))); }));\r\n        });\r\n    };\r\n    componentCache.set(key, componentFactory);\r\n    return componentFactory;\r\n};\r\nvar getComponentFactory = function (key) {\r\n    return componentCache.has(key)\r\n        ? componentCache.get(key)\r\n        : createComponentFactory(key);\r\n};\r\nvar posed = (function (component) {\r\n    return getComponentFactory(component);\r\n});\r\nsupportedElements.reduce(function (acc, key) {\r\n    acc[key] = createComponentFactory(key);\r\n    return acc;\r\n}, posed);\n\nvar getKey = function (child) {\r\n    invariant(child && child.key !== null, 'Every child of Transition must be given a unique key');\r\n    var childKey = typeof child.key === 'number' ? child.key.toString() : child.key;\r\n    return childKey.replace('.$', '');\r\n};\r\nvar prependProps = function (element, props) {\r\n    return createElement(element.type, __assign({ key: element.key, ref: element.ref }, props, element.props));\r\n};\r\nvar handleTransition = function (_a, _b) {\r\n    var displayedChildren = _b.displayedChildren, finishedLeaving = _b.finishedLeaving, hasInitialized = _b.hasInitialized, indexedChildren = _b.indexedChildren, scheduleChildRemoval = _b.scheduleChildRemoval;\r\n    var incomingChildren = _a.children, preEnterPose = _a.preEnterPose, enterPose = _a.enterPose, exitPose = _a.exitPose, animateOnMount = _a.animateOnMount, enterAfterExit = _a.enterAfterExit, flipMove = _a.flipMove, onRest = _a.onRest, propsForChildren = __rest(_a, [\"children\", \"preEnterPose\", \"enterPose\", \"exitPose\", \"animateOnMount\", \"enterAfterExit\", \"flipMove\", \"onRest\"]);\r\n    var targetChildren = makeChildList(incomingChildren);\r\n    var nextState = {\r\n        displayedChildren: []\r\n    };\r\n    if (process.env.NODE_ENV !== 'production') {\r\n        warning(!propsForChildren.onPoseComplete, \"<Transition/> (or <PoseGroup/>) doesn't accept onPoseComplete prop.\");\r\n    }\r\n    var prevKeys = displayedChildren.map(getKey);\r\n    var nextKeys = targetChildren.map(getKey);\r\n    var hasPropsForChildren = Object.keys(propsForChildren).length !== 0;\r\n    var entering = new Set(nextKeys.filter(function (key) { return finishedLeaving.hasOwnProperty(key) || prevKeys.indexOf(key) === -1; }));\r\n    entering.forEach(function (key) { return delete finishedLeaving[key]; });\r\n    var leaving = [];\r\n    var newlyLeaving = {};\r\n    prevKeys.forEach(function (key) {\r\n        if (entering.has(key)) {\r\n            return;\r\n        }\r\n        var isLeaving = finishedLeaving.hasOwnProperty(key);\r\n        if (!isLeaving && nextKeys.indexOf(key) !== -1) {\r\n            return;\r\n        }\r\n        leaving.push(key);\r\n        if (!isLeaving) {\r\n            finishedLeaving[key] = false;\r\n            newlyLeaving[key] = true;\r\n        }\r\n    });\r\n    var moving = new Set(prevKeys.filter(function (key, i) {\r\n        return !entering.has(key) || leaving.indexOf(key) === -1;\r\n    }));\r\n    targetChildren.forEach(function (child) {\r\n        var newChildProps = {};\r\n        if (entering.has(child.key)) {\r\n            if (hasInitialized || animateOnMount) {\r\n                newChildProps.initialPose = preEnterPose;\r\n            }\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        else if (moving.has(child.key) && flipMove) {\r\n            newChildProps._pose = [enterPose, 'flip'];\r\n        }\r\n        else {\r\n            newChildProps._pose = enterPose;\r\n        }\r\n        var newChild = cloneElement(child, newChildProps);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.push(hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    leaving.forEach(function (key) {\r\n        var child = indexedChildren[key];\r\n        var newChild = newlyLeaving[key]\r\n            ? cloneElement(child, {\r\n                _pose: exitPose,\r\n                onPoseComplete: function (pose) {\r\n                    if (pose === exitPose)\r\n                        scheduleChildRemoval(key);\r\n                    var onPoseComplete = child.props.onPoseComplete;\r\n                    if (onPoseComplete)\r\n                        onPoseComplete(pose);\r\n                },\r\n                popFromFlow: flipMove\r\n            })\r\n            : child;\r\n        var insertionIndex = prevKeys.indexOf(key);\r\n        indexedChildren[child.key] = newChild;\r\n        nextState.displayedChildren.splice(insertionIndex, 0, hasPropsForChildren ? prependProps(newChild, propsForChildren) : newChild);\r\n    });\r\n    return nextState;\r\n};\r\nvar handleChildrenTransitions = (function (props, state) {\r\n    var newState = handleTransition(props, state);\r\n    newState.hasInitialized = true;\r\n    return newState;\r\n});\r\nvar makeChildList = function (children) {\r\n    var list = [];\r\n    Children.forEach(children, function (child) { return child && list.push(child); });\r\n    return list;\r\n};\n\nvar Transition = (function (_super) {\r\n    __extends(Transition, _super);\r\n    function Transition() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = {\r\n            displayedChildren: [],\r\n            finishedLeaving: {},\r\n            hasInitialized: false,\r\n            indexedChildren: {},\r\n            scheduleChildRemoval: function (key) { return _this.removeChild(key); }\r\n        };\r\n        return _this;\r\n    }\r\n    Transition.prototype.removeChild = function (key) {\r\n        var _a = this.state, displayedChildren = _a.displayedChildren, finishedLeaving = _a.finishedLeaving;\r\n        var _b = this.props, enterAfterExit = _b.enterAfterExit, onRest = _b.onRest;\r\n        if (!finishedLeaving.hasOwnProperty(key))\r\n            return;\r\n        finishedLeaving[key] = true;\r\n        if (!Object.keys(finishedLeaving).every(function (leavingKey) { return finishedLeaving[leavingKey]; })) {\r\n            return;\r\n        }\r\n        var targetChildren = displayedChildren.filter(function (child) { return !finishedLeaving.hasOwnProperty(child.key); });\r\n        var newState = enterAfterExit\r\n            ? __assign({ finishedLeaving: {} }, handleChildrenTransitions(__assign({}, this.props, { enterAfterExit: false }), __assign({}, this.state, { displayedChildren: targetChildren }))) : {\r\n            finishedLeaving: {},\r\n            displayedChildren: targetChildren\r\n        };\r\n        this.setState(newState, onRest);\r\n    };\r\n    Transition.prototype.shouldComponentUpdate = function (nextProps, nextState) {\r\n        return this.state !== nextState;\r\n    };\r\n    Transition.prototype.render = function () {\r\n        return this.state.displayedChildren;\r\n    };\r\n    Transition.defaultProps = {\r\n        flipMove: false,\r\n        enterAfterExit: false,\r\n        preEnterPose: 'exit',\r\n        enterPose: 'enter',\r\n        exitPose: 'exit'\r\n    };\r\n    Transition.getDerivedStateFromProps = handleChildrenTransitions;\r\n    return Transition;\r\n}(Component));\n\nvar PoseGroup = (function (_super) {\r\n    __extends(PoseGroup, _super);\r\n    function PoseGroup() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    PoseGroup.prototype.render = function () {\r\n        return createElement(Transition, __assign({}, this.props));\r\n    };\r\n    PoseGroup.defaultProps = {\r\n        flipMove: true\r\n    };\r\n    return PoseGroup;\r\n}(Component));\n\nvar PI = Math.PI;\nvar defaultColors = ['#A45BF1', '#25C6F6', '#72F753', '#F76C88', '#F5F770'];\n\nvar createElements = function createElements(root, elementCount, elementSize, zIndex, colors) {\n  return Array.from({ length: elementCount }).map(function (_, index) {\n    var element = document.createElement('span');\n    var color = colors[index % colors.length];\n    element.style['background-color'] = color;\n    element.style.width = elementSize + 'px';\n    element.style.height = elementSize + 'px';\n    element.style.position = 'absolute';\n    element.style.zIndex = zIndex;\n    root.appendChild(element);\n    return element;\n  });\n};\n\nvar radiansFrom = function radiansFrom(degrees) {\n  return degrees * (PI / 180);\n};\n\nvar generatePhysics = function generatePhysics(angle, spread, startVelocity, random) {\n  var radAngle = radiansFrom(angle);\n  var radSpread = radiansFrom(spread);\n  return {\n    x: 0,\n    y: 0,\n    wobble: random() * 10,\n    velocity: startVelocity * 0.5 + random() * startVelocity,\n    angle2D: -radAngle + (0.5 * radSpread - random() * radSpread),\n    angle3D: -(PI / 4) + random() * (PI / 2),\n    tiltAngle: random() * PI\n  };\n};\n\nvar updateFetti = function updateFetti(fetti, progress, decay, index) {\n  fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.z += Math.sin(fetti.physics.angle3D) * fetti.physics.velocity;\n  fetti.physics.wobble += 0.05;\n  fetti.physics.velocity *= decay;\n  fetti.physics.y += 3.5;\n  fetti.physics.tiltAngle += 0.15;\n\n  var _fetti$physics = fetti.physics,\n      x = _fetti$physics.x,\n      y = _fetti$physics.y,\n      tiltAngle = _fetti$physics.tiltAngle,\n      wobble = _fetti$physics.wobble;\n\n  var wobbleX = index % 2 === 0 ? x + (6 * Math.sin(wobble) + progress) : x + (12 * Math.cos(wobble) + progress);\n  var wobbleY = y + 5 * Math.sin(wobble);\n  var transform = 'translate3d(' + wobbleX + 'px, ' + wobbleY + 'px, 0) rotate3d(1, 1, 1, ' + tiltAngle + 'rad)';\n\n  fetti.element.style.transform = transform;\n  fetti.element.style.scale = 1 - 0.2 * progress;\n  fetti.element.style.opacity = 1 - progress;\n};\n\nvar animate = function animate(root, fettis, decay, lifetime) {\n  var totalTicks = lifetime;\n  var tick = 0;\n\n  var update = function update() {\n    fettis.forEach(function (fetti, index) {\n      return updateFetti(fetti, tick / totalTicks, decay, index);\n    });\n\n    tick += 1;\n    if (tick < totalTicks) {\n      window.requestAnimationFrame(update);\n    } else {\n      fettis.forEach(function (fetti) {\n        if (fetti.element.parentNode === root) {\n          return root.removeChild(fetti.element);\n        }\n      });\n    }\n  };\n\n  window.requestAnimationFrame(update);\n};\n\nvar confetti = function confetti(root) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$elementCount = _ref.elementCount,\n      elementCount = _ref$elementCount === undefined ? 50 : _ref$elementCount,\n      _ref$elementSize = _ref.elementSize,\n      elementSize = _ref$elementSize === undefined ? 8 : _ref$elementSize,\n      _ref$colors = _ref.colors,\n      colors = _ref$colors === undefined ? defaultColors : _ref$colors,\n      _ref$angle = _ref.angle,\n      angle = _ref$angle === undefined ? 90 : _ref$angle,\n      _ref$spread = _ref.spread,\n      spread = _ref$spread === undefined ? 45 : _ref$spread,\n      _ref$decay = _ref.decay,\n      decay = _ref$decay === undefined ? 0.9 : _ref$decay,\n      _ref$lifetime = _ref.lifetime,\n      lifetime = _ref$lifetime === undefined ? 200 : _ref$lifetime,\n      _ref$startVelocity = _ref.startVelocity,\n      startVelocity = _ref$startVelocity === undefined ? 35 : _ref$startVelocity,\n      _ref$zIndex = _ref.zIndex,\n      zIndex = _ref$zIndex === undefined ? 0 : _ref$zIndex,\n      _ref$random = _ref.random,\n      random = _ref$random === undefined ? Math.random : _ref$random;\n\n  var elements = createElements(root, elementCount, elementSize, zIndex, colors);\n  var fettis = elements.map(function (element) {\n    return {\n      element: element,\n      physics: generatePhysics(angle, spread, startVelocity, random)\n    };\n  });\n\n  animate(root, fettis, decay, lifetime);\n};\n\nvar PI$1 = Math.PI;\nvar defaultEmoji = ['👍', '😊', '🎉'];\n\nvar createElements$1 = function createElements(root, elementCount, elementSize, zIndex, emoji) {\n  return Array.from({ length: elementCount }).map(function (_, index) {\n    var element = document.createElement('span');\n    var emojiIcon = emoji[index % emoji.length];\n    element.innerHTML = emojiIcon;\n    element.style.fontSize = elementSize + 'px';\n    element.style.position = 'absolute';\n    element.style.zIndex = zIndex;\n    root.appendChild(element);\n    return element;\n  });\n};\n\nvar radiansFrom$1 = function radiansFrom(degrees) {\n  return degrees * (PI$1 / 180);\n};\n\nvar generatePhysics$1 = function generatePhysics(angle, spread, startVelocity, random) {\n  var radAngle = radiansFrom$1(angle);\n  var radSpread = radiansFrom$1(spread);\n  return {\n    x: 0,\n    y: 0,\n    wobble: random() * 10,\n    velocity: startVelocity * 0.5 + random() * startVelocity,\n    angle2D: -radAngle + (0.5 * radSpread - random() * radSpread),\n    angle3D: -(PI$1 / 4) + random() * (PI$1 / 2),\n    tiltAngle: random() * PI$1\n  };\n};\n\nvar updateMojis = function updateMojis(fetti, progress, decay) {\n  fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.wobble += 0;\n  fetti.physics.velocity *= decay;\n  fetti.physics.y += 5;\n  fetti.physics.tiltAngle += 0.1;\n\n  var _fetti$physics = fetti.physics,\n      x = _fetti$physics.x,\n      y = _fetti$physics.y,\n      tiltAngle = _fetti$physics.tiltAngle;\n\n  var wobbleX = x + 0;\n  var wobbleY = y + 0;\n  var transform = 'translate3d(' + wobbleX + 'px, ' + wobbleY + 'px, 0) rotate(' + tiltAngle + 'rad)';\n\n  fetti.element.style.transform = transform;\n  fetti.element.style.opacity = 1 - progress;\n};\n\nvar animate$1 = function animate(root, mojis, decay, lifetime) {\n  var totalTicks = lifetime;\n  var tick = 0;\n\n  var update = function update() {\n    mojis.forEach(function (fetti) {\n      return updateMojis(fetti, tick / totalTicks, decay);\n    });\n\n    tick += 1;\n    if (tick < totalTicks) {\n      window.requestAnimationFrame(update);\n    } else {\n      mojis.forEach(function (fetti) {\n        if (fetti.element.parentNode === root) {\n          return root.removeChild(fetti.element);\n        }\n      });\n    }\n  };\n\n  window.requestAnimationFrame(update);\n};\n\nvar emoji = function emoji(root) {\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$angle = _ref.angle,\n      angle = _ref$angle === undefined ? 90 : _ref$angle,\n      _ref$decay = _ref.decay,\n      decay = _ref$decay === undefined ? 0.9 : _ref$decay,\n      _ref$spread = _ref.spread,\n      spread = _ref$spread === undefined ? 45 : _ref$spread,\n      _ref$startVelocity = _ref.startVelocity,\n      startVelocity = _ref$startVelocity === undefined ? 35 : _ref$startVelocity,\n      _ref$elementCount = _ref.elementCount,\n      elementCount = _ref$elementCount === undefined ? 50 : _ref$elementCount,\n      _ref$elementSize = _ref.elementSize,\n      elementSize = _ref$elementSize === undefined ? 25 : _ref$elementSize,\n      _ref$lifetime = _ref.lifetime,\n      lifetime = _ref$lifetime === undefined ? 200 : _ref$lifetime,\n      _ref$zIndex = _ref.zIndex,\n      zIndex = _ref$zIndex === undefined ? 0 : _ref$zIndex,\n      _ref$emoji = _ref.emoji,\n      emoji = _ref$emoji === undefined ? defaultEmoji : _ref$emoji,\n      _ref$random = _ref.random,\n      random = _ref$random === undefined ? Math.random : _ref$random;\n\n  var elements = createElements$1(root, elementCount, elementSize, zIndex, emoji);\n  var mojis = elements.map(function (element) {\n    return {\n      element: element,\n      physics: generatePhysics$1(angle, spread, startVelocity, random)\n    };\n  });\n\n  animate$1(root, mojis, decay, lifetime);\n};\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar lottie = createCommonjsModule(function (module) {\n(typeof navigator !== \"undefined\") && (function(root, factory) {\r\n    if (module.exports) {\r\n        module.exports = factory(root);\r\n    } else {\r\n        root.lottie = factory(root);\r\n        root.bodymovin = root.lottie;\r\n    }\r\n}((window || {}), function(window) {\r\n    var svgNS = \"http://www.w3.org/2000/svg\";\r\n\r\nvar locationHref = '';\r\n\r\nvar initialDefaultFrame = -999999;\r\n\r\nvar subframeEnabled = true;\r\nvar expressionsPlugin;\r\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\nvar bm_pow = Math.pow;\r\nvar bm_sqrt = Math.sqrt;\r\nvar bm_floor = Math.floor;\r\nvar bm_max = Math.max;\r\nvar bm_min = Math.min;\r\n\r\nvar BMMath = {};\r\n(function(){\r\n    var propertyNames = [\"abs\", \"acos\", \"acosh\", \"asin\", \"asinh\", \"atan\", \"atanh\", \"atan2\", \"ceil\", \"cbrt\", \"expm1\", \"clz32\", \"cos\", \"cosh\", \"exp\", \"floor\", \"fround\", \"hypot\", \"imul\", \"log\", \"log1p\", \"log2\", \"log10\", \"max\", \"min\", \"pow\", \"random\", \"round\", \"sign\", \"sin\", \"sinh\", \"sqrt\", \"tan\", \"tanh\", \"trunc\", \"E\", \"LN10\", \"LN2\", \"LOG10E\", \"LOG2E\", \"PI\", \"SQRT1_2\", \"SQRT2\"];\r\n    var i, len = propertyNames.length;\r\n    for(i=0;i<len;i+=1){\r\n        BMMath[propertyNames[i]] = Math[propertyNames[i]];\r\n    }\r\n}());\r\n\r\nfunction ProjectInterface(){return {};}\r\n\r\nBMMath.random = Math.random;\r\nBMMath.abs = function(val){\r\n    var tOfVal = typeof val;\r\n    if(tOfVal === 'object' && val.length){\r\n        var absArr = createSizedArray(val.length);\r\n        var i, len = val.length;\r\n        for(i=0;i<len;i+=1){\r\n            absArr[i] = Math.abs(val[i]);\r\n        }\r\n        return absArr;\r\n    }\r\n    return Math.abs(val);\r\n\r\n};\r\nvar defaultCurveSegments = 150;\r\nvar degToRads = Math.PI/180;\r\nvar roundCorner = 0.5519;\r\n\r\nfunction styleDiv(element){\r\n    element.style.position = 'absolute';\r\n    element.style.top = 0;\r\n    element.style.left = 0;\r\n    element.style.display = 'block';\r\n    element.style.transformOrigin = element.style.webkitTransformOrigin = '0 0';\r\n    element.style.backfaceVisibility  = element.style.webkitBackfaceVisibility = 'visible';\r\n    element.style.transformStyle = element.style.webkitTransformStyle = element.style.mozTransformStyle = \"preserve-3d\";\r\n}\r\n\r\nfunction BMEnterFrameEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentTime = c;\r\n    this.totalTime = t;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteEvent(n,d){\r\n    this.type = n;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMCompleteLoopEvent(n,c,t,d){\r\n    this.type = n;\r\n    this.currentLoop = t;\r\n    this.totalLoops = c;\r\n    this.direction = d < 0 ? -1:1;\r\n}\r\n\r\nfunction BMSegmentStartEvent(n,f,t){\r\n    this.type = n;\r\n    this.firstFrame = f;\r\n    this.totalFrames = t;\r\n}\r\n\r\nfunction BMDestroyEvent(n,t){\r\n    this.type = n;\r\n    this.target = t;\r\n}\r\n\r\nvar createElementID = (function(){\r\n    var _count = 0;\r\n    return function createID() {\r\n        return '__lottie_element_' + ++_count\r\n    }\r\n}());\r\n\r\nfunction HSVtoRGB(h, s, v) {\r\n    var r, g, b, i, f, p, q, t;\r\n    i = Math.floor(h * 6);\r\n    f = h * 6 - i;\r\n    p = v * (1 - s);\r\n    q = v * (1 - f * s);\r\n    t = v * (1 - (1 - f) * s);\r\n    switch (i % 6) {\r\n        case 0: r = v; g = t; b = p; break;\r\n        case 1: r = q; g = v; b = p; break;\r\n        case 2: r = p; g = v; b = t; break;\r\n        case 3: r = p; g = q; b = v; break;\r\n        case 4: r = t; g = p; b = v; break;\r\n        case 5: r = v; g = p; b = q; break;\r\n    }\r\n    return [ r,\r\n        g,\r\n         b ];\r\n}\r\n\r\nfunction RGBtoHSV(r, g, b) {\r\n    var max = Math.max(r, g, b), min = Math.min(r, g, b),\r\n        d = max - min,\r\n        h,\r\n        s = (max === 0 ? 0 : d / max),\r\n        v = max / 255;\r\n\r\n    switch (max) {\r\n        case min: h = 0; break;\r\n        case r: h = (g - b) + d * (g < b ? 6: 0); h /= 6 * d; break;\r\n        case g: h = (b - r) + d * 2; h /= 6 * d; break;\r\n        case b: h = (r - g) + d * 4; h /= 6 * d; break;\r\n    }\r\n\r\n    return [\r\n         h,\r\n         s,\r\n         v\r\n    ];\r\n}\r\n\r\nfunction addSaturationToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[1] += offset;\r\n    if (hsv[1] > 1) {\r\n        hsv[1] = 1;\r\n    }\r\n    else if (hsv[1] <= 0) {\r\n        hsv[1] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addBrightnessToRGB(color,offset){\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[2] += offset;\r\n    if (hsv[2] > 1) {\r\n        hsv[2] = 1;\r\n    }\r\n    else if (hsv[2] < 0) {\r\n        hsv[2] = 0;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nfunction addHueToRGB(color,offset) {\r\n    var hsv = RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);\r\n    hsv[0] += offset/360;\r\n    if (hsv[0] > 1) {\r\n        hsv[0] -= 1;\r\n    }\r\n    else if (hsv[0] < 0) {\r\n        hsv[0] += 1;\r\n    }\r\n    return HSVtoRGB(hsv[0],hsv[1],hsv[2]);\r\n}\r\n\r\nvar rgbToHex = (function(){\r\n    var colorMap = [];\r\n    var i;\r\n    var hex;\r\n    for(i=0;i<256;i+=1){\r\n        hex = i.toString(16);\r\n        colorMap[i] = hex.length == 1 ? '0' + hex : hex;\r\n    }\r\n\r\n    return function(r, g, b) {\r\n        if(r<0){\r\n            r = 0;\r\n        }\r\n        if(g<0){\r\n            g = 0;\r\n        }\r\n        if(b<0){\r\n            b = 0;\r\n        }\r\n        return '#' + colorMap[r] + colorMap[g] + colorMap[b];\r\n    };\r\n}());\r\nfunction BaseEvent(){}\r\nBaseEvent.prototype = {\r\n\ttriggerEvent: function (eventName, args) {\r\n\t    if (this._cbs[eventName]) {\r\n\t        var len = this._cbs[eventName].length;\r\n\t        for (var i = 0; i < len; i++){\r\n\t            this._cbs[eventName][i](args);\r\n\t        }\r\n\t    }\r\n\t},\r\n\taddEventListener: function (eventName, callback) {\r\n\t    if (!this._cbs[eventName]){\r\n\t        this._cbs[eventName] = [];\r\n\t    }\r\n\t    this._cbs[eventName].push(callback);\r\n\r\n\t\treturn function() {\r\n\t\t\tthis.removeEventListener(eventName, callback);\r\n\t\t}.bind(this);\r\n\t},\r\n\tremoveEventListener: function (eventName,callback){\r\n\t    if (!callback){\r\n\t        this._cbs[eventName] = null;\r\n\t    }else if(this._cbs[eventName]){\r\n\t        var i = 0, len = this._cbs[eventName].length;\r\n\t        while(i<len){\r\n\t            if(this._cbs[eventName][i] === callback){\r\n\t                this._cbs[eventName].splice(i,1);\r\n\t                i -=1;\r\n\t                len -= 1;\r\n\t            }\r\n\t            i += 1;\r\n\t        }\r\n\t        if(!this._cbs[eventName].length){\r\n\t            this._cbs[eventName] = null;\r\n\t        }\r\n\t    }\r\n\t}\r\n};\r\nvar createTypedArray = (function(){\r\n\tfunction createRegularArray(type, len){\r\n\t\tvar i = 0, arr = [], value;\r\n\t\tswitch(type) {\r\n\t\t\tcase 'int16':\r\n\t\t\tcase 'uint8c':\r\n\t\t\t\tvalue = 1;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tvalue = 1.1;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tarr.push(value);\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\tfunction createTypedArray(type, len){\r\n\t\tif(type === 'float32') {\r\n\t\t\treturn new Float32Array(len);\r\n\t\t} else if(type === 'int16') {\r\n\t\t\treturn new Int16Array(len);\r\n\t\t} else if(type === 'uint8c') {\r\n\t\t\treturn new Uint8ClampedArray(len);\r\n\t\t}\r\n\t}\r\n\tif(typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\r\n\t\treturn createTypedArray;\r\n\t} else {\r\n\t\treturn createRegularArray;\r\n\t}\r\n}());\r\n\r\nfunction createSizedArray(len) {\r\n\treturn Array.apply(null,{length:len});\r\n}\r\nfunction createNS(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElementNS(svgNS, type);\r\n}\r\nfunction createTag(type) {\r\n\t//return {appendChild:function(){},setAttribute:function(){},style:{}}\r\n\treturn document.createElement(type);\r\n}\r\nfunction DynamicPropertyContainer(){}DynamicPropertyContainer.prototype = {\r\n\taddDynamicProperty: function(prop) {\r\n\t\tif(this.dynamicProperties.indexOf(prop) === -1) {\r\n\t        this.dynamicProperties.push(prop);\r\n\t        this.container.addDynamicProperty(this);\r\n\t    \tthis._isAnimated = true;\r\n\t    }\r\n\t},\r\n\titerateDynamicProperties: function(){\r\n\t    this._mdf = false;\r\n\t    var i, len = this.dynamicProperties.length;\r\n\t    for(i=0;i<len;i+=1){\r\n\t        this.dynamicProperties[i].getValue();\r\n\t        if(this.dynamicProperties[i]._mdf) {\r\n\t            this._mdf = true;\r\n\t        }\r\n\t    }\r\n\t},\r\n\tinitDynamicPropertyContainer: function(container){\r\n\t    this.container = container;\r\n\t    this.dynamicProperties = [];\r\n\t    this._mdf = false;\r\n\t    this._isAnimated = false;\r\n\t}\r\n};\r\nvar getBlendMode = (function() {\r\n\r\n\tvar blendModeEnums = {\r\n        0:'source-over',\r\n        1:'multiply',\r\n        2:'screen',\r\n        3:'overlay',\r\n        4:'darken',\r\n        5:'lighten',\r\n        6:'color-dodge',\r\n        7:'color-burn',\r\n        8:'hard-light',\r\n        9:'soft-light',\r\n        10:'difference',\r\n        11:'exclusion',\r\n        12:'hue',\r\n        13:'saturation',\r\n        14:'color',\r\n        15:'luminosity'\r\n    };\r\n\r\n\treturn function(mode) {\r\n\t\treturn blendModeEnums[mode] || '';\r\n\t}\r\n}());\r\n/*!\r\n Transformation Matrix v2.0\r\n (c) Epistemex 2014-2015\r\n www.epistemex.com\r\n By Ken Fyrstenberg\r\n Contributions by leeoniya.\r\n License: MIT, header required.\r\n */\r\n\r\n/**\r\n * 2D transformation matrix object initialized with identity matrix.\r\n *\r\n * The matrix can synchronize a canvas context by supplying the context\r\n * as an argument, or later apply current absolute transform to an\r\n * existing context.\r\n *\r\n * All values are handled as floating point values.\r\n *\r\n * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n * @prop {number} a - scale x\r\n * @prop {number} b - shear y\r\n * @prop {number} c - shear x\r\n * @prop {number} d - scale y\r\n * @prop {number} e - translate x\r\n * @prop {number} f - translate y\r\n * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n * @constructor\r\n */\r\n\r\nvar Matrix = (function(){\r\n\r\n    var _cos = Math.cos;\r\n    var _sin = Math.sin;\r\n    var _tan = Math.tan;\r\n    var _rnd = Math.round;\r\n\r\n    function reset(){\r\n        this.props[0] = 1;\r\n        this.props[1] = 0;\r\n        this.props[2] = 0;\r\n        this.props[3] = 0;\r\n        this.props[4] = 0;\r\n        this.props[5] = 1;\r\n        this.props[6] = 0;\r\n        this.props[7] = 0;\r\n        this.props[8] = 0;\r\n        this.props[9] = 0;\r\n        this.props[10] = 1;\r\n        this.props[11] = 0;\r\n        this.props[12] = 0;\r\n        this.props[13] = 0;\r\n        this.props[14] = 0;\r\n        this.props[15] = 1;\r\n        return this;\r\n    }\r\n\r\n    function rotate(angle) {\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateX(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateY(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos,  0,  mSin, 0, 0, 1, 0, 0, -mSin,  0,  mCos, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function rotateZ(angle){\r\n        if(angle === 0){\r\n            return this;\r\n        }\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function shear(sx,sy){\r\n        return this._t(1, sy, sx, 1, 0, 0);\r\n    }\r\n\r\n    function skew(ax, ay){\r\n        return this.shear(_tan(ax), _tan(ay));\r\n    }\r\n\r\n    function skewFromAxis(ax, angle){\r\n        var mCos = _cos(angle);\r\n        var mSin = _sin(angle);\r\n        return this._t(mCos, mSin,  0, 0, -mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(1, 0,  0, 0, _tan(ax),  1, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1)\r\n            ._t(mCos, -mSin,  0, 0, mSin,  mCos, 0, 0, 0,  0,  1, 0, 0, 0, 0, 1);\r\n        //return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\r\n    }\r\n\r\n    function scale(sx, sy, sz) {\r\n        if(!sz && sz !== 0) {\r\n            sz = 1;\r\n        }\r\n        if(sx === 1 && sy === 1 && sz === 1){\r\n            return this;\r\n        }\r\n        return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\r\n    }\r\n\r\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\r\n        this.props[0] = a;\r\n        this.props[1] = b;\r\n        this.props[2] = c;\r\n        this.props[3] = d;\r\n        this.props[4] = e;\r\n        this.props[5] = f;\r\n        this.props[6] = g;\r\n        this.props[7] = h;\r\n        this.props[8] = i;\r\n        this.props[9] = j;\r\n        this.props[10] = k;\r\n        this.props[11] = l;\r\n        this.props[12] = m;\r\n        this.props[13] = n;\r\n        this.props[14] = o;\r\n        this.props[15] = p;\r\n        return this;\r\n    }\r\n\r\n    function translate(tx, ty, tz) {\r\n        tz = tz || 0;\r\n        if(tx !== 0 || ty !== 0 || tz !== 0){\r\n            return this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1);\r\n        }\r\n        return this;\r\n    }\r\n\r\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\r\n\r\n        var _p = this.props;\r\n\r\n        if(a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0){\r\n            //NOTE: commenting this condition because TurboFan deoptimizes code when present\r\n            //if(m2 !== 0 || n2 !== 0 || o2 !== 0){\r\n                _p[12] = _p[12] * a2 + _p[15] * m2;\r\n                _p[13] = _p[13] * f2 + _p[15] * n2;\r\n                _p[14] = _p[14] * k2 + _p[15] * o2;\r\n                _p[15] = _p[15] * p2;\r\n            //}\r\n            this._identityCalculated = false;\r\n            return this;\r\n        }\r\n\r\n        var a1 = _p[0];\r\n        var b1 = _p[1];\r\n        var c1 = _p[2];\r\n        var d1 = _p[3];\r\n        var e1 = _p[4];\r\n        var f1 = _p[5];\r\n        var g1 = _p[6];\r\n        var h1 = _p[7];\r\n        var i1 = _p[8];\r\n        var j1 = _p[9];\r\n        var k1 = _p[10];\r\n        var l1 = _p[11];\r\n        var m1 = _p[12];\r\n        var n1 = _p[13];\r\n        var o1 = _p[14];\r\n        var p1 = _p[15];\r\n\r\n        /* matrix order (canvas compatible):\r\n         * ace\r\n         * bdf\r\n         * 001\r\n         */\r\n        _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\r\n        _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2 ;\r\n        _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2 ;\r\n        _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2 ;\r\n\r\n        _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2 ;\r\n        _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2 ;\r\n        _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2 ;\r\n        _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2 ;\r\n\r\n        _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2 ;\r\n        _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2 ;\r\n        _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2 ;\r\n        _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2 ;\r\n\r\n        _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2 ;\r\n        _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2 ;\r\n        _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2 ;\r\n        _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2 ;\r\n\r\n        this._identityCalculated = false;\r\n        return this;\r\n    }\r\n\r\n    function isIdentity() {\r\n        if(!this._identityCalculated){\r\n            this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\r\n            this._identityCalculated = true;\r\n        }\r\n        return this._identity;\r\n    }\r\n\r\n    function equals(matr){\r\n        var i = 0;\r\n        while (i < 16) {\r\n            if(matr.props[i] !== this.props[i]) {\r\n                return false;\r\n            }\r\n            i+=1;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function clone(matr){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            matr.props[i] = this.props[i];\r\n        }\r\n    }\r\n\r\n    function cloneFromProps(props){\r\n        var i;\r\n        for(i=0;i<16;i+=1){\r\n            this.props[i] = props[i];\r\n        }\r\n    }\r\n\r\n    function applyToPoint(x, y, z) {\r\n\r\n        return {\r\n            x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\r\n            y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\r\n            z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\r\n        };\r\n        /*return {\r\n         x: x * me.a + y * me.c + me.e,\r\n         y: x * me.b + y * me.d + me.f\r\n         };*/\r\n    }\r\n    function applyToX(x, y, z) {\r\n        return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\r\n    }\r\n    function applyToY(x, y, z) {\r\n        return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\r\n    }\r\n    function applyToZ(x, y, z) {\r\n        return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\r\n    }\r\n\r\n    function inversePoint(pt) {\r\n        var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\r\n        var a = this.props[5]/determinant;\r\n        var b = - this.props[1]/determinant;\r\n        var c = - this.props[4]/determinant;\r\n        var d = this.props[0]/determinant;\r\n        var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12])/determinant;\r\n        var f = - (this.props[0] * this.props[13] - this.props[1] * this.props[12])/determinant;\r\n        return [pt[0] * a + pt[1] * c + e, pt[0] * b + pt[1] * d + f, 0];\r\n    }\r\n\r\n    function inversePoints(pts){\r\n        var i, len = pts.length, retPts = [];\r\n        for(i=0;i<len;i+=1){\r\n            retPts[i] = inversePoint(pts[i]);\r\n        }\r\n        return retPts;\r\n    }\r\n\r\n    function applyToTriplePoints(pt1, pt2, pt3) {\r\n        var arr = createTypedArray('float32', 6);\r\n        if(this.isIdentity()) {\r\n            arr[0] = pt1[0];\r\n            arr[1] = pt1[1];\r\n            arr[2] = pt2[0];\r\n            arr[3] = pt2[1];\r\n            arr[4] = pt3[0];\r\n            arr[5] = pt3[1];\r\n        } else {\r\n            var p0 = this.props[0], p1 = this.props[1], p4 = this.props[4], p5 = this.props[5], p12 = this.props[12], p13 = this.props[13];\r\n            arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\r\n            arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\r\n            arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\r\n            arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\r\n            arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\r\n            arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointArray(x,y,z){\r\n        var arr;\r\n        if(this.isIdentity()) {\r\n            arr = [x,y,z];\r\n        } else {\r\n            arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function applyToPointStringified(x, y) {\r\n        if(this.isIdentity()) {\r\n            return x + ',' + y;\r\n        }\r\n        var _p = this.props;\r\n        return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100+','+ Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\r\n    }\r\n\r\n    function toCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var i = 0;\r\n        var props = this.props;\r\n        var cssValue = 'matrix3d(';\r\n        var v = 10000;\r\n        while(i<16){\r\n            cssValue += _rnd(props[i]*v)/v;\r\n            cssValue += i === 15 ? ')':',';\r\n            i += 1;\r\n        }\r\n        return cssValue;\r\n    }\r\n\r\n    function roundMatrixProperty(val) {\r\n        var v = 10000;\r\n        if((val < 0.000001 && val > 0) || (val > -0.000001 && val < 0)) {\r\n            return _rnd(val * v) / v;\r\n        }\r\n        return val;\r\n    }\r\n\r\n    function to2dCSS() {\r\n        //Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\r\n        /*if(this.isIdentity()) {\r\n            return '';\r\n        }*/\r\n        var props = this.props;\r\n        var _a = roundMatrixProperty(props[0]);\r\n        var _b = roundMatrixProperty(props[1]);\r\n        var _c = roundMatrixProperty(props[4]);\r\n        var _d = roundMatrixProperty(props[5]);\r\n        var _e = roundMatrixProperty(props[12]);\r\n        var _f = roundMatrixProperty(props[13]);\r\n        return \"matrix(\" + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + \")\";\r\n    }\r\n\r\n    return function(){\r\n        this.reset = reset;\r\n        this.rotate = rotate;\r\n        this.rotateX = rotateX;\r\n        this.rotateY = rotateY;\r\n        this.rotateZ = rotateZ;\r\n        this.skew = skew;\r\n        this.skewFromAxis = skewFromAxis;\r\n        this.shear = shear;\r\n        this.scale = scale;\r\n        this.setTransform = setTransform;\r\n        this.translate = translate;\r\n        this.transform = transform;\r\n        this.applyToPoint = applyToPoint;\r\n        this.applyToX = applyToX;\r\n        this.applyToY = applyToY;\r\n        this.applyToZ = applyToZ;\r\n        this.applyToPointArray = applyToPointArray;\r\n        this.applyToTriplePoints = applyToTriplePoints;\r\n        this.applyToPointStringified = applyToPointStringified;\r\n        this.toCSS = toCSS;\r\n        this.to2dCSS = to2dCSS;\r\n        this.clone = clone;\r\n        this.cloneFromProps = cloneFromProps;\r\n        this.equals = equals;\r\n        this.inversePoints = inversePoints;\r\n        this.inversePoint = inversePoint;\r\n        this._t = this.transform;\r\n        this.isIdentity = isIdentity;\r\n        this._identity = true;\r\n        this._identityCalculated = false;\r\n\r\n        this.props = createTypedArray('float32', 16);\r\n        this.reset();\r\n    };\r\n}());\r\n\r\n/*\r\n Copyright 2014 David Bau.\r\n\r\n Permission is hereby granted, free of charge, to any person obtaining\r\n a copy of this software and associated documentation files (the\r\n \"Software\"), to deal in the Software without restriction, including\r\n without limitation the rights to use, copy, modify, merge, publish,\r\n distribute, sublicense, and/or sell copies of the Software, and to\r\n permit persons to whom the Software is furnished to do so, subject to\r\n the following conditions:\r\n\r\n The above copyright notice and this permission notice shall be\r\n included in all copies or substantial portions of the Software.\r\n\r\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n */\r\n\r\n(function (pool, math) {\r\n//\r\n// The following constants are related to IEEE 754 limits.\r\n//\r\n    var global = this,\r\n        width = 256,        // each RC4 output is 0 <= x < 256\r\n        chunks = 6,         // at least six RC4 outputs for each double\r\n        digits = 52,        // there are 52 significant digits in a double\r\n        rngname = 'random', // rngname: name for Math.random and Math.seedrandom\r\n        startdenom = math.pow(width, chunks),\r\n        significance = math.pow(2, digits),\r\n        overflow = significance * 2,\r\n        mask = width - 1;\r\n         // node.js crypto module, initialized at the bottom.\r\n\r\n//\r\n// seedrandom()\r\n// This is the seedrandom function described above.\r\n//\r\n    function seedrandom(seed, options, callback) {\r\n        var key = [];\r\n        options = (options === true) ? { entropy: true } : (options || {});\r\n\r\n        // Flatten the seed string or build one from local entropy if needed.\r\n        var shortseed = mixkey(flatten(\r\n            options.entropy ? [seed, tostring(pool)] :\r\n                (seed === null) ? autoseed() : seed, 3), key);\r\n\r\n        // Use the seed to initialize an ARC4 generator.\r\n        var arc4 = new ARC4(key);\r\n\r\n        // This function returns a random double in [0, 1) that contains\r\n        // randomness in every bit of the mantissa of the IEEE 754 value.\r\n        var prng = function() {\r\n            var n = arc4.g(chunks),             // Start with a numerator n < 2 ^ 48\r\n                d = startdenom,                 //   and denominator d = 2 ^ 48.\r\n                x = 0;                          //   and no 'extra last byte'.\r\n            while (n < significance) {          // Fill up all significant digits by\r\n                n = (n + x) * width;              //   shifting numerator and\r\n                d *= width;                       //   denominator and generating a\r\n                x = arc4.g(1);                    //   new least-significant-byte.\r\n            }\r\n            while (n >= overflow) {             // To avoid rounding up, before adding\r\n                n /= 2;                           //   last byte, shift everything\r\n                d /= 2;                           //   right using integer math until\r\n                x >>>= 1;                         //   we have exactly the desired bits.\r\n            }\r\n            return (n + x) / d;                 // Form the number within [0, 1).\r\n        };\r\n\r\n        prng.int32 = function() { return arc4.g(4) | 0; };\r\n        prng.quick = function() { return arc4.g(4) / 0x100000000; };\r\n        prng.double = prng;\r\n\r\n        // Mix the randomness into accumulated entropy.\r\n        mixkey(tostring(arc4.S), pool);\r\n\r\n        // Calling convention: what to return as a function of prng, seed, is_math.\r\n        return (options.pass || callback ||\r\n        function(prng, seed, is_math_call, state) {\r\n            if (state) {\r\n                // Load the arc4 state from the given state if it has an S array.\r\n                if (state.S) { copy(state, arc4); }\r\n                // Only provide the .state method if requested via options.state.\r\n                prng.state = function() { return copy(arc4, {}); };\r\n            }\r\n\r\n            // If called as a method of Math (Math.seedrandom()), mutate\r\n            // Math.random because that is how seedrandom.js has worked since v1.0.\r\n            if (is_math_call) { math[rngname] = prng; return seed; }\r\n\r\n            // Otherwise, it is a newer calling convention, so return the\r\n            // prng directly.\r\n            else return prng;\r\n        })(\r\n            prng,\r\n            shortseed,\r\n            'global' in options ? options.global : (this == math),\r\n            options.state);\r\n    }\r\n    math['seed' + rngname] = seedrandom;\r\n\r\n//\r\n// ARC4\r\n//\r\n// An ARC4 implementation.  The constructor takes a key in the form of\r\n// an array of at most (width) integers that should be 0 <= x < (width).\r\n//\r\n// The g(count) method returns a pseudorandom integer that concatenates\r\n// the next (count) outputs from ARC4.  Its return value is a number x\r\n// that is in the range 0 <= x < (width ^ count).\r\n//\r\n    function ARC4(key) {\r\n        var t, keylen = key.length,\r\n            me = this, i = 0, j = me.i = me.j = 0, s = me.S = [];\r\n\r\n        // The empty key [] is treated as [0].\r\n        if (!keylen) { key = [keylen++]; }\r\n\r\n        // Set up S using the standard key scheduling algorithm.\r\n        while (i < width) {\r\n            s[i] = i++;\r\n        }\r\n        for (i = 0; i < width; i++) {\r\n            s[i] = s[j = mask & (j + key[i % keylen] + (t = s[i]))];\r\n            s[j] = t;\r\n        }\r\n\r\n        // The \"g\" method returns the next (count) outputs as one number.\r\n        me.g = function(count) {\r\n            // Using instance members instead of closure state nearly doubles speed.\r\n            var t, r = 0,\r\n                i = me.i, j = me.j, s = me.S;\r\n            while (count--) {\r\n                t = s[i = mask & (i + 1)];\r\n                r = r * width + s[mask & ((s[i] = s[j = mask & (j + t)]) + (s[j] = t))];\r\n            }\r\n            me.i = i; me.j = j;\r\n            return r;\r\n            // For robust unpredictability, the function call below automatically\r\n            // discards an initial batch of values.  This is called RC4-drop[256].\r\n            // See http://google.com/search?q=rsa+fluhrer+response&btnI\r\n        };\r\n    }\r\n\r\n//\r\n// copy()\r\n// Copies internal state of ARC4 to or from a plain object.\r\n//\r\n    function copy(f, t) {\r\n        t.i = f.i;\r\n        t.j = f.j;\r\n        t.S = f.S.slice();\r\n        return t;\r\n    }\r\n\r\n//\r\n// flatten()\r\n// Converts an object tree to nested arrays of strings.\r\n//\r\n    function flatten(obj, depth) {\r\n        var result = [], typ = (typeof obj), prop;\r\n        if (depth && typ == 'object') {\r\n            for (prop in obj) {\r\n                try { result.push(flatten(obj[prop], depth - 1)); } catch (e) {}\r\n            }\r\n        }\r\n        return (result.length ? result : typ == 'string' ? obj : obj + '\\0');\r\n    }\r\n\r\n//\r\n// mixkey()\r\n// Mixes a string seed into a key that is an array of integers, and\r\n// returns a shortened string seed that is equivalent to the result key.\r\n//\r\n    function mixkey(seed, key) {\r\n        var stringseed = seed + '', smear, j = 0;\r\n        while (j < stringseed.length) {\r\n            key[mask & j] =\r\n                mask & ((smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++));\r\n        }\r\n        return tostring(key);\r\n    }\r\n\r\n//\r\n// autoseed()\r\n// Returns an object for autoseeding, using window.crypto and Node crypto\r\n// module if available.\r\n//\r\n    function autoseed() {\r\n        try {\r\n            var out = new Uint8Array(width);\r\n            (global.crypto || global.msCrypto).getRandomValues(out);\r\n            return tostring(out);\r\n        } catch (e) {\r\n            var browser = global.navigator,\r\n                plugins = browser && browser.plugins;\r\n            return [+new Date(), global, plugins, global.screen, tostring(pool)];\r\n        }\r\n    }\r\n\r\n//\r\n// tostring()\r\n// Converts an array of charcodes to a string\r\n//\r\n    function tostring(a) {\r\n        return String.fromCharCode.apply(0, a);\r\n    }\r\n\r\n//\r\n// When seedrandom.js is loaded, we immediately mix a few bits\r\n// from the built-in RNG into the entropy pool.  Because we do\r\n// not want to interfere with deterministic PRNG state later,\r\n// seedrandom will not call math.random on its own again after\r\n// initialization.\r\n//\r\n    mixkey(math.random(), pool);\r\n\r\n//\r\n// Nodejs and AMD support: export the implementation as a module using\r\n// either convention.\r\n//\r\n\r\n// End anonymous scope, and pass initial values.\r\n})(\r\n    [],     // pool: entropy pool starts empty\r\n    BMMath    // math: package containing random, pow, and seedrandom\r\n);\r\nvar BezierFactory = (function(){\r\n    /**\r\n     * BezierEasing - use bezier curve for transition easing function\r\n     * by Gaëtan Renaudeau 2014 - 2015 – MIT License\r\n     *\r\n     * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n     * Usage:\r\n     * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n     * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n     *\r\n     */\r\n\r\n        var ob = {};\r\n    ob.getBezierEasing = getBezierEasing;\r\n    var beziers = {};\r\n\r\n    function getBezierEasing(a,b,c,d,nm){\r\n        var str = nm || ('bez_' + a+'_'+b+'_'+c+'_'+d).replace(/\\./g, 'p');\r\n        if(beziers[str]){\r\n            return beziers[str];\r\n        }\r\n        var bezEasing = new BezierEasing([a,b,c,d]);\r\n        beziers[str] = bezEasing;\r\n        return bezEasing;\r\n    }\r\n\r\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\r\n    var NEWTON_ITERATIONS = 4;\r\n    var NEWTON_MIN_SLOPE = 0.001;\r\n    var SUBDIVISION_PRECISION = 0.0000001;\r\n    var SUBDIVISION_MAX_ITERATIONS = 10;\r\n\r\n    var kSplineTableSize = 11;\r\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\r\n\r\n    var float32ArraySupported = typeof Float32Array === \"function\";\r\n\r\n    function A (aA1, aA2) { return 1.0 - 3.0 * aA2 + 3.0 * aA1; }\r\n    function B (aA1, aA2) { return 3.0 * aA2 - 6.0 * aA1; }\r\n    function C (aA1)      { return 3.0 * aA1; }\r\n\r\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\r\n    function calcBezier (aT, aA1, aA2) {\r\n        return ((A(aA1, aA2)*aT + B(aA1, aA2))*aT + C(aA1))*aT;\r\n    }\r\n\r\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\r\n    function getSlope (aT, aA1, aA2) {\r\n        return 3.0 * A(aA1, aA2)*aT*aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\r\n    }\r\n\r\n    function binarySubdivide (aX, aA, aB, mX1, mX2) {\r\n        var currentX, currentT, i = 0;\r\n        do {\r\n            currentT = aA + (aB - aA) / 2.0;\r\n            currentX = calcBezier(currentT, mX1, mX2) - aX;\r\n            if (currentX > 0.0) {\r\n                aB = currentT;\r\n            } else {\r\n                aA = currentT;\r\n            }\r\n        } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\r\n        return currentT;\r\n    }\r\n\r\n    function newtonRaphsonIterate (aX, aGuessT, mX1, mX2) {\r\n        for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\r\n            var currentSlope = getSlope(aGuessT, mX1, mX2);\r\n            if (currentSlope === 0.0) return aGuessT;\r\n            var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\r\n            aGuessT -= currentX / currentSlope;\r\n        }\r\n        return aGuessT;\r\n    }\r\n\r\n    /**\r\n     * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n     */\r\n    function BezierEasing (points) {\r\n        this._p = points;\r\n        this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\r\n        this._precomputed = false;\r\n\r\n        this.get = this.get.bind(this);\r\n    }\r\n\r\n    BezierEasing.prototype = {\r\n\r\n        get: function (x) {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            if (!this._precomputed) this._precompute();\r\n            if (mX1 === mY1 && mX2 === mY2) return x; // linear\r\n            // Because JavaScript number are imprecise, we should guarantee the extremes are right.\r\n            if (x === 0) return 0;\r\n            if (x === 1) return 1;\r\n            return calcBezier(this._getTForX(x), mY1, mY2);\r\n        },\r\n\r\n        // Private part\r\n\r\n        _precompute: function () {\r\n            var mX1 = this._p[0],\r\n                mY1 = this._p[1],\r\n                mX2 = this._p[2],\r\n                mY2 = this._p[3];\r\n            this._precomputed = true;\r\n            if (mX1 !== mY1 || mX2 !== mY2)\r\n                this._calcSampleValues();\r\n        },\r\n\r\n        _calcSampleValues: function () {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2];\r\n            for (var i = 0; i < kSplineTableSize; ++i) {\r\n                this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n         */\r\n        _getTForX: function (aX) {\r\n            var mX1 = this._p[0],\r\n                mX2 = this._p[2],\r\n                mSampleValues = this._mSampleValues;\r\n\r\n            var intervalStart = 0.0;\r\n            var currentSample = 1;\r\n            var lastSample = kSplineTableSize - 1;\r\n\r\n            for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\r\n                intervalStart += kSampleStepSize;\r\n            }\r\n            --currentSample;\r\n\r\n            // Interpolate to provide an initial guess for t\r\n            var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample+1] - mSampleValues[currentSample]);\r\n            var guessForT = intervalStart + dist * kSampleStepSize;\r\n\r\n            var initialSlope = getSlope(guessForT, mX1, mX2);\r\n            if (initialSlope >= NEWTON_MIN_SLOPE) {\r\n                return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\r\n            } else if (initialSlope === 0.0) {\r\n                return guessForT;\r\n            } else {\r\n                return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\r\n            }\r\n        }\r\n    };\r\n\r\n    return ob;\r\n\r\n}());\r\n(function () {\r\n    var lastTime = 0;\r\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\r\n    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\r\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\r\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\r\n    }\r\n    if(!window.requestAnimationFrame)\r\n        window.requestAnimationFrame = function (callback, element) {\r\n            var currTime = new Date().getTime();\r\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\r\n            var id = setTimeout(function () {\r\n                    callback(currTime + timeToCall);\r\n                },\r\n                timeToCall);\r\n            lastTime = currTime + timeToCall;\r\n            return id;\r\n        };\r\n    if(!window.cancelAnimationFrame)\r\n        window.cancelAnimationFrame = function (id) {\r\n            clearTimeout(id);\r\n        };\r\n}());\r\n\r\nfunction extendPrototype(sources,destination){\r\n    var i, len = sources.length, sourcePrototype;\r\n    for (i = 0;i < len;i += 1) {\r\n        sourcePrototype = sources[i].prototype;\r\n        for (var attr in sourcePrototype) {\r\n            if (sourcePrototype.hasOwnProperty(attr)) destination.prototype[attr] = sourcePrototype[attr];\r\n        }\r\n    }\r\n}\r\n\r\nfunction getDescriptor(object, prop) {\r\n    return Object.getOwnPropertyDescriptor(object, prop);\r\n}\r\n\r\nfunction createProxyFunction(prototype) {\r\n\tfunction ProxyFunction(){}\r\n\tProxyFunction.prototype = prototype;\r\n\treturn ProxyFunction;\r\n}\r\nfunction bezFunction(){\r\n\r\n    function pointOnLine2D(x1,y1, x2,y2, x3,y3){\r\n        var det1 = (x1*y2) + (y1*x3) + (x2*y3) - (x3*y2) - (y3*x1) - (x2*y1);\r\n        return det1 > -0.001 && det1 < 0.001;\r\n    }\r\n\r\n    function pointOnLine3D(x1,y1,z1, x2,y2,z2, x3,y3,z3){\r\n        if(z1 === 0 && z2 === 0 && z3 === 0) {\r\n            return pointOnLine2D(x1,y1, x2,y2, x3,y3);\r\n        }\r\n        var dist1 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2) + Math.pow(z2 - z1, 2));\r\n        var dist2 = Math.sqrt(Math.pow(x3 - x1, 2) + Math.pow(y3 - y1, 2) + Math.pow(z3 - z1, 2));\r\n        var dist3 = Math.sqrt(Math.pow(x3 - x2, 2) + Math.pow(y3 - y2, 2) + Math.pow(z3 - z2, 2));\r\n        var diffDist;\r\n        if(dist1 > dist2){\r\n            if(dist1 > dist3){\r\n                diffDist = dist1 - dist2 - dist3;\r\n            } else {\r\n                diffDist = dist3 - dist2 - dist1;\r\n            }\r\n        } else if(dist3 > dist2){\r\n            diffDist = dist3 - dist2 - dist1;\r\n        } else {\r\n            diffDist = dist2 - dist1 - dist3;\r\n        }\r\n        return diffDist > -0.0001 && diffDist < 0.0001;\r\n    }\r\n\r\n    var getBezierLength = (function(){\r\n\r\n        return function(pt1,pt2,pt3,pt4){\r\n            var curveSegments = defaultCurveSegments;\r\n            var k;\r\n            var i, len;\r\n            var ptCoord,perc,addedLength = 0;\r\n            var ptDistance;\r\n            var point = [],lastPoint = [];\r\n            var lengthData = bezier_length_pool.newElement();\r\n            len = pt3.length;\r\n            for(k=0;k<curveSegments;k+=1){\r\n                perc = k/(curveSegments-1);\r\n                ptDistance = 0;\r\n                for(i=0;i<len;i+=1){\r\n                    ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i];\r\n                    point[i] = ptCoord;\r\n                    if(lastPoint[i] !== null){\r\n                        ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                    }\r\n                    lastPoint[i] = point[i];\r\n                }\r\n                if(ptDistance){\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                }\r\n                lengthData.percents[k] = perc;\r\n                lengthData.lengths[k] = addedLength;\r\n            }\r\n            lengthData.addedLength = addedLength;\r\n            return lengthData;\r\n        };\r\n    }());\r\n\r\n    function getSegmentsLength(shapeData) {\r\n        var segmentsLength = segments_length_pool.newElement();\r\n        var closed = shapeData.c;\r\n        var pathV = shapeData.v;\r\n        var pathO = shapeData.o;\r\n        var pathI = shapeData.i;\r\n        var i, len = shapeData._length;\r\n        var lengths = segmentsLength.lengths;\r\n        var totalLength = 0;\r\n        for(i=0;i<len-1;i+=1){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        if(closed && len){\r\n            lengths[i] = getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]);\r\n            totalLength += lengths[i].addedLength;\r\n        }\r\n        segmentsLength.totalLength = totalLength;\r\n        return segmentsLength;\r\n    }\r\n\r\n    function BezierData(length){\r\n        this.segmentLength = 0;\r\n        this.points = new Array(length);\r\n    }\r\n\r\n    function PointData(partial,point){\r\n        this.partialLength = partial;\r\n        this.point = point;\r\n    }\r\n\r\n    var buildBezierData = (function(){\r\n\r\n        var storedData = {};\r\n\r\n        return function (pt1, pt2, pt3, pt4){\r\n            var bezierName = (pt1[0]+'_'+pt1[1]+'_'+pt2[0]+'_'+pt2[1]+'_'+pt3[0]+'_'+pt3[1]+'_'+pt4[0]+'_'+pt4[1]).replace(/\\./g, 'p');\r\n            if(!storedData[bezierName]){\r\n                var curveSegments = defaultCurveSegments;\r\n                var k, i, len;\r\n                var ptCoord,perc,addedLength = 0;\r\n                var ptDistance;\r\n                var point,lastPoint = null;\r\n                if (pt1.length === 2 && (pt1[0] != pt2[0] || pt1[1] != pt2[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1]) && pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])){\r\n                    curveSegments = 2;\r\n                }\r\n                var bezierData = new BezierData(curveSegments);\r\n                len = pt3.length;\r\n                for (k = 0; k < curveSegments; k += 1) {\r\n                    point = createSizedArray(len);\r\n                    perc = k / (curveSegments - 1);\r\n                    ptDistance = 0;\r\n                    for (i = 0; i < len; i += 1){\r\n                        ptCoord = bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i] + pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i] + pt4[i])+bm_pow(perc,3)*pt2[i];\r\n                        point[i] = ptCoord;\r\n                        if(lastPoint !== null){\r\n                            ptDistance += bm_pow(point[i] - lastPoint[i],2);\r\n                        }\r\n                    }\r\n                    ptDistance = bm_sqrt(ptDistance);\r\n                    addedLength += ptDistance;\r\n                    bezierData.points[k] = new PointData(ptDistance, point);\r\n                    lastPoint = point;\r\n                }\r\n                bezierData.segmentLength = addedLength;\r\n                storedData[bezierName] = bezierData;\r\n            }\r\n            return storedData[bezierName];\r\n        };\r\n    }());\r\n\r\n    function getDistancePerc(perc,bezierData){\r\n        var percents = bezierData.percents;\r\n        var lengths = bezierData.lengths;\r\n        var len = percents.length;\r\n        var initPos = bm_floor((len-1)*perc);\r\n        var lengthPos = perc*bezierData.addedLength;\r\n        var lPerc = 0;\r\n        if(initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]){\r\n            return percents[initPos];\r\n        }else{\r\n            var dir = lengths[initPos] > lengthPos ? -1 : 1;\r\n            var flag = true;\r\n            while(flag){\r\n                if(lengths[initPos] <= lengthPos && lengths[initPos+1] > lengthPos){\r\n                    lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos+1] - lengths[initPos]);\r\n                    flag = false;\r\n                }else{\r\n                    initPos += dir;\r\n                }\r\n                if(initPos < 0 || initPos >= len - 1){\r\n                    //FIX for TypedArrays that don't store floating point values with enough accuracy\r\n                    if(initPos === len - 1) {\r\n                        return percents[initPos];\r\n                    }\r\n                    flag = false;\r\n                }\r\n            }\r\n            return percents[initPos] + (percents[initPos+1] - percents[initPos])*lPerc;\r\n        }\r\n    }\r\n\r\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\r\n        var t1 = getDistancePerc(percent,bezierData);\r\n        var u1 = 1 - t1;\r\n        var ptX = Math.round((u1*u1*u1* pt1[0] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[0] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[0] + t1*t1*t1* pt2[0])* 1000) / 1000;\r\n        var ptY = Math.round((u1*u1*u1* pt1[1] + (t1*u1*u1 + u1*t1*u1 + u1*u1*t1)* pt3[1] + (t1*t1*u1 + u1*t1*t1 + t1*u1*t1)*pt4[1] + t1*t1*t1* pt2[1])* 1000) / 1000;\r\n        return [ptX, ptY];\r\n    }\r\n\r\n    var bezier_segment_points = createTypedArray('float32', 8);\r\n\r\n    function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc, bezierData){\r\n\r\n        startPerc = startPerc < 0 ? 0 : startPerc > 1 ? 1 : startPerc;\r\n        var t0 = getDistancePerc(startPerc,bezierData);\r\n        endPerc = endPerc > 1 ? 1 : endPerc;\r\n        var t1 = getDistancePerc(endPerc,bezierData);\r\n        var i, len = pt1.length;\r\n        var u0 = 1 - t0;\r\n        var u1 = 1 - t1;\r\n        var u0u0u0 = u0*u0*u0;\r\n        var t0u0u0_3 = t0*u0*u0*3;\r\n        var t0t0u0_3 = t0*t0*u0*3;\r\n        var t0t0t0 = t0*t0*t0;\r\n        //\r\n        var u0u0u1 = u0*u0*u1;\r\n        var t0u0u1_3 = t0*u0*u1 + u0*t0*u1 + u0*u0*t1;\r\n        var t0t0u1_3 = t0*t0*u1 + u0*t0*t1 + t0*u0*t1;\r\n        var t0t0t1 = t0*t0*t1;\r\n        //\r\n        var u0u1u1 = u0*u1*u1;\r\n        var t0u1u1_3 = t0*u1*u1 + u0*t1*u1 + u0*u1*t1;\r\n        var t0t1u1_3 = t0*t1*u1 + u0*t1*t1 + t0*u1*t1;\r\n        var t0t1t1 = t0*t1*t1;\r\n        //\r\n        var u1u1u1 = u1*u1*u1;\r\n        var t1u1u1_3 = t1*u1*u1 + u1*t1*u1 + u1*u1*t1;\r\n        var t1t1u1_3 = t1*t1*u1 + u1*t1*t1 + t1*u1*t1;\r\n        var t1t1t1 = t1*t1*t1;\r\n        for(i=0;i<len;i+=1){\r\n            bezier_segment_points[i * 4] = Math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 1] = Math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 2] = Math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000;\r\n            bezier_segment_points[i * 4 + 3] = Math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000;\r\n        }\r\n\r\n        return bezier_segment_points;\r\n    }\r\n\r\n    return {\r\n        getSegmentsLength : getSegmentsLength,\r\n        getNewSegment : getNewSegment,\r\n        getPointInSegment : getPointInSegment,\r\n        buildBezierData : buildBezierData,\r\n        pointOnLine2D : pointOnLine2D,\r\n        pointOnLine3D : pointOnLine3D\r\n    };\r\n}\r\n\r\nvar bez = bezFunction();\r\nfunction dataFunctionManager(){\r\n\r\n    //var tCanvasHelper = createTag('canvas').getContext('2d');\r\n\r\n    function completeLayers(layers, comps, fontManager){\r\n        var layerData;\r\n        var i, len = layers.length;\r\n        var j, jLen, k, kLen;\r\n        for(i=0;i<len;i+=1){\r\n            layerData = layers[i];\r\n            if(!('ks' in layerData) || layerData.completed){\r\n                continue;\r\n            }\r\n            layerData.completed = true;\r\n            if(layerData.tt){\r\n                layers[i-1].td = layerData.tt;\r\n            }\r\n            if(layerData.hasMask){\r\n                var maskProps = layerData.masksProperties;\r\n                jLen = maskProps.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    if(maskProps[j].pt.k.i){\r\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\r\n                    }else{\r\n                        kLen = maskProps[j].pt.k.length;\r\n                        for(k=0;k<kLen;k+=1){\r\n                            if(maskProps[j].pt.k[k].s){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\r\n                            }\r\n                            if(maskProps[j].pt.k[k].e){\r\n                                convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(layerData.ty===0){\r\n                layerData.layers = findCompLayers(layerData.refId, comps);\r\n                completeLayers(layerData.layers,comps, fontManager);\r\n            }else if(layerData.ty === 4){\r\n                completeShapes(layerData.shapes);\r\n            }else if(layerData.ty == 5){\r\n                completeText(layerData, fontManager);\r\n            }\r\n        }\r\n    }\r\n\r\n    function findCompLayers(id,comps){\r\n        var i = 0, len = comps.length;\r\n        while(i<len){\r\n            if(comps[i].id === id){\r\n                if(!comps[i].layers.__used) {\r\n                    comps[i].layers.__used = true;\r\n                    return comps[i].layers;\r\n                }\r\n                return JSON.parse(JSON.stringify(comps[i].layers));\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function completeShapes(arr){\r\n        var i, len = arr.length;\r\n        var j, jLen;\r\n        for(i=len-1;i>=0;i-=1){\r\n            if(arr[i].ty == 'sh'){\r\n                if(arr[i].ks.k.i){\r\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\r\n                }else{\r\n                    jLen = arr[i].ks.k.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(arr[i].ks.k[j].s){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\r\n                        }\r\n                        if(arr[i].ks.k[j].e){\r\n                            convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\r\n                        }\r\n                    }\r\n                }\r\n            }else if(arr[i].ty == 'gr'){\r\n                completeShapes(arr[i].it);\r\n            }\r\n        }\r\n        /*if(hasPaths){\r\n            //mx: distance\r\n            //ss: sensitivity\r\n            //dc: decay\r\n            arr.splice(arr.length-1,0,{\r\n                \"ty\": \"ms\",\r\n                \"mx\":20,\r\n                \"ss\":10,\r\n                 \"dc\":0.001,\r\n                \"maxDist\":200\r\n            });\r\n        }*/\r\n    }\r\n\r\n    function convertPathsToAbsoluteValues(path){\r\n        var i, len = path.i.length;\r\n        for(i=0;i<len;i+=1){\r\n            path.i[i][0] += path.v[i][0];\r\n            path.i[i][1] += path.v[i][1];\r\n            path.o[i][0] += path.v[i][0];\r\n            path.o[i][1] += path.v[i][1];\r\n        }\r\n    }\r\n\r\n    function checkVersion(minimum,animVersionString){\r\n        var animVersion = animVersionString ? animVersionString.split('.') : [100,100,100];\r\n        if(minimum[0]>animVersion[0]){\r\n            return true;\r\n        } else if(animVersion[0] > minimum[0]){\r\n            return false;\r\n        }\r\n        if(minimum[1]>animVersion[1]){\r\n            return true;\r\n        } else if(animVersion[1] > minimum[1]){\r\n            return false;\r\n        }\r\n        if(minimum[2]>animVersion[2]){\r\n            return true;\r\n        } else if(animVersion[2] > minimum[2]){\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var checkText = (function(){\r\n        var minimumVersion = [4,4,14];\r\n\r\n        function updateTextLayer(textLayer){\r\n            var documentData = textLayer.t.d;\r\n            textLayer.t.d = {\r\n                k: [\r\n                    {\r\n                        s:documentData,\r\n                        t:0\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 5){\r\n                    updateTextLayer(layers[i]);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkChars = (function() {\r\n        var minimumVersion = [4,7,99];\r\n        return function (animationData){\r\n            if(animationData.chars && !checkVersion(minimumVersion,animationData.v)){\r\n                var i, len = animationData.chars.length, j, jLen;\r\n                var pathData, paths;\r\n                for(i = 0; i < len; i += 1) {\r\n                    if(animationData.chars[i].data && animationData.chars[i].data.shapes) {\r\n                        paths = animationData.chars[i].data.shapes[0].it;\r\n                        jLen = paths.length;\r\n\r\n                        for(j = 0; j < jLen; j += 1) {\r\n                            pathData = paths[j].ks.k;\r\n                            if(!pathData.__converted) {\r\n                                convertPathsToAbsoluteValues(paths[j].ks.k);\r\n                                pathData.__converted = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkColors = (function(){\r\n        var minimumVersion = [4,1,9];\r\n\r\n        function iterateShapes(shapes){\r\n            var i, len = shapes.length;\r\n            var j, jLen;\r\n            for(i=0;i<len;i+=1){\r\n                if(shapes[i].ty === 'gr'){\r\n                    iterateShapes(shapes[i].it);\r\n                }else if(shapes[i].ty === 'fl' || shapes[i].ty === 'st'){\r\n                    if(shapes[i].c.k && shapes[i].c.k[0].i){\r\n                        jLen = shapes[i].c.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(shapes[i].c.k[j].s){\r\n                                shapes[i].c.k[j].s[0] /= 255;\r\n                                shapes[i].c.k[j].s[1] /= 255;\r\n                                shapes[i].c.k[j].s[2] /= 255;\r\n                                shapes[i].c.k[j].s[3] /= 255;\r\n                            }\r\n                            if(shapes[i].c.k[j].e){\r\n                                shapes[i].c.k[j].e[0] /= 255;\r\n                                shapes[i].c.k[j].e[1] /= 255;\r\n                                shapes[i].c.k[j].e[2] /= 255;\r\n                                shapes[i].c.k[j].e[3] /= 255;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        shapes[i].c.k[0] /= 255;\r\n                        shapes[i].c.k[1] /= 255;\r\n                        shapes[i].c.k[2] /= 255;\r\n                        shapes[i].c.k[3] /= 255;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var i, len = layers.length;\r\n            for(i=0;i<len;i+=1){\r\n                if(layers[i].ty === 4){\r\n                    iterateShapes(layers[i].shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    var checkShapes = (function(){\r\n        var minimumVersion = [4,4,18];\r\n\r\n\r\n\r\n        function completeShapes(arr){\r\n            var i, len = arr.length;\r\n            var j, jLen;\r\n            for(i=len-1;i>=0;i-=1){\r\n                if(arr[i].ty == 'sh'){\r\n                    if(arr[i].ks.k.i){\r\n                        arr[i].ks.k.c = arr[i].closed;\r\n                    }else{\r\n                        jLen = arr[i].ks.k.length;\r\n                        for(j=0;j<jLen;j+=1){\r\n                            if(arr[i].ks.k[j].s){\r\n                                arr[i].ks.k[j].s[0].c = arr[i].closed;\r\n                            }\r\n                            if(arr[i].ks.k[j].e){\r\n                                arr[i].ks.k[j].e[0].c = arr[i].closed;\r\n                            }\r\n                        }\r\n                    }\r\n                }else if(arr[i].ty == 'gr'){\r\n                    completeShapes(arr[i].it);\r\n                }\r\n            }\r\n        }\r\n\r\n        function iterateLayers(layers){\r\n            var layerData;\r\n            var i, len = layers.length;\r\n            var j, jLen, k, kLen;\r\n            for(i=0;i<len;i+=1){\r\n                layerData = layers[i];\r\n                if(layerData.hasMask){\r\n                    var maskProps = layerData.masksProperties;\r\n                    jLen = maskProps.length;\r\n                    for(j=0;j<jLen;j+=1){\r\n                        if(maskProps[j].pt.k.i){\r\n                            maskProps[j].pt.k.c = maskProps[j].cl;\r\n                        }else{\r\n                            kLen = maskProps[j].pt.k.length;\r\n                            for(k=0;k<kLen;k+=1){\r\n                                if(maskProps[j].pt.k[k].s){\r\n                                    maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\r\n                                }\r\n                                if(maskProps[j].pt.k[k].e){\r\n                                    maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if(layerData.ty === 4){\r\n                    completeShapes(layerData.shapes);\r\n                }\r\n            }\r\n        }\r\n\r\n        return function (animationData){\r\n            if(checkVersion(minimumVersion,animationData.v)){\r\n                iterateLayers(animationData.layers);\r\n                if(animationData.assets){\r\n                    var i, len = animationData.assets.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        if(animationData.assets[i].layers){\r\n                            iterateLayers(animationData.assets[i].layers);\r\n\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }());\r\n\r\n    function completeData(animationData, fontManager){\r\n        if(animationData.__complete){\r\n            return;\r\n        }\r\n        checkColors(animationData);\r\n        checkText(animationData);\r\n        checkChars(animationData);\r\n        checkShapes(animationData);\r\n        completeLayers(animationData.layers, animationData.assets, fontManager);\r\n        animationData.__complete = true;\r\n        //blitAnimation(animationData, animationData.assets, fontManager);\r\n    }\r\n\r\n    function completeText(data, fontManager){\r\n        if(data.t.a.length === 0 && !('m' in data.t.p)){\r\n            data.singleShape = true;\r\n        }\r\n    }\r\n\r\n    var moduleOb = {};\r\n    moduleOb.completeData = completeData;\r\n\r\n    return moduleOb;\r\n}\r\n\r\nvar dataManager = dataFunctionManager();\r\nvar FontManager = (function(){\r\n\r\n    var maxWaitingTime = 5000;\r\n    var emptyChar = {\r\n        w: 0,\r\n        size:0,\r\n        shapes:[]\r\n    };\r\n    var combinedCharacters = [];\r\n    //Hindi characters\r\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366\r\n    , 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379\r\n    , 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\r\n\r\n    function setUpNode(font, family){\r\n        var parentNode = createTag('span');\r\n        parentNode.style.fontFamily    = family;\r\n        var node = createTag('span');\r\n        // Characters that vary significantly among different fonts\r\n        node.innerHTML = 'giItT1WQy@!-/#';\r\n        // Visible - so we can measure it - but not on the screen\r\n        parentNode.style.position      = 'absolute';\r\n        parentNode.style.left          = '-10000px';\r\n        parentNode.style.top           = '-10000px';\r\n        // Large font size makes even subtle changes obvious\r\n        parentNode.style.fontSize      = '300px';\r\n        // Reset any font properties\r\n        parentNode.style.fontVariant   = 'normal';\r\n        parentNode.style.fontStyle     = 'normal';\r\n        parentNode.style.fontWeight    = 'normal';\r\n        parentNode.style.letterSpacing = '0';\r\n        parentNode.appendChild(node);\r\n        document.body.appendChild(parentNode);\r\n\r\n        // Remember width with no applied web font\r\n        var width = node.offsetWidth;\r\n        node.style.fontFamily = font + ', '+family;\r\n        return {node:node, w:width, parent:parentNode};\r\n    }\r\n\r\n    function checkLoadedFonts() {\r\n        var i, len = this.fonts.length;\r\n        var node, w;\r\n        var loadedCount = len;\r\n        for(i=0;i<len; i+= 1){\r\n            if(this.fonts[i].loaded){\r\n                loadedCount -= 1;\r\n                continue;\r\n            }\r\n            if(this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0){\r\n                this.fonts[i].loaded = true;\r\n            } else{\r\n                node = this.fonts[i].monoCase.node;\r\n                w = this.fonts[i].monoCase.w;\r\n                if(node.offsetWidth !== w){\r\n                    loadedCount -= 1;\r\n                    this.fonts[i].loaded = true;\r\n                }else{\r\n                    node = this.fonts[i].sansCase.node;\r\n                    w = this.fonts[i].sansCase.w;\r\n                    if(node.offsetWidth !== w){\r\n                        loadedCount -= 1;\r\n                        this.fonts[i].loaded = true;\r\n                    }\r\n                }\r\n                if(this.fonts[i].loaded){\r\n                    this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\r\n                    this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\r\n                }\r\n            }\r\n        }\r\n\r\n        if(loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime){\r\n            setTimeout(this.checkLoadedFonts.bind(this),20);\r\n        }else{\r\n            setTimeout(function(){this.isLoaded = true;}.bind(this),0);\r\n\r\n        }\r\n    }\r\n\r\n    function createHelper(def, fontData){\r\n        var tHelper = createNS('text');\r\n        tHelper.style.fontSize = '100px';\r\n        //tHelper.style.fontFamily = fontData.fFamily;\r\n        tHelper.setAttribute('font-family', fontData.fFamily);\r\n        tHelper.setAttribute('font-style', fontData.fStyle);\r\n        tHelper.setAttribute('font-weight', fontData.fWeight);\r\n        tHelper.textContent = '1';\r\n        if(fontData.fClass){\r\n            tHelper.style.fontFamily = 'inherit';\r\n            tHelper.setAttribute('class', fontData.fClass);\r\n        } else {\r\n            tHelper.style.fontFamily = fontData.fFamily;\r\n        }\r\n        def.appendChild(tHelper);\r\n        var tCanvasHelper = createTag('canvas').getContext('2d');\r\n        tCanvasHelper.font = fontData.fWeight + ' ' + fontData.fStyle + ' 100px '+ fontData.fFamily;\r\n        //tCanvasHelper.font = ' 100px '+ fontData.fFamily;\r\n        return tHelper;\r\n    }\r\n\r\n    function addFonts(fontData, defs){\r\n        if(!fontData){\r\n            this.isLoaded = true;\r\n            return;\r\n        }\r\n        if(this.chars){\r\n            this.isLoaded = true;\r\n            this.fonts = fontData.list;\r\n            return;\r\n        }\r\n\r\n\r\n        var fontArr = fontData.list;\r\n        var i, len = fontArr.length;\r\n        var _pendingFonts = len;\r\n        for(i=0; i<len; i+= 1){\r\n            var shouldLoadFont = true;\r\n            var loadedSelector;\r\n            var j;\r\n            fontArr[i].loaded = false;\r\n            fontArr[i].monoCase = setUpNode(fontArr[i].fFamily,'monospace');\r\n            fontArr[i].sansCase = setUpNode(fontArr[i].fFamily,'sans-serif');\r\n            if(!fontArr[i].fPath) {\r\n                fontArr[i].loaded = true;\r\n                _pendingFonts -= 1;\r\n            }else if(fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3){\r\n                loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"'+ fontArr[i].fFamily +'\"], style[f-origin=\"3\"][f-family=\"'+ fontArr[i].fFamily +'\"]');\r\n\r\n                if (loadedSelector.length > 0) {\r\n                    shouldLoadFont = false;\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var s = createTag('style');\r\n                    s.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    s.setAttribute('f-origin', fontArr[i].origin);\r\n                    s.setAttribute('f-family', fontArr[i].fFamily);\r\n                    s.type = \"text/css\";\r\n                    s.innerHTML = \"@font-face {\" + \"font-family: \"+fontArr[i].fFamily+\"; font-style: normal; src: url('\"+fontArr[i].fPath+\"');}\";\r\n                    defs.appendChild(s);\r\n                }\r\n            } else if(fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1){\r\n                loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\r\n\r\n                for (j = 0; j < loadedSelector.length; j++) {\r\n                    if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\r\n                        // Font is already loaded\r\n                        shouldLoadFont = false;\r\n                    }\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var l = createTag('link');\r\n                    l.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    l.setAttribute('f-origin', fontArr[i].origin);\r\n                    l.type = \"text/css\";\r\n                    l.rel = \"stylesheet\";\r\n                    l.href = fontArr[i].fPath;\r\n                    document.body.appendChild(l);\r\n                }\r\n            } else if(fontArr[i].fOrigin === 't' || fontArr[i].origin === 2){\r\n                loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\r\n\r\n                for (j = 0; j < loadedSelector.length; j++) {\r\n                    if (fontArr[i].fPath === loadedSelector[j].src) {\r\n                        // Font is already loaded\r\n                        shouldLoadFont = false;\r\n                    }\r\n                }\r\n\r\n                if (shouldLoadFont) {\r\n                    var sc = createTag('link');\r\n                    sc.setAttribute('f-forigin', fontArr[i].fOrigin);\r\n                    sc.setAttribute('f-origin', fontArr[i].origin);\r\n                    sc.setAttribute('rel','stylesheet');\r\n                    sc.setAttribute('href',fontArr[i].fPath);\r\n                    defs.appendChild(sc);\r\n                }\r\n            }\r\n            fontArr[i].helper = createHelper(defs,fontArr[i]);\r\n            fontArr[i].cache = {};\r\n            this.fonts.push(fontArr[i]);\r\n        }\r\n        if (_pendingFonts === 0) {\r\n            this.isLoaded = true;\r\n        } else {\r\n            //On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\r\n            //Adding this timeout seems to fix it\r\n           setTimeout(this.checkLoadedFonts.bind(this), 100);\r\n        }\r\n    }\r\n\r\n    function addChars(chars){\r\n        if(!chars){\r\n            return;\r\n        }\r\n        if(!this.chars){\r\n            this.chars = [];\r\n        }\r\n        var i, len = chars.length;\r\n        var j, jLen = this.chars.length, found;\r\n        for(i=0;i<len;i+=1){\r\n            j = 0;\r\n            found = false;\r\n            while(j<jLen){\r\n                if(this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch){\r\n                    found = true;\r\n                }\r\n                j += 1;\r\n            }\r\n            if(!found){\r\n                this.chars.push(chars[i]);\r\n                jLen += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getCharData(char, style, font){\r\n        var i = 0, len = this.chars.length;\r\n        while( i < len) {\r\n            if(this.chars[i].ch === char && this.chars[i].style === style && this.chars[i].fFamily === font){\r\n\r\n                return this.chars[i];\r\n            }\r\n            i+= 1;\r\n        }\r\n        if((typeof char === 'string' && char.charCodeAt(0) !== 13 || !char) && console && console.warn) {\r\n            console.warn('Missing character from exported characters list: ', char, style, font);\r\n        }\r\n        return emptyChar;\r\n    }\r\n\r\n    function measureText(char, fontName, size) {\r\n        var fontData = this.getFontByName(fontName);\r\n        var index = char.charCodeAt(0);\r\n        if(!fontData.cache[index + 1]) {\r\n            var tHelper = fontData.helper;\r\n            //Canvas version\r\n            //fontData.cache[index] = tHelper.measureText(char).width / 100;\r\n            //SVG version\r\n            //console.log(tHelper.getBBox().width)\r\n            if (char === ' ') {\r\n                tHelper.textContent = '|' + char + '|';\r\n                var doubleSize = tHelper.getComputedTextLength();\r\n                tHelper.textContent = '||';\r\n                var singleSize = tHelper.getComputedTextLength();\r\n                fontData.cache[index + 1] = (doubleSize - singleSize)/100;\r\n            } else {\r\n                tHelper.textContent = char;\r\n                fontData.cache[index + 1] = (tHelper.getComputedTextLength())/100;\r\n            }\r\n        }\r\n        return fontData.cache[index + 1] * size;\r\n    }\r\n\r\n    function getFontByName(name){\r\n        var i = 0, len = this.fonts.length;\r\n        while(i<len){\r\n            if(this.fonts[i].fName === name) {\r\n                return this.fonts[i];\r\n            }\r\n            i += 1;\r\n        }\r\n        return this.fonts[0];\r\n    }\r\n\r\n    function getCombinedCharacterCodes() {\r\n        return combinedCharacters;\r\n    }\r\n\r\n    function loaded() {\r\n        return this.isLoaded;\r\n    }\r\n\r\n    var Font = function(){\r\n        this.fonts = [];\r\n        this.chars = null;\r\n        this.typekitLoaded = 0;\r\n        this.isLoaded = false;\r\n        this.initTime = Date.now();\r\n    };\r\n    //TODO: for now I'm adding these methods to the Class and not the prototype. Think of a better way to implement it. \r\n    Font.getCombinedCharacterCodes = getCombinedCharacterCodes;\r\n\r\n    Font.prototype.addChars = addChars;\r\n    Font.prototype.addFonts = addFonts;\r\n    Font.prototype.getCharData = getCharData;\r\n    Font.prototype.getFontByName = getFontByName;\r\n    Font.prototype.measureText = measureText;\r\n    Font.prototype.checkLoadedFonts = checkLoadedFonts;\r\n    Font.prototype.loaded = loaded;\r\n\r\n    return Font;\r\n\r\n}());\r\nvar PropertyFactory = (function(){\r\n\r\n    var initFrame = initialDefaultFrame;\r\n    var math_abs = Math.abs;\r\n\r\n    function interpolateValue(frameNum, caching) {\r\n        var offsetTime = this.offsetTime;\r\n        var newValue;\r\n        if (this.propType === 'multidimensional') {\r\n            newValue = createTypedArray('float32', this.pv.length);\r\n        }\r\n        var iterationIndex = caching.lastIndex;\r\n        var i = iterationIndex;\r\n        var len = this.keyframes.length - 1, flag = true;\r\n        var keyData, nextKeyData;\r\n\r\n        while (flag) {\r\n            keyData = this.keyframes[i];\r\n            nextKeyData = this.keyframes[i + 1];\r\n            if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime){\r\n                if(keyData.h){\r\n                    keyData = nextKeyData;\r\n                }\r\n                iterationIndex = 0;\r\n                break;\r\n            }\r\n            if ((nextKeyData.t - offsetTime) > frameNum){\r\n                iterationIndex = i;\r\n                break;\r\n            }\r\n            if (i < len - 1){\r\n                i += 1;\r\n            } else {\r\n                iterationIndex = 0;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n        var k, kLen, perc, jLen, j, fnc;\r\n        var nextKeyTime = nextKeyData.t - offsetTime;\r\n        var keyTime = keyData.t - offsetTime;\r\n        var endValue;\r\n        if (keyData.to) {\r\n            if (!keyData.bezierData) {\r\n                keyData.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\r\n            }\r\n            var bezierData = keyData.bezierData;\r\n            if (frameNum >= nextKeyTime || frameNum < keyTime) {\r\n                var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\r\n                kLen = bezierData.points[ind].point.length;\r\n                for (k = 0; k < kLen; k += 1) {\r\n                    newValue[k] = bezierData.points[ind].point[k];\r\n                }\r\n                // caching._lastKeyframeIndex = -1;\r\n            } else {\r\n                if (keyData.__fnct) {\r\n                    fnc = keyData.__fnct;\r\n                } else {\r\n                    fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\r\n                    keyData.__fnct = fnc;\r\n                }\r\n                perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\r\n                var distanceInLine = bezierData.segmentLength*perc;\r\n\r\n                var segmentPerc;\r\n                var addedLength =  (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastAddedLength : 0;\r\n                j =  (caching.lastFrame < frameNum && caching._lastKeyframeIndex === i) ? caching._lastPoint : 0;\r\n                flag = true;\r\n                jLen = bezierData.points.length;\r\n                while (flag) {\r\n                    addedLength += bezierData.points[j].partialLength;\r\n                    if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                            newValue[k] = bezierData.points[j].point[k];\r\n                        }\r\n                        break;\r\n                    } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\r\n                        segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\r\n                        kLen = bezierData.points[j].point.length;\r\n                        for (k = 0; k < kLen; k += 1) {\r\n                            newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\r\n                        }\r\n                        break;\r\n                    }\r\n                    if (j < jLen - 1){\r\n                        j += 1;\r\n                    } else {\r\n                        flag = false;\r\n                    }\r\n                }\r\n                caching._lastPoint = j;\r\n                caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\r\n                caching._lastKeyframeIndex = i;\r\n            }\r\n        } else {\r\n            var outX, outY, inX, inY, keyValue;\r\n            len = keyData.s.length;\r\n            endValue = nextKeyData.s || keyData.e;\r\n            if (this.sh && keyData.h !== 1) {\r\n                if (frameNum >= nextKeyTime) {\r\n                    newValue[0] = endValue[0];\r\n                    newValue[1] = endValue[1];\r\n                    newValue[2] = endValue[2];\r\n                } else if (frameNum <= keyTime) {\r\n                    newValue[0] = keyData.s[0];\r\n                    newValue[1] = keyData.s[1];\r\n                    newValue[2] = keyData.s[2];\r\n                } else {\r\n                    var quatStart = createQuaternion(keyData.s);\r\n                    var quatEnd = createQuaternion(endValue);\r\n                    var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\r\n                    quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\r\n                }\r\n                \r\n            } else {\r\n                for(i = 0; i < len; i += 1) {\r\n                    if (keyData.h !== 1) {\r\n                        if (frameNum >= nextKeyTime) {\r\n                            perc = 1;\r\n                        } else if(frameNum < keyTime) {\r\n                            perc = 0;\r\n                        } else {\r\n                            if(keyData.o.x.constructor === Array) {\r\n                                if (!keyData.__fnct) {\r\n                                    keyData.__fnct = [];\r\n                                }\r\n                                if (!keyData.__fnct[i]) {\r\n                                    outX = (typeof keyData.o.x[i] === 'undefined') ? keyData.o.x[0] : keyData.o.x[i];\r\n                                    outY = (typeof keyData.o.y[i] === 'undefined') ? keyData.o.y[0] : keyData.o.y[i];\r\n                                    inX = (typeof keyData.i.x[i] === 'undefined') ? keyData.i.x[0] : keyData.i.x[i];\r\n                                    inY = (typeof keyData.i.y[i] === 'undefined') ? keyData.i.y[0] : keyData.i.y[i];\r\n                                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                                    keyData.__fnct[i] = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct[i];\r\n                                }\r\n                            } else {\r\n                                if (!keyData.__fnct) {\r\n                                    outX = keyData.o.x;\r\n                                    outY = keyData.o.y;\r\n                                    inX = keyData.i.x;\r\n                                    inY = keyData.i.y;\r\n                                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\r\n                                    keyData.__fnct = fnc;\r\n                                } else {\r\n                                    fnc = keyData.__fnct;\r\n                                }\r\n                            }\r\n                            perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime ));\r\n                        }\r\n                    }\r\n\r\n                    endValue = nextKeyData.s || keyData.e;\r\n                    keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\r\n\r\n                    if (len === 1) {\r\n                        newValue = keyValue;\r\n                    } else {\r\n                        newValue[i] = keyValue;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        caching.lastIndex = iterationIndex;\r\n        return newValue;\r\n    }\r\n\r\n    //based on @Toji's https://github.com/toji/gl-matrix/\r\n    function slerp(a, b, t) {\r\n        var out = [];\r\n        var ax = a[0], ay = a[1], az = a[2], aw = a[3],\r\n        bx = b[0], by = b[1], bz = b[2], bw = b[3];\r\n\r\n        var omega, cosom, sinom, scale0, scale1;\r\n\r\n        cosom = ax * bx + ay * by + az * bz + aw * bw;\r\n        if (cosom < 0.0) {\r\n            cosom = -cosom;\r\n            bx = -bx;\r\n            by = -by;\r\n            bz = -bz;\r\n            bw = -bw;\r\n        }\r\n        if ((1.0 - cosom) > 0.000001) {\r\n            omega = Math.acos(cosom);\r\n            sinom = Math.sin(omega);\r\n            scale0 = Math.sin((1.0 - t) * omega) / sinom;\r\n            scale1 = Math.sin(t * omega) / sinom;\r\n        } else {\r\n            scale0 = 1.0 - t;\r\n            scale1 = t;\r\n        }\r\n        out[0] = scale0 * ax + scale1 * bx;\r\n        out[1] = scale0 * ay + scale1 * by;\r\n        out[2] = scale0 * az + scale1 * bz;\r\n        out[3] = scale0 * aw + scale1 * bw;\r\n\r\n        return out;\r\n    }\r\n\r\n    function quaternionToEuler(out, quat) {\r\n        var qx = quat[0];\r\n        var qy = quat[1];\r\n        var qz = quat[2];\r\n        var qw = quat[3];\r\n        var heading = Math.atan2(2*qy*qw-2*qx*qz , 1 - 2*qy*qy - 2*qz*qz);\r\n        var attitude = Math.asin(2*qx*qy + 2*qz*qw); \r\n        var bank = Math.atan2(2*qx*qw-2*qy*qz , 1 - 2*qx*qx - 2*qz*qz);\r\n        out[0] = heading/degToRads;\r\n        out[1] = attitude/degToRads;\r\n        out[2] = bank/degToRads;\r\n    }\r\n\r\n    function createQuaternion(values) {\r\n        var heading = values[0] * degToRads;\r\n        var attitude = values[1] * degToRads;\r\n        var bank = values[2] * degToRads;\r\n        var c1 = Math.cos(heading / 2);\r\n        var c2 = Math.cos(attitude / 2);\r\n        var c3 = Math.cos(bank / 2);\r\n        var s1 = Math.sin(heading / 2);\r\n        var s2 = Math.sin(attitude / 2);\r\n        var s3 = Math.sin(bank / 2);\r\n        var w = c1 * c2 * c3 - s1 * s2 * s3;\r\n        var x = s1 * s2 * c3 + c1 * c2 * s3;\r\n        var y = s1 * c2 * c3 + c1 * s2 * s3;\r\n        var z = c1 * s2 * c3 - s1 * c2 * s3;\r\n\r\n        return [x,y,z,w];\r\n    }\r\n\r\n    function getValueAtCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length- 1].t-this.offsetTime;\r\n        if(!(frameNum === this._caching.lastFrame || (this._caching.lastFrame !== initFrame && ((this._caching.lastFrame >= endTime && frameNum >= endTime) || (this._caching.lastFrame < initTime && frameNum < initTime))))){\r\n            if(this._caching.lastFrame >= frameNum) {\r\n                this._caching._lastKeyframeIndex = -1;\r\n                this._caching.lastIndex = 0;\r\n            }\r\n\r\n            var renderResult = this.interpolateValue(frameNum, this._caching);\r\n            this.pv = renderResult;\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function setVValue(val) {\r\n        var multipliedValue;\r\n        if(this.propType === 'unidimensional') {\r\n            multipliedValue = val * this.mult;\r\n            if(math_abs(this.v - multipliedValue) > 0.00001) {\r\n                this.v = multipliedValue;\r\n                this._mdf = true;\r\n            }\r\n        } else {\r\n            var i = 0, len = this.v.length;\r\n            while (i < len) {\r\n                multipliedValue = val[i] * this.mult;\r\n                if (math_abs(this.v[i] - multipliedValue) > 0.00001) {\r\n                    this.v[i] = multipliedValue;\r\n                    this._mdf = true;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if(this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\r\n            return;\r\n        }        \r\n        if(this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = this._isFirstFrame;\r\n        var i, len = this.effectsSequence.length;\r\n        var finalValue = this.kf ? this.pv : this.data.k;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this._isFirstFrame = false;\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    function ValueProperty(elem, data, mult, container){\r\n        this.propType = 'unidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this.v = mult ? data.k * mult : data.k;\r\n        this.pv = data.k;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.vel = 0;\r\n        this.effectsSequence = [];\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function MultiDimensionalProperty(elem, data, mult, container) {\r\n        this.propType = 'multidimensional';\r\n        this.mult = mult || 1;\r\n        this.data = data;\r\n        this._mdf = false;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this.frameId = -1;\r\n        var i, len = data.k.length;\r\n        this.v = createTypedArray('float32', len);\r\n        this.pv = createTypedArray('float32', len);\r\n        var arr = createTypedArray('float32', len);\r\n        this.vel = createTypedArray('float32', len);\r\n        for (i = 0; i < len; i += 1) {\r\n            this.v[i] = data.k[i] * this.mult;\r\n            this.pv[i] = data.k[i];\r\n        }\r\n        this._isFirstFrame = true;\r\n        this.effectsSequence = [];\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedValueProperty(elem, data, mult, container) {\r\n        this.propType = 'unidimensional';\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.frameId = -1;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0, value: 0, _lastKeyframeIndex: -1};\r\n        this.k = true;\r\n        this.kf = true;\r\n        this.data = data;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.v = initFrame;\r\n        this.pv = initFrame;\r\n        this._isFirstFrame = true;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function KeyframedMultidimensionalProperty(elem, data, mult, container){\r\n        this.propType = 'multidimensional';\r\n        var i, len = data.k.length;\r\n        var s, e,to,ti;\r\n        for (i = 0; i < len - 1; i += 1) {\r\n            if (data.k[i].to && data.k[i].s && data.k[i].e) {\r\n                s = data.k[i].s;\r\n                e = data.k[i].e;\r\n                to = data.k[i].to;\r\n                ti = data.k[i].ti;\r\n                if((s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0] + to[0],s[1] + to[1]) && bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0] + ti[0],e[1] + ti[1])) || (s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0] + to[0],s[1] + to[1],s[2] + to[2]) && bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0] + ti[0],e[1] + ti[1],e[2] + ti[2]))){\r\n                    data.k[i].to = null;\r\n                    data.k[i].ti = null;\r\n                }\r\n                if(s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\r\n                    if(s.length === 2 || (s[2] === e[2] && to[2] === 0 && ti[2] === 0)) {\r\n                        data.k[i].to = null;\r\n                        data.k[i].ti = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.effectsSequence = [getValueAtCurrentTime.bind(this)];\r\n        this.keyframes = data.k;\r\n        this.offsetTime = elem.data.st;\r\n        this.k = true;\r\n        this.kf = true;\r\n        this._isFirstFrame = true;\r\n        this.mult = mult || 1;\r\n        this.elem = elem;\r\n        this.container = container;\r\n        this.comp = elem.comp;\r\n        this.getValue = processEffectsSequence;\r\n        this.setVValue = setVValue;\r\n        this.interpolateValue = interpolateValue;\r\n        this.frameId = -1;\r\n        var arrLen = data.k[0].s.length;\r\n        this.v = createTypedArray('float32', arrLen);\r\n        this.pv = createTypedArray('float32', arrLen);\r\n        for (i = 0; i < arrLen; i += 1) {\r\n            this.v[i] = initFrame;\r\n            this.pv[i] = initFrame;\r\n        }\r\n        this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray('float32', arrLen)};\r\n        this.addEffect = addEffect;\r\n    }\r\n\r\n    function getProp(elem,data,type, mult, container) {\r\n        var p;\r\n        if(!data.k.length){\r\n            p = new ValueProperty(elem,data, mult, container);\r\n        }else if(typeof(data.k[0]) === 'number'){\r\n            p = new MultiDimensionalProperty(elem,data, mult, container);\r\n        }else{\r\n            switch(type){\r\n                case 0:\r\n                    p = new KeyframedValueProperty(elem,data,mult, container);\r\n                    break;\r\n                case 1:\r\n                    p = new KeyframedMultidimensionalProperty(elem,data,mult, container);\r\n                    break;\r\n            }\r\n        }\r\n        if(p.effectsSequence.length){\r\n            container.addDynamicProperty(p);\r\n        }\r\n        return p;\r\n    }\r\n\r\n    var ob = {\r\n        getProp: getProp\r\n    };\r\n    return ob;\r\n}());\r\nvar TransformPropertyFactory = (function() {\r\n\r\n    function applyToMatrix(mat) {\r\n        var _mdf = this._mdf;\r\n        this.iterateDynamicProperties();\r\n        this._mdf = this._mdf || _mdf;\r\n        if (this.a) {\r\n            mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n        }\r\n        if (this.s) {\r\n            mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n        }\r\n        if (this.sk) {\r\n            mat.skewFromAxis(-this.sk.v, this.sa.v);\r\n        }\r\n        if (this.r) {\r\n            mat.rotate(-this.r.v);\r\n        } else {\r\n            mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n        }\r\n        if (this.data.p.s) {\r\n            if (this.data.p.z) {\r\n                mat.translate(this.px.v, this.py.v, -this.pz.v);\r\n            } else {\r\n                mat.translate(this.px.v, this.py.v, 0);\r\n            }\r\n        } else {\r\n            mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\r\n        }\r\n    }\r\n    function processKeys(forceRender){\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        }\r\n        if(this._isDirty) {\r\n            this.precalculateMatrix();\r\n            this._isDirty = false;\r\n        }\r\n\r\n        this.iterateDynamicProperties();\r\n\r\n        if (this._mdf || forceRender) {\r\n            this.v.cloneFromProps(this.pre.props);\r\n            if (this.appliedTransformations < 1) {\r\n                this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            }\r\n            if(this.appliedTransformations < 2) {\r\n                this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            }\r\n            if (this.sk && this.appliedTransformations < 3) {\r\n                this.v.skewFromAxis(-this.sk.v, this.sa.v);\r\n            }\r\n            if (this.r && this.appliedTransformations < 4) {\r\n                this.v.rotate(-this.r.v);\r\n            } else if (!this.r && this.appliedTransformations < 4){\r\n                this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            }\r\n            if (this.autoOriented) {\r\n                var v1,v2, frameRate = this.elem.globalData.frameRate;\r\n                if(this.p && this.p.keyframes && this.p.getValueAtTime) {\r\n                    if (this.p._caching.lastFrame+this.p.offsetTime <= this.p.keyframes[0].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\r\n                    } else if(this.p._caching.lastFrame+this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\r\n                        v1 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t / frameRate), 0);\r\n                        v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.01) / frameRate, 0);\r\n                    } else {\r\n                        v1 = this.p.pv;\r\n                        v2 = this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\r\n                    }\r\n                } else if(this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\r\n                    v1 = [];\r\n                    v2 = [];\r\n                    var px = this.px, py = this.py, frameRate;\r\n                    if (px._caching.lastFrame+px.offsetTime <= px.keyframes[0].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate,0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[0].t) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[0].t) / frameRate,0);\r\n                    } else if(px._caching.lastFrame+px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\r\n                        v1[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t / frameRate),0);\r\n                        v1[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t / frameRate),0);\r\n                        v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                        v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate,0);\r\n                    } else {\r\n                        v1 = [px.pv, py.pv];\r\n                        v2[0] = px.getValueAtTime((px._caching.lastFrame+px.offsetTime - 0.01) / frameRate,px.offsetTime);\r\n                        v2[1] = py.getValueAtTime((py._caching.lastFrame+py.offsetTime - 0.01) / frameRate,py.offsetTime);\r\n                    }\r\n                }\r\n                this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\r\n            }\r\n            if(this.data.p && this.data.p.s){\r\n                if(this.data.p.z) {\r\n                    this.v.translate(this.px.v, this.py.v, -this.pz.v);\r\n                } else {\r\n                    this.v.translate(this.px.v, this.py.v, 0);\r\n                }\r\n            }else{\r\n                this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2]);\r\n            }\r\n        }\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n\r\n    function precalculateMatrix() {\r\n        if(!this.a.k) {\r\n            this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\r\n            this.appliedTransformations = 1;\r\n        } else {\r\n            return;\r\n        }\r\n        if(!this.s.effectsSequence.length) {\r\n            this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\r\n            this.appliedTransformations = 2;\r\n        } else {\r\n            return;\r\n        }\r\n        if(this.sk) {\r\n            if(!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\r\n                this.pre.skewFromAxis(-this.sk.v, this.sa.v);\r\n            this.appliedTransformations = 3;\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n        if (this.r) {\r\n            if(!this.r.effectsSequence.length) {\r\n                this.pre.rotate(-this.r.v);\r\n                this.appliedTransformations = 4;\r\n            } else {\r\n                return;\r\n            }\r\n        } else if(!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\r\n            this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\r\n            this.appliedTransformations = 4;\r\n        }\r\n    }\r\n\r\n    function autoOrient(){\r\n        //\r\n        //var prevP = this.getValueAtTime();\r\n    }\r\n\r\n    function addDynamicProperty(prop) {\r\n        this._addDynamicProperty(prop);\r\n        this.elem.addDynamicProperty(prop);\r\n        this._isDirty = true;\r\n    }\r\n\r\n    function TransformProperty(elem,data,container){\r\n        this.elem = elem;\r\n        this.frameId = -1;\r\n        this.propType = 'transform';\r\n        this.data = data;\r\n        this.v = new Matrix();\r\n        //Precalculated matrix with non animated properties\r\n        this.pre = new Matrix();\r\n        this.appliedTransformations = 0;\r\n        this.initDynamicPropertyContainer(container || elem);\r\n        if(data.p && data.p.s){\r\n            this.px = PropertyFactory.getProp(elem,data.p.x,0,0,this);\r\n            this.py = PropertyFactory.getProp(elem,data.p.y,0,0,this);\r\n            if(data.p.z){\r\n                this.pz = PropertyFactory.getProp(elem,data.p.z,0,0,this);\r\n            }\r\n        }else{\r\n            this.p = PropertyFactory.getProp(elem,data.p || {k:[0,0,0]},1,0,this);\r\n        }\r\n        if(data.rx) {\r\n            this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\r\n            this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\r\n            this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\r\n            if(data.or.k[0].ti) {\r\n                var i, len = data.or.k.length;\r\n                for(i=0;i<len;i+=1) {\r\n                    data.or.k[i].to = data.or.k[i].ti = null;\r\n                }\r\n            }\r\n            this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this);\r\n            //sh Indicates it needs to be capped between -180 and 180\r\n            this.or.sh = true;\r\n        } else {\r\n            this.r = PropertyFactory.getProp(elem, data.r || {k: 0}, 0, degToRads, this);\r\n        }\r\n        if(data.sk){\r\n            this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\r\n            this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\r\n        }\r\n        this.a = PropertyFactory.getProp(elem,data.a || {k:[0,0,0]},1,0,this);\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:[100,100,100]},1,0.01,this);\r\n        // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\r\n        if(data.o){\r\n            this.o = PropertyFactory.getProp(elem,data.o,0,0.01,elem);\r\n        } else {\r\n            this.o = {_mdf:false,v:1};\r\n        }\r\n        this._isDirty = true;\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue(true);\r\n        }\r\n    }\r\n\r\n    TransformProperty.prototype = {\r\n        applyToMatrix: applyToMatrix,\r\n        getValue: processKeys,\r\n        precalculateMatrix: precalculateMatrix,\r\n        autoOrient: autoOrient\r\n    };\r\n\r\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\r\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\r\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\r\n\r\n    function getTransformProperty(elem,data,container){\r\n        return new TransformProperty(elem,data,container);\r\n    }\r\n\r\n    return {\r\n        getTransformProperty: getTransformProperty\r\n    };\r\n\r\n}());\r\nfunction ShapePath(){\r\n\tthis.c = false;\r\n\tthis._length = 0;\r\n\tthis._maxLength = 8;\r\n\tthis.v = createSizedArray(this._maxLength);\r\n\tthis.o = createSizedArray(this._maxLength);\r\n\tthis.i = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapePath.prototype.setPathData = function(closed, len) {\r\n\tthis.c = closed;\r\n\tthis.setLength(len);\r\n\tvar i = 0;\r\n\twhile(i < len){\r\n\t\tthis.v[i] = point_pool.newElement();\r\n\t\tthis.o[i] = point_pool.newElement();\r\n\t\tthis.i[i] = point_pool.newElement();\r\n\t\ti += 1;\r\n\t}\r\n};\r\n\r\nShapePath.prototype.setLength = function(len) {\r\n\twhile(this._maxLength < len) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tthis._length = len;\r\n};\r\n\r\nShapePath.prototype.doubleArrayLength = function() {\r\n\tthis.v = this.v.concat(createSizedArray(this._maxLength));\r\n\tthis.i = this.i.concat(createSizedArray(this._maxLength));\r\n\tthis.o = this.o.concat(createSizedArray(this._maxLength));\r\n\tthis._maxLength *= 2;\r\n};\r\n\r\nShapePath.prototype.setXYAt = function(x, y, type, pos, replace) {\r\n\tvar arr;\r\n\tthis._length = Math.max(this._length, pos + 1);\r\n\tif(this._length >= this._maxLength) {\r\n\t\tthis.doubleArrayLength();\r\n\t}\r\n\tswitch(type){\r\n\t\tcase 'v':\r\n\t\t\tarr = this.v;\r\n\t\t\tbreak;\r\n\t\tcase 'i':\r\n\t\t\tarr = this.i;\r\n\t\t\tbreak;\r\n\t\tcase 'o':\r\n\t\t\tarr = this.o;\r\n\t\t\tbreak;\r\n\t}\r\n\tif(!arr[pos] || (arr[pos] && !replace)){\r\n\t\tarr[pos] = point_pool.newElement();\r\n\t}\r\n\tarr[pos][0] = x;\r\n\tarr[pos][1] = y;\r\n};\r\n\r\nShapePath.prototype.setTripleAt = function(vX,vY,oX,oY,iX,iY,pos, replace) {\r\n\tthis.setXYAt(vX,vY,'v',pos, replace);\r\n\tthis.setXYAt(oX,oY,'o',pos, replace);\r\n\tthis.setXYAt(iX,iY,'i',pos, replace);\r\n};\r\n\r\nShapePath.prototype.reverse = function() {\r\n\tvar newPath = new ShapePath();\r\n\tnewPath.setPathData(this.c, this._length);\r\n\tvar vertices = this.v, outPoints = this.o, inPoints = this.i;\r\n\tvar init = 0;\r\n\tif (this.c) {\r\n\t\tnewPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\r\n        init = 1;\r\n    }\r\n    var cnt = this._length - 1;\r\n    var len = this._length;\r\n\r\n    var i;\r\n    for (i = init; i < len; i += 1) {\r\n    \tnewPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\r\n        cnt -= 1;\r\n    }\r\n    return newPath;\r\n};\r\nvar ShapePropertyFactory = (function(){\r\n\r\n    var initFrame = -999999;\r\n\r\n    function interpolateShape(frameNum, previousValue, caching) {\r\n        var iterationIndex = caching.lastIndex;\r\n        var keyPropS,keyPropE,isHold, j, k, jLen, kLen, perc, vertexValue;\r\n        var kf = this.keyframes;\r\n        if(frameNum < kf[0].t-this.offsetTime){\r\n            keyPropS = kf[0].s[0];\r\n            isHold = true;\r\n            iterationIndex = 0;\r\n        }else if(frameNum >= kf[kf.length - 1].t-this.offsetTime){\r\n            keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\r\n            /*if(kf[kf.length - 1].s){\r\n                keyPropS = kf[kf.length - 1].s[0];\r\n            }else{\r\n                keyPropS = kf[kf.length - 2].e[0];\r\n            }*/\r\n            isHold = true;\r\n        }else{\r\n            var i = iterationIndex;\r\n            var len = kf.length- 1,flag = true,keyData,nextKeyData;\r\n            while(flag){\r\n                keyData = kf[i];\r\n                nextKeyData = kf[i+1];\r\n                if((nextKeyData.t - this.offsetTime) > frameNum){\r\n                    break;\r\n                }\r\n                if(i < len - 1){\r\n                    i += 1;\r\n                }else{\r\n                    flag = false;\r\n                }\r\n            }\r\n            isHold = keyData.h === 1;\r\n            iterationIndex = i;\r\n            if(!isHold){\r\n                if(frameNum >= nextKeyData.t-this.offsetTime){\r\n                    perc = 1;\r\n                }else if(frameNum < keyData.t-this.offsetTime){\r\n                    perc = 0;\r\n                }else{\r\n                    var fnc;\r\n                    if(keyData.__fnct){\r\n                        fnc = keyData.__fnct;\r\n                    }else{\r\n                        fnc = BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get;\r\n                        keyData.__fnct = fnc;\r\n                    }\r\n                    perc = fnc((frameNum-(keyData.t-this.offsetTime))/((nextKeyData.t-this.offsetTime)-(keyData.t-this.offsetTime)));\r\n                }\r\n                keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\r\n            }\r\n            keyPropS = keyData.s[0];\r\n        }\r\n        jLen = previousValue._length;\r\n        kLen = keyPropS.i[0].length;\r\n        caching.lastIndex = iterationIndex;\r\n\r\n        for(j=0;j<jLen;j+=1){\r\n            for(k=0;k<kLen;k+=1){\r\n                vertexValue = isHold ? keyPropS.i[j][k] :  keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc;\r\n                previousValue.i[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.o[j][k] :  keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc;\r\n                previousValue.o[j][k] = vertexValue;\r\n                vertexValue = isHold ? keyPropS.v[j][k] :  keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc;\r\n                previousValue.v[j][k] = vertexValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    function interpolateShapeCurrentTime(){\r\n        var frameNum = this.comp.renderedFrame - this.offsetTime;\r\n        var initTime = this.keyframes[0].t - this.offsetTime;\r\n        var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\r\n        var lastFrame = this._caching.lastFrame;\r\n        if(!(lastFrame !== initFrame && ((lastFrame < initTime && frameNum < initTime) || (lastFrame > endTime && frameNum > endTime)))){\r\n            ////\r\n            this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\r\n            this.interpolateShape(frameNum, this.pv, this._caching);\r\n            ////\r\n        }\r\n        this._caching.lastFrame = frameNum;\r\n        return this.pv;\r\n    }\r\n\r\n    function resetShape(){\r\n        this.paths = this.localShapeCollection;\r\n    }\r\n\r\n    function shapesEqual(shape1, shape2) {\r\n        if(shape1._length !== shape2._length || shape1.c !== shape2.c){\r\n            return false;\r\n        }\r\n        var i, len = shape1._length;\r\n        for(i = 0; i < len; i += 1) {\r\n            if(shape1.v[i][0] !== shape2.v[i][0] \r\n            || shape1.v[i][1] !== shape2.v[i][1] \r\n            || shape1.o[i][0] !== shape2.o[i][0] \r\n            || shape1.o[i][1] !== shape2.o[i][1] \r\n            || shape1.i[i][0] !== shape2.i[i][0] \r\n            || shape1.i[i][1] !== shape2.i[i][1]) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function setVValue(newPath) {\r\n        if(!shapesEqual(this.v, newPath)) {\r\n            this.v = shape_pool.clone(newPath);\r\n            this.localShapeCollection.releaseShapes();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this._mdf = true;\r\n            this.paths = this.localShapeCollection;\r\n        }\r\n    }\r\n\r\n    function processEffectsSequence() {\r\n        if (this.elem.globalData.frameId === this.frameId) {\r\n            return;\r\n        } else if (!this.effectsSequence.length) {\r\n            this._mdf = false;\r\n            return;\r\n        }\r\n        if (this.lock) {\r\n            this.setVValue(this.pv);\r\n            return;\r\n        }\r\n        this.lock = true;\r\n        this._mdf = false;\r\n        var finalValue = this.kf ? this.pv : this.data.ks ? this.data.ks.k : this.data.pt.k;\r\n        var i, len = this.effectsSequence.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            finalValue = this.effectsSequence[i](finalValue);\r\n        }\r\n        this.setVValue(finalValue);\r\n        this.lock = false;\r\n        this.frameId = this.elem.globalData.frameId;\r\n    }\r\n    function ShapeProperty(elem, data, type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.container = elem;\r\n        this.elem = elem;\r\n        this.data = data;\r\n        this.k = false;\r\n        this.kf = false;\r\n        this._mdf = false;\r\n        var pathData = type === 3 ? data.pt.k : data.ks.k;\r\n        this.v = shape_pool.clone(pathData);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.reset = resetShape;\r\n        this.effectsSequence = [];\r\n    }\r\n\r\n    function addEffect(effectFunction) {\r\n        this.effectsSequence.push(effectFunction);\r\n        this.container.addDynamicProperty(this);\r\n    }\r\n\r\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    ShapeProperty.prototype.getValue = processEffectsSequence;\r\n    ShapeProperty.prototype.setVValue = setVValue;\r\n    ShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    function KeyframedShapeProperty(elem,data,type){\r\n        this.propType = 'shape';\r\n        this.comp = elem.comp;\r\n        this.elem = elem;\r\n        this.container = elem;\r\n        this.offsetTime = elem.data.st;\r\n        this.keyframes = type === 3 ? data.pt.k : data.ks.k;\r\n        this.k = true;\r\n        this.kf = true;\r\n        var len = this.keyframes[0].s[0].i.length;\r\n        var jLen = this.keyframes[0].s[0].i[0].length;\r\n        this.v = shape_pool.newElement();\r\n        this.v.setPathData(this.keyframes[0].s[0].c, len);\r\n        this.pv = shape_pool.clone(this.v);\r\n        this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n        this.paths = this.localShapeCollection;\r\n        this.paths.addShape(this.v);\r\n        this.lastFrame = initFrame;\r\n        this.reset = resetShape;\r\n        this._caching = {lastFrame: initFrame, lastIndex: 0};\r\n        this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\r\n    }\r\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\r\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\r\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\r\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\r\n\r\n    var EllShapeProperty = (function(){\r\n\r\n        var cPoint = roundCorner;\r\n\r\n        function EllShapeProperty(elem,data) {\r\n            /*this.v = {\r\n                v: createSizedArray(4),\r\n                i: createSizedArray(4),\r\n                o: createSizedArray(4),\r\n                c: true\r\n            };*/\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 4);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.paths = this.localShapeCollection;\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.d = data.d;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertEllToPath();\r\n            }\r\n        }\r\n        EllShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function (){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n\r\n                if(this._mdf){\r\n                    this.convertEllToPath();\r\n                }\r\n            },\r\n            convertEllToPath: function() {\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], s0 = this.s.v[0]/2, s1 = this.s.v[1]/2;\r\n                var _cw = this.d !== 3;\r\n                var _v = this.v;\r\n                _v.v[0][0] = p0;\r\n                _v.v[0][1] = p1 - s1;\r\n                _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.v[1][1] = p1;\r\n                _v.v[2][0] = p0;\r\n                _v.v[2][1] = p1 + s1;\r\n                _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.v[3][1] = p1;\r\n                _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.i[0][1] = p1 - s1;\r\n                _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.i[1][1] = p1 - s1 * cPoint;\r\n                _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.i[2][1] = p1 + s1;\r\n                _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.i[3][1] = p1 + s1 * cPoint;\r\n                _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\r\n                _v.o[0][1] = p1 - s1;\r\n                _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\r\n                _v.o[1][1] = p1 + s1 * cPoint;\r\n                _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\r\n                _v.o[2][1] = p1 + s1;\r\n                _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\r\n                _v.o[3][1] = p1 - s1 * cPoint;\r\n            }\r\n        };\r\n\r\n        extendPrototype([DynamicPropertyContainer], EllShapeProperty);\r\n\r\n        return EllShapeProperty;\r\n    }());\r\n\r\n    var StarShapeProperty = (function() {\r\n\r\n        function StarShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.setPathData(true, 0);\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.data = data;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            if(data.sy === 1){\r\n                this.ir = PropertyFactory.getProp(elem,data.ir,0,0,this);\r\n                this.is = PropertyFactory.getProp(elem,data.is,0,0.01,this);\r\n                this.convertToPath = this.convertStarToPath;\r\n            } else {\r\n                this.convertToPath = this.convertPolygonToPath;\r\n            }\r\n            this.pt = PropertyFactory.getProp(elem,data.pt,0,0,this);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,degToRads,this);\r\n            this.or = PropertyFactory.getProp(elem,data.or,0,0,this);\r\n            this.os = PropertyFactory.getProp(elem,data.os,0,0.01,this);\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertToPath();\r\n            }\r\n        }\r\n        StarShapeProperty.prototype = {\r\n            reset: resetShape,\r\n            getValue: function() {\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertToPath();\r\n                }\r\n            },\r\n            convertStarToPath: function() {\r\n                var numPts = Math.floor(this.pt.v)*2;\r\n                var angle = Math.PI*2/numPts;\r\n                /*this.v.v.length = numPts;\r\n                this.v.i.length = numPts;\r\n                this.v.o.length = numPts;*/\r\n                var longFlag = true;\r\n                var longRad = this.or.v;\r\n                var shortRad = this.ir.v;\r\n                var longRound = this.os.v;\r\n                var shortRound = this.is.v;\r\n                var longPerimSegment = 2*Math.PI*longRad/(numPts*2);\r\n                var shortPerimSegment = 2*Math.PI*shortRad/(numPts*2);\r\n                var i, rad,roundness,perimSegment, currentAng = -Math.PI/ 2;\r\n                currentAng += this.r.v;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    rad = longFlag ? longRad : shortRad;\r\n                    roundness = longFlag ? longRound : shortRound;\r\n                    perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n\r\n                    /*this.v.v[i] = [x,y];\r\n                    this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                    this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                    this.v._length = numPts;*/\r\n                    longFlag = !longFlag;\r\n                    currentAng += angle*dir;\r\n                }\r\n            },\r\n            convertPolygonToPath: function() {\r\n                var numPts = Math.floor(this.pt.v);\r\n                var angle = Math.PI*2/numPts;\r\n                var rad = this.or.v;\r\n                var roundness = this.os.v;\r\n                var perimSegment = 2*Math.PI*rad/(numPts*4);\r\n                var i, currentAng = -Math.PI/ 2;\r\n                var dir = this.data.d === 3 ? -1 : 1;\r\n                currentAng += this.r.v;\r\n                this.v._length = 0;\r\n                for(i=0;i<numPts;i+=1){\r\n                    var x = rad * Math.cos(currentAng);\r\n                    var y = rad * Math.sin(currentAng);\r\n                    var ox = x === 0 && y === 0 ? 0 : y/Math.sqrt(x*x + y*y);\r\n                    var oy = x === 0 && y === 0 ? 0 : -x/Math.sqrt(x*x + y*y);\r\n                    x +=  + this.p.v[0];\r\n                    y +=  + this.p.v[1];\r\n                    this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir, i, true);\r\n                    currentAng += angle*dir;\r\n                }\r\n                this.paths.length = 0;\r\n                this.paths[0] = this.v;\r\n            }\r\n\r\n        };\r\n        extendPrototype([DynamicPropertyContainer], StarShapeProperty);\r\n\r\n        return StarShapeProperty;\r\n    }());\r\n\r\n    var RectShapeProperty = (function() {\r\n\r\n         function RectShapeProperty(elem,data) {\r\n            this.v = shape_pool.newElement();\r\n            this.v.c = true;\r\n            this.localShapeCollection = shapeCollection_pool.newShapeCollection();\r\n            this.localShapeCollection.addShape(this.v);\r\n            this.paths = this.localShapeCollection;\r\n            this.elem = elem;\r\n            this.comp = elem.comp;\r\n            this.frameId = -1;\r\n            this.d = data.d;\r\n            this.initDynamicPropertyContainer(elem);\r\n            this.p = PropertyFactory.getProp(elem,data.p,1,0,this);\r\n            this.s = PropertyFactory.getProp(elem,data.s,1,0,this);\r\n            this.r = PropertyFactory.getProp(elem,data.r,0,0,this);\r\n            if(this.dynamicProperties.length){\r\n                this.k = true;\r\n            }else{\r\n                this.k = false;\r\n                this.convertRectToPath();\r\n            }\r\n        }\r\n        RectShapeProperty.prototype = {\r\n            convertRectToPath: function (){\r\n                var p0 = this.p.v[0], p1 = this.p.v[1], v0 = this.s.v[0]/2, v1 = this.s.v[1]/2;\r\n                var round = bm_min(v0,v1,this.r.v);\r\n                var cPoint = round*(1-roundCorner);\r\n                this.v._length = 0;\r\n\r\n                if(this.d === 2 || this.d === 1) {\r\n                    this.v.setTripleAt(p0+v0, p1-v1+round,p0+v0, p1-v1+round,p0+v0,p1-v1+cPoint,0, true);\r\n                    this.v.setTripleAt(p0+v0, p1+v1-round,p0+v0, p1+v1-cPoint,p0+v0, p1+v1-round,1, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round, p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2);\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3);\r\n                    }\r\n                }else{\r\n                    this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0, true);\r\n                    if(round!== 0){\r\n                        this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2, true);\r\n                        this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4, true);\r\n                        this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5, true);\r\n                        this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7, true);\r\n                    } else {\r\n                        this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1, true);\r\n                        this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2, true);\r\n                        this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3, true);\r\n\r\n                    }\r\n                }\r\n            },\r\n            getValue: function(frameNum){\r\n                if(this.elem.globalData.frameId === this.frameId){\r\n                    return;\r\n                }\r\n                this.frameId = this.elem.globalData.frameId;\r\n                this.iterateDynamicProperties();\r\n                if(this._mdf){\r\n                    this.convertRectToPath();\r\n                }\r\n\r\n            },\r\n            reset: resetShape\r\n        };\r\n        extendPrototype([DynamicPropertyContainer], RectShapeProperty);\r\n\r\n        return RectShapeProperty;\r\n    }());\r\n\r\n    function getShapeProp(elem,data,type){\r\n        var prop;\r\n        if(type === 3 || type === 4){\r\n            var dataProp = type === 3 ? data.pt : data.ks;\r\n            var keys = dataProp.k;\r\n            if(keys.length){\r\n                prop = new KeyframedShapeProperty(elem, data, type);\r\n            }else{\r\n                prop = new ShapeProperty(elem, data, type);\r\n            }\r\n        }else if(type === 5){\r\n            prop = new RectShapeProperty(elem, data);\r\n        }else if(type === 6){\r\n            prop = new EllShapeProperty(elem, data);\r\n        }else if(type === 7){\r\n            prop = new StarShapeProperty(elem, data);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    }\r\n\r\n    function getConstructorFunction() {\r\n        return ShapeProperty;\r\n    }\r\n\r\n    function getKeyframedConstructorFunction() {\r\n        return KeyframedShapeProperty;\r\n    }\r\n\r\n    var ob = {};\r\n    ob.getShapeProp = getShapeProp;\r\n    ob.getConstructorFunction = getConstructorFunction;\r\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\r\n    return ob;\r\n}());\r\nvar ShapeModifiers = (function(){\r\n    var ob = {};\r\n    var modifiers = {};\r\n    ob.registerModifier = registerModifier;\r\n    ob.getModifier = getModifier;\r\n\r\n    function registerModifier(nm,factory){\r\n        if(!modifiers[nm]){\r\n            modifiers[nm] = factory;\r\n        }\r\n    }\r\n\r\n    function getModifier(nm,elem, data){\r\n        return new modifiers[nm](elem, data);\r\n    }\r\n\r\n    return ob;\r\n}());\r\n\r\nfunction ShapeModifier(){}\r\nShapeModifier.prototype.initModifierProperties = function(){};\r\nShapeModifier.prototype.addShapeToModifier = function(){};\r\nShapeModifier.prototype.addShape = function(data){\r\n    if (!this.closed) {\r\n        // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\r\n        data.sh.container.addDynamicProperty(data.sh);\r\n        var shapeData = {shape:data.sh, data: data, localShapeCollection:shapeCollection_pool.newShapeCollection()};\r\n        this.shapes.push(shapeData);\r\n        this.addShapeToModifier(shapeData);\r\n        if (this._isAnimated) {\r\n            data.setAsAnimated();\r\n        }\r\n    }\r\n};\r\nShapeModifier.prototype.init = function(elem,data){\r\n    this.shapes = [];\r\n    this.elem = elem;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,data);\r\n    this.frameId = initialDefaultFrame;\r\n    this.closed = false;\r\n    this.k = false;\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\nShapeModifier.prototype.processKeys = function(){\r\n    if(this.elem.globalData.frameId === this.frameId){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], ShapeModifier);\r\nfunction TrimModifier(){\r\n}\r\nextendPrototype([ShapeModifier], TrimModifier);\r\nTrimModifier.prototype.initModifierProperties = function(elem, data) {\r\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\r\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\r\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\r\n    this.sValue = 0;\r\n    this.eValue = 0;\r\n    this.getValue = this.processKeys;\r\n    this.m = data.m;\r\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\r\n};\r\n\r\nTrimModifier.prototype.addShapeToModifier = function(shapeData){\r\n    shapeData.pathsData = [];\r\n};\r\n\r\nTrimModifier.prototype.calculateShapeEdges = function(s, e, shapeLength, addedLength, totalModifierLength) {\r\n    var segments = [];\r\n    if (e <= 1) {\r\n        segments.push({\r\n            s: s,\r\n            e: e\r\n        });\r\n    } else if (s >= 1) {\r\n        segments.push({\r\n            s: s - 1,\r\n            e: e - 1\r\n        });\r\n    } else {\r\n        segments.push({\r\n            s: s,\r\n            e: 1\r\n        });\r\n        segments.push({\r\n            s: 0,\r\n            e: e - 1\r\n        });\r\n    }\r\n    var shapeSegments = [];\r\n    var i, len = segments.length, segmentOb;\r\n    for (i = 0; i < len; i += 1) {\r\n        segmentOb = segments[i];\r\n        if (segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength) ; else {\r\n            var shapeS, shapeE;\r\n            if (segmentOb.s * totalModifierLength <= addedLength) {\r\n                shapeS = 0;\r\n            } else {\r\n                shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\r\n            }\r\n            if(segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\r\n                shapeE = 1;\r\n            } else {\r\n                shapeE = ((segmentOb.e * totalModifierLength - addedLength) / shapeLength);\r\n            }\r\n            shapeSegments.push([shapeS, shapeE]);\r\n        }\r\n    }\r\n    if (!shapeSegments.length) {\r\n        shapeSegments.push([0, 0]);\r\n    }\r\n    return shapeSegments;\r\n};\r\n\r\nTrimModifier.prototype.releasePathsData = function(pathsData) {\r\n    var i, len = pathsData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        segments_length_pool.release(pathsData[i]);\r\n    }\r\n    pathsData.length = 0;\r\n    return pathsData;\r\n};\r\n\r\nTrimModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var s, e;\r\n    if (this._mdf || _isFirstFrame) {\r\n        var o = (this.o.v % 360) / 360;\r\n        if (o < 0) {\r\n            o += 1;\r\n        }\r\n        s = (this.s.v > 1 ? 1 : this.s.v < 0 ? 0 : this.s.v) + o;\r\n        e = (this.e.v > 1 ? 1 : this.e.v < 0 ? 0 : this.e.v) + o;\r\n        if (s > e) {\r\n            var _s = s;\r\n            s = e;\r\n            e = _s;\r\n        }\r\n        s = Math.round(s * 10000) * 0.0001;\r\n        e = Math.round(e * 10000) * 0.0001;\r\n        this.sValue = s;\r\n        this.eValue = e;\r\n    } else {\r\n        s = this.sValue;\r\n        e = this.eValue;\r\n    }\r\n    var shapePaths;\r\n    var i, len = this.shapes.length, j, jLen;\r\n    var pathsData, pathData, totalShapeLength, totalModifierLength = 0;\r\n\r\n    if (e === s) {\r\n        for (i = 0; i < len; i += 1) {\r\n            this.shapes[i].localShapeCollection.releaseShapes();\r\n            this.shapes[i].shape._mdf = true;\r\n            this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\r\n        }\r\n    } else if (!((e === 1 && s === 0) || (e===0 && s === 1))){\r\n        var segments = [], shapeData, localShapeCollection;\r\n        for (i = 0; i < len; i += 1) {\r\n            shapeData = this.shapes[i];\r\n            // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\r\n            if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\r\n                shapeData.shape.paths = shapeData.localShapeCollection;\r\n            } else {\r\n                shapePaths = shapeData.shape.paths;\r\n                jLen = shapePaths._length;\r\n                totalShapeLength = 0;\r\n                if (!shapeData.shape._mdf && shapeData.pathsData.length) {\r\n                    totalShapeLength = shapeData.totalShapeLength;\r\n                } else {\r\n                    pathsData = this.releasePathsData(shapeData.pathsData);\r\n                    for (j = 0; j < jLen; j += 1) {\r\n                        pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\r\n                        pathsData.push(pathData);\r\n                        totalShapeLength += pathData.totalLength;\r\n                    }\r\n                    shapeData.totalShapeLength = totalShapeLength;\r\n                    shapeData.pathsData = pathsData;\r\n                }\r\n\r\n                totalModifierLength += totalShapeLength;\r\n                shapeData.shape._mdf = true;\r\n            }\r\n        }\r\n        var shapeS = s, shapeE = e, addedLength = 0, edges;\r\n        for (i = len - 1; i >= 0; i -= 1) {\r\n            shapeData = this.shapes[i];\r\n            if (shapeData.shape._mdf) {\r\n                localShapeCollection = shapeData.localShapeCollection;\r\n                localShapeCollection.releaseShapes();\r\n                //if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\r\n                if (this.m === 2 && len > 1) {\r\n                    edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\r\n                    addedLength += shapeData.totalShapeLength;\r\n                } else {\r\n                    edges = [[shapeS, shapeE]];\r\n                }\r\n                jLen = edges.length;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    shapeS = edges[j][0];\r\n                    shapeE = edges[j][1];\r\n                    segments.length = 0;\r\n                    if (shapeE <= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength * shapeE\r\n                        });\r\n                    } else if (shapeS >= 1) {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * (shapeS - 1),\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    } else {\r\n                        segments.push({\r\n                            s:shapeData.totalShapeLength * shapeS,\r\n                            e:shapeData.totalShapeLength\r\n                        });\r\n                        segments.push({\r\n                            s:0,\r\n                            e:shapeData.totalShapeLength * (shapeE - 1)\r\n                        });\r\n                    }\r\n                    var newShapesData = this.addShapes(shapeData,segments[0]);\r\n                    if (segments[0].s !== segments[0].e) {\r\n                        if (segments.length > 1) {\r\n                            var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\r\n                            if (lastShapeInCollection.c) {\r\n                                var lastShape = newShapesData.pop();\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1], lastShape);\r\n                            } else {\r\n                                this.addPaths(newShapesData, localShapeCollection);\r\n                                newShapesData = this.addShapes(shapeData, segments[1]);\r\n                            }\r\n                        } \r\n                        this.addPaths(newShapesData, localShapeCollection);\r\n                    }\r\n                    \r\n                }\r\n                shapeData.shape.paths = localShapeCollection;\r\n            }\r\n        }\r\n    } else if (this._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            //Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\r\n            //Don't remove this even if it's losing cached info.\r\n            this.shapes[i].pathsData.length = 0;\r\n            this.shapes[i].shape._mdf = true;\r\n        }\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addPaths = function(newPaths, localShapeCollection) {\r\n    var i, len = newPaths.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        localShapeCollection.addShape(newPaths[i]);\r\n    }\r\n};\r\n\r\nTrimModifier.prototype.addSegment = function(pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\r\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addSegmentFromArray = function(points, shapePath, pos, newShape) {\r\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\r\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\r\n    if(newShape){\r\n        shapePath.setXYAt(points[0], points[4], 'v', pos);\r\n    }\r\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\r\n};\r\n\r\nTrimModifier.prototype.addShapes = function(shapeData, shapeSegment, shapePath) {\r\n    var pathsData = shapeData.pathsData;\r\n    var shapePaths = shapeData.shape.paths.shapes;\r\n    var i, len = shapeData.shape.paths._length, j, jLen;\r\n    var addedLength = 0;\r\n    var currentLengthData,segmentCount;\r\n    var lengths;\r\n    var segment;\r\n    var shapes = [];\r\n    var initPos;\r\n    var newShape = true;\r\n    if (!shapePath) {\r\n        shapePath = shape_pool.newElement();\r\n        segmentCount = 0;\r\n        initPos = 0;\r\n    } else {\r\n        segmentCount = shapePath._length;\r\n        initPos = shapePath._length;\r\n    }\r\n    shapes.push(shapePath);\r\n    for (i = 0; i < len; i += 1) {\r\n        lengths = pathsData[i].lengths;\r\n        shapePath.c = shapePaths[i].c;\r\n        jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\r\n        for (j = 1; j < jLen; j +=1) {\r\n            currentLengthData = lengths[j-1];\r\n            if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\r\n                addedLength += currentLengthData.addedLength;\r\n                shapePath.c = false;\r\n            } else if(addedLength > shapeSegment.e) {\r\n                shapePath.c = false;\r\n                break;\r\n            } else {\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength)/currentLengthData.addedLength,(shapeSegment.e - addedLength)/currentLengthData.addedLength, lengths[j-1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n                addedLength += currentLengthData.addedLength;\r\n                segmentCount += 1;\r\n            }\r\n        }\r\n        if (shapePaths[i].c && lengths.length) {\r\n            currentLengthData = lengths[j - 1];\r\n            if (addedLength <= shapeSegment.e) {\r\n                var segmentLength = lengths[j - 1].addedLength;\r\n                if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\r\n                    this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                } else {\r\n                    segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\r\n                    this.addSegmentFromArray(segment, shapePath, segmentCount, newShape);\r\n                    // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\r\n                    newShape = false;\r\n                    shapePath.c = false;\r\n                }\r\n            } else {\r\n                shapePath.c = false;\r\n            }\r\n            addedLength += currentLengthData.addedLength;\r\n            segmentCount += 1;\r\n        }\r\n        if (shapePath._length) {\r\n            shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\r\n            shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1],'o', shapePath._length - 1);\r\n        }\r\n        if (addedLength > shapeSegment.e) {\r\n            break;\r\n        }\r\n        if (i < len - 1) {\r\n            shapePath = shape_pool.newElement();\r\n            newShape = true;\r\n            shapes.push(shapePath);\r\n            segmentCount = 0;\r\n        }\r\n    }\r\n    return shapes;\r\n};\r\n\r\n\r\nShapeModifiers.registerModifier('tm', TrimModifier);\r\nfunction RoundCornersModifier(){}\r\nextendPrototype([ShapeModifier],RoundCornersModifier);\r\nRoundCornersModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.rd = PropertyFactory.getProp(elem,data.r,0,null,this);\r\n    this._isAnimated = !!this.rd.effectsSequence.length;\r\n};\r\n\r\nRoundCornersModifier.prototype.processPath = function(path, round){\r\n    var cloned_path = shape_pool.newElement();\r\n    cloned_path.c = path.c;\r\n    var i, len = path._length;\r\n    var currentV,currentI,currentO,closerV, distance,newPosPerc,index = 0;\r\n    var vX,vY,oX,oY,iX,iY;\r\n    for(i=0;i<len;i+=1){\r\n        currentV = path.v[i];\r\n        currentO = path.o[i];\r\n        currentI = path.i[i];\r\n        if(currentV[0]===currentO[0] && currentV[1]===currentO[1] && currentV[0]===currentI[0] && currentV[1]===currentI[1]){\r\n            if((i===0 || i === len - 1) && !path.c){\r\n                cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index);\r\n                /*cloned_path.v[index] = currentV;\r\n                cloned_path.o[index] = currentO;\r\n                cloned_path.i[index] = currentI;*/\r\n                index += 1;\r\n            } else {\r\n                if(i===0){\r\n                    closerV = path.v[len-1];\r\n                } else {\r\n                    closerV = path.v[i-1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = iX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = iY = currentV[1]-(currentV[1]-closerV[1])*newPosPerc;\r\n                oX = vX-(vX-currentV[0])*roundCorner;\r\n                oY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n\r\n                if(i === len - 1){\r\n                    closerV = path.v[0];\r\n                } else {\r\n                    closerV = path.v[i+1];\r\n                }\r\n                distance = Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));\r\n                newPosPerc = distance ? Math.min(distance/2,round)/distance : 0;\r\n                vX = oX = currentV[0]+(closerV[0]-currentV[0])*newPosPerc;\r\n                vY = oY = currentV[1]+(closerV[1]-currentV[1])*newPosPerc;\r\n                iX = vX-(vX-currentV[0])*roundCorner;\r\n                iY = vY-(vY-currentV[1])*roundCorner;\r\n                cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);\r\n                index += 1;\r\n            }\r\n        } else {\r\n            cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index);\r\n            index += 1;\r\n        }\r\n    }\r\n    return cloned_path;\r\n};\r\n\r\nRoundCornersModifier.prototype.processShapes = function(_isFirstFrame){\r\n    var shapePaths;\r\n    var i, len = this.shapes.length;\r\n    var j, jLen;\r\n    var rd = this.rd.v;\r\n\r\n    if(rd !== 0){\r\n        var shapeData, newPaths, localShapeCollection;\r\n        for(i=0;i<len;i+=1){\r\n            shapeData = this.shapes[i];\r\n            newPaths = shapeData.shape.paths;\r\n            localShapeCollection = shapeData.localShapeCollection;\r\n            if(!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)){\r\n                localShapeCollection.releaseShapes();\r\n                shapeData.shape._mdf = true;\r\n                shapePaths = shapeData.shape.paths.shapes;\r\n                jLen = shapeData.shape.paths._length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    localShapeCollection.addShape(this.processPath(shapePaths[j],rd));\r\n                }\r\n            }\r\n            shapeData.shape.paths = shapeData.localShapeCollection;\r\n        }\r\n\r\n    }\r\n    if(!this.dynamicProperties.length){\r\n        this._mdf = false;\r\n    }\r\n};\r\n\r\nShapeModifiers.registerModifier('rd',RoundCornersModifier);\r\nfunction RepeaterModifier(){}\r\nextendPrototype([ShapeModifier], RepeaterModifier);\r\n\r\nRepeaterModifier.prototype.initModifierProperties = function(elem,data){\r\n    this.getValue = this.processKeys;\r\n    this.c = PropertyFactory.getProp(elem,data.c,0,null,this);\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,null,this);\r\n    this.tr = TransformPropertyFactory.getTransformProperty(elem,data.tr,this);\r\n    this.so = PropertyFactory.getProp(elem,data.tr.so,0,0.01,this);\r\n    this.eo = PropertyFactory.getProp(elem,data.tr.eo,0,0.01,this);\r\n    this.data = data;\r\n    if(!this.dynamicProperties.length){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = !!this.dynamicProperties.length;\r\n    this.pMatrix = new Matrix();\r\n    this.rMatrix = new Matrix();\r\n    this.sMatrix = new Matrix();\r\n    this.tMatrix = new Matrix();\r\n    this.matrix = new Matrix();\r\n};\r\n\r\nRepeaterModifier.prototype.applyTransforms = function(pMatrix, rMatrix, sMatrix, transform, perc, inv){\r\n    var dir = inv ? -1 : 1;\r\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\r\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\r\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\r\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    rMatrix.rotate(-transform.r.v * dir * perc);\r\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\r\n    sMatrix.scale(inv ? 1/scaleX : scaleX, inv ? 1/scaleY : scaleY);\r\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\r\n};\r\n\r\nRepeaterModifier.prototype.init = function(elem, arr, pos, elemsData) {\r\n    this.elem = elem;\r\n    this.arr = arr;\r\n    this.pos = pos;\r\n    this.elemsData = elemsData;\r\n    this._currentCopies = 0;\r\n    this._elements = [];\r\n    this._groups = [];\r\n    this.frameId = -1;\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.initModifierProperties(elem,arr[pos]);\r\n    while(pos>0){\r\n        pos -= 1;\r\n        //this._elements.unshift(arr.splice(pos,1)[0]);\r\n        this._elements.unshift(arr[pos]);\r\n    }\r\n    if(this.dynamicProperties.length){\r\n        this.k = true;\r\n    }else{\r\n        this.getValue(true);\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.resetElements = function(elements){\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._processed = false;\r\n        if(elements[i].ty === 'gr'){\r\n            this.resetElements(elements[i].it);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.cloneElements = function(elements){\r\n    var len = elements.length;\r\n    var newElements = JSON.parse(JSON.stringify(elements));\r\n    this.resetElements(newElements);\r\n    return newElements;\r\n};\r\n\r\nRepeaterModifier.prototype.changeGroupRender = function(elements, renderFlag) {\r\n    var i, len = elements.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        elements[i]._render = renderFlag;\r\n        if(elements[i].ty === 'gr') {\r\n            this.changeGroupRender(elements[i].it, renderFlag);\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.processShapes = function(_isFirstFrame) {\r\n    var items, itemsTransform, i, dir, cont;\r\n    if(this._mdf || _isFirstFrame){\r\n        var copies = Math.ceil(this.c.v);\r\n        if(this._groups.length < copies){\r\n            while(this._groups.length < copies){\r\n                var group = {\r\n                    it:this.cloneElements(this._elements),\r\n                    ty:'gr'\r\n                };\r\n                group.it.push({\"a\":{\"a\":0,\"ix\":1,\"k\":[0,0]},\"nm\":\"Transform\",\"o\":{\"a\":0,\"ix\":7,\"k\":100},\"p\":{\"a\":0,\"ix\":2,\"k\":[0,0]},\"r\":{\"a\":1,\"ix\":6,\"k\":[{s:0,e:0,t:0},{s:0,e:0,t:1}]},\"s\":{\"a\":0,\"ix\":3,\"k\":[100,100]},\"sa\":{\"a\":0,\"ix\":5,\"k\":0},\"sk\":{\"a\":0,\"ix\":4,\"k\":0},\"ty\":\"tr\"});\r\n                \r\n                this.arr.splice(0,0,group);\r\n                this._groups.splice(0,0,group);\r\n                this._currentCopies += 1;\r\n            }\r\n            this.elem.reloadShapes();\r\n        }\r\n        cont = 0;\r\n        var renderFlag;\r\n        for(i = 0; i  <= this._groups.length - 1; i += 1){\r\n            renderFlag = cont < copies;\r\n            this._groups[i]._render = renderFlag;\r\n            this.changeGroupRender(this._groups[i].it, renderFlag);\r\n            cont += 1;\r\n        }\r\n        \r\n        this._currentCopies = copies;\r\n        ////\r\n\r\n        var offset = this.o.v;\r\n        var offsetModulo = offset%1;\r\n        var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\r\n        var tMat = this.tr.v.props;\r\n        var pProps = this.pMatrix.props;\r\n        var rProps = this.rMatrix.props;\r\n        var sProps = this.sMatrix.props;\r\n        this.pMatrix.reset();\r\n        this.rMatrix.reset();\r\n        this.sMatrix.reset();\r\n        this.tMatrix.reset();\r\n        this.matrix.reset();\r\n        var iteration = 0;\r\n\r\n        if(offset > 0) {\r\n            while(iteration<roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                iteration += 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\r\n                iteration += offsetModulo;\r\n            }\r\n        } else if(offset < 0) {\r\n            while(iteration>roundOffset){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\r\n                iteration -= 1;\r\n            }\r\n            if(offsetModulo){\r\n                this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, - offsetModulo, true);\r\n                iteration -= offsetModulo;\r\n            }\r\n        }\r\n        i = this.data.m === 1 ? 0 : this._currentCopies - 1;\r\n        dir = this.data.m === 1 ? 1 : -1;\r\n        cont = this._currentCopies;\r\n        var j, jLen;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            jLen = itemsTransform.length;\r\n            items[items.length - 1].transform.mProps._mdf = true;\r\n            items[items.length - 1].transform.op._mdf = true;\r\n            items[items.length - 1].transform.op.v = this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\r\n            if(iteration !== 0){\r\n                if((i !== 0 && dir === 1) || (i !== this._currentCopies - 1 && dir === -1)){\r\n                    this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\r\n                }\r\n                this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]);\r\n                this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]);\r\n                this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]);\r\n                \r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n                this.matrix.reset();\r\n            } else {\r\n                this.matrix.reset();\r\n                for(j=0;j<jLen;j+=1) {\r\n                    itemsTransform[j] = this.matrix.props[j];\r\n                }\r\n            }\r\n            iteration += 1;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    } else {\r\n        cont = this._currentCopies;\r\n        i = 0;\r\n        dir = 1;\r\n        while(cont){\r\n            items = this.elemsData[i].it;\r\n            itemsTransform = items[items.length - 1].transform.mProps.v.props;\r\n            items[items.length - 1].transform.mProps._mdf = false;\r\n            items[items.length - 1].transform.op._mdf = false;\r\n            cont -= 1;\r\n            i += dir;\r\n        }\r\n    }\r\n};\r\n\r\nRepeaterModifier.prototype.addShape = function(){};\r\n\r\nShapeModifiers.registerModifier('rp',RepeaterModifier);\r\nfunction ShapeCollection(){\r\n\tthis._length = 0;\r\n\tthis._maxLength = 4;\r\n\tthis.shapes = createSizedArray(this._maxLength);\r\n}\r\n\r\nShapeCollection.prototype.addShape = function(shapeData){\r\n\tif(this._length === this._maxLength){\r\n\t\tthis.shapes = this.shapes.concat(createSizedArray(this._maxLength));\r\n\t\tthis._maxLength *= 2;\r\n\t}\r\n\tthis.shapes[this._length] = shapeData;\r\n\tthis._length += 1;\r\n};\r\n\r\nShapeCollection.prototype.releaseShapes = function(){\r\n\tvar i;\r\n\tfor(i = 0; i < this._length; i += 1) {\r\n\t\tshape_pool.release(this.shapes[i]);\r\n\t}\r\n\tthis._length = 0;\r\n};\r\nfunction DashProperty(elem, data, renderer, container) {\r\n    this.elem = elem;\r\n    this.frameId = -1;\r\n    this.dataProps = createSizedArray(data.length);\r\n    this.renderer = renderer;\r\n    this.k = false;\r\n    this.dashStr = '';\r\n    this.dashArray = createTypedArray('float32',  data.length ? data.length - 1 : 0);\r\n    this.dashoffset = createTypedArray('float32',  1);\r\n    this.initDynamicPropertyContainer(container);\r\n    var i, len = data.length || 0, prop;\r\n    for(i = 0; i < len; i += 1) {\r\n        prop = PropertyFactory.getProp(elem,data[i].v,0, 0, this);\r\n        this.k = prop.k || this.k;\r\n        this.dataProps[i] = {n:data[i].n,p:prop};\r\n    }\r\n    if(!this.k){\r\n        this.getValue(true);\r\n    }\r\n    this._isAnimated = this.k;\r\n}\r\n\r\nDashProperty.prototype.getValue = function(forceRender) {\r\n    if(this.elem.globalData.frameId === this.frameId && !forceRender){\r\n        return;\r\n    }\r\n    this.frameId = this.elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n    this._mdf = this._mdf || forceRender;\r\n    if (this._mdf) {\r\n        var i = 0, len = this.dataProps.length;\r\n        if(this.renderer === 'svg') {\r\n            this.dashStr = '';\r\n        }\r\n        for(i=0;i<len;i+=1){\r\n            if(this.dataProps[i].n != 'o'){\r\n                if(this.renderer === 'svg') {\r\n                    this.dashStr += ' ' + this.dataProps[i].p.v;\r\n                }else{\r\n                    this.dashArray[i] = this.dataProps[i].p.v;\r\n                }\r\n            }else{\r\n                this.dashoffset[0] = this.dataProps[i].p.v;\r\n            }\r\n        }\r\n    }\r\n};\r\nextendPrototype([DynamicPropertyContainer], DashProperty);\r\nfunction GradientProperty(elem,data,container){\r\n    this.data = data;\r\n    this.c = createTypedArray('uint8c', data.p*4);\r\n    var cLength = data.k.k[0].s ? (data.k.k[0].s.length - data.p*4) : data.k.k.length - data.p*4;\r\n    this.o = createTypedArray('float32', cLength);\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    this._collapsable = this.checkCollapsable();\r\n    this._hasOpacity = cLength;\r\n    this.initDynamicPropertyContainer(container);\r\n    this.prop = PropertyFactory.getProp(elem,data.k,1,null,this);\r\n    this.k = this.prop.k;\r\n    this.getValue(true);\r\n}\r\n\r\nGradientProperty.prototype.comparePoints = function(values, points) {\r\n    var i = 0, len = this.o.length/2, diff;\r\n    while(i < len) {\r\n        diff = Math.abs(values[i*4] - values[points*4 + i*2]);\r\n        if(diff > 0.01){\r\n            return false;\r\n        }\r\n        i += 1;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.checkCollapsable = function() {\r\n    if (this.o.length/2 !== this.c.length/4) {\r\n        return false;\r\n    }\r\n    if (this.data.k.k[0].s) {\r\n        var i = 0, len = this.data.k.k.length;\r\n        while (i < len) {\r\n            if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\r\n                return false;\r\n            }\r\n            i += 1;\r\n        }\r\n    } else if(!this.comparePoints(this.data.k.k, this.data.p)) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nGradientProperty.prototype.getValue = function(forceRender){\r\n    this.prop.getValue();\r\n    this._mdf = false;\r\n    this._cmdf = false;\r\n    this._omdf = false;\r\n    if(this.prop._mdf || forceRender){\r\n        var i, len = this.data.p*4;\r\n        var mult, val;\r\n        for(i=0;i<len;i+=1){\r\n            mult = i%4 === 0 ? 100 : 255;\r\n            val = Math.round(this.prop.v[i]*mult);\r\n            if(this.c[i] !== val){\r\n                this.c[i] = val;\r\n                this._cmdf = !forceRender;\r\n            }\r\n        }\r\n        if(this.o.length){\r\n            len = this.prop.v.length;\r\n            for(i=this.data.p*4;i<len;i+=1){\r\n                mult = i%2 === 0 ? 100 : 1;\r\n                val = i%2 === 0 ?  Math.round(this.prop.v[i]*100):this.prop.v[i];\r\n                if(this.o[i-this.data.p*4] !== val){\r\n                    this.o[i-this.data.p*4] = val;\r\n                    this._omdf = !forceRender;\r\n                }\r\n            }\r\n        }\r\n        this._mdf = !forceRender;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], GradientProperty);\r\nvar buildShapeString = function(pathNodes, length, closed, mat) {\r\n\tif(length === 0) {\r\n            return '';\r\n        }\r\n        var _o = pathNodes.o;\r\n        var _i = pathNodes.i;\r\n        var _v = pathNodes.v;\r\n        var i, shapeString = \" M\" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n        for(i = 1; i < length; i += 1) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[i][0], _i[i][1]) + \" \" + mat.applyToPointStringified(_v[i][0], _v[i][1]);\r\n        }\r\n        if (closed && length) {\r\n            shapeString += \" C\" + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + \" \" + mat.applyToPointStringified(_i[0][0], _i[0][1]) + \" \" + mat.applyToPointStringified(_v[0][0], _v[0][1]);\r\n            shapeString += 'z';\r\n        }\r\n        return shapeString;\r\n};\r\nvar ImagePreloader = (function(){\r\n\r\n    var proxyImage = (function(){\r\n        var canvas = createTag('canvas');\r\n        canvas.width = 1;\r\n        canvas.height = 1;\r\n        var ctx = canvas.getContext('2d');\r\n        ctx.fillStyle = 'rgba(0,0,0,0)';\r\n        ctx.fillRect(0, 0, 1, 1);\r\n        return canvas;\r\n    }());\r\n\r\n    function imageLoaded(){\r\n        this.loadedAssets += 1;\r\n        if(this.loadedAssets === this.totalImages){\r\n            if(this.imagesLoadedCb) {\r\n                this.imagesLoadedCb(null);\r\n            }\r\n        }\r\n    }\r\n\r\n    function getAssetsPath(assetData, assetsPath, original_path) {\r\n        var path = '';\r\n        if (assetData.e) {\r\n            path = assetData.p;\r\n        } else if(assetsPath) {\r\n            var imagePath = assetData.p;\r\n            if (imagePath.indexOf('images/') !== -1) {\r\n                imagePath = imagePath.split('/')[1];\r\n            }\r\n            path = assetsPath + imagePath;\r\n        } else {\r\n            path = original_path;\r\n            path += assetData.u ? assetData.u : '';\r\n            path += assetData.p;\r\n        }\r\n        return path;\r\n    }\r\n\r\n    function createImageData(assetData) {\r\n        var path = getAssetsPath(assetData, this.assetsPath, this.path);\r\n        var img = createTag('img');\r\n        img.crossOrigin = 'anonymous';\r\n        img.addEventListener('load', this._imageLoaded.bind(this), false);\r\n        img.addEventListener('error', function() {\r\n            ob.img = proxyImage;\r\n            this._imageLoaded();\r\n        }.bind(this), false);\r\n        img.src = path;\r\n        var ob = {\r\n            img: img,\r\n            assetData: assetData\r\n        };\r\n        return ob;\r\n    }\r\n\r\n    function loadAssets(assets, cb){\r\n        this.imagesLoadedCb = cb;\r\n        var i, len = assets.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!assets[i].layers){\r\n                this.totalImages += 1;\r\n                this.images.push(this._createImageData(assets[i]));\r\n            }\r\n        }\r\n    }\r\n\r\n    function setPath(path){\r\n        this.path = path || '';\r\n    }\r\n\r\n    function setAssetsPath(path){\r\n        this.assetsPath = path || '';\r\n    }\r\n\r\n    function getImage(assetData) {\r\n        var i = 0, len = this.images.length;\r\n        while (i < len) {\r\n            if (this.images[i].assetData === assetData) {\r\n                return this.images[i].img;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function destroy() {\r\n        this.imagesLoadedCb = null;\r\n        this.images.length = 0;\r\n    }\r\n\r\n    function loaded() {\r\n        return this.totalImages === this.loadedAssets;\r\n    }\r\n\r\n    return function ImagePreloader(){\r\n        this.loadAssets = loadAssets;\r\n        this.setAssetsPath = setAssetsPath;\r\n        this.setPath = setPath;\r\n        this.loaded = loaded;\r\n        this.destroy = destroy;\r\n        this.getImage = getImage;\r\n        this._createImageData = createImageData;\r\n        this._imageLoaded = imageLoaded;\r\n        this.assetsPath = '';\r\n        this.path = '';\r\n        this.totalImages = 0;\r\n        this.loadedAssets = 0;\r\n        this.imagesLoadedCb = null;\r\n        this.images = [];\r\n    };\r\n}());\r\nvar featureSupport = (function(){\r\n\tvar ob = {\r\n\t\tmaskType: true\r\n\t};\r\n\tif (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\r\n\t   ob.maskType = false;\r\n\t}\r\n\treturn ob;\r\n}());\r\nvar filtersFactory = (function(){\r\n\tvar ob = {};\r\n\tob.createFilter = createFilter;\r\n\tob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\r\n\r\n\tfunction createFilter(filId){\r\n        \tvar fil = createNS('filter');\r\n        \tfil.setAttribute('id',filId);\r\n                fil.setAttribute('filterUnits','objectBoundingBox');\r\n                fil.setAttribute('x','0%');\r\n                fil.setAttribute('y','0%');\r\n                fil.setAttribute('width','100%');\r\n                fil.setAttribute('height','100%');\r\n                return fil;\r\n\t}\r\n\r\n\tfunction createAlphaToLuminanceFilter(){\r\n                var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type','matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n                feColorMatrix.setAttribute('values','0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\r\n                return feColorMatrix;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\r\nvar assetLoader = (function(){\r\n\r\n\tfunction formatResponse(xhr) {\r\n\t\tif(xhr.response && typeof xhr.response === 'object') {\r\n\t\t\treturn xhr.response;\r\n\t\t} else if(xhr.response && typeof xhr.response === 'string') {\r\n\t\t\treturn JSON.parse(xhr.response);\r\n\t\t} else if(xhr.responseText) {\r\n\t\t\treturn JSON.parse(xhr.responseText);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction loadAsset(path, callback, errorCallback) {\r\n\t\tvar response;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\txhr.open('GET', path, true);\r\n\t\t// set responseType after calling open or IE will break.\r\n\t\ttry {\r\n\t\t    // This crashes on Android WebView prior to KitKat\r\n\t\t    xhr.responseType = \"json\";\r\n\t\t} catch (err) {}\r\n\t    xhr.send();\r\n\t    xhr.onreadystatechange = function () {\r\n\t        if (xhr.readyState == 4) {\r\n\t            if(xhr.status == 200){\r\n\t            \tresponse = formatResponse(xhr);\r\n\t            \tcallback(response);\r\n\t            }else{\r\n\t                try{\r\n\t            \t\tresponse = formatResponse(xhr);\r\n\t            \t\tcallback(response);\r\n\t                }catch(err){\r\n\t                \tif(errorCallback) {\r\n\t                \t\terrorCallback(err);\r\n\t                \t}\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t}\r\n\treturn {\r\n\t\tload: loadAsset\r\n\t}\r\n}());\r\n\r\nfunction TextAnimatorProperty(textData, renderType, elem){\r\n    this._isFirstFrame = true;\r\n\tthis._hasMaskedPath = false;\r\n\tthis._frameId = -1;\r\n\tthis._textData = textData;\r\n\tthis._renderType = renderType;\r\n    this._elem = elem;\r\n\tthis._animatorsData = createSizedArray(this._textData.a.length);\r\n\tthis._pathData = {};\r\n\tthis._moreOptions = {\r\n\t\talignment: {}\r\n\t};\r\n\tthis.renderedLetters = [];\r\n    this.lettersChangedFlag = false;\r\n    this.initDynamicPropertyContainer(elem);\r\n\r\n}\r\n\r\nTextAnimatorProperty.prototype.searchProperties = function(){\r\n    var i, len = this._textData.a.length, animatorProps;\r\n    var getProp = PropertyFactory.getProp;\r\n    for(i=0;i<len;i+=1){\r\n        animatorProps = this._textData.a[i];\r\n        this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\r\n    }\r\n    if(this._textData.p && 'm' in this._textData.p){\r\n        this._pathData = {\r\n            f: getProp(this._elem,this._textData.p.f,0,0,this),\r\n            l: getProp(this._elem,this._textData.p.l,0,0,this),\r\n            r: this._textData.p.r,\r\n            m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\r\n        };\r\n        this._hasMaskedPath = true;\r\n    } else {\r\n        this._hasMaskedPath = false;\r\n    }\r\n    this._moreOptions.alignment = getProp(this._elem,this._textData.m.a,1,0,this);\r\n};\r\n\r\nTextAnimatorProperty.prototype.getMeasures = function(documentData, lettersChangedFlag){\r\n    this.lettersChangedFlag = lettersChangedFlag;\r\n    if(!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\r\n        return;\r\n    }\r\n    this._isFirstFrame = false;\r\n    var alignment = this._moreOptions.alignment.v;\r\n    var animators = this._animatorsData;\r\n    var textData = this._textData;\r\n    var matrixHelper = this.mHelper;\r\n    var renderType = this._renderType;\r\n    var renderedLettersCount = this.renderedLetters.length;\r\n    var data = this.data;\r\n    var xPos,yPos;\r\n    var i, len;\r\n    var letters = documentData.l, pathInfo, currentLength, currentPoint, segmentLength, flag, pointInd, segmentInd, prevPoint, points, segments, partialLength, totalLength, perc, tanAngle, mask;\r\n    if(this._hasMaskedPath) {\r\n        mask = this._pathData.m;\r\n        if(!this._pathData.n || this._pathData._mdf){\r\n            var paths = mask.v;\r\n            if(this._pathData.r){\r\n                paths = paths.reverse();\r\n            }\r\n            // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\r\n            pathInfo = {\r\n                tLength: 0,\r\n                segments: []\r\n            };\r\n            len = paths._length - 1;\r\n            var bezierData;\r\n            totalLength = 0;\r\n            for (i = 0; i < len; i += 1) {\r\n                bezierData = bez.buildBezierData(paths.v[i]\r\n                    , paths.v[i + 1]\r\n                    , [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]]\r\n                    , [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\r\n                pathInfo.tLength += bezierData.segmentLength;\r\n                pathInfo.segments.push(bezierData);\r\n                totalLength += bezierData.segmentLength;\r\n            }\r\n            i = len;\r\n            if (mask.v.c) {\r\n                bezierData = bez.buildBezierData(paths.v[i]\r\n                    , paths.v[0]\r\n                    , [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]]\r\n                    , [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\r\n                pathInfo.tLength += bezierData.segmentLength;\r\n                pathInfo.segments.push(bezierData);\r\n                totalLength += bezierData.segmentLength;\r\n            }\r\n            this._pathData.pi = pathInfo;\r\n        }\r\n        pathInfo = this._pathData.pi;\r\n\r\n        currentLength = this._pathData.f.v;\r\n        segmentInd = 0;\r\n        pointInd = 1;\r\n        segmentLength = 0;\r\n        flag = true;\r\n        segments = pathInfo.segments;\r\n        if (currentLength < 0 && mask.v.c) {\r\n            if (pathInfo.tLength < Math.abs(currentLength)) {\r\n                currentLength = -Math.abs(currentLength) % pathInfo.tLength;\r\n            }\r\n            segmentInd = segments.length - 1;\r\n            points = segments[segmentInd].points;\r\n            pointInd = points.length - 1;\r\n            while (currentLength < 0) {\r\n                currentLength += points[pointInd].partialLength;\r\n                pointInd -= 1;\r\n                if (pointInd < 0) {\r\n                    segmentInd -= 1;\r\n                    points = segments[segmentInd].points;\r\n                    pointInd = points.length - 1;\r\n                }\r\n            }\r\n\r\n        }\r\n        points = segments[segmentInd].points;\r\n        prevPoint = points[pointInd - 1];\r\n        currentPoint = points[pointInd];\r\n        partialLength = currentPoint.partialLength;\r\n    }\r\n\r\n\r\n    len = letters.length;\r\n    xPos = 0;\r\n    yPos = 0;\r\n    var yOff = documentData.finalSize * 1.2 * 0.714;\r\n    var firstLine = true;\r\n    var animatorProps, animatorSelector;\r\n    var j, jLen;\r\n    var letterValue;\r\n\r\n    jLen = animators.length;\r\n\r\n    var mult, ind = -1, offf, xPathPos, yPathPos;\r\n    var initPathPos = currentLength,initSegmentInd = segmentInd, initPointInd = pointInd, currentLine = -1;\r\n    var elemOpacity;\r\n    var sc,sw,fc,k;\r\n    var lineLength = 0;\r\n    var letterSw, letterSc, letterFc, letterM = '', letterP = this.defaultPropsArray, letterO;\r\n\r\n    //\r\n    if(documentData.j === 2 || documentData.j === 1) {\r\n        var animatorJustifyOffset = 0;\r\n        var animatorFirstCharOffset = 0;\r\n        var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\r\n        var lastIndex = 0;\r\n        var isNewLine = true;\r\n\r\n        for (i = 0; i < len; i += 1) {\r\n            if (letters[i].n) {\r\n                if(animatorJustifyOffset) {\r\n                    animatorJustifyOffset += animatorFirstCharOffset;\r\n                }\r\n                while (lastIndex < i) {\r\n                    letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n                    lastIndex += 1;\r\n                }\r\n                animatorJustifyOffset = 0;\r\n                isNewLine = true;\r\n            } else {\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.t.propType) {\r\n                        if (isNewLine && documentData.j === 2) {\r\n                            animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\r\n                        }\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\r\n                        if (mult.length) {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult[0] * justifyOffsetMult;\r\n                        } else {\r\n                            animatorJustifyOffset += animatorProps.t.v*mult * justifyOffsetMult;\r\n                        }\r\n                    }\r\n                }\r\n                isNewLine = false;\r\n            }\r\n        }\r\n        if(animatorJustifyOffset) {\r\n            animatorJustifyOffset += animatorFirstCharOffset;\r\n        }\r\n        while(lastIndex < i) {\r\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\r\n            lastIndex += 1;\r\n        }\r\n    }\r\n    //\r\n\r\n    for( i = 0; i < len; i += 1) {\r\n\r\n        matrixHelper.reset();\r\n        elemOpacity = 1;\r\n        if(letters[i].n) {\r\n            xPos = 0;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            currentLength = initPathPos ;\r\n            firstLine = false;\r\n            lineLength = 0;\r\n            if(this._hasMaskedPath) {\r\n                segmentInd = initSegmentInd;\r\n                pointInd = initPointInd;\r\n                points = segments[segmentInd].points;\r\n                prevPoint = points[pointInd - 1];\r\n                currentPoint = points[pointInd];\r\n                partialLength = currentPoint.partialLength;\r\n                segmentLength = 0;\r\n            }\r\n            letterO = letterSw = letterFc = letterM = '';\r\n            letterP = this.defaultPropsArray;\r\n        }else{\r\n            if(this._hasMaskedPath) {\r\n                if(currentLine !== letters[i].line){\r\n                    switch(documentData.j){\r\n                        case 1:\r\n                            currentLength += totalLength - documentData.lineWidths[letters[i].line];\r\n                            break;\r\n                        case 2:\r\n                            currentLength += (totalLength - documentData.lineWidths[letters[i].line])/2;\r\n                            break;\r\n                    }\r\n                    currentLine = letters[i].line;\r\n                }\r\n                if (ind !== letters[i].ind) {\r\n                    if (letters[ind]) {\r\n                        currentLength += letters[ind].extra;\r\n                    }\r\n                    currentLength += letters[i].an / 2;\r\n                    ind = letters[i].ind;\r\n                }\r\n                currentLength += alignment[0] * letters[i].an / 200;\r\n                var animatorOffset = 0;\r\n                for (j = 0; j < jLen; j += 1) {\r\n                    animatorProps = animators[j].a;\r\n                    if (animatorProps.p.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.p.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.p.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                    if (animatorProps.a.propType) {\r\n                        animatorSelector = animators[j].s;\r\n                        mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                        if(mult.length){\r\n                            animatorOffset += animatorProps.a.v[0] * mult[0];\r\n                        } else{\r\n                            animatorOffset += animatorProps.a.v[0] * mult;\r\n                        }\r\n\r\n                    }\r\n                }\r\n                flag = true;\r\n                while (flag) {\r\n                    if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\r\n                        perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\r\n                        xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\r\n                        yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\r\n                        matrixHelper.translate(-alignment[0]*letters[i].an/200, -(alignment[1] * yOff / 100));\r\n                        flag = false;\r\n                    } else if (points) {\r\n                        segmentLength += currentPoint.partialLength;\r\n                        pointInd += 1;\r\n                        if (pointInd >= points.length) {\r\n                            pointInd = 0;\r\n                            segmentInd += 1;\r\n                            if (!segments[segmentInd]) {\r\n                                if (mask.v.c) {\r\n                                    pointInd = 0;\r\n                                    segmentInd = 0;\r\n                                    points = segments[segmentInd].points;\r\n                                } else {\r\n                                    segmentLength -= currentPoint.partialLength;\r\n                                    points = null;\r\n                                }\r\n                            } else {\r\n                                points = segments[segmentInd].points;\r\n                            }\r\n                        }\r\n                        if (points) {\r\n                            prevPoint = currentPoint;\r\n                            currentPoint = points[pointInd];\r\n                            partialLength = currentPoint.partialLength;\r\n                        }\r\n                    }\r\n                }\r\n                offf = letters[i].an / 2 - letters[i].add;\r\n                matrixHelper.translate(-offf, 0, 0);\r\n            } else {\r\n                offf = letters[i].an/2 - letters[i].add;\r\n                matrixHelper.translate(-offf,0,0);\r\n\r\n                // Grouping alignment\r\n                matrixHelper.translate(-alignment[0]*letters[i].an/200, -alignment[1]*yOff/100, 0);\r\n            }\r\n\r\n            lineLength += letters[i].l/2;\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.t.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    //This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\r\n                    if(xPos !== 0 || documentData.j !== 0) {\r\n                        if(this._hasMaskedPath) {\r\n                            if(mult.length) {\r\n                                currentLength += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                currentLength += animatorProps.t.v*mult;\r\n                            }\r\n                        }else{\r\n                            if(mult.length) {\r\n                                xPos += animatorProps.t.v*mult[0];\r\n                            } else {\r\n                                xPos += animatorProps.t.v*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            lineLength += letters[i].l/2;\r\n            if(documentData.strokeWidthAnim) {\r\n                sw = documentData.sw || 0;\r\n            }\r\n            if(documentData.strokeColorAnim) {\r\n                if(documentData.sc){\r\n                    sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\r\n                }else{\r\n                    sc = [0,0,0];\r\n                }\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc) {\r\n                fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.a.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n\r\n                    if(mult.length){\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult[0], -animatorProps.a.v[1]*mult[1], animatorProps.a.v[2]*mult[2]);\r\n                    } else {\r\n                        matrixHelper.translate(-animatorProps.a.v[0]*mult, -animatorProps.a.v[1]*mult, animatorProps.a.v[2]*mult);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n                if (animatorProps.s.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(mult.length){\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult[0]),1+((animatorProps.s.v[1]-1)*mult[1]),1);\r\n                    } else {\r\n                        matrixHelper.scale(1+((animatorProps.s.v[0]-1)*mult),1+((animatorProps.s.v[1]-1)*mult),1);\r\n                    }\r\n                }\r\n            }\r\n            for(j=0;j<jLen;j+=1) {\r\n                animatorProps = animators[j].a;\r\n                animatorSelector = animators[j].s;\r\n                mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                if (animatorProps.sk.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\r\n                    } else {\r\n                        matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.r.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\r\n                    } else {\r\n                        matrixHelper.rotateZ(-animatorProps.r.v * mult);\r\n                    }\r\n                }\r\n                if (animatorProps.ry.propType) {\r\n\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult[1]);\r\n                    }else{\r\n                        matrixHelper.rotateY(animatorProps.ry.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.rx.propType) {\r\n                    if(mult.length) {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult[0]);\r\n                    } else {\r\n                        matrixHelper.rotateX(animatorProps.rx.v*mult);\r\n                    }\r\n                }\r\n                if (animatorProps.o.propType) {\r\n                    if(mult.length) {\r\n                        elemOpacity += ((animatorProps.o.v)*mult[0] - elemOpacity)*mult[0];\r\n                    } else {\r\n                        elemOpacity += ((animatorProps.o.v)*mult - elemOpacity)*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\r\n                    if(mult.length) {\r\n                        sw += animatorProps.sw.v*mult[0];\r\n                    } else {\r\n                        sw += animatorProps.sw.v*mult;\r\n                    }\r\n                }\r\n                if (documentData.strokeColorAnim && animatorProps.sc.propType) {\r\n                    for(k=0;k<3;k+=1){\r\n                        if(mult.length) {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult[0];\r\n                        } else {\r\n                            sc[k] = sc[k] + (animatorProps.sc.v[k] - sc[k])*mult;\r\n                        }\r\n                    }\r\n                }\r\n                if (documentData.fillColorAnim && documentData.fc) {\r\n                    if(animatorProps.fc.propType){\r\n                        for(k=0;k<3;k+=1){\r\n                            if(mult.length) {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult[0];\r\n                            } else {\r\n                                fc[k] = fc[k] + (animatorProps.fc.v[k] - fc[k])*mult;\r\n                            }\r\n                        }\r\n                    }\r\n                    if(animatorProps.fh.propType){\r\n                        if(mult.length) {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult[0]);\r\n                        } else {\r\n                            fc = addHueToRGB(fc,animatorProps.fh.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fs.propType){\r\n                        if(mult.length) {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult[0]);\r\n                        } else {\r\n                            fc = addSaturationToRGB(fc,animatorProps.fs.v*mult);\r\n                        }\r\n                    }\r\n                    if(animatorProps.fb.propType){\r\n                        if(mult.length) {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult[0]);\r\n                        } else {\r\n                            fc = addBrightnessToRGB(fc,animatorProps.fb.v*mult);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            for(j=0;j<jLen;j+=1){\r\n                animatorProps = animators[j].a;\r\n\r\n                if (animatorProps.p.propType) {\r\n                    animatorSelector = animators[j].s;\r\n                    mult = animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);\r\n                    if(this._hasMaskedPath) {\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\r\n                        } else {\r\n                            matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        }\r\n                    }else{\r\n                        if(mult.length) {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\r\n                        } else {\r\n                            matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\r\n                        \r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if(documentData.strokeWidthAnim){\r\n                letterSw = sw < 0 ? 0 : sw;\r\n            }\r\n            if(documentData.strokeColorAnim){\r\n                letterSc = 'rgb('+Math.round(sc[0]*255)+','+Math.round(sc[1]*255)+','+Math.round(sc[2]*255)+')';\r\n            }\r\n            if(documentData.fillColorAnim && documentData.fc){\r\n                letterFc = 'rgb('+Math.round(fc[0]*255)+','+Math.round(fc[1]*255)+','+Math.round(fc[2]*255)+')';\r\n            }\r\n\r\n            if(this._hasMaskedPath) {\r\n                matrixHelper.translate(0,-documentData.ls);\r\n\r\n                matrixHelper.translate(0, alignment[1]*yOff/100 + yPos,0);\r\n                if (textData.p.p) {\r\n                    tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\r\n                    var rot = Math.atan(tanAngle) * 180 / Math.PI;\r\n                    if (currentPoint.point[0] < prevPoint.point[0]) {\r\n                        rot += 180;\r\n                    }\r\n                    matrixHelper.rotate(-rot * Math.PI / 180);\r\n                }\r\n                matrixHelper.translate(xPathPos, yPathPos, 0);\r\n                currentLength -= alignment[0]*letters[i].an/200;\r\n                if(letters[i+1] && ind !== letters[i+1].ind){\r\n                    currentLength += letters[i].an / 2;\r\n                    currentLength += documentData.tr/1000*documentData.finalSize;\r\n                }\r\n            }else{\r\n\r\n                matrixHelper.translate(xPos,yPos,0);\r\n\r\n                if(documentData.ps){\r\n                    //matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\r\n                    matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n                }\r\n                switch(documentData.j){\r\n                    case 1:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]),0,0);\r\n                        break;\r\n                    case 2:\r\n                        matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line])/2,0,0);\r\n                        break;\r\n                }\r\n                matrixHelper.translate(0,-documentData.ls);\r\n                matrixHelper.translate(offf,0,0);\r\n                matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0);\r\n                xPos += letters[i].l + documentData.tr/1000*documentData.finalSize;\r\n            }\r\n            if(renderType === 'html'){\r\n                letterM = matrixHelper.toCSS();\r\n            }else if(renderType === 'svg'){\r\n                letterM = matrixHelper.to2dCSS();\r\n            }else{\r\n                letterP = [matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]];\r\n            }\r\n            letterO = elemOpacity;\r\n        }\r\n\r\n        if(renderedLettersCount <= i) {\r\n            letterValue = new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP);\r\n            this.renderedLetters.push(letterValue);\r\n            renderedLettersCount += 1;\r\n            this.lettersChangedFlag = true;\r\n        } else {\r\n            letterValue = this.renderedLetters[i];\r\n            this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\r\n        }\r\n    }\r\n};\r\n\r\nTextAnimatorProperty.prototype.getValue = function(){\r\n\tif(this._elem.globalData.frameId === this._frameId){\r\n        return;\r\n    }\r\n    this._frameId = this._elem.globalData.frameId;\r\n    this.iterateDynamicProperties();\r\n};\r\n\r\nTextAnimatorProperty.prototype.mHelper = new Matrix();\r\nTextAnimatorProperty.prototype.defaultPropsArray = [];\r\nextendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\r\nfunction TextAnimatorDataProperty(elem, animatorProps, container) {\r\n\tvar defaultData = {propType:false};\r\n\tvar getProp = PropertyFactory.getProp;\r\n\tvar textAnimator_animatables = animatorProps.a;\r\n\tthis.a = {\r\n\t\tr: textAnimator_animatables.r ? getProp(elem, textAnimator_animatables.r, 0, degToRads, container) : defaultData,\r\n\t\trx: textAnimator_animatables.rx ? getProp(elem, textAnimator_animatables.rx, 0, degToRads, container) : defaultData,\r\n\t\try: textAnimator_animatables.ry ? getProp(elem, textAnimator_animatables.ry, 0, degToRads, container) : defaultData,\r\n\t\tsk: textAnimator_animatables.sk ? getProp(elem, textAnimator_animatables.sk, 0, degToRads, container) : defaultData,\r\n\t\tsa: textAnimator_animatables.sa ? getProp(elem, textAnimator_animatables.sa, 0, degToRads, container) : defaultData,\r\n\t\ts: textAnimator_animatables.s ? getProp(elem, textAnimator_animatables.s, 1, 0.01, container) : defaultData,\r\n\t\ta: textAnimator_animatables.a ? getProp(elem, textAnimator_animatables.a, 1, 0, container) : defaultData,\r\n\t\to: textAnimator_animatables.o ? getProp(elem, textAnimator_animatables.o, 0, 0.01, container) : defaultData,\r\n\t\tp: textAnimator_animatables.p ? getProp(elem,textAnimator_animatables.p, 1, 0, container) : defaultData,\r\n\t\tsw: textAnimator_animatables.sw ? getProp(elem, textAnimator_animatables.sw, 0, 0, container) : defaultData,\r\n\t\tsc: textAnimator_animatables.sc ? getProp(elem, textAnimator_animatables.sc, 1, 0, container) : defaultData,\r\n\t\tfc: textAnimator_animatables.fc ? getProp(elem, textAnimator_animatables.fc, 1, 0, container) : defaultData,\r\n\t\tfh: textAnimator_animatables.fh ? getProp(elem, textAnimator_animatables.fh, 0, 0, container) : defaultData,\r\n\t\tfs: textAnimator_animatables.fs ? getProp(elem, textAnimator_animatables.fs, 0, 0.01, container) : defaultData,\r\n\t\tfb: textAnimator_animatables.fb ? getProp(elem, textAnimator_animatables.fb, 0, 0.01, container) : defaultData,\r\n\t\tt: textAnimator_animatables.t ? getProp(elem, textAnimator_animatables.t, 0, 0, container) : defaultData\r\n\t};\r\n\r\n\tthis.s = TextSelectorProp.getTextSelectorProp(elem,animatorProps.s, container);\r\n    this.s.t = animatorProps.s.t;\r\n}\r\nfunction LetterProps(o, sw, sc, fc, m, p){\r\n    this.o = o;\r\n    this.sw = sw;\r\n    this.sc = sc;\r\n    this.fc = fc;\r\n    this.m = m;\r\n    this.p = p;\r\n    this._mdf = {\r\n    \to: true,\r\n    \tsw: !!sw,\r\n    \tsc: !!sc,\r\n    \tfc: !!fc,\r\n    \tm: true,\r\n    \tp: true\r\n    };\r\n}\r\n\r\nLetterProps.prototype.update = function(o, sw, sc, fc, m, p) {\r\n\tthis._mdf.o = false;\r\n\tthis._mdf.sw = false;\r\n\tthis._mdf.sc = false;\r\n\tthis._mdf.fc = false;\r\n\tthis._mdf.m = false;\r\n\tthis._mdf.p = false;\r\n\tvar updated = false;\r\n\r\n\tif(this.o !== o) {\r\n\t\tthis.o = o;\r\n\t\tthis._mdf.o = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sw !== sw) {\r\n\t\tthis.sw = sw;\r\n\t\tthis._mdf.sw = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.sc !== sc) {\r\n\t\tthis.sc = sc;\r\n\t\tthis._mdf.sc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.fc !== fc) {\r\n\t\tthis.fc = fc;\r\n\t\tthis._mdf.fc = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(this.m !== m) {\r\n\t\tthis.m = m;\r\n\t\tthis._mdf.m = true;\r\n\t\tupdated = true;\r\n\t}\r\n\tif(p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\r\n\t\tthis.p = p;\r\n\t\tthis._mdf.p = true;\r\n\t\tupdated = true;\r\n\t}\r\n\treturn updated;\r\n};\r\nfunction TextProperty(elem, data){\r\n\tthis._frameId = initialDefaultFrame;\r\n\tthis.pv = '';\r\n\tthis.v = '';\r\n\tthis.kf = false;\r\n\tthis._isFirstFrame = true;\r\n\tthis._mdf = false;\r\n    this.data = data;\r\n\tthis.elem = elem;\r\n    this.comp = this.elem.comp;\r\n\tthis.keysIndex = 0;\r\n    this.canResize = false;\r\n    this.minimumFontSize = 1;\r\n    this.effectsSequence = [];\r\n\tthis.currentData = {\r\n\t\tascent: 0,\r\n        boxWidth: this.defaultBoxWidth,\r\n        f: '',\r\n        fStyle: '',\r\n        fWeight: '',\r\n        fc: '',\r\n        j: '',\r\n        justifyOffset: '',\r\n        l: [],\r\n        lh: 0,\r\n        lineWidths: [],\r\n        ls: '',\r\n        of: '',\r\n        s: '',\r\n        sc: '',\r\n        sw: 0,\r\n        t: 0,\r\n        tr: 0,\r\n        sz:0,\r\n        ps:null,\r\n        fillColorAnim: false,\r\n        strokeColorAnim: false,\r\n        strokeWidthAnim: false,\r\n        yOffset: 0,\r\n        finalSize:0,\r\n        finalText:[],\r\n        finalLineHeight: 0,\r\n        __complete: false\r\n\r\n\t};\r\n    this.copyData(this.currentData, this.data.d.k[0].s);\r\n\r\n    if(!this.searchProperty()) {\r\n        this.completeTextData(this.currentData);\r\n    }\r\n}\r\n\r\nTextProperty.prototype.defaultBoxWidth = [0,0];\r\n\r\nTextProperty.prototype.copyData = function(obj, data) {\r\n    for(var s in data) {\r\n        if(data.hasOwnProperty(s)) {\r\n            obj[s] = data[s];\r\n        }\r\n    }\r\n    return obj;\r\n};\r\n\r\nTextProperty.prototype.setCurrentData = function(data){\r\n    if(!data.__complete) {\r\n        this.completeTextData(data);\r\n    }\r\n    this.currentData = data;\r\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\r\n    this._mdf = true;\r\n};\r\n\r\nTextProperty.prototype.searchProperty = function() {\r\n    return this.searchKeyframes();\r\n};\r\n\r\nTextProperty.prototype.searchKeyframes = function() {\r\n    this.kf = this.data.d.k.length > 1;\r\n    if(this.kf) {\r\n        this.addEffect(this.getKeyframeValue.bind(this));\r\n    }\r\n    return this.kf;\r\n};\r\n\r\nTextProperty.prototype.addEffect = function(effectFunction) {\r\n\tthis.effectsSequence.push(effectFunction);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.getValue = function(_finalValue) {\r\n    if((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\r\n        return;\r\n    }\r\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\r\n    var currentValue = this.currentData;\r\n    var currentIndex = this.keysIndex;\r\n    if(this.lock) {\r\n        this.setCurrentData(this.currentData);\r\n        return;\r\n    }\r\n    this.lock = true;\r\n    this._mdf = false;\r\n    var i, len = this.effectsSequence.length;\r\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\r\n    for(i = 0; i < len; i += 1) {\r\n        //Checking if index changed to prevent creating a new object every time the expression updates.\r\n        if(currentIndex !== this.keysIndex) {\r\n            finalValue = this.effectsSequence[i](finalValue, finalValue.t);\r\n        } else {\r\n            finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\r\n        }\r\n    }\r\n    if(currentValue !== finalValue) {\r\n        this.setCurrentData(finalValue);\r\n    }\r\n    this.pv = this.v = this.currentData;\r\n    this.lock = false;\r\n    this.frameId = this.elem.globalData.frameId;\r\n};\r\n\r\nTextProperty.prototype.getKeyframeValue = function() {\r\n    var textKeys = this.data.d.k, textDocumentData;\r\n    var frameNum = this.elem.comp.renderedFrame;\r\n    var i = 0, len = textKeys.length;\r\n    while(i <= len - 1) {\r\n        textDocumentData = textKeys[i].s;\r\n        if(i === len - 1 || textKeys[i+1].t > frameNum){\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    if(this.keysIndex !== i) {\r\n        this.keysIndex = i;\r\n    }\r\n    return this.data.d.k[this.keysIndex].s;\r\n};\r\n\r\nTextProperty.prototype.buildFinalText = function(text) {\r\n    var combinedCharacters = FontManager.getCombinedCharacterCodes();\r\n    var charactersArray = [];\r\n    var i = 0, len = text.length;\r\n    var charCode;\r\n    while (i < len) {\r\n        charCode = text.charCodeAt(i);\r\n        if (combinedCharacters.indexOf(charCode) !== -1) {\r\n            charactersArray[charactersArray.length - 1] += text.charAt(i);\r\n        } else {\r\n            if (charCode >= 0xD800 && charCode <= 0xDBFF) {\r\n                charCode = text.charCodeAt(i + 1);\r\n                if (charCode >= 0xDC00 && charCode <= 0xDFFF) {\r\n                    charactersArray.push(text.substr(i, 2));\r\n                    ++i;\r\n                } else {\r\n                    charactersArray.push(text.charAt(i));\r\n                }\r\n            } else {\r\n                charactersArray.push(text.charAt(i));\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n    return charactersArray;\r\n};\r\n\r\nTextProperty.prototype.completeTextData = function(documentData) {\r\n    documentData.__complete = true;\r\n    var fontManager = this.elem.globalData.fontManager;\r\n    var data = this.data;\r\n    var letters = [];\r\n    var i, len;\r\n    var newLineFlag, index = 0, val;\r\n    var anchorGrouping = data.m.g;\r\n    var currentSize = 0, currentPos = 0, currentLine = 0, lineWidths = [];\r\n    var lineWidth = 0;\r\n    var maxLineWidth = 0;\r\n    var j, jLen;\r\n    var fontData = fontManager.getFontByName(documentData.f);\r\n    var charData, cLength = 0;\r\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\r\n\r\n    var fWeight = 'normal', fStyle = 'normal';\r\n    len = styles.length;\r\n    var styleName;\r\n    for(i=0;i<len;i+=1){\r\n        styleName = styles[i].toLowerCase();\r\n        switch(styleName) {\r\n            case 'italic':\r\n            fStyle = 'italic';\r\n            break;\r\n            case 'bold':\r\n            fWeight = '700';\r\n            break;\r\n            case 'black':\r\n            fWeight = '900';\r\n            break;\r\n            case 'medium':\r\n            fWeight = '500';\r\n            break;\r\n            case 'regular':\r\n            case 'normal':\r\n            fWeight = '400';\r\n            break;\r\n            case 'light':\r\n            case 'thin':\r\n            fWeight = '200';\r\n            break;\r\n        }\r\n    }\r\n    documentData.fWeight = fontData.fWeight || fWeight;\r\n    documentData.fStyle = fStyle;\r\n    documentData.finalSize = documentData.s;\r\n    documentData.finalText = this.buildFinalText(documentData.t);\r\n    len = documentData.finalText.length;\r\n    documentData.finalLineHeight = documentData.lh;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    var charCode;\r\n    if(documentData.sz){\r\n        var flag = true;\r\n        var boxWidth = documentData.sz[0];\r\n        var boxHeight = documentData.sz[1];\r\n        var currentHeight, finalText;\r\n        while(flag) {\r\n            finalText = this.buildFinalText(documentData.t);\r\n            currentHeight = 0;\r\n            lineWidth = 0;\r\n            len = finalText.length;\r\n            trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n            var lastSpaceIndex = -1;\r\n            for(i=0;i<len;i+=1){\r\n                charCode = finalText[i].charCodeAt(0);\r\n                newLineFlag = false;\r\n                if(finalText[i] === ' '){\r\n                    lastSpaceIndex = i;\r\n                }else if(charCode === 13 || charCode === 3){\r\n                    lineWidth = 0;\r\n                    newLineFlag = true;\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                }\r\n                if(fontManager.chars){\r\n                    charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\r\n                    cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n                }else{\r\n                    //tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\r\n                    cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\r\n                }\r\n                if(lineWidth + cLength > boxWidth && finalText[i] !== ' '){\r\n                    if(lastSpaceIndex === -1){\r\n                        len += 1;\r\n                    } else {\r\n                        i = lastSpaceIndex;\r\n                    }\r\n                    currentHeight += documentData.finalLineHeight || documentData.finalSize*1.2;\r\n                    finalText.splice(i, lastSpaceIndex === i ? 1 : 0,\"\\r\");\r\n                    //finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\r\n                    lastSpaceIndex = -1;\r\n                    lineWidth = 0;\r\n                }else {\r\n                    lineWidth += cLength;\r\n                    lineWidth += trackingOffset;\r\n                }\r\n            }\r\n            currentHeight += fontData.ascent*documentData.finalSize/100;\r\n            if(this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\r\n                documentData.finalSize -= 1;\r\n                documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\r\n            } else {\r\n                documentData.finalText = finalText;\r\n                len = documentData.finalText.length;\r\n                flag = false;\r\n            }\r\n        }\r\n\r\n    }\r\n    lineWidth = - trackingOffset;\r\n    cLength = 0;\r\n    var uncollapsedSpaces = 0;\r\n    var currentChar;\r\n    for (i = 0;i < len ;i += 1) {\r\n        newLineFlag = false;\r\n        currentChar = documentData.finalText[i];\r\n        charCode = currentChar.charCodeAt(0);\r\n        if (currentChar === ' '){\r\n            val = '\\u00A0';\r\n        } else if (charCode === 13 || charCode === 3) {\r\n            uncollapsedSpaces = 0;\r\n            lineWidths.push(lineWidth);\r\n            maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n            lineWidth = - 2 * trackingOffset;\r\n            val = '';\r\n            newLineFlag = true;\r\n            currentLine += 1;\r\n        }else{\r\n            val = documentData.finalText[i];\r\n        }\r\n        if(fontManager.chars){\r\n            charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\r\n            cLength = newLineFlag ? 0 : charData.w*documentData.finalSize/100;\r\n        }else{\r\n            //var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n            //tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\r\n            cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\r\n        }\r\n\r\n        //\r\n        if(currentChar === ' '){\r\n            uncollapsedSpaces += cLength + trackingOffset;\r\n        } else {\r\n            lineWidth += cLength + trackingOffset + uncollapsedSpaces;\r\n            uncollapsedSpaces = 0;\r\n        }\r\n        letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag, anIndexes:[], val: val, line: currentLine, animatorJustifyOffset: 0});\r\n        if(anchorGrouping == 2){\r\n            currentSize += cLength;\r\n            if(val === '' || val === '\\u00A0' || i === len - 1){\r\n                if(val === '' || val === '\\u00A0'){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                index += 1;\r\n                currentSize = 0;\r\n            }\r\n        }else if(anchorGrouping == 3){\r\n            currentSize += cLength;\r\n            if(val === '' || i === len - 1){\r\n                if(val === ''){\r\n                    currentSize -= cLength;\r\n                }\r\n                while(currentPos<=i){\r\n                    letters[currentPos].an = currentSize;\r\n                    letters[currentPos].ind = index;\r\n                    letters[currentPos].extra = cLength;\r\n                    currentPos += 1;\r\n                }\r\n                currentSize = 0;\r\n                index += 1;\r\n            }\r\n        }else{\r\n            letters[index].ind = index;\r\n            letters[index].extra = 0;\r\n            index += 1;\r\n        }\r\n    }\r\n    documentData.l = letters;\r\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\r\n    lineWidths.push(lineWidth);\r\n    if(documentData.sz){\r\n        documentData.boxWidth = documentData.sz[0];\r\n        documentData.justifyOffset = 0;\r\n    }else{\r\n        documentData.boxWidth = maxLineWidth;\r\n        switch(documentData.j){\r\n            case 1:\r\n                documentData.justifyOffset = - documentData.boxWidth;\r\n                break;\r\n            case 2:\r\n                documentData.justifyOffset = - documentData.boxWidth/2;\r\n                break;\r\n            default:\r\n                documentData.justifyOffset = 0;\r\n        }\r\n    }\r\n    documentData.lineWidths = lineWidths;\r\n\r\n    var animators = data.a, animatorData, letterData;\r\n    jLen = animators.length;\r\n    var based, ind, indexes = [];\r\n    for(j=0;j<jLen;j+=1){\r\n        animatorData = animators[j];\r\n        if(animatorData.a.sc){\r\n            documentData.strokeColorAnim = true;\r\n        }\r\n        if(animatorData.a.sw){\r\n            documentData.strokeWidthAnim = true;\r\n        }\r\n        if(animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb){\r\n            documentData.fillColorAnim = true;\r\n        }\r\n        ind = 0;\r\n        based = animatorData.s.b;\r\n        for(i=0;i<len;i+=1){\r\n            letterData = letters[i];\r\n            letterData.anIndexes[j] = ind;\r\n            if((based == 1 && letterData.val !== '') || (based == 2 && letterData.val !== '' && letterData.val !== '\\u00A0') || (based == 3 && (letterData.n || letterData.val == '\\u00A0' || i == len - 1)) || (based == 4 && (letterData.n || i == len - 1))){\r\n                if(animatorData.s.rn === 1){\r\n                    indexes.push(ind);\r\n                }\r\n                ind += 1;\r\n            }\r\n        }\r\n        data.a[j].s.totalChars = ind;\r\n        var currentInd = -1, newInd;\r\n        if(animatorData.s.rn === 1){\r\n            for(i = 0; i < len; i += 1){\r\n                letterData = letters[i];\r\n                if(currentInd != letterData.anIndexes[j]){\r\n                    currentInd = letterData.anIndexes[j];\r\n                    newInd = indexes.splice(Math.floor(Math.random()*indexes.length),1)[0];\r\n                }\r\n                letterData.anIndexes[j] = newInd;\r\n            }\r\n        }\r\n    }\r\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize*1.2;\r\n    documentData.ls = documentData.ls || 0;\r\n    documentData.ascent = fontData.ascent*documentData.finalSize/100;\r\n};\r\n\r\nTextProperty.prototype.updateDocumentData = function(newData, index) {\r\n\tindex = index === undefined ? this.keysIndex : index;\r\n    var dData = this.copyData({}, this.data.d.k[index].s);\r\n    dData = this.copyData(dData, newData);\r\n    this.data.d.k[index].s = dData;\r\n    this.recalculate(index);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.recalculate = function(index) {\r\n    var dData = this.data.d.k[index].s;\r\n    dData.__complete = false;\r\n    this.keysIndex = 0;\r\n    this._isFirstFrame = true;\r\n    this.getValue(dData);\r\n};\r\n\r\nTextProperty.prototype.canResizeFont = function(_canResize) {\r\n    this.canResize = _canResize;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nTextProperty.prototype.setMinimumFontSize = function(_fontValue) {\r\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\r\n    this.recalculate(this.keysIndex);\r\n    this.elem.addDynamicProperty(this);\r\n};\r\n\r\nvar TextSelectorProp = (function(){\r\n    var max = Math.max;\r\n    var min = Math.min;\r\n    var floor = Math.floor;\r\n\r\n    function TextSelectorProp(elem,data){\r\n        this._currentTextLength = -1;\r\n        this.k = false;\r\n        this.data = data;\r\n        this.elem = elem;\r\n        this.comp = elem.comp;\r\n        this.finalS = 0;\r\n        this.finalE = 0;\r\n        this.initDynamicPropertyContainer(elem);\r\n        this.s = PropertyFactory.getProp(elem,data.s || {k:0},0,0,this);\r\n        if('e' in data){\r\n            this.e = PropertyFactory.getProp(elem,data.e,0,0,this);\r\n        }else{\r\n            this.e = {v:100};\r\n        }\r\n        this.o = PropertyFactory.getProp(elem,data.o || {k:0},0,0,this);\r\n        this.xe = PropertyFactory.getProp(elem,data.xe || {k:0},0,0,this);\r\n        this.ne = PropertyFactory.getProp(elem,data.ne || {k:0},0,0,this);\r\n        this.a = PropertyFactory.getProp(elem,data.a,0,0.01,this);\r\n        if(!this.dynamicProperties.length){\r\n            this.getValue();\r\n        }\r\n    }\r\n\r\n    TextSelectorProp.prototype = {\r\n        getMult: function(ind) {\r\n            if(this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\r\n                this.getValue();\r\n            }\r\n            //var easer = bez.getEasingCurve(this.ne.v/100,0,1-this.xe.v/100,1);\r\n            var easer = BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get;\r\n            var mult = 0;\r\n            var s = this.finalS;\r\n            var e = this.finalE;\r\n            var type = this.data.sh;\r\n            if(type == 2){\r\n                if(e === s){\r\n                    mult = ind >= e ? 1 : 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 3){\r\n                if(e === s){\r\n                    mult = ind >= e ? 0 : 1;\r\n                }else{\r\n                    mult = 1 - max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                }\r\n\r\n                mult = easer(mult);\r\n            }else if(type == 4){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    mult = max(0,min(0.5/(e-s) + (ind-s)/(e-s),1));\r\n                    if(mult<0.5){\r\n                        mult *= 2;\r\n                    }else{\r\n                        mult = 1 - 2*(mult-0.5);\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 5){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    var tot = e - s;\r\n                    /*ind += 0.5;\r\n                    mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind;*/\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    var x = -tot/2+ind;\r\n                    var a = tot/2;\r\n                    mult = Math.sqrt(1 - (x*x)/(a*a));\r\n                }\r\n                mult = easer(mult);\r\n            }else if(type == 6){\r\n                if(e === s){\r\n                    mult = 0;\r\n                }else{\r\n                    ind = min(max(0,ind+0.5-s),e-s);\r\n                    mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind)/(e-s)))))/2;\r\n                    /*\r\n                     ind = Math.min(Math.max(s,ind),e-1);\r\n                     mult = (1+(Math.cos((Math.PI+Math.PI*2*(ind-s)/(e-1-s)))))/2;\r\n                     mult = Math.max(mult,(1/(e-1-s))/(e-1-s));*/\r\n                }\r\n                mult = easer(mult);\r\n            }else {\r\n                if(ind >= floor(s)){\r\n                    if(ind-s < 0){\r\n                        mult = 1 - (s - ind);\r\n                    }else{\r\n                        mult = max(0,min(e-ind,1));\r\n                    }\r\n                }\r\n                mult = easer(mult);\r\n            }\r\n            return mult*this.a.v;\r\n        },\r\n        getValue: function(newCharsFlag) {\r\n            this.iterateDynamicProperties();\r\n            this._mdf = newCharsFlag || this._mdf;\r\n            this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\r\n            if(newCharsFlag && this.data.r === 2) {\r\n                this.e.v = this._currentTextLength;\r\n            }\r\n            var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\r\n            var o = this.o.v/divisor;\r\n            var s = this.s.v/divisor + o;\r\n            var e = (this.e.v/divisor) + o;\r\n            if(s>e){\r\n                var _s = s;\r\n                s = e;\r\n                e = _s;\r\n            }\r\n            this.finalS = s;\r\n            this.finalE = e;\r\n        }\r\n    };\r\n    extendPrototype([DynamicPropertyContainer], TextSelectorProp);\r\n\r\n    function getTextSelectorProp(elem, data,arr) {\r\n        return new TextSelectorProp(elem, data, arr);\r\n    }\r\n\r\n    return {\r\n        getTextSelectorProp: getTextSelectorProp\r\n    };\r\n}());\r\n\r\n    \r\nvar pool_factory = (function() {\r\n\treturn function(initialLength, _create, _release, _clone) {\r\n\r\n\t\tvar _length = 0;\r\n\t\tvar _maxLength = initialLength;\r\n\t\tvar pool = createSizedArray(_maxLength);\r\n\r\n\t\tvar ob = {\r\n\t\t\tnewElement: newElement,\r\n\t\t\trelease: release\r\n\t\t};\r\n\r\n\t\tfunction newElement(){\r\n\t\t\tvar element;\r\n\t\t\tif(_length){\r\n\t\t\t\t_length -= 1;\r\n\t\t\t\telement = pool[_length];\r\n\t\t\t} else {\r\n\t\t\t\telement = _create();\r\n\t\t\t}\r\n\t\t\treturn element;\r\n\t\t}\r\n\r\n\t\tfunction release(element) {\r\n\t\t\tif(_length === _maxLength) {\r\n\t\t\t\tpool = pooling.double(pool);\r\n\t\t\t\t_maxLength = _maxLength*2;\r\n\t\t\t}\r\n\t\t\tif (_release) {\r\n\t\t\t\t_release(element);\r\n\t\t\t}\r\n\t\t\tpool[_length] = element;\r\n\t\t\t_length += 1;\r\n\t\t}\r\n\r\n\t\treturn ob;\r\n\t};\r\n}());\r\n\r\nvar pooling = (function(){\r\n\r\n\tfunction double(arr){\r\n\t\treturn arr.concat(createSizedArray(arr.length));\r\n\t}\r\n\r\n\treturn {\r\n\t\tdouble: double\r\n\t};\r\n}());\r\nvar point_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn createTypedArray('float32', 2);\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\r\nvar shape_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn new ShapePath();\r\n\t}\r\n\r\n\tfunction release(shapePath) {\r\n\t\tvar len = shapePath._length, i;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tpoint_pool.release(shapePath.v[i]);\r\n\t\t\tpoint_pool.release(shapePath.i[i]);\r\n\t\t\tpoint_pool.release(shapePath.o[i]);\r\n\t\t\tshapePath.v[i] = null;\r\n\t\t\tshapePath.i[i] = null;\r\n\t\t\tshapePath.o[i] = null;\r\n\t\t}\r\n\t\tshapePath._length = 0;\r\n\t\tshapePath.c = false;\r\n\t}\r\n\r\n\tfunction clone(shape) {\r\n\t\tvar cloned = factory.newElement();\r\n\t\tvar i, len = shape._length === undefined ? shape.v.length : shape._length;\r\n\t\tcloned.setLength(len);\r\n\t\tcloned.c = shape.c;\r\n\t\t\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tcloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1], i);\r\n\t\t}\r\n\t\treturn cloned;\r\n\t}\r\n\r\n\tvar factory = pool_factory(4, create, release);\r\n\tfactory.clone = clone;\r\n\r\n\treturn factory;\r\n}());\r\nvar shapeCollection_pool = (function(){\r\n\tvar ob = {\r\n\t\tnewShapeCollection: newShapeCollection,\r\n\t\trelease: release\r\n\t};\r\n\r\n\tvar _length = 0;\r\n\tvar _maxLength = 4;\r\n\tvar pool = createSizedArray(_maxLength);\r\n\r\n\tfunction newShapeCollection(){\r\n\t\tvar shapeCollection;\r\n\t\tif(_length){\r\n\t\t\t_length -= 1;\r\n\t\t\tshapeCollection = pool[_length];\r\n\t\t} else {\r\n\t\t\tshapeCollection = new ShapeCollection();\r\n\t\t}\r\n\t\treturn shapeCollection;\r\n\t}\r\n\r\n\tfunction release(shapeCollection) {\r\n\t\tvar i, len = shapeCollection._length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tshape_pool.release(shapeCollection.shapes[i]);\r\n\t\t}\r\n\t\tshapeCollection._length = 0;\r\n\r\n\t\tif(_length === _maxLength) {\r\n\t\t\tpool = pooling.double(pool);\r\n\t\t\t_maxLength = _maxLength*2;\r\n\t\t}\r\n\t\tpool[_length] = shapeCollection;\r\n\t\t_length += 1;\r\n\t}\r\n\r\n\treturn ob;\r\n}());\r\nvar segments_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n\t\t\tlengths: [],\r\n\t\t\ttotalLength: 0\r\n\t\t};\r\n\t}\r\n\r\n\tfunction release(element) {\r\n\t\tvar i, len = element.lengths.length;\r\n\t\tfor(i=0;i<len;i+=1) {\r\n\t\t\tbezier_length_pool.release(element.lengths[i]);\r\n\t\t}\r\n\t\telement.lengths.length = 0;\r\n\t}\r\n\r\n\treturn pool_factory(8, create, release);\r\n}());\r\nvar bezier_length_pool = (function(){\r\n\r\n\tfunction create() {\r\n\t\treturn {\r\n            addedLength: 0,\r\n            percents: createTypedArray('float32', defaultCurveSegments),\r\n            lengths: createTypedArray('float32', defaultCurveSegments),\r\n        };\r\n\t}\r\n\treturn pool_factory(8, create);\r\n}());\r\nfunction BaseRenderer(){}\r\nBaseRenderer.prototype.checkLayers = function(num){\r\n    var i, len = this.layers.length, data;\r\n    this.completeLayers = true;\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if (!this.elements[i]) {\r\n            data = this.layers[i];\r\n            if(data.ip - data.st <= (num - this.layers[i].st) && data.op - data.st > (num - this.layers[i].st))\r\n            {\r\n                this.buildItem(i);\r\n            }\r\n        }\r\n        this.completeLayers = this.elements[i] ? this.completeLayers:false;\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.createItem = function(layer){\r\n    switch(layer.ty){\r\n        case 2:\r\n            return this.createImage(layer);\r\n        case 0:\r\n            return this.createComp(layer);\r\n        case 1:\r\n            return this.createSolid(layer);\r\n        case 3:\r\n            return this.createNull(layer);\r\n        case 4:\r\n            return this.createShape(layer);\r\n        case 5:\r\n            return this.createText(layer);\r\n        case 13:\r\n            return this.createCamera(layer);\r\n    }\r\n    return this.createNull(layer);\r\n};\r\n\r\nBaseRenderer.prototype.createCamera = function(){\r\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\r\n};\r\n\r\nBaseRenderer.prototype.buildAllItems = function(){\r\n    var i, len = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.buildItem(i);\r\n    }\r\n    this.checkPendingElements();\r\n};\r\n\r\nBaseRenderer.prototype.includeLayers = function(newLayers){\r\n    this.completeLayers = false;\r\n    var i, len = newLayers.length;\r\n    var j, jLen = this.layers.length;\r\n    for(i=0;i<len;i+=1){\r\n        j = 0;\r\n        while(j<jLen){\r\n            if(this.layers[j].id == newLayers[i].id){\r\n                this.layers[j] = newLayers[i];\r\n                break;\r\n            }\r\n            j += 1;\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setProjectInterface = function(pInterface){\r\n    this.globalData.projectInterface = pInterface;\r\n};\r\n\r\nBaseRenderer.prototype.initItems = function(){\r\n    if(!this.globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n};\r\nBaseRenderer.prototype.buildElementParenting = function(element, parentName, hierarchy) {\r\n    var elements = this.elements;\r\n    var layers = this.layers;\r\n    var i=0, len = layers.length;\r\n    while (i < len) {\r\n        if (layers[i].ind == parentName) {\r\n            if (!elements[i] || elements[i] === true) {\r\n                this.buildItem(i);\r\n                this.addPendingElement(element);\r\n            } else {\r\n                hierarchy.push(elements[i]);\r\n                elements[i].setAsParent();\r\n                if(layers[i].parent !== undefined) {\r\n                    this.buildElementParenting(element, layers[i].parent, hierarchy);\r\n                } else {\r\n                    element.setHierarchy(hierarchy);\r\n                }\r\n            }\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.addPendingElement = function(element){\r\n    this.pendingElements.push(element);\r\n};\r\n\r\nBaseRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i]);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\r\nBaseRenderer.prototype.setupGlobalData = function(animData, fontsContainer) {\r\n    this.globalData.fontManager = new FontManager();\r\n    this.globalData.fontManager.addChars(animData.chars);\r\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\r\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\r\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\r\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\r\n    this.globalData.frameId = 0;\r\n    this.globalData.frameRate = animData.fr;\r\n    this.globalData.nm = animData.nm;\r\n    this.globalData.compSize = {\r\n        w: animData.w,\r\n        h: animData.h\r\n    };\r\n};\r\nfunction SVGRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.svgElement = createNS('svg');\r\n    var ariaLabel = '';\r\n    if (config && config.title) {\r\n        var titleElement = createNS('title');\r\n        var titleId = createElementID();\r\n        titleElement.setAttribute('id', titleId);\r\n        titleElement.textContent = config.title;\r\n        this.svgElement.appendChild(titleElement);\r\n        ariaLabel += titleId;\r\n    }\r\n    if (config && config.description) {\r\n        var descElement = createNS('desc');\r\n        var descId = createElementID();\r\n        descElement.setAttribute('id', descId);\r\n        descElement.textContent = config.description;\r\n        this.svgElement.appendChild(descElement);\r\n        ariaLabel += ' ' + descId;\r\n    }\r\n    if (ariaLabel) {\r\n        this.svgElement.setAttribute('aria-labelledby', ariaLabel);\r\n    }\r\n    var defs = createNS( 'defs');\r\n    this.svgElement.appendChild(defs);\r\n    var maskElement = createNS('g');\r\n    this.svgElement.appendChild(maskElement);\r\n    this.layerElement = maskElement;\r\n    this.renderConfig = {\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true,\r\n        viewBoxOnly: (config && config.viewBoxOnly) || false,\r\n        viewBoxSize: (config && config.viewBoxSize) || false,\r\n        className: (config && config.className) || ''\r\n    };\r\n\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        defs: defs,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.destroyed = false;\r\n    this.rendererType = 'svg';\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],SVGRenderer);\r\n\r\nSVGRenderer.prototype.createNull = function (data) {\r\n    return new NullElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createShape = function (data) {\r\n    return new SVGShapeElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createText = function (data) {\r\n    return new SVGTextElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createImage = function (data) {\r\n    return new IImageElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.createComp = function (data) {\r\n    return new SVGCompElement(data,this.globalData,this);\r\n\r\n};\r\n\r\nSVGRenderer.prototype.createSolid = function (data) {\r\n    return new ISolidElement(data,this.globalData,this);\r\n};\r\n\r\nSVGRenderer.prototype.configAnimation = function(animData){\r\n    this.svgElement.setAttribute('xmlns','http://www.w3.org/2000/svg');\r\n    if(this.renderConfig.viewBoxSize) {\r\n        this.svgElement.setAttribute('viewBox',this.renderConfig.viewBoxSize);\r\n    } else {\r\n        this.svgElement.setAttribute('viewBox','0 0 '+animData.w+' '+animData.h);\r\n    }\r\n\r\n    if(!this.renderConfig.viewBoxOnly) {\r\n        this.svgElement.setAttribute('width',animData.w);\r\n        this.svgElement.setAttribute('height',animData.h);\r\n        this.svgElement.style.width = '100%';\r\n        this.svgElement.style.height = '100%';\r\n        this.svgElement.style.transform = 'translate3d(0,0,0)';\r\n    }\r\n    if(this.renderConfig.className) {\r\n        this.svgElement.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    this.svgElement.setAttribute('preserveAspectRatio',this.renderConfig.preserveAspectRatio);\r\n    //this.layerElement.style.transform = 'translate3d(0,0,0)';\r\n    //this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\r\n    this.animationItem.wrapper.appendChild(this.svgElement);\r\n    //Mask animation\r\n    var defs = this.globalData.defs;\r\n\r\n    this.setupGlobalData(animData, defs);\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.data = animData;\r\n\r\n    var maskElement = createNS( 'clipPath');\r\n    var rect = createNS('rect');\r\n    rect.setAttribute('width',animData.w);\r\n    rect.setAttribute('height',animData.h);\r\n    rect.setAttribute('x',0);\r\n    rect.setAttribute('y',0);\r\n    var maskId = createElementID();\r\n    maskElement.setAttribute('id', maskId);\r\n    maskElement.appendChild(rect);\r\n    this.layerElement.setAttribute(\"clip-path\", \"url(\" + locationHref + \"#\"+maskId+\")\");\r\n\r\n    defs.appendChild(maskElement);\r\n    this.layers = animData.layers;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n};\r\n\r\n\r\nSVGRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.layerElement = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nSVGRenderer.prototype.updateContainerSize = function () {\r\n};\r\n\r\nSVGRenderer.prototype.buildItem  = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    elements[pos] = true;\r\n    var element = this.createItem(this.layers[pos]);\r\n\r\n    elements[pos] = element;\r\n    if(expressionsPlugin){\r\n        if(this.layers[pos].ty === 0){\r\n            this.globalData.projectInterface.registerComposition(element);\r\n        }\r\n        element.initExpressions();\r\n    }\r\n    this.appendElementInPos(element,pos);\r\n    if(this.layers[pos].tt){\r\n        if(!this.elements[pos - 1] || this.elements[pos - 1] === true){\r\n            this.buildItem(pos - 1);\r\n            this.addPendingElement(element);\r\n        } else {\r\n            element.setMatte(elements[pos - 1].layerId);\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n        if(element.data.tt){\r\n            var i = 0, len = this.elements.length;\r\n            while(i<len){\r\n                if(this.elements[i] === element){\r\n                    element.setMatte(this.elements[i - 1].layerId);\r\n                    break;\r\n                }\r\n                i += 1;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.renderFrame = function(num){\r\n    if(this.renderedFrame === num || this.destroyed){\r\n        return;\r\n    }\r\n    if(num === null){\r\n        num = this.renderedFrame;\r\n    }else{\r\n        this.renderedFrame = num;\r\n    }\r\n    // console.log('-------');\r\n    // console.log('FRAME ',num);\r\n    this.globalData.frameNum = num;\r\n    this.globalData.frameId += 1;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n    this.globalData._mdf = false;\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n    for (i = len - 1; i >= 0; i--) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        for (i = 0; i < len; i += 1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newElement = element.getBaseElement();\r\n    if(!newElement){\r\n        return;\r\n    }\r\n    var i = 0;\r\n    var nextElement;\r\n    while(i<pos){\r\n        if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement()){\r\n            nextElement = this.elements[i].getBaseElement();\r\n        }\r\n        i += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(newElement, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(newElement);\r\n    }\r\n};\r\n\r\nSVGRenderer.prototype.hide = function(){\r\n    this.layerElement.style.display = 'none';\r\n};\r\n\r\nSVGRenderer.prototype.show = function(){\r\n    this.layerElement.style.display = 'block';\r\n};\r\n\r\nfunction CanvasRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.renderConfig = {\r\n        clearCanvas: (config && config.clearCanvas !== undefined) ? config.clearCanvas : true,\r\n        context: (config && config.context) || null,\r\n        progressiveLoad: (config && config.progressiveLoad) || false,\r\n        preserveAspectRatio: (config && config.preserveAspectRatio) || 'xMidYMid meet',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        className: (config && config.className) || ''\r\n    };\r\n    this.renderConfig.dpr = (config && config.dpr) || 1;\r\n    if (this.animationItem.wrapper) {\r\n        this.renderConfig.dpr = (config && config.dpr) || window.devicePixelRatio || 1;\r\n    }\r\n    this.renderedFrame = -1;\r\n    this.globalData = {\r\n        frameNum: -1,\r\n        _mdf: false,\r\n        renderConfig: this.renderConfig,\r\n        currentGlobalAlpha: -1\r\n    };\r\n    this.contextData = new CVContextData();\r\n    this.elements = [];\r\n    this.pendingElements = [];\r\n    this.transformMat = new Matrix();\r\n    this.completeLayers = false;\r\n    this.rendererType = 'canvas';\r\n}\r\nextendPrototype([BaseRenderer],CanvasRenderer);\r\n\r\nCanvasRenderer.prototype.createShape = function (data) {\r\n    return new CVShapeElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createText = function (data) {\r\n    return new CVTextElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createImage = function (data) {\r\n    return new CVImageElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createComp = function (data) {\r\n    return new CVCompElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createSolid = function (data) {\r\n    return new CVSolidElement(data, this.globalData, this);\r\n};\r\n\r\nCanvasRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nCanvasRenderer.prototype.ctxTransform = function(props){\r\n    if(props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0){\r\n        return;\r\n    }\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.transform(props[0],props[1],props[4],props[5],props[12],props[13]);\r\n        return;\r\n    }\r\n    this.transformMat.cloneFromProps(props);\r\n    var cProps = this.contextData.cTr.props;\r\n    this.transformMat.transform(cProps[0],cProps[1],cProps[2],cProps[3],cProps[4],cProps[5],cProps[6],cProps[7],cProps[8],cProps[9],cProps[10],cProps[11],cProps[12],cProps[13],cProps[14],cProps[15]);\r\n    //this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\r\n    var trProps = this.contextData.cTr.props;\r\n    this.canvasContext.setTransform(trProps[0],trProps[1],trProps[4],trProps[5],trProps[12],trProps[13]);\r\n};\r\n\r\nCanvasRenderer.prototype.ctxOpacity = function(op){\r\n    /*if(op === 1){\r\n        return;\r\n    }*/\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\r\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n        return;\r\n    }\r\n    this.contextData.cO *= op < 0 ? 0 : op;\r\n    if(this.globalData.currentGlobalAlpha !== this.contextData.cO) {\r\n        this.canvasContext.globalAlpha = this.contextData.cO;\r\n        this.globalData.currentGlobalAlpha = this.contextData.cO;\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.reset = function(){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    this.contextData.reset();\r\n};\r\n\r\nCanvasRenderer.prototype.save = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.save();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.save();\r\n    }\r\n    var props = this.contextData.cTr.props;\r\n    if(this.contextData._length <= this.contextData.cArrPos) {\r\n        this.contextData.duplicate();\r\n    }\r\n    var i, arr = this.contextData.saved[this.contextData.cArrPos];\r\n    for (i = 0; i < 16; i += 1) {\r\n        arr[i] = props[i];\r\n    }\r\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\r\n    this.contextData.cArrPos += 1;\r\n};\r\n\r\nCanvasRenderer.prototype.restore = function(actionFlag){\r\n    if(!this.renderConfig.clearCanvas){\r\n        this.canvasContext.restore();\r\n        return;\r\n    }\r\n    if(actionFlag){\r\n        this.canvasContext.restore();\r\n        this.globalData.blendMode = 'source-over';\r\n    }\r\n    this.contextData.cArrPos -= 1;\r\n    var popped = this.contextData.saved[this.contextData.cArrPos];\r\n    var i,arr = this.contextData.cTr.props;\r\n    for(i=0;i<16;i+=1){\r\n        arr[i] = popped[i];\r\n    }\r\n    this.canvasContext.setTransform(popped[0],popped[1],popped[4],popped[5],popped[12],popped[13]);\r\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\r\n    this.contextData.cO = popped;\r\n    if(this.globalData.currentGlobalAlpha !== popped) {\r\n        this.canvasContext.globalAlpha = popped;\r\n        this.globalData.currentGlobalAlpha = popped;\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.configAnimation = function(animData){\r\n    if(this.animationItem.wrapper){\r\n        this.animationItem.container = createTag('canvas');\r\n        this.animationItem.container.style.width = '100%';\r\n        this.animationItem.container.style.height = '100%';\r\n        //this.animationItem.container.style.transform = 'translate3d(0,0,0)';\r\n        //this.animationItem.container.style.webkitTransform = 'translate3d(0,0,0)';\r\n        this.animationItem.container.style.transformOrigin = this.animationItem.container.style.mozTransformOrigin = this.animationItem.container.style.webkitTransformOrigin = this.animationItem.container.style['-webkit-transform'] = \"0px 0px 0px\";\r\n        this.animationItem.wrapper.appendChild(this.animationItem.container);\r\n        this.canvasContext = this.animationItem.container.getContext('2d');\r\n        if(this.renderConfig.className) {\r\n            this.animationItem.container.setAttribute('class', this.renderConfig.className);\r\n        }\r\n    }else{\r\n        this.canvasContext = this.renderConfig.context;\r\n    }\r\n    this.data = animData;\r\n    this.layers = animData.layers;\r\n    this.transformCanvas = {\r\n        w: animData.w,\r\n        h:animData.h,\r\n        sx:0,\r\n        sy:0,\r\n        tx:0,\r\n        ty:0\r\n    };\r\n    this.setupGlobalData(animData, document.body);\r\n    this.globalData.canvasContext = this.canvasContext;\r\n    this.globalData.renderer = this;\r\n    this.globalData.isDashed = false;\r\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\r\n    this.globalData.transformCanvas = this.transformCanvas;\r\n    this.elements = createSizedArray(animData.layers.length);\r\n\r\n    this.updateContainerSize();\r\n};\r\n\r\nCanvasRenderer.prototype.updateContainerSize = function () {\r\n    this.reset();\r\n    var elementWidth,elementHeight;\r\n    if(this.animationItem.wrapper && this.animationItem.container){\r\n        elementWidth = this.animationItem.wrapper.offsetWidth;\r\n        elementHeight = this.animationItem.wrapper.offsetHeight;\r\n        this.animationItem.container.setAttribute('width',elementWidth * this.renderConfig.dpr );\r\n        this.animationItem.container.setAttribute('height',elementHeight * this.renderConfig.dpr);\r\n    }else{\r\n        elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\r\n        elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\r\n    }\r\n    var elementRel,animationRel;\r\n    if(this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1){\r\n        var par = this.renderConfig.preserveAspectRatio.split(' ');\r\n        var fillType = par[1] || 'meet';\r\n        var pos = par[0] || 'xMidYMid';\r\n        var xPos = pos.substr(0,4);\r\n        var yPos = pos.substr(4);\r\n        elementRel = elementWidth/elementHeight;\r\n        animationRel = this.transformCanvas.w/this.transformCanvas.h;\r\n        if(animationRel>elementRel && fillType === 'meet' || animationRel<elementRel && fillType === 'slice'){\r\n            this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        }else{\r\n            this.transformCanvas.sx = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n            this.transformCanvas.sy = elementHeight/(this.transformCanvas.h / this.renderConfig.dpr);\r\n        }\r\n\r\n        if(xPos === 'xMid' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))/2*this.renderConfig.dpr;\r\n        } else if(xPos === 'xMax' && ((animationRel<elementRel && fillType==='meet') || (animationRel>elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.tx = (elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.tx = 0;\r\n        }\r\n        if(yPos === 'YMid' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))/2)*this.renderConfig.dpr;\r\n        } else if(yPos === 'YMax' && ((animationRel>elementRel && fillType==='meet') || (animationRel<elementRel && fillType === 'slice'))){\r\n            this.transformCanvas.ty = ((elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w)))*this.renderConfig.dpr;\r\n        } else {\r\n            this.transformCanvas.ty = 0;\r\n        }\r\n\r\n    }else if(this.renderConfig.preserveAspectRatio == 'none'){\r\n        this.transformCanvas.sx = elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);\r\n        this.transformCanvas.sy = elementHeight/(this.transformCanvas.h/this.renderConfig.dpr);\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }else{\r\n        this.transformCanvas.sx = this.renderConfig.dpr;\r\n        this.transformCanvas.sy = this.renderConfig.dpr;\r\n        this.transformCanvas.tx = 0;\r\n        this.transformCanvas.ty = 0;\r\n    }\r\n    this.transformCanvas.props = [this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];\r\n    /*var i, len = this.elements.length;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.elements[i] && this.elements[i].data.ty === 0){\r\n            this.elements[i].resize(this.globalData.transformCanvas);\r\n        }\r\n    }*/\r\n    this.ctxTransform(this.transformCanvas.props);\r\n    this.canvasContext.beginPath();\r\n    this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h);\r\n    this.canvasContext.closePath();\r\n    this.canvasContext.clip();\r\n\r\n    this.renderFrame(this.renderedFrame, true);\r\n};\r\n\r\nCanvasRenderer.prototype.destroy = function () {\r\n    if(this.renderConfig.clearCanvas) {\r\n        this.animationItem.wrapper.innerHTML = '';\r\n    }\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = len - 1; i >= 0; i-=1) {\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.elements.length = 0;\r\n    this.globalData.canvasContext = null;\r\n    this.animationItem.container = null;\r\n    this.destroyed = true;\r\n};\r\n\r\nCanvasRenderer.prototype.renderFrame = function(num, forceRender){\r\n    if((this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender) || this.destroyed || num === -1){\r\n        return;\r\n    }\r\n    this.renderedFrame = num;\r\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\r\n    this.globalData.frameId += 1;\r\n    this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\r\n    this.globalData.projectInterface.currentFrame = num;\r\n\r\n     // console.log('--------');\r\n     // console.log('NEW: ',num);\r\n    var i, len = this.layers.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(num);\r\n    }\r\n\r\n    for (i = 0; i < len; i++) {\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(num - this.layers[i].st);\r\n        }\r\n    }\r\n    if(this.globalData._mdf) {\r\n        if(this.renderConfig.clearCanvas === true){\r\n            this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\r\n        }else{\r\n            this.save();\r\n        }\r\n        for (i = len - 1; i >= 0; i-=1) {\r\n            if(this.completeLayers || this.elements[i]){\r\n                this.elements[i].renderFrame();\r\n            }\r\n        }\r\n        if(this.renderConfig.clearCanvas !== true){\r\n            this.restore();\r\n        }\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.buildItem = function(pos){\r\n    var elements = this.elements;\r\n    if(elements[pos] || this.layers[pos].ty == 99){\r\n        return;\r\n    }\r\n    var element = this.createItem(this.layers[pos], this,this.globalData);\r\n    elements[pos] = element;\r\n    element.initExpressions();\r\n    /*if(this.layers[pos].ty === 0){\r\n        element.resize(this.globalData.transformCanvas);\r\n    }*/\r\n};\r\n\r\nCanvasRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.hide = function(){\r\n    this.animationItem.container.style.display = 'none';\r\n};\r\n\r\nCanvasRenderer.prototype.show = function(){\r\n    this.animationItem.container.style.display = 'block';\r\n};\r\n\r\nfunction HybridRenderer(animationItem, config){\r\n    this.animationItem = animationItem;\r\n    this.layers = null;\r\n    this.renderedFrame = -1;\r\n    this.renderConfig = {\r\n        className: (config && config.className) || '',\r\n        imagePreserveAspectRatio: (config && config.imagePreserveAspectRatio) || 'xMidYMid slice',\r\n        hideOnTransparent: (config && config.hideOnTransparent === false) ? false : true\r\n    };\r\n    this.globalData = {\r\n        _mdf: false,\r\n        frameNum: -1,\r\n        renderConfig: this.renderConfig\r\n    };\r\n    this.pendingElements = [];\r\n    this.elements = [];\r\n    this.threeDElements = [];\r\n    this.destroyed = false;\r\n    this.camera = null;\r\n    this.supports3d = true;\r\n    this.rendererType = 'html';\r\n\r\n}\r\n\r\nextendPrototype([BaseRenderer],HybridRenderer);\r\n\r\nHybridRenderer.prototype.buildItem = SVGRenderer.prototype.buildItem;\r\n\r\nHybridRenderer.prototype.checkPendingElements  = function(){\r\n    while(this.pendingElements.length){\r\n        var element = this.pendingElements.pop();\r\n        element.checkParenting();\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.appendElementInPos = function(element, pos){\r\n    var newDOMElement = element.getBaseElement();\r\n    if(!newDOMElement){\r\n        return;\r\n    }\r\n    var layer = this.layers[pos];\r\n    if(!layer.ddd || !this.supports3d){\r\n        if(this.threeDElements) {\r\n            this.addTo3dContainer(newDOMElement,pos);\r\n        } else {\r\n            var i = 0;\r\n            var nextDOMElement, nextLayer, tmpDOMElement;\r\n            while(i<pos){\r\n                if(this.elements[i] && this.elements[i]!== true && this.elements[i].getBaseElement){\r\n                    nextLayer = this.elements[i];\r\n                    tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\r\n                    nextDOMElement = tmpDOMElement || nextDOMElement;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(nextDOMElement){\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.insertBefore(newDOMElement, nextDOMElement);\r\n                }\r\n            } else {\r\n                if(!layer.ddd || !this.supports3d){\r\n                    this.layerElement.appendChild(newDOMElement);\r\n                }\r\n            }\r\n        }\r\n        \r\n    } else {\r\n        this.addTo3dContainer(newDOMElement,pos);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createShape = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGShapeElement(data, this.globalData, this);\r\n    }\r\n    return new HShapeElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createText = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGTextElement(data, this.globalData, this);\r\n    }\r\n    return new HTextElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createCamera = function (data) {\r\n    this.camera = new HCameraElement(data, this.globalData, this);\r\n    return this.camera;\r\n};\r\n\r\nHybridRenderer.prototype.createImage = function (data) {\r\n    if(!this.supports3d){\r\n        return new IImageElement(data, this.globalData, this);\r\n    }\r\n    return new HImageElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createComp = function (data) {\r\n    if(!this.supports3d){\r\n        return new SVGCompElement(data, this.globalData, this);\r\n    }\r\n    return new HCompElement(data, this.globalData, this);\r\n\r\n};\r\n\r\nHybridRenderer.prototype.createSolid = function (data) {\r\n    if(!this.supports3d){\r\n        return new ISolidElement(data, this.globalData, this);\r\n    }\r\n    return new HSolidElement(data, this.globalData, this);\r\n};\r\n\r\nHybridRenderer.prototype.createNull = SVGRenderer.prototype.createNull;\r\n\r\nHybridRenderer.prototype.getThreeDContainerByPos = function(pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len) {\r\n        if(this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\r\n            return this.threeDElements[i].perspectiveElem;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.createThreeDContainer = function(pos, type){\r\n    var perspectiveElem = createTag('div');\r\n    styleDiv(perspectiveElem);\r\n    var container = createTag('div');\r\n    styleDiv(container);\r\n    if(type === '3d') {\r\n        perspectiveElem.style.width = this.globalData.compSize.w+'px';\r\n        perspectiveElem.style.height = this.globalData.compSize.h+'px';\r\n        perspectiveElem.style.transformOrigin = perspectiveElem.style.mozTransformOrigin = perspectiveElem.style.webkitTransformOrigin = \"50% 50%\";\r\n        container.style.transform = container.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n    }\r\n    \r\n    perspectiveElem.appendChild(container);\r\n    //this.resizerElem.appendChild(perspectiveElem);\r\n    var threeDContainerData = {\r\n        container:container,\r\n        perspectiveElem:perspectiveElem,\r\n        startPos: pos,\r\n        endPos: pos,\r\n        type: type\r\n    };\r\n    this.threeDElements.push(threeDContainerData);\r\n    return threeDContainerData;\r\n};\r\n\r\nHybridRenderer.prototype.build3dContainers = function(){\r\n    var i, len = this.layers.length;\r\n    var lastThreeDContainerData;\r\n    var currentContainer = '';\r\n    for(i=0;i<len;i+=1){\r\n        if(this.layers[i].ddd && this.layers[i].ty !== 3){\r\n            if(currentContainer !== '3d'){\r\n                currentContainer = '3d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'3d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        } else {\r\n            if(currentContainer !== '2d'){\r\n                currentContainer = '2d';\r\n                lastThreeDContainerData = this.createThreeDContainer(i,'2d');\r\n            }\r\n            lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos,i);\r\n        }\r\n    }\r\n    len = this.threeDElements.length;\r\n    for(i = len - 1; i >= 0; i --) {\r\n        this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.addTo3dContainer = function(elem,pos){\r\n    var i = 0, len = this.threeDElements.length;\r\n    while(i<len){\r\n        if(pos <= this.threeDElements[i].endPos){\r\n            var j = this.threeDElements[i].startPos;\r\n            var nextElement;\r\n            while(j<pos){\r\n                if(this.elements[j] && this.elements[j].getBaseElement){\r\n                    nextElement = this.elements[j].getBaseElement();\r\n                }\r\n                j += 1;\r\n            }\r\n            if(nextElement){\r\n                this.threeDElements[i].container.insertBefore(elem, nextElement);\r\n            } else {\r\n                this.threeDElements[i].container.appendChild(elem);\r\n            }\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.configAnimation = function(animData){\r\n    var resizerElem = createTag('div');\r\n    var wrapper = this.animationItem.wrapper;\r\n    resizerElem.style.width = animData.w+'px';\r\n    resizerElem.style.height = animData.h+'px';\r\n    this.resizerElem = resizerElem;\r\n    styleDiv(resizerElem);\r\n    resizerElem.style.transformStyle = resizerElem.style.webkitTransformStyle = resizerElem.style.mozTransformStyle = \"flat\";\r\n    if(this.renderConfig.className) {\r\n      resizerElem.setAttribute('class', this.renderConfig.className);\r\n    }\r\n    wrapper.appendChild(resizerElem);\r\n\r\n    resizerElem.style.overflow = 'hidden';\r\n    var svg = createNS('svg');\r\n    svg.setAttribute('width','1');\r\n    svg.setAttribute('height','1');\r\n    styleDiv(svg);\r\n    this.resizerElem.appendChild(svg);\r\n    var defs = createNS('defs');\r\n    svg.appendChild(defs);\r\n    this.data = animData;\r\n    //Mask animation\r\n    this.setupGlobalData(animData, svg);\r\n    this.globalData.defs = defs;\r\n    this.layers = animData.layers;\r\n    this.layerElement = this.resizerElem;\r\n    this.build3dContainers();\r\n    this.updateContainerSize();\r\n};\r\n\r\nHybridRenderer.prototype.destroy = function () {\r\n    this.animationItem.wrapper.innerHTML = '';\r\n    this.animationItem.container = null;\r\n    this.globalData.defs = null;\r\n    var i, len = this.layers ? this.layers.length : 0;\r\n    for (i = 0; i < len; i++) {\r\n        this.elements[i].destroy();\r\n    }\r\n    this.elements.length = 0;\r\n    this.destroyed = true;\r\n    this.animationItem = null;\r\n};\r\n\r\nHybridRenderer.prototype.updateContainerSize = function () {\r\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\r\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\r\n    var elementRel = elementWidth/elementHeight;\r\n    var animationRel = this.globalData.compSize.w/this.globalData.compSize.h;\r\n    var sx,sy,tx,ty;\r\n    if(animationRel>elementRel){\r\n        sx = elementWidth/(this.globalData.compSize.w);\r\n        sy = elementWidth/(this.globalData.compSize.w);\r\n        tx = 0;\r\n        ty = ((elementHeight-this.globalData.compSize.h*(elementWidth/this.globalData.compSize.w))/2);\r\n    }else{\r\n        sx = elementHeight/(this.globalData.compSize.h);\r\n        sy = elementHeight/(this.globalData.compSize.h);\r\n        tx = (elementWidth-this.globalData.compSize.w*(elementHeight/this.globalData.compSize.h))/2;\r\n        ty = 0;\r\n    }\r\n    this.resizerElem.style.transform = this.resizerElem.style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,'+sy+',0,0,0,0,1,0,'+tx+','+ty+',0,1)';\r\n};\r\n\r\nHybridRenderer.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\r\n\r\nHybridRenderer.prototype.hide = function(){\r\n    this.resizerElem.style.display = 'none';\r\n};\r\n\r\nHybridRenderer.prototype.show = function(){\r\n    this.resizerElem.style.display = 'block';\r\n};\r\n\r\nHybridRenderer.prototype.initItems = function(){\r\n    this.buildAllItems();\r\n    if(this.camera){\r\n        this.camera.setup();\r\n    } else {\r\n        var cWidth = this.globalData.compSize.w;\r\n        var cHeight = this.globalData.compSize.h;\r\n        var i, len = this.threeDElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.threeDElements[i].perspectiveElem.style.perspective = this.threeDElements[i].perspectiveElem.style.webkitPerspective = Math.sqrt(Math.pow(cWidth,2) + Math.pow(cHeight,2)) + 'px';\r\n        }\r\n    }\r\n};\r\n\r\nHybridRenderer.prototype.searchExtraCompositions = function(assets){\r\n    var i, len = assets.length;\r\n    var floatingContainer = createTag('div');\r\n    for(i=0;i<len;i+=1){\r\n        if(assets[i].xt){\r\n            var comp = this.createComp(assets[i],floatingContainer,this.globalData.comp,null);\r\n            comp.initExpressions();\r\n            this.globalData.projectInterface.registerComposition(comp);\r\n        }\r\n    }\r\n};\r\n\r\nfunction MaskElement(data,element,globalData) {\r\n    this.data = data;\r\n    this.element = element;\r\n    this.globalData = globalData;\r\n    this.storedData = [];\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.maskElement = null;\r\n    var defs = this.globalData.defs;\r\n    var i, len = this.masksProperties ? this.masksProperties.length : 0;\r\n    this.viewData = createSizedArray(len);\r\n    this.solidPath = '';\r\n\r\n\r\n    var path, properties = this.masksProperties;\r\n    var count = 0;\r\n    var currentMasks = [];\r\n    var j, jLen;\r\n    var layerId = createElementID();\r\n    var rect, expansor, feMorph,x;\r\n    var maskType = 'clipPath', maskRef = 'clip-path';\r\n    for (i = 0; i < len; i++) {\r\n        if((properties[i].mode !== 'a' && properties[i].mode !== 'n')|| properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x){\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n        }\r\n\r\n        if((properties[i].mode == 's' || properties[i].mode == 'i') && count === 0){\r\n            rect = createNS( 'rect');\r\n            rect.setAttribute('fill', '#ffffff');\r\n            rect.setAttribute('width', this.element.comp.data.w || 0);\r\n            rect.setAttribute('height', this.element.comp.data.h || 0);\r\n            currentMasks.push(rect);\r\n        } else {\r\n            rect = null;\r\n        }\r\n\r\n        path = createNS( 'path');\r\n        if(properties[i].mode == 'n') {\r\n            // TODO move this to a factory or to a constructor\r\n            this.viewData[i] = {\r\n                op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n                prop: ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n                elem: path,\r\n                lastPath: ''\r\n            };\r\n            defs.appendChild(path);\r\n            continue;\r\n        }\r\n        count += 1;\r\n\r\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        path.setAttribute('clip-rule','nonzero');\r\n        var filterID;\r\n\r\n        if (properties[i].x.k !== 0) {\r\n            maskType = 'mask';\r\n            maskRef = 'mask';\r\n            x = PropertyFactory.getProp(this.element,properties[i].x,0,null,this.element);\r\n            filterID = createElementID();\r\n            expansor = createNS('filter');\r\n            expansor.setAttribute('id',filterID);\r\n            feMorph = createNS('feMorphology');\r\n            feMorph.setAttribute('operator','erode');\r\n            feMorph.setAttribute('in','SourceGraphic');\r\n            feMorph.setAttribute('radius','0');\r\n            expansor.appendChild(feMorph);\r\n            defs.appendChild(expansor);\r\n            path.setAttribute('stroke', properties[i].mode === 's' ? '#000000':'#ffffff');\r\n        } else {\r\n            feMorph = null;\r\n            x = null;\r\n        }\r\n\r\n        // TODO move this to a factory or to a constructor\r\n        this.storedData[i] = {\r\n             elem: path,\r\n             x: x,\r\n             expan: feMorph,\r\n            lastPath: '',\r\n            lastOperator:'',\r\n            filterId:filterID,\r\n            lastRadius:0\r\n        };\r\n        if(properties[i].mode == 'i'){\r\n            jLen = currentMasks.length;\r\n            var g = createNS('g');\r\n            for(j=0;j<jLen;j+=1){\r\n                g.appendChild(currentMasks[j]);\r\n            }\r\n            var mask = createNS('mask');\r\n            mask.setAttribute('mask-type','alpha');\r\n            mask.setAttribute('id',layerId+'_'+count);\r\n            mask.appendChild(path);\r\n            defs.appendChild(mask);\r\n            g.setAttribute('mask','url(' + locationHref + '#'+layerId+'_'+count+')');\r\n\r\n            currentMasks.length = 0;\r\n            currentMasks.push(g);\r\n        }else{\r\n            currentMasks.push(path);\r\n        }\r\n        if(properties[i].inv && !this.solidPath){\r\n            this.solidPath = this.createLayerSolidPath();\r\n        }\r\n        // TODO move this to a factory or to a constructor\r\n        this.viewData[i] = {\r\n            elem: path,\r\n            lastPath: '',\r\n            op: PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),\r\n            prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),\r\n            invRect: rect\r\n        };\r\n        if(!this.viewData[i].prop.k){\r\n            this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n    }\r\n\r\n    this.maskElement = createNS( maskType);\r\n\r\n    len = currentMasks.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.maskElement.appendChild(currentMasks[i]);\r\n    }\r\n\r\n    if(count > 0){\r\n        this.maskElement.setAttribute('id', layerId);\r\n        this.element.maskedElement.setAttribute(maskRef, \"url(\" + locationHref + \"#\" + layerId + \")\");\r\n        defs.appendChild(this.maskElement);\r\n    }\r\n    if (this.viewData.length) {\r\n        this.element.addRenderableComponent(this);\r\n    }\r\n\r\n}\r\n\r\nMaskElement.prototype.getMaskProperty = function(pos){\r\n    return this.viewData[pos].prop;\r\n};\r\n\r\nMaskElement.prototype.renderFrame = function (isFirstFrame) {\r\n    var finalMat = this.element.finalTransform.mat;\r\n    var i, len = this.masksProperties.length;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.viewData[i].prop._mdf || isFirstFrame){\r\n            this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i]);\r\n        }\r\n        if(this.viewData[i].op._mdf || isFirstFrame){\r\n            this.viewData[i].elem.setAttribute('fill-opacity',this.viewData[i].op.v);\r\n        }\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if(this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)){\r\n                this.viewData[i].invRect.setAttribute('x', -finalMat.props[12]);\r\n                this.viewData[i].invRect.setAttribute('y', -finalMat.props[13]);\r\n            }\r\n            if(this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)){\r\n                var feMorph = this.storedData[i].expan;\r\n                if(this.storedData[i].x.v < 0){\r\n                    if(this.storedData[i].lastOperator !== 'erode'){\r\n                        this.storedData[i].lastOperator = 'erode';\r\n                        this.storedData[i].elem.setAttribute('filter','url(' + locationHref + '#'+this.storedData[i].filterId+')');\r\n                    }\r\n                    feMorph.setAttribute('radius',-this.storedData[i].x.v);\r\n                }else{\r\n                    if(this.storedData[i].lastOperator !== 'dilate'){\r\n                        this.storedData[i].lastOperator = 'dilate';\r\n                        this.storedData[i].elem.setAttribute('filter',null);\r\n                    }\r\n                    this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v*2);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nMaskElement.prototype.getMaskelement = function () {\r\n    return this.maskElement;\r\n};\r\n\r\nMaskElement.prototype.createLayerSolidPath = function(){\r\n    var path = 'M0,0 ';\r\n    path += ' h' + this.globalData.compSize.w ;\r\n    path += ' v' + this.globalData.compSize.h ;\r\n    path += ' h-' + this.globalData.compSize.w ;\r\n    path += ' v-' + this.globalData.compSize.h + ' ';\r\n    return path;\r\n};\r\n\r\nMaskElement.prototype.drawPath = function(pathData,pathNodes,viewData){\r\n    var pathString = \" M\"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    var i, len;\r\n    len = pathNodes._length;\r\n    for(i=1;i<len;i+=1){\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\r\n    }\r\n        //pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    if(pathNodes.c && len > 1){\r\n        pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\r\n    }\r\n    //pathNodes.__renderedString = pathString;\r\n\r\n    if(viewData.lastPath !== pathString){\r\n        var pathShapeValue = '';\r\n        if(viewData.elem){\r\n            if(pathNodes.c){\r\n                pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\r\n            }\r\n            viewData.elem.setAttribute('d',pathShapeValue);\r\n        }\r\n        viewData.lastPath = pathString;\r\n    }\r\n};\r\n\r\nMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n    this.globalData = null;\r\n    this.maskElement = null;\r\n    this.data = null;\r\n    this.masksProperties = null;\r\n};\r\n\r\n/**\r\n * @file \r\n * Handles AE's layer parenting property.\r\n *\r\n */\r\n\r\nfunction HierarchyElement(){}\r\n\r\nHierarchyElement.prototype = {\r\n\t/**\r\n     * @function \r\n     * Initializes hierarchy properties\r\n     *\r\n     */\r\n\tinitHierarchy: function() {\r\n\t\t//element's parent list\r\n\t    this.hierarchy = [];\r\n\t    //if element is parent of another layer _isParent will be true\r\n\t    this._isParent = false;\r\n\t    this.checkParenting();\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer's hierarchy.\r\n     * @param {array} hierarch\r\n     * layer's parent list\r\n     *\r\n     */ \r\n\tsetHierarchy: function(hierarchy){\r\n\t    this.hierarchy = hierarchy;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Sets layer as parent.\r\n     *\r\n     */ \r\n\tsetAsParent: function() {\r\n\t    this._isParent = true;\r\n\t},\r\n\t/**\r\n     * @function \r\n     * Searches layer's parenting chain\r\n     *\r\n     */ \r\n\tcheckParenting: function(){\r\n\t    if (this.data.parent !== undefined){\r\n\t        this.comp.buildElementParenting(this, this.data.parent, []);\r\n\t    }\r\n\t}\r\n};\r\n/**\r\n * @file \r\n * Handles element's layer frame update.\r\n * Checks layer in point and out point\r\n *\r\n */\r\n\r\nfunction FrameElement(){}\r\n\r\nFrameElement.prototype = {\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     */\r\n    initFrame: function(){\r\n        //set to true when inpoint is rendered\r\n        this._isFirstFrame = false;\r\n        //list of animated properties\r\n        this.dynamicProperties = [];\r\n        // If layer has been modified in current tick this will be true\r\n        this._mdf = false;\r\n    },\r\n    /**\r\n     * @function \r\n     * Calculates all dynamic values\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * @param {boolean} isVisible\r\n     * if layers is currently in range\r\n     * \r\n     */\r\n    prepareProperties: function(num, isVisible) {\r\n        var i, len = this.dynamicProperties.length;\r\n        for (i = 0;i < len; i += 1) {\r\n            if (isVisible || (this._isParent && this.dynamicProperties[i].propType === 'transform')) {\r\n                this.dynamicProperties[i].getValue();\r\n                if (this.dynamicProperties[i]._mdf) {\r\n                    this.globalData._mdf = true;\r\n                    this._mdf = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    addDynamicProperty: function(prop) {\r\n        if(this.dynamicProperties.indexOf(prop) === -1) {\r\n            this.dynamicProperties.push(prop);\r\n        }\r\n    }\r\n};\r\nfunction TransformElement(){}\r\n\r\nTransformElement.prototype = {\r\n    initTransform: function() {\r\n        this.finalTransform = {\r\n            mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {o:0},\r\n            _matMdf: false,\r\n            _opMdf: false,\r\n            mat: new Matrix()\r\n        };\r\n        if (this.data.ao) {\r\n            this.finalTransform.mProp.autoOriented = true;\r\n        }\r\n\r\n        //TODO: check TYPE 11: Guided elements\r\n        if (this.data.ty !== 11) ;\r\n    },\r\n    renderTransform: function() {\r\n\r\n        this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\r\n        this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\r\n\r\n        if (this.hierarchy) {\r\n            var mat;\r\n            var finalMat = this.finalTransform.mat;\r\n            var i = 0, len = this.hierarchy.length;\r\n            //Checking if any of the transformation matrices in the hierarchy chain has changed.\r\n            if (!this.finalTransform._matMdf) {\r\n                while (i < len) {\r\n                    if (this.hierarchy[i].finalTransform.mProp._mdf) {\r\n                        this.finalTransform._matMdf = true;\r\n                        break;\r\n                    }\r\n                    i += 1;\r\n                }\r\n            }\r\n            \r\n            if (this.finalTransform._matMdf) {\r\n                mat = this.finalTransform.mProp.v.props;\r\n                finalMat.cloneFromProps(mat);\r\n                for (i = 0; i < len; i += 1) {\r\n                    mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                    finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    globalToLocal: function(pt) {\r\n        var transforms = [];\r\n        transforms.push(this.finalTransform);\r\n        var flag = true;\r\n        var comp = this.comp;\r\n        while (flag) {\r\n            if (comp.finalTransform) {\r\n                if (comp.data.hasMask) {\r\n                    transforms.splice(0, 0, comp.finalTransform);\r\n                }\r\n                comp = comp.comp;\r\n            } else {\r\n                flag = false;\r\n            }\r\n        }\r\n        var i, len = transforms.length,ptNew;\r\n        for (i = 0; i < len; i += 1) {\r\n            ptNew = transforms[i].mat.applyToPointArray(0, 0, 0);\r\n            //ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\r\n            pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\r\n        }\r\n        return pt;\r\n    },\r\n    mHelper: new Matrix()\r\n};\r\nfunction RenderableElement(){\r\n\r\n}\r\n\r\nRenderableElement.prototype = {\r\n    initRenderable: function() {\r\n        //layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\r\n        this.isInRange = false;\r\n        //layer's display state\r\n        this.hidden = false;\r\n        // If layer's transparency equals 0, it can be hidden\r\n        this.isTransparent = false;\r\n        //list of animated components\r\n        this.renderableComponents = [];\r\n    },\r\n    addRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) === -1) {\r\n            this.renderableComponents.push(component);\r\n        }\r\n    },\r\n    removeRenderableComponent: function(component) {\r\n        if(this.renderableComponents.indexOf(component) !== -1) {\r\n            this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\r\n        }\r\n    },\r\n    prepareRenderableFrame: function(num) {\r\n        this.checkLayerLimits(num);\r\n    },\r\n    checkTransparency: function(){\r\n        if(this.finalTransform.mProp.o.v <= 0) {\r\n            if(!this.isTransparent && this.globalData.renderConfig.hideOnTransparent){\r\n                this.isTransparent = true;\r\n                this.hide();\r\n            }\r\n        } else if(this.isTransparent) {\r\n            this.isTransparent = false;\r\n            this.show();\r\n        }\r\n    },\r\n    /**\r\n     * @function \r\n     * Initializes frame related properties.\r\n     *\r\n     * @param {number} num\r\n     * current frame number in Layer's time\r\n     * \r\n     */\r\n    checkLayerLimits: function(num) {\r\n        if(this.data.ip - this.data.st <= num && this.data.op - this.data.st > num)\r\n        {\r\n            if(this.isInRange !== true){\r\n                this.globalData._mdf = true;\r\n                this._mdf = true;\r\n                this.isInRange = true;\r\n                this.show();\r\n            }\r\n        } else {\r\n            if(this.isInRange !== false){\r\n                this.globalData._mdf = true;\r\n                this.isInRange = false;\r\n                this.hide();\r\n            }\r\n        }\r\n    },\r\n    renderRenderable: function() {\r\n        var i, len = this.renderableComponents.length;\r\n        for(i = 0; i < len; i += 1) {\r\n            this.renderableComponents[i].renderFrame(this._isFirstFrame);\r\n        }\r\n        /*this.maskManager.renderFrame(this.finalTransform.mat);\r\n        this.renderableEffectsManager.renderFrame(this._isFirstFrame);*/\r\n    },\r\n    sourceRectAtTime: function(){\r\n        return {\r\n            top:0,\r\n            left:0,\r\n            width:100,\r\n            height:100\r\n        };\r\n    },\r\n    getLayerSize: function(){\r\n        if(this.data.ty === 5){\r\n            return {w:this.data.textData.width,h:this.data.textData.height};\r\n        }else{\r\n            return {w:this.data.width,h:this.data.height};\r\n        }\r\n    }\r\n};\r\nfunction RenderableDOMElement() {}\r\n\r\n(function(){\r\n    var _prototype = {\r\n        initElement: function(data,globalData,comp) {\r\n            this.initFrame();\r\n            this.initBaseData(data, globalData, comp);\r\n            this.initTransform(data, globalData, comp);\r\n            this.initHierarchy();\r\n            this.initRenderable();\r\n            this.initRendererElement();\r\n            this.createContainerElements();\r\n            this.createRenderableComponents();\r\n            this.createContent();\r\n            this.hide();\r\n        },\r\n        hide: function(){\r\n            if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n                var elem = this.baseElement || this.layerElement;\r\n                elem.style.display = 'none';\r\n                this.hidden = true;\r\n            }\r\n        },\r\n        show: function(){\r\n            if (this.isInRange && !this.isTransparent){\r\n                if (!this.data.hd) {\r\n                    var elem = this.baseElement || this.layerElement;\r\n                    elem.style.display = 'block';\r\n                }\r\n                this.hidden = false;\r\n                this._isFirstFrame = true;\r\n            }\r\n        },\r\n        renderFrame: function() {\r\n            //If it is exported as hidden (data.hd === true) no need to render\r\n            //If it is not visible no need to render\r\n            if (this.data.hd || this.hidden) {\r\n                return;\r\n            }\r\n            this.renderTransform();\r\n            this.renderRenderable();\r\n            this.renderElement();\r\n            this.renderInnerContent();\r\n            if (this._isFirstFrame) {\r\n                this._isFirstFrame = false;\r\n            }\r\n        },\r\n        renderInnerContent: function() {},\r\n        prepareFrame: function(num) {\r\n            this._mdf = false;\r\n            this.prepareRenderableFrame(num);\r\n            this.prepareProperties(num, this.isInRange);\r\n            this.checkTransparency();\r\n        },\r\n        destroy: function(){\r\n            this.innerElem =  null;\r\n            this.destroyBaseElement();\r\n        }\r\n    };\r\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\r\n}());\r\nfunction ProcessedElement(element, position) {\r\n\tthis.elem = element;\r\n\tthis.pos = position;\r\n}\r\nfunction SVGStyleData(data, level) {\r\n\tthis.data = data;\r\n\tthis.type = data.ty;\r\n\tthis.d = '';\r\n\tthis.lvl = level;\r\n\tthis._mdf = false;\r\n\tthis.closed = data.hd === true;\r\n\tthis.pElem = createNS('path');\r\n\tthis.msElem = null;\r\n}\r\n\r\nSVGStyleData.prototype.reset = function() {\r\n\tthis.d = '';\r\n\tthis._mdf = false;\r\n};\r\nfunction SVGShapeData(transformers, level, shape) {\r\n    this.caches = [];\r\n    this.styles = [];\r\n    this.transformers = transformers;\r\n    this.lStr = '';\r\n    this.sh = shape;\r\n    this.lvl = level;\r\n    //TODO find if there are some cases where _isAnimated can be false. \r\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\r\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\r\n    this._isAnimated = !!shape.k;\r\n    // TODO: commenting this for now since all shapes are animated\r\n    var i = 0, len = transformers.length;\r\n    while(i < len) {\r\n    \tif(transformers[i].mProps.dynamicProperties.length) {\r\n    \t\tthis._isAnimated = true;\r\n    \t\tbreak;\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n}\r\n\r\nSVGShapeData.prototype.setAsAnimated = function() {\r\n    this._isAnimated = true;\r\n};\r\nfunction SVGTransformData(mProps, op, container) {\r\n\tthis.transform = {\r\n\t\tmProps: mProps,\r\n\t\top: op,\r\n\t\tcontainer: container\r\n\t};\r\n\tthis.elements = [];\r\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\r\n}\r\nfunction SVGStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\r\nfunction SVGFillStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n\tthis.c = PropertyFactory.getProp(elem,data.c,1,255,this);\r\n\tthis.style = styleOb;\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGFillStyleData);\r\nfunction SVGGradientFillStyleData(elem, data, styleOb){\r\n    this.initDynamicPropertyContainer(elem);\r\n    this.getValue = this.iterateDynamicProperties;\r\n    this.initGradientData(elem, data, styleOb);\r\n}\r\n\r\nSVGGradientFillStyleData.prototype.initGradientData = function(elem, data, styleOb){\r\n    this.o = PropertyFactory.getProp(elem,data.o,0,0.01,this);\r\n    this.s = PropertyFactory.getProp(elem,data.s,1,null,this);\r\n    this.e = PropertyFactory.getProp(elem,data.e,1,null,this);\r\n    this.h = PropertyFactory.getProp(elem,data.h||{k:0},0,0.01,this);\r\n    this.a = PropertyFactory.getProp(elem,data.a||{k:0},0,degToRads,this);\r\n    this.g = new GradientProperty(elem,data.g,this);\r\n    this.style = styleOb;\r\n    this.stops = [];\r\n    this.setGradientData(styleOb.pElem, data);\r\n    this.setGradientOpacity(data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientData = function(pathElement,data){\r\n\r\n    var gradientId = createElementID();\r\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n    gfill.setAttribute('id',gradientId);\r\n    gfill.setAttribute('spreadMethod','pad');\r\n    gfill.setAttribute('gradientUnits','userSpaceOnUse');\r\n    var stops = [];\r\n    var stop, j, jLen;\r\n    jLen = data.g.p*4;\r\n    for(j=0;j<jLen;j+=4){\r\n        stop = createNS('stop');\r\n        gfill.appendChild(stop);\r\n        stops.push(stop);\r\n    }\r\n    pathElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(' + locationHref + '#'+gradientId+')');\r\n    \r\n    this.gf = gfill;\r\n    this.cst = stops;\r\n};\r\n\r\nSVGGradientFillStyleData.prototype.setGradientOpacity = function(data, styleOb){\r\n    if(this.g._hasOpacity && !this.g._collapsable){\r\n        var stop, j, jLen;\r\n        var mask = createNS(\"mask\");\r\n        var maskElement = createNS( 'path');\r\n        mask.appendChild(maskElement);\r\n        var opacityId = createElementID();\r\n        var maskId = createElementID();\r\n        mask.setAttribute('id',maskId);\r\n        var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\r\n        opFill.setAttribute('id',opacityId);\r\n        opFill.setAttribute('spreadMethod','pad');\r\n        opFill.setAttribute('gradientUnits','userSpaceOnUse');\r\n        jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\r\n        var stops = this.stops;\r\n        for(j=data.g.p*4;j<jLen;j+=2){\r\n            stop = createNS('stop');\r\n            stop.setAttribute('stop-color','rgb(255,255,255)');\r\n            opFill.appendChild(stop);\r\n            stops.push(stop);\r\n        }\r\n        maskElement.setAttribute( data.ty === 'gf' ? 'fill':'stroke','url(' + locationHref + '#'+opacityId+')');\r\n        this.of = opFill;\r\n        this.ms = mask;\r\n        this.ost = stops;\r\n        this.maskId = maskId;\r\n        styleOb.msElem = maskElement;\r\n    }\r\n};\r\n\r\nextendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\r\nfunction SVGGradientStrokeStyleData(elem, data, styleOb){\r\n\tthis.initDynamicPropertyContainer(elem);\r\n\tthis.getValue = this.iterateDynamicProperties;\r\n\tthis.w = PropertyFactory.getProp(elem,data.w,0,null,this);\r\n\tthis.d = new DashProperty(elem,data.d||{},'svg',this);\r\n    this.initGradientData(elem, data, styleOb);\r\n    this._isAnimated = !!this._isAnimated;\r\n}\r\n\r\nextendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\r\nfunction ShapeGroupData() {\r\n\tthis.it = [];\r\n    this.prevViewData = [];\r\n    this.gr = createNS('g');\r\n}\r\nvar SVGElementsRenderer = (function() {\r\n\tvar _identityMatrix = new Matrix();\r\n\tvar _matrixHelper = new Matrix();\r\n\r\n\tvar ob = {\r\n\t\tcreateRenderFunction: createRenderFunction\r\n\t};\r\n\r\n\tfunction createRenderFunction(data) {\r\n\t    var ty = data.ty;\r\n\t    switch(data.ty) {\r\n\t        case 'fl':\r\n\t        return renderFill;\r\n\t        case 'gf':\r\n\t        return renderGradient;\r\n\t        case 'gs':\r\n\t        return renderGradientStroke;\r\n\t        case 'st':\r\n\t        return renderStroke;\r\n\t        case 'sh':\r\n\t        case 'el':\r\n\t        case 'rc':\r\n\t        case 'sr':\r\n\t        return renderPath;\r\n\t        case 'tr':\r\n\t        return renderContentTransform;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderContentTransform(styleData, itemData, isFirstFrame) {\r\n\t    if(isFirstFrame || itemData.transform.op._mdf){\r\n\t        itemData.transform.container.setAttribute('opacity',itemData.transform.op.v);\r\n\t    }\r\n\t    if(isFirstFrame || itemData.transform.mProps._mdf){\r\n\t        itemData.transform.container.setAttribute('transform',itemData.transform.mProps.v.to2dCSS());\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderPath(styleData, itemData, isFirstFrame) {\r\n\t    var j, jLen,pathStringTransformed,redraw,pathNodes,l, lLen = itemData.styles.length;\r\n\t    var lvl = itemData.lvl;\r\n\t    var paths, mat, props, iterations, k;\r\n\t    for(l=0;l<lLen;l+=1){\r\n\t        redraw = itemData.sh._mdf || isFirstFrame;\r\n\t        if(itemData.styles[l].lvl < lvl){\r\n\t            mat = _matrixHelper.reset();\r\n\t            iterations = lvl - itemData.styles[l].lvl;\r\n\t            k = itemData.transformers.length-1;\r\n\t            while(!redraw && iterations > 0) {\r\n\t                redraw = itemData.transformers[k].mProps._mdf || redraw;\r\n\t                iterations --;\r\n\t                k --;\r\n\t            }\r\n\t            if(redraw) {\r\n\t                iterations = lvl - itemData.styles[l].lvl;\r\n\t                k = itemData.transformers.length-1;\r\n\t                while(iterations > 0) {\r\n\t                    props = itemData.transformers[k].mProps.v.props;\r\n\t                    mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\t                    iterations --;\r\n\t                    k --;\r\n\t                }\r\n\t            }\r\n\t        } else {\r\n\t            mat = _identityMatrix;\r\n\t        }\r\n\t        paths = itemData.sh.paths;\r\n\t        jLen = paths._length;\r\n\t        if(redraw){\r\n\t            pathStringTransformed = '';\r\n\t            for(j=0;j<jLen;j+=1){\r\n\t                pathNodes = paths.shapes[j];\r\n\t                if(pathNodes && pathNodes._length){\r\n\t                    pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\r\n\t                }\r\n\t            }\r\n\t            itemData.caches[l] = pathStringTransformed;\r\n\t        } else {\r\n\t            pathStringTransformed = itemData.caches[l];\r\n\t        }\r\n\t        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\r\n\t        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\r\n\t    }\r\n\t}\r\n\r\n\tfunction renderFill (styleData,itemData, isFirstFrame){\r\n\t    var styleElem = itemData.style;\r\n\r\n\t    if(itemData.c._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill','rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('fill-opacity',itemData.o.v);\r\n\t    }\r\n\t}\r\n\tfunction renderGradientStroke (styleData, itemData, isFirstFrame) {\r\n\t    renderGradient(styleData, itemData, isFirstFrame);\r\n\t    renderStroke(styleData, itemData, isFirstFrame);\r\n\t}\r\n\r\n\tfunction renderGradient(styleData, itemData, isFirstFrame) {\r\n\t    var gfill = itemData.gf;\r\n\t    var hasOpacity = itemData.g._hasOpacity;\r\n\t    var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n\r\n\t    if (itemData.o._mdf || isFirstFrame) {\r\n\t        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\r\n\t        itemData.style.pElem.setAttribute(attr, itemData.o.v);\r\n\t    }\r\n\t    if (itemData.s._mdf || isFirstFrame) {\r\n\t        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\r\n\t        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\r\n\t        gfill.setAttribute(attr1, pt1[0]);\r\n\t        gfill.setAttribute(attr2, pt1[1]);\r\n\t        if (hasOpacity && !itemData.g._collapsable) {\r\n\t            itemData.of.setAttribute(attr1, pt1[0]);\r\n\t            itemData.of.setAttribute(attr2, pt1[1]);\r\n\t        }\r\n\t    }\r\n\t    var stops, i, len, stop;\r\n\t    if (itemData.g._cmdf || isFirstFrame) {\r\n\t        stops = itemData.cst;\r\n\t        var cValues = itemData.g.c;\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1){\r\n\t            stop = stops[i];\r\n\t            stop.setAttribute('offset', cValues[i * 4] + '%');\r\n\t            stop.setAttribute('stop-color','rgb('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ')');\r\n\t        }\r\n\t    }\r\n\t    if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\r\n\t        var oValues = itemData.g.o;\r\n\t        if(itemData.g._collapsable) {\r\n\t            stops = itemData.cst;\r\n\t        } else {\r\n\t            stops = itemData.ost;\r\n\t        }\r\n\t        len = stops.length;\r\n\t        for (i = 0; i < len; i += 1) {\r\n\t            stop = stops[i];\r\n\t            if(!itemData.g._collapsable) {\r\n\t                stop.setAttribute('offset', oValues[i * 2] + '%');\r\n\t            }\r\n\t            stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\r\n\t        }\r\n\t    }\r\n\t    if (styleData.t === 1) {\r\n\t        if (itemData.e._mdf  || isFirstFrame) {\r\n\t            gfill.setAttribute('x2', pt2[0]);\r\n\t            gfill.setAttribute('y2', pt2[1]);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('x2', pt2[0]);\r\n\t                itemData.of.setAttribute('y2', pt2[1]);\r\n\t            }\r\n\t        }\r\n\t    } else {\r\n\t        var rad;\r\n\t        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\r\n\t            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            gfill.setAttribute('r', rad);\r\n\t            if(hasOpacity && !itemData.g._collapsable){\r\n\t                itemData.of.setAttribute('r', rad);\r\n\t            }\r\n\t        }\r\n\t        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\r\n\t            if (!rad) {\r\n\t                rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n\t            }\r\n\t            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n\t            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n\t            var dist = rad * percent;\r\n\t            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n\t            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n\t            gfill.setAttribute('fx', x);\r\n\t            gfill.setAttribute('fy', y);\r\n\t            if (hasOpacity && !itemData.g._collapsable) {\r\n\t                itemData.of.setAttribute('fx', x);\r\n\t                itemData.of.setAttribute('fy', y);\r\n\t            }\r\n\t        }\r\n\t        //gfill.setAttribute('fy','200');\r\n\t    }\r\n\t}\r\n\tfunction renderStroke(styleData, itemData, isFirstFrame) {\r\n\t    var styleElem = itemData.style;\r\n\t    var d = itemData.d;\r\n\t    if (d && (d._mdf || isFirstFrame) && d.dashStr) {\r\n\t        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\r\n\t        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\r\n\t    }\r\n\t    if(itemData.c && (itemData.c._mdf || isFirstFrame)){\r\n\t        styleElem.pElem.setAttribute('stroke','rgb(' + bm_floor(itemData.c.v[0]) + ',' + bm_floor(itemData.c.v[1]) + ',' + bm_floor(itemData.c.v[2]) + ')');\r\n\t    }\r\n\t    if(itemData.o._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\r\n\t    }\r\n\t    if(itemData.w._mdf || isFirstFrame){\r\n\t        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        if(styleElem.msElem){\r\n\t            styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\r\n\t        }\r\n\t    }\r\n\t}\r\n\treturn ob;\r\n}());\r\nfunction ShapeTransformManager() {\r\n\tthis.sequences = {};\r\n\tthis.sequenceList = [];\r\n    this.transform_key_count = 0;\r\n}\r\n\r\nShapeTransformManager.prototype = {\r\n\taddTransformSequence: function(transforms) {\r\n\t\tvar i, len = transforms.length;\r\n\t\tvar key = '_';\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\tkey += transforms[i].transform.key + '_';\r\n\t\t}\r\n\t\tvar sequence = this.sequences[key];\r\n\t\tif(!sequence) {\r\n\t\t\tsequence = {\r\n\t\t\t\ttransforms: [].concat(transforms),\r\n\t\t\t\tfinalTransform: new Matrix(),\r\n\t\t\t\t_mdf: false\r\n\t\t\t};\r\n\t\t\tthis.sequences[key] = sequence;\r\n\t\t\tthis.sequenceList.push(sequence);\r\n\t\t}\r\n\t\treturn sequence;\r\n\t},\r\n\tprocessSequence: function(sequence, isFirstFrame) {\r\n\t\tvar i = 0, len = sequence.transforms.length, _mdf = isFirstFrame;\r\n\t\twhile (i < len && !isFirstFrame) {\r\n\t\t\tif (sequence.transforms[i].transform.mProps._mdf) {\r\n\t\t\t\t_mdf = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\ti += 1;\r\n\t\t}\r\n\t\tif (_mdf) {\r\n\t\t\tvar props;\r\n\t\t\tsequence.finalTransform.reset();\r\n\t\t\tfor (i = len - 1; i >= 0; i -= 1) {\r\n\t\t        props = sequence.transforms[i].transform.mProps.v.props;\r\n\t\t        sequence.finalTransform.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\r\n\t\t\t}\r\n\t\t}\r\n\t\tsequence._mdf = _mdf;\r\n\t\t\r\n\t},\r\n\tprocessSequences: function(isFirstFrame) {\r\n\t\tvar i, len = this.sequenceList.length;\r\n\t\tfor (i = 0; i < len; i += 1) {\r\n\t\t\tthis.processSequence(this.sequenceList[i], isFirstFrame);\r\n\t\t}\r\n\r\n\t},\r\n\tgetNewKey: function() {\r\n\t\treturn '_' + this.transform_key_count++;\r\n\t}\r\n};\r\nfunction CVShapeData(element, data, styles, transformsManager) {\r\n    this.styledShapes = [];\r\n    this.tr = [0,0,0,0,0,0];\r\n    var ty = 4;\r\n    if(data.ty == 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty == 'el'){\r\n        ty = 6;\r\n    }else if(data.ty == 'sr'){\r\n        ty = 7;\r\n    }\r\n    this.sh = ShapePropertyFactory.getShapeProp(element,data,ty,element);\r\n    var i , len = styles.length,styledShape;\r\n    for (i = 0; i < len; i += 1) {\r\n        if (!styles[i].closed) {\r\n            styledShape = {\r\n                transforms: transformsManager.addTransformSequence(styles[i].transforms),\r\n                trNodes: []\r\n            };\r\n            this.styledShapes.push(styledShape);\r\n            styles[i].elements.push(styledShape);\r\n        }\r\n    }\r\n}\r\n\r\nCVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\r\nfunction BaseElement(){\r\n}\r\n\r\nBaseElement.prototype = {\r\n    checkMasks: function(){\r\n        if(!this.data.hasMask){\r\n            return false;\r\n        }\r\n        var i = 0, len = this.data.masksProperties.length;\r\n        while(i<len) {\r\n            if((this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false)) {\r\n                return true;\r\n            }\r\n            i += 1;\r\n        }\r\n        return false;\r\n    },\r\n    initExpressions: function(){\r\n        this.layerInterface = LayerExpressionInterface(this);\r\n        if(this.data.hasMask && this.maskManager) {\r\n            this.layerInterface.registerMaskInterface(this.maskManager);\r\n        }\r\n        var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);\r\n        this.layerInterface.registerEffectsInterface(effectsInterface);\r\n\r\n        if(this.data.ty === 0 || this.data.xt){\r\n            this.compInterface = CompExpressionInterface(this);\r\n        } else if(this.data.ty === 4){\r\n            this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface);\r\n            this.layerInterface.content = this.layerInterface.shapeInterface;\r\n        } else if(this.data.ty === 5){\r\n            this.layerInterface.textInterface = TextExpressionInterface(this);\r\n            this.layerInterface.text = this.layerInterface.textInterface;\r\n        }\r\n    },\r\n    setBlendMode: function(){\r\n        var blendModeValue = getBlendMode(this.data.bm);\r\n        var elem = this.baseElement || this.layerElement;\r\n\r\n        elem.style['mix-blend-mode'] = blendModeValue;\r\n    },\r\n    initBaseData: function(data, globalData, comp){\r\n        this.globalData = globalData;\r\n        this.comp = comp;\r\n        this.data = data;\r\n        this.layerId = createElementID();\r\n        \r\n        //Stretch factor for old animations missing this property.\r\n        if(!this.data.sr){\r\n            this.data.sr = 1;\r\n        }\r\n        // effects manager\r\n        this.effectsManager = new EffectsManager(this.data,this,this.dynamicProperties);\r\n        \r\n    },\r\n    getType: function(){\r\n        return this.type;\r\n    }\r\n    ,sourceRectAtTime: function(){}\r\n};\r\nfunction NullElement(data,globalData,comp){\r\n    this.initFrame();\r\n\tthis.initBaseData(data, globalData, comp);\r\n    this.initFrame();\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n}\r\n\r\nNullElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nNullElement.prototype.renderFrame = function() {\r\n};\r\n\r\nNullElement.prototype.getBaseElement = function() {\r\n\treturn null;\r\n};\r\n\r\nNullElement.prototype.destroy = function() {\r\n};\r\n\r\nNullElement.prototype.sourceRectAtTime = function() {\r\n};\r\n\r\nNullElement.prototype.hide = function() {\r\n};\r\n\r\nextendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement], NullElement);\r\n\r\nfunction SVGBaseElement(){\r\n}\r\n\r\nSVGBaseElement.prototype = {\r\n    initRendererElement: function() {\r\n        this.layerElement = createNS('g');\r\n    },\r\n    createContainerElements: function(){\r\n        this.matteElement = createNS('g');\r\n        this.transformedElement = this.layerElement;\r\n        this.maskedElement = this.layerElement;\r\n        this._sizeChanged = false;\r\n        var layerElementParent = null;\r\n        //If this layer acts as a mask for the following layer\r\n        var filId, fil, gg;\r\n        if (this.data.td) {\r\n            if (this.data.td == 3 || this.data.td == 1) {\r\n                var masker = createNS('mask');\r\n                masker.setAttribute('id', this.layerId);\r\n                masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha');\r\n                masker.appendChild(this.layerElement);\r\n                layerElementParent = masker;\r\n                this.globalData.defs.appendChild(masker);\r\n                // This is only for IE and Edge when mask if of type alpha\r\n                if (!featureSupport.maskType && this.data.td == 1) {\r\n                    masker.setAttribute('mask-type', 'luminance');\r\n                    filId = createElementID();\r\n                    fil = filtersFactory.createFilter(filId);\r\n                    this.globalData.defs.appendChild(fil);\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    masker.appendChild(gg);\r\n                    gg.setAttribute('filter','url(' + locationHref + '#' + filId + ')');\r\n                }\r\n            } else if(this.data.td == 2) {\r\n                var maskGroup = createNS('mask');\r\n                maskGroup.setAttribute('id', this.layerId);\r\n                maskGroup.setAttribute('mask-type','alpha');\r\n                var maskGrouper = createNS('g');\r\n                maskGroup.appendChild(maskGrouper);\r\n                filId = createElementID();\r\n                fil = filtersFactory.createFilter(filId);\r\n                ////\r\n\r\n                // This solution doesn't work on Android when meta tag with viewport attribute is set\r\n                /*var feColorMatrix = createNS('feColorMatrix');\r\n                feColorMatrix.setAttribute('type', 'matrix');\r\n                feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                fil.appendChild(feColorMatrix);*/\r\n                ////\r\n                var feCTr = createNS('feComponentTransfer');\r\n                feCTr.setAttribute('in','SourceGraphic');\r\n                fil.appendChild(feCTr);\r\n                var feFunc = createNS('feFuncA');\r\n                feFunc.setAttribute('type','table');\r\n                feFunc.setAttribute('tableValues','1.0 0.0');\r\n                feCTr.appendChild(feFunc);\r\n                ////\r\n                this.globalData.defs.appendChild(fil);\r\n                var alphaRect = createNS('rect');\r\n                alphaRect.setAttribute('width',  this.comp.data.w);\r\n                alphaRect.setAttribute('height', this.comp.data.h);\r\n                alphaRect.setAttribute('x','0');\r\n                alphaRect.setAttribute('y','0');\r\n                alphaRect.setAttribute('fill','#ffffff');\r\n                alphaRect.setAttribute('opacity','0');\r\n                maskGrouper.setAttribute('filter', 'url(' + locationHref + '#'+filId+')');\r\n                maskGrouper.appendChild(alphaRect);\r\n                maskGrouper.appendChild(this.layerElement);\r\n                layerElementParent = maskGrouper;\r\n                if (!featureSupport.maskType) {\r\n                    maskGroup.setAttribute('mask-type', 'luminance');\r\n                    fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\r\n                    gg = createNS('g');\r\n                    maskGrouper.appendChild(alphaRect);\r\n                    gg.appendChild(this.layerElement);\r\n                    layerElementParent = gg;\r\n                    maskGrouper.appendChild(gg);\r\n                }\r\n                this.globalData.defs.appendChild(maskGroup);\r\n            }\r\n        } else if (this.data.tt) {\r\n            this.matteElement.appendChild(this.layerElement);\r\n            layerElementParent = this.matteElement;\r\n            this.baseElement = this.matteElement;\r\n        } else {\r\n            this.baseElement = this.layerElement;\r\n        }\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id', this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        //Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\r\n        if (this.data.ty === 0 && !this.data.hd) {\r\n            var cp = createNS( 'clipPath');\r\n            var pt = createNS('path');\r\n            pt.setAttribute('d','M0,0 L' + this.data.w + ',0' + ' L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\r\n            var clipId = createElementID();\r\n            cp.setAttribute('id',clipId);\r\n            cp.appendChild(pt);\r\n            this.globalData.defs.appendChild(cp);\r\n\r\n            if (this.checkMasks()) {\r\n                var cpGroup = createNS('g');\r\n                cpGroup.setAttribute('clip-path','url(' + locationHref + '#'+clipId + ')');\r\n                cpGroup.appendChild(this.layerElement);\r\n                this.transformedElement = cpGroup;\r\n                if (layerElementParent) {\r\n                    layerElementParent.appendChild(this.transformedElement);\r\n                } else {\r\n                    this.baseElement = this.transformedElement;\r\n                }\r\n            } else {\r\n                this.layerElement.setAttribute('clip-path','url(' + locationHref + '#'+clipId+')');\r\n            }\r\n            \r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n\r\n    },\r\n    renderElement: function() {\r\n        if (this.finalTransform._matMdf) {\r\n            this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\r\n        }\r\n        if (this.finalTransform._opMdf) {\r\n            this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\r\n        }\r\n    },\r\n    destroyBaseElement: function() {\r\n        this.layerElement = null;\r\n        this.matteElement = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    getBaseElement: function() {\r\n        if (this.data.hd) {\r\n            return null;\r\n        }\r\n        return this.baseElement;\r\n    },\r\n    createRenderableComponents: function() {\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n        this.renderableEffectsManager = new SVGEffects(this);\r\n    },\r\n    setMatte: function(id) {\r\n        if (!this.matteElement) {\r\n            return;\r\n        }\r\n        this.matteElement.setAttribute(\"mask\", \"url(\" + locationHref + \"#\" + id + \")\");\r\n    }\r\n};\r\nfunction IShapeElement(){\r\n}\r\n\r\nIShapeElement.prototype = {\r\n    addShapeToModifiers: function(data) {\r\n        var i, len = this.shapeModifiers.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapeModifiers[i].addShape(data);\r\n        }\r\n    },\r\n    isShapeInAnimatedModifiers: function(data) {\r\n        var i = 0, len = this.shapeModifiers.length;\r\n        while(i < len) {\r\n            if(this.shapeModifiers[i].isAnimatedWithShape(data)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n    renderModifiers: function() {\r\n        if(!this.shapeModifiers.length){\r\n            return;\r\n        }\r\n        var i, len = this.shapes.length;\r\n        for(i=0;i<len;i+=1){\r\n            this.shapes[i].sh.reset();\r\n        }\r\n\r\n        len = this.shapeModifiers.length;\r\n        for(i=len-1;i>=0;i-=1){\r\n            this.shapeModifiers[i].processShapes(this._isFirstFrame);\r\n        }\r\n    },\r\n    lcEnum: {\r\n        '1': 'butt',\r\n        '2': 'round',\r\n        '3': 'square'\r\n    },\r\n    ljEnum: {\r\n        '1': 'miter',\r\n        '2': 'round',\r\n        '3': 'bevel'\r\n    },\r\n    searchProcessedElement: function(elem){\r\n        var elements = this.processedElements;\r\n        var i = 0, len = elements.length;\r\n        while (i < len) {\r\n            if (elements[i].elem === elem) {\r\n                return elements[i].pos;\r\n            }\r\n            i += 1;\r\n        }\r\n        return 0;\r\n    },\r\n    addProcessedElement: function(elem, pos){\r\n        var elements = this.processedElements;\r\n        var i = elements.length;\r\n        while(i) {\r\n            i -= 1;\r\n            if (elements[i].elem === elem) {\r\n                elements[i].pos = pos;\r\n                return;\r\n            }\r\n        }\r\n        elements.push(new ProcessedElement(elem, pos));\r\n    },\r\n    prepareFrame: function(num) {\r\n        this.prepareRenderableFrame(num);\r\n        this.prepareProperties(num, this.isInRange);\r\n    }\r\n};\r\nfunction ITextElement(){\r\n}\r\n\r\nITextElement.prototype.initElement = function(data,globalData,comp){\r\n    this.lettersChangedFlag = true;\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\r\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initHierarchy();\r\n    this.initRenderable();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    this.createContent();\r\n    this.hide();\r\n    this.textAnimator.searchProperties(this.dynamicProperties);\r\n};\r\n\r\nITextElement.prototype.prepareFrame = function(num) {\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(this.textProperty._mdf || this.textProperty._isFirstFrame) {\r\n        this.buildNewText();\r\n        this.textProperty._isFirstFrame = false;\r\n        this.textProperty._mdf = false;\r\n    }\r\n};\r\n\r\nITextElement.prototype.createPathShape = function(matrixHelper, shapes) {\r\n    var j,jLen = shapes.length;\r\n    var pathNodes;\r\n    var shapeStr = '';\r\n    for(j=0;j<jLen;j+=1){\r\n        pathNodes = shapes[j].ks.k;\r\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\r\n    }\r\n    return shapeStr;\r\n};\r\n\r\nITextElement.prototype.updateDocumentData = function(newData, index) {\r\n    this.textProperty.updateDocumentData(newData, index);\r\n};\r\n\r\nITextElement.prototype.canResizeFont = function(_canResize) {\r\n    this.textProperty.canResizeFont(_canResize);\r\n};\r\n\r\nITextElement.prototype.setMinimumFontSize = function(_fontSize) {\r\n    this.textProperty.setMinimumFontSize(_fontSize);\r\n};\r\n\r\nITextElement.prototype.applyTextPropertiesToMatrix = function(documentData, matrixHelper, lineNumber, xPos, yPos) {\r\n    if(documentData.ps){\r\n        matrixHelper.translate(documentData.ps[0],documentData.ps[1] + documentData.ascent,0);\r\n    }\r\n    matrixHelper.translate(0,-documentData.ls,0);\r\n    switch(documentData.j){\r\n        case 1:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]),0,0);\r\n            break;\r\n        case 2:\r\n            matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber] )/2,0,0);\r\n            break;\r\n    }\r\n    matrixHelper.translate(xPos, yPos, 0);\r\n};\r\n\r\n\r\nITextElement.prototype.buildColor = function(colorData) {\r\n    return 'rgb(' + Math.round(colorData[0]*255) + ',' + Math.round(colorData[1]*255) + ',' + Math.round(colorData[2]*255) + ')';\r\n};\r\n\r\nITextElement.prototype.emptyProp = new LetterProps();\r\n\r\nITextElement.prototype.destroy = function(){\r\n    \r\n};\r\nfunction ICompElement(){}\r\n\r\nextendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\r\n\r\nICompElement.prototype.initElement = function(data,globalData,comp) {\r\n    this.initFrame();\r\n    this.initBaseData(data, globalData, comp);\r\n    this.initTransform(data, globalData, comp);\r\n    this.initRenderable();\r\n    this.initHierarchy();\r\n    this.initRendererElement();\r\n    this.createContainerElements();\r\n    this.createRenderableComponents();\r\n    if(this.data.xt || !globalData.progressiveLoad){\r\n        this.buildAllItems();\r\n    }\r\n    this.hide();\r\n};\r\n\r\n/*ICompElement.prototype.hide = function(){\r\n    if(!this.hidden){\r\n        this.hideElement();\r\n        var i,len = this.elements.length;\r\n        for( i = 0; i < len; i+=1 ){\r\n            if(this.elements[i]){\r\n                this.elements[i].hide();\r\n            }\r\n        }\r\n    }\r\n};*/\r\n\r\nICompElement.prototype.prepareFrame = function(num){\r\n    this._mdf = false;\r\n    this.prepareRenderableFrame(num);\r\n    this.prepareProperties(num, this.isInRange);\r\n    if(!this.isInRange && !this.data.xt){\r\n        return;\r\n    }\r\n\r\n    if (!this.tm._placeholder) {\r\n        var timeRemapped = this.tm.v;\r\n        if(timeRemapped === this.data.op){\r\n            timeRemapped = this.data.op - 1;\r\n        }\r\n        this.renderedFrame = timeRemapped;\r\n    } else {\r\n        this.renderedFrame = num/this.data.sr;\r\n    }\r\n    var i,len = this.elements.length;\r\n    if(!this.completeLayers){\r\n        this.checkLayers(this.renderedFrame);\r\n    }\r\n    //This iteration needs to be backwards because of how expressions connect between each other\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\r\n            if(this.elements[i]._mdf) {\r\n                this._mdf = true;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i += 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.setElements = function(elems){\r\n    this.elements = elems;\r\n};\r\n\r\nICompElement.prototype.getElements = function(){\r\n    return this.elements;\r\n};\r\n\r\nICompElement.prototype.destroyElements = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = 0; i < len; i+=1 ){\r\n        if(this.elements[i]){\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n};\r\n\r\nICompElement.prototype.destroy = function(){\r\n    this.destroyElements();\r\n    this.destroyBaseElement();\r\n};\r\n\r\nfunction IImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n    this.sourceRect = {top:0,left:0,width:this.assetData.w,height:this.assetData.h};\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], IImageElement);\r\n\r\nIImageElement.prototype.createContent = function(){\r\n\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n\r\n    this.innerElem = createNS('image');\r\n    this.innerElem.setAttribute('width',this.assetData.w+\"px\");\r\n    this.innerElem.setAttribute('height',this.assetData.h+\"px\");\r\n    this.innerElem.setAttribute('preserveAspectRatio',this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\r\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n    \r\n    this.layerElement.appendChild(this.innerElem);\r\n};\r\n\r\nIImageElement.prototype.sourceRectAtTime = function() {\r\n\treturn this.sourceRect;\r\n};\r\nfunction ISolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([IImageElement], ISolidElement);\r\n\r\nISolidElement.prototype.createContent = function(){\r\n\r\n    var rect = createNS('rect');\r\n    ////rect.style.width = this.data.sw;\r\n    ////rect.style.height = this.data.sh;\r\n    ////rect.style.fill = this.data.sc;\r\n    rect.setAttribute('width',this.data.sw);\r\n    rect.setAttribute('height',this.data.sh);\r\n    rect.setAttribute('fill',this.data.sc);\r\n    this.layerElement.appendChild(rect);\r\n};\r\nfunction SVGCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = true;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    //this.layerElement = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([SVGRenderer, ICompElement, SVGBaseElement], SVGCompElement);\r\nfunction SVGTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.renderType = 'svg';\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], SVGTextElement);\r\n\r\nSVGTextElement.prototype.createContent = function(){\r\n\r\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\r\n        this.textContainer = createNS('text');\r\n    }\r\n};\r\n\r\nSVGTextElement.prototype.buildTextContents = function(textArray) {\r\n    var i = 0, len = textArray.length;\r\n    var textContents = [], currentTextContent = '';\r\n    while (i < len) {\r\n        if(textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\r\n            textContents.push(currentTextContent);\r\n            currentTextContent = '';\r\n        } else {\r\n            currentTextContent += textArray[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    textContents.push(currentTextContent);\r\n    return textContents;\r\n};\r\n\r\nSVGTextElement.prototype.buildNewText = function(){\r\n    var i, len;\r\n\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\r\n    if(documentData.fc) {\r\n        this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\r\n    }else{\r\n        this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\r\n    }\r\n    if(documentData.sc){\r\n        this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\r\n        this.layerElement.setAttribute('stroke-width', documentData.sw);\r\n    }\r\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(fontData.fClass){\r\n        this.layerElement.setAttribute('class',fontData.fClass);\r\n    } else {\r\n        this.layerElement.setAttribute('font-family', fontData.fFamily);\r\n        var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n        this.layerElement.setAttribute('font-style', fStyle);\r\n        this.layerElement.setAttribute('font-weight', fWeight);\r\n    }\r\n    this.layerElement.setAttribute('aria-label', documentData.t);\r\n\r\n    var letters = documentData.l || [];\r\n    var usesGlyphs = !!this.globalData.fontManager.chars;\r\n    len = letters.length;\r\n\r\n    var tSpan;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '', singleShape = this.data.singleShape;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    if(singleShape && !usesGlyphs && !documentData.sz) {\r\n        var tElement = this.textContainer;\r\n        var justify = 'start';\r\n        switch(documentData.j) {\r\n            case 1:\r\n                justify = 'end';\r\n                break;\r\n            case 2:\r\n                justify = 'middle';\r\n                break;\r\n        }\r\n        tElement.setAttribute('text-anchor',justify);\r\n        tElement.setAttribute('letter-spacing',trackingOffset);\r\n        var textContent = this.buildTextContents(documentData.finalText);\r\n        len = textContent.length;\r\n        yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\r\n        for ( i = 0; i < len; i += 1) {\r\n            tSpan = this.textSpans[i] || createNS('tspan');\r\n            tSpan.textContent = textContent[i];\r\n            tSpan.setAttribute('x', 0);\r\n            tSpan.setAttribute('y', yPos);\r\n            tSpan.style.display = 'inherit';\r\n            tElement.appendChild(tSpan);\r\n            this.textSpans[i] = tSpan;\r\n            yPos += documentData.finalLineHeight;\r\n        }\r\n        \r\n        this.layerElement.appendChild(tElement);\r\n    } else {\r\n        var cachedSpansLength = this.textSpans.length;\r\n        var shapeData, charData;\r\n        for (i = 0; i < len; i += 1) {\r\n            if(!usesGlyphs || !singleShape || i === 0){\r\n                tSpan = cachedSpansLength > i ? this.textSpans[i] : createNS(usesGlyphs?'path':'text');\r\n                if (cachedSpansLength <= i) {\r\n                    tSpan.setAttribute('stroke-linecap', 'butt');\r\n                    tSpan.setAttribute('stroke-linejoin','round');\r\n                    tSpan.setAttribute('stroke-miterlimit','4');\r\n                    this.textSpans[i] = tSpan;\r\n                    this.layerElement.appendChild(tSpan);\r\n                }\r\n                tSpan.style.display = 'inherit';\r\n            }\r\n            \r\n            matrixHelper.reset();\r\n            matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\r\n            if (singleShape) {\r\n                if(letters[i].n) {\r\n                    xPos = -trackingOffset;\r\n                    yPos += documentData.yOffset;\r\n                    yPos += firstLine ? 1 : 0;\r\n                    firstLine = false;\r\n                }\r\n                this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n                xPos += letters[i].l || 0;\r\n                //xPos += letters[i].val === ' ' ? 0 : trackingOffset;\r\n                xPos += trackingOffset;\r\n            }\r\n            if(usesGlyphs) {\r\n                charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n                shapeData = charData && charData.data || {};\r\n                shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n                if(!singleShape){\r\n                    tSpan.setAttribute('d',this.createPathShape(matrixHelper,shapes));\r\n                } else {\r\n                    shapeStr += this.createPathShape(matrixHelper,shapes);\r\n                }\r\n            } else {\r\n                if(singleShape) {\r\n                    tSpan.setAttribute(\"transform\", \"translate(\" + matrixHelper.props[12] + \",\" + matrixHelper.props[13] + \")\");\r\n                }\r\n                tSpan.textContent = letters[i].val;\r\n                tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            }\r\n            //\r\n        }\r\n        if (singleShape && tSpan) {\r\n            tSpan.setAttribute('d',shapeStr);\r\n        }\r\n    }\r\n    while (i < this.textSpans.length){\r\n        this.textSpans[i].style.display = 'none';\r\n        i += 1;\r\n    }\r\n    \r\n    this._sizeChanged = true;\r\n};\r\n\r\nSVGTextElement.prototype.sourceRectAtTime = function(time){\r\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\r\n    this.renderInnerContent();\r\n    if(this._sizeChanged){\r\n        this._sizeChanged = false;\r\n        var textBox = this.layerElement.getBBox();\r\n        this.bbox = {\r\n            top: textBox.y,\r\n            left: textBox.x,\r\n            width: textBox.width,\r\n            height: textBox.height\r\n        };\r\n    }\r\n    return this.bbox;\r\n};\r\n\r\nSVGTextElement.prototype.renderInnerContent = function(){\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n        if(this.lettersChangedFlag || this.textAnimator.lettersChangedFlag){\r\n            this._sizeChanged = true;\r\n            var  i,len;\r\n            var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n            var letters = this.textProperty.currentData.l;\r\n\r\n            len = letters.length;\r\n            var renderedLetter, textSpan;\r\n            for(i=0;i<len;i+=1){\r\n                if(letters[i].n){\r\n                    continue;\r\n                }\r\n                renderedLetter = renderedLetters[i];\r\n                textSpan = this.textSpans[i];\r\n                if(renderedLetter._mdf.m) {\r\n                    textSpan.setAttribute('transform',renderedLetter.m);\r\n                }\r\n                if(renderedLetter._mdf.o) {\r\n                    textSpan.setAttribute('opacity',renderedLetter.o);\r\n                }\r\n                if(renderedLetter._mdf.sw){\r\n                    textSpan.setAttribute('stroke-width',renderedLetter.sw);\r\n                }\r\n                if(renderedLetter._mdf.sc){\r\n                    textSpan.setAttribute('stroke',renderedLetter.sc);\r\n                }\r\n                if(renderedLetter._mdf.fc){\r\n                    textSpan.setAttribute('fill',renderedLetter.fc);\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nfunction SVGShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    // List of animated components\r\n    this.animatedContents = [];\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement], SVGShapeElement);\r\n\r\nSVGShapeElement.prototype.initSecondaryElement = function() {\r\n};\r\n\r\nSVGShapeElement.prototype.identityMatrix = new Matrix();\r\n\r\nSVGShapeElement.prototype.buildExpressionInterface = function(){};\r\n\r\nSVGShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n};\r\n\r\n/*\r\nThis method searches for multiple shapes that affect a single element and one of them is animated\r\n*/\r\nSVGShapeElement.prototype.filterUniqueShapes = function(){\r\n    var i, len = this.shapes.length, shape;\r\n    var j, jLen = this.stylesList.length;\r\n    var style;\r\n    var tempShapes = [];\r\n    var areAnimated = false;\r\n    for(j = 0; j < jLen; j += 1) {\r\n        style = this.stylesList[j];\r\n        areAnimated = false;\r\n        tempShapes.length = 0;\r\n        for(i = 0; i < len; i += 1) {\r\n            shape = this.shapes[i];\r\n            if(shape.styles.indexOf(style) !== -1) {\r\n                tempShapes.push(shape);\r\n                areAnimated = shape._isAnimated || areAnimated;\r\n            }\r\n        }\r\n        if(tempShapes.length > 1 && areAnimated) {\r\n            this.setShapesAsAnimated(tempShapes);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.setShapesAsAnimated = function(shapes){\r\n    var i, len = shapes.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        shapes[i].setAsAnimated();\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.createStyleElement = function(data, level){\r\n    //TODO: prevent drawing of hidden styles\r\n    var elementData;\r\n    var styleOb = new SVGStyleData(data, level);\r\n\r\n    var pathElement = styleOb.pElem;\r\n    if(data.ty === 'st') {\r\n        elementData = new SVGStrokeStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'fl') {\r\n        elementData = new SVGFillStyleData(this, data, styleOb);\r\n    } else if(data.ty === 'gf' || data.ty === 'gs') {\r\n        var gradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\r\n        elementData = new gradientConstructor(this, data, styleOb);\r\n        this.globalData.defs.appendChild(elementData.gf);\r\n        if (elementData.maskId) {\r\n            this.globalData.defs.appendChild(elementData.ms);\r\n            this.globalData.defs.appendChild(elementData.of);\r\n            pathElement.setAttribute('mask','url(' + locationHref + '#' + elementData.maskId + ')');\r\n        }\r\n    }\r\n    \r\n    if(data.ty === 'st' || data.ty === 'gs') {\r\n        pathElement.setAttribute('stroke-linecap', this.lcEnum[data.lc] || 'round');\r\n        pathElement.setAttribute('stroke-linejoin',this.ljEnum[data.lj] || 'round');\r\n        pathElement.setAttribute('fill-opacity','0');\r\n        if(data.lj === 1) {\r\n            pathElement.setAttribute('stroke-miterlimit',data.ml);\r\n        }\r\n    }\r\n\r\n    if(data.r === 2) {\r\n        pathElement.setAttribute('fill-rule', 'evenodd');\r\n    }\r\n\r\n    if(data.ln){\r\n        pathElement.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        pathElement.setAttribute('class',data.cl);\r\n    }\r\n    if(data.bm){\r\n        pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n    this.stylesList.push(styleOb);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = new ShapeGroupData();\r\n    if(data.ln){\r\n        elementData.gr.setAttribute('id',data.ln);\r\n    }\r\n    if(data.cl){\r\n        elementData.gr.setAttribute('class',data.cl);\r\n    }\r\n    if(data.bm){\r\n        elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\r\n    }\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createTransformElement = function(data, container) {\r\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this,data,this);\r\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.createShapeElement = function(data, ownTransformers, level) {\r\n    var ty = 4;\r\n    if(data.ty === 'rc'){\r\n        ty = 5;\r\n    }else if(data.ty === 'el'){\r\n        ty = 6;\r\n    }else if(data.ty === 'sr'){\r\n        ty = 7;\r\n    }\r\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this,data,ty,this);\r\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    this.addToAnimatedContents(data, elementData);\r\n    return elementData;\r\n};\r\n\r\nSVGShapeElement.prototype.addToAnimatedContents = function(data, element) {\r\n    var i = 0, len = this.animatedContents.length;\r\n    while(i < len) {\r\n        if(this.animatedContents[i].element === element) {\r\n            return;\r\n        }\r\n        i += 1;\r\n    }\r\n    this.animatedContents.push({\r\n        fn: SVGElementsRenderer.createRenderFunction(data),\r\n        element: element,\r\n        data: data\r\n    });\r\n};\r\n\r\nSVGShapeElement.prototype.setElementStyles = function(elementData){\r\n    var arr = elementData.styles;\r\n    var j, jLen = this.stylesList.length;\r\n    for (j = 0; j < jLen; j += 1) {\r\n        if (!this.stylesList[j].closed) {\r\n            arr.push(this.stylesList[j]);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.reloadShapes = function(){\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for( i = 0; i < len; i += 1) {\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement, 0, [], true);\r\n    this.filterUniqueShapes();\r\n    len = this.dynamicProperties.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n};\r\n\r\nSVGShapeElement.prototype.searchShapes = function(arr,itemsData,prevViewData,container, level, transformers, render){\r\n    var ownTransformers = [].concat(transformers);\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], currentTransform, modifier, processedPos;\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._render = render;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st' || arr[i].ty == 'gf' || arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], level);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].style.pElem);\r\n            }\r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr, level + 1, ownTransformers, render);\r\n            if(arr[i]._render){\r\n                container.appendChild(itemsData[i].gr);\r\n            }\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createTransformElement(arr[i], container);\r\n            }\r\n            currentTransform = itemsData[i].transform;\r\n            ownTransformers.push(currentTransform);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\r\n            }\r\n            this.setElementStyles(itemsData[i]);\r\n\r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd' || arr[i].ty == 'ms'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                render = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    len = ownStyles.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownStyles[i].closed = true;\r\n    }\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderInnerContent = function() {\r\n    this.renderModifiers();\r\n    var i, len = this.stylesList.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.stylesList[i].reset();\r\n    }\r\n    this.renderShape();\r\n\r\n    for (i = 0; i < len; i += 1) {\r\n        if (this.stylesList[i]._mdf || this._isFirstFrame) {\r\n            if(this.stylesList[i].msElem){\r\n                this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d);\r\n                //Adding M0 0 fixes same mask bug on all browsers\r\n                this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\r\n            }\r\n            this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.renderShape = function() {\r\n    var i, len = this.animatedContents.length;\r\n    var animatedContent;\r\n    for(i = 0; i < len; i += 1) {\r\n        animatedContent = this.animatedContents[i];\r\n        if((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\r\n            animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\r\n        }\r\n    }\r\n};\r\n\r\nSVGShapeElement.prototype.destroy = function(){\r\n    this.destroyBaseElement();\r\n    this.shapesData = null;\r\n    this.itemsData = null;\r\n};\r\n\r\nfunction SVGTintFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f2');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n    if(filterManager.effectElements[2].p.v !== 100 || filterManager.effectElements[2].p.k){\r\n        var feMerge = createNS('feMerge');\r\n        filter.appendChild(feMerge);\r\n        var feMergeNode;\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','SourceGraphic');\r\n        feMerge.appendChild(feMergeNode);\r\n        feMergeNode = createNS('feMergeNode');\r\n        feMergeNode.setAttribute('in','f2');\r\n        feMerge.appendChild(feMergeNode);\r\n    }\r\n}\r\n\r\nSVGTintFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var colorBlack = this.filterManager.effectElements[0].p.v;\r\n        var colorWhite = this.filterManager.effectElements[1].p.v;\r\n        var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\r\nfunction SVGFillFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','sRGB');\r\n    feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\r\n    filter.appendChild(feColorMatrix);\r\n    this.matrixFilter = feColorMatrix;\r\n}\r\nSVGFillFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color = this.filterManager.effectElements[2].p.v;\r\n        var opacity = this.filterManager.effectElements[6].p.v;\r\n        this.matrixFilter.setAttribute('values','0 0 0 0 '+color[0]+' 0 0 0 0 '+color[1]+' 0 0 0 0 '+color[2]+' 0 0 0 '+opacity+' 0');\r\n    }\r\n};\r\nfunction SVGGaussianBlurEffect(filter, filterManager){\r\n    // Outset the filter region by 100% on all sides to accommodate blur expansion.\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','300%');\r\n    filter.setAttribute('height','300%');\r\n\r\n    this.filterManager = filterManager;\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    filter.appendChild(feGaussianBlur);\r\n    this.feGaussianBlur = feGaussianBlur;\r\n}\r\n\r\nSVGGaussianBlurEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        // Empirical value, matching AE's blur appearance.\r\n        var kBlurrinessToSigma = 0.3;\r\n        var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma;\r\n\r\n        // Dimensions mapping:\r\n        //\r\n        //   1 -> horizontal & vertical\r\n        //   2 -> horizontal only\r\n        //   3 -> vertical only\r\n        //\r\n        var dimensions = this.filterManager.effectElements[1].p.v;\r\n        var sigmaX = (dimensions == 3) ? 0 : sigma;\r\n        var sigmaY = (dimensions == 2) ? 0 : sigma;\r\n\r\n        this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + \" \" + sigmaY);\r\n\r\n        // Repeat edges mapping:\r\n        //\r\n        //   0 -> off -> duplicate\r\n        //   1 -> on  -> wrap\r\n        var edgeMode = (this.filterManager.effectElements[2].p.v == 1) ? 'wrap' : 'duplicate';\r\n        this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\r\n    }\r\n};\r\nfunction SVGStrokeEffect(elem, filterManager){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.elem = elem;\r\n    this.paths = [];\r\n}\r\n\r\nSVGStrokeEffect.prototype.initialize = function(){\r\n\r\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n    var path,groupPath, i, len;\r\n    if(this.filterManager.effectElements[1].p.v === 1){\r\n        len = this.elem.maskManager.masksProperties.length;\r\n        i = 0;\r\n    } else {\r\n        i = this.filterManager.effectElements[0].p.v - 1;\r\n        len = i + 1;\r\n    }\r\n    groupPath = createNS('g'); \r\n    groupPath.setAttribute('fill','none');\r\n    groupPath.setAttribute('stroke-linecap','round');\r\n    groupPath.setAttribute('stroke-dashoffset',1);\r\n    for(i;i<len;i+=1){\r\n        path = createNS('path');\r\n        groupPath.appendChild(path);\r\n        this.paths.push({p:path,m:i});\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 3){\r\n        var mask = createNS('mask');\r\n        var id = createElementID();\r\n        mask.setAttribute('id',id);\r\n        mask.setAttribute('mask-type','alpha');\r\n        mask.appendChild(groupPath);\r\n        this.elem.globalData.defs.appendChild(mask);\r\n        var g = createNS('g');\r\n        g.setAttribute('mask','url(' + locationHref + '#'+id+')');\r\n        while (elemChildren[0]) {\r\n            g.appendChild(elemChildren[0]);\r\n        }\r\n        this.elem.layerElement.appendChild(g);\r\n        this.masker = mask;\r\n        groupPath.setAttribute('stroke','#fff');\r\n    } else if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(this.filterManager.effectElements[10].p.v === 2){\r\n            elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\r\n            while(elemChildren.length){\r\n                this.elem.layerElement.removeChild(elemChildren[0]);\r\n            }\r\n        }\r\n        this.elem.layerElement.appendChild(groupPath);\r\n        this.elem.layerElement.removeAttribute('mask');\r\n        groupPath.setAttribute('stroke','#fff');\r\n    }\r\n    this.initialized = true;\r\n    this.pathMasker = groupPath;\r\n};\r\n\r\nSVGStrokeEffect.prototype.renderFrame = function(forceRender){\r\n    if(!this.initialized){\r\n        this.initialize();\r\n    }\r\n    var i, len = this.paths.length;\r\n    var mask, path;\r\n    for(i=0;i<len;i+=1){\r\n        if(this.paths[i].m === -1) {\r\n            continue;\r\n        }\r\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\r\n        path = this.paths[i].p;\r\n        if(forceRender || this.filterManager._mdf || mask.prop._mdf){\r\n            path.setAttribute('d',mask.lastPath);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf){\r\n            var dasharrayValue;\r\n            if(this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100){\r\n                var s = Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var e = Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;\r\n                var l = path.getTotalLength();\r\n                dasharrayValue = '0 0 0 ' + l*s + ' ';\r\n                var lineLength = l*(e-s);\r\n                var segment = 1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n                var units = Math.floor(lineLength/segment);\r\n                var j;\r\n                for(j=0;j<units;j+=1){\r\n                    dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100 + ' ';\r\n                }\r\n                dasharrayValue += '0 ' + l*10 + ' 0 0';\r\n            } else {\r\n                dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;\r\n            }\r\n            path.setAttribute('stroke-dasharray',dasharrayValue);\r\n        }\r\n    }\r\n    if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n        this.pathMasker.setAttribute('stroke-width',this.filterManager.effectElements[4].p.v*2);\r\n    }\r\n    \r\n    if(forceRender || this.filterManager.effectElements[6].p._mdf){\r\n        this.pathMasker.setAttribute('opacity',this.filterManager.effectElements[6].p.v);\r\n    }\r\n    if(this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2){\r\n        if(forceRender || this.filterManager.effectElements[3].p._mdf){\r\n            var color = this.filterManager.effectElements[3].p.v;\r\n            this.pathMasker.setAttribute('stroke','rgb('+bm_floor(color[0]*255)+','+bm_floor(color[1]*255)+','+bm_floor(color[2]*255)+')');\r\n        }\r\n    }\r\n};\r\nfunction SVGTritoneFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var feColorMatrix = createNS('feColorMatrix');\r\n    feColorMatrix.setAttribute('type','matrix');\r\n    feColorMatrix.setAttribute('color-interpolation-filters','linearRGB');\r\n    feColorMatrix.setAttribute('values','0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\r\n    feColorMatrix.setAttribute('result','f1');\r\n    filter.appendChild(feColorMatrix);\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n    filter.appendChild(feComponentTransfer);\r\n    this.matrixFilter = feComponentTransfer;\r\n    var feFuncR = createNS('feFuncR');\r\n    feFuncR.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncR);\r\n    this.feFuncR = feFuncR;\r\n    var feFuncG = createNS('feFuncG');\r\n    feFuncG.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncG);\r\n    this.feFuncG = feFuncG;\r\n    var feFuncB = createNS('feFuncB');\r\n    feFuncB.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFuncB);\r\n    this.feFuncB = feFuncB;\r\n}\r\n\r\nSVGTritoneFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var color1 = this.filterManager.effectElements[0].p.v;\r\n        var color2 = this.filterManager.effectElements[1].p.v;\r\n        var color3 = this.filterManager.effectElements[2].p.v;\r\n        var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\r\n        var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\r\n        var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\r\n        this.feFuncR.setAttribute('tableValues', tableR);\r\n        this.feFuncG.setAttribute('tableValues', tableG);\r\n        this.feFuncB.setAttribute('tableValues', tableB);\r\n        //var opacity = this.filterManager.effectElements[2].p.v/100;\r\n        //this.matrixFilter.setAttribute('values',(colorWhite[0]- colorBlack[0])+' 0 0 0 '+ colorBlack[0] +' '+ (colorWhite[1]- colorBlack[1]) +' 0 0 0 '+ colorBlack[1] +' '+ (colorWhite[2]- colorBlack[2]) +' 0 0 0 '+ colorBlack[2] +' 0 0 0 ' + opacity + ' 0');\r\n    }\r\n};\r\nfunction SVGProLevelsFilter(filter, filterManager){\r\n    this.filterManager = filterManager;\r\n    var effectElements = this.filterManager.effectElements;\r\n    var feComponentTransfer = createNS('feComponentTransfer');\r\n    \r\n    if(effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1){\r\n        this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\r\n    }\r\n    if(effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1){\r\n        this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\r\n    }\r\n    if(effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1){\r\n        this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n    if(effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1){\r\n        this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\r\n    }\r\n    \r\n    if(this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA){\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        feComponentTransfer = createNS('feComponentTransfer');\r\n    }\r\n\r\n    if(effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1){\r\n\r\n        feComponentTransfer.setAttribute('color-interpolation-filters','sRGB');\r\n        filter.appendChild(feComponentTransfer);\r\n        this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\r\n        this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\r\n        this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\r\n    }\r\n}\r\n\r\nSVGProLevelsFilter.prototype.createFeFunc = function(type, feComponentTransfer) {\r\n    var feFunc = createNS(type);\r\n    feFunc.setAttribute('type','table');\r\n    feComponentTransfer.appendChild(feFunc);\r\n    return feFunc;\r\n};\r\n\r\nSVGProLevelsFilter.prototype.getTableValue = function(inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\r\n    var cnt = 0;\r\n    var segments = 256;\r\n    var perc;\r\n    var min = Math.min(inputBlack, inputWhite);\r\n    var max = Math.max(inputBlack, inputWhite);\r\n    var table = Array.call(null,{length:segments});\r\n    var colorValue;\r\n    var pos = 0;\r\n    var outputDelta = outputWhite - outputBlack; \r\n    var inputDelta = inputWhite - inputBlack; \r\n    while(cnt <= 256) {\r\n        perc = cnt/256;\r\n        if(perc <= min){\r\n            colorValue = inputDelta < 0 ? outputWhite : outputBlack;\r\n        } else if(perc >= max){\r\n            colorValue = inputDelta < 0 ? outputBlack : outputWhite;\r\n        } else {\r\n            colorValue = (outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma));\r\n        }\r\n        table[pos++] = colorValue;\r\n        cnt += 256/(segments-1);\r\n    }\r\n    return table.join(' ');\r\n};\r\n\r\nSVGProLevelsFilter.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        var val;\r\n        var effectElements = this.filterManager.effectElements;\r\n        if(this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)){\r\n            val = this.getTableValue(effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v,effectElements[7].p.v);\r\n            this.feFuncRComposed.setAttribute('tableValues',val);\r\n            this.feFuncGComposed.setAttribute('tableValues',val);\r\n            this.feFuncBComposed.setAttribute('tableValues',val);\r\n        }\r\n\r\n\r\n        if(this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)){\r\n            val = this.getTableValue(effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v,effectElements[14].p.v);\r\n            this.feFuncR.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)){\r\n            val = this.getTableValue(effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v,effectElements[21].p.v);\r\n            this.feFuncG.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)){\r\n            val = this.getTableValue(effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v,effectElements[28].p.v);\r\n            this.feFuncB.setAttribute('tableValues',val);\r\n        }\r\n\r\n        if(this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)){\r\n            val = this.getTableValue(effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v,effectElements[35].p.v);\r\n            this.feFuncA.setAttribute('tableValues',val);\r\n        }\r\n        \r\n    }\r\n};\r\nfunction SVGDropShadowEffect(filter, filterManager){\r\n    filter.setAttribute('x','-100%');\r\n    filter.setAttribute('y','-100%');\r\n    filter.setAttribute('width','400%');\r\n    filter.setAttribute('height','400%');\r\n    this.filterManager = filterManager;\r\n\r\n    var feGaussianBlur = createNS('feGaussianBlur');\r\n    feGaussianBlur.setAttribute('in','SourceAlpha');\r\n    feGaussianBlur.setAttribute('result','drop_shadow_1');\r\n    feGaussianBlur.setAttribute('stdDeviation','0');\r\n    this.feGaussianBlur = feGaussianBlur;\r\n    filter.appendChild(feGaussianBlur);\r\n\r\n    var feOffset = createNS('feOffset');\r\n    feOffset.setAttribute('dx','25');\r\n    feOffset.setAttribute('dy','0');\r\n    feOffset.setAttribute('in','drop_shadow_1');\r\n    feOffset.setAttribute('result','drop_shadow_2');\r\n    this.feOffset = feOffset;\r\n    filter.appendChild(feOffset);\r\n    var feFlood = createNS('feFlood');\r\n    feFlood.setAttribute('flood-color','#00ff00');\r\n    feFlood.setAttribute('flood-opacity','1');\r\n    feFlood.setAttribute('result','drop_shadow_3');\r\n    this.feFlood = feFlood;\r\n    filter.appendChild(feFlood);\r\n\r\n    var feComposite = createNS('feComposite');\r\n    feComposite.setAttribute('in','drop_shadow_3');\r\n    feComposite.setAttribute('in2','drop_shadow_2');\r\n    feComposite.setAttribute('operator','in');\r\n    feComposite.setAttribute('result','drop_shadow_4');\r\n    filter.appendChild(feComposite);\r\n\r\n\r\n    var feMerge = createNS('feMerge');\r\n    filter.appendChild(feMerge);\r\n    var feMergeNode;\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMerge.appendChild(feMergeNode);\r\n    feMergeNode = createNS('feMergeNode');\r\n    feMergeNode.setAttribute('in','SourceGraphic');\r\n    this.feMergeNode = feMergeNode;\r\n    this.feMerge = feMerge;\r\n    this.originalNodeAdded = false;\r\n    feMerge.appendChild(feMergeNode);\r\n}\r\n\r\nSVGDropShadowEffect.prototype.renderFrame = function(forceRender){\r\n    if(forceRender || this.filterManager._mdf){\r\n        if(forceRender || this.filterManager.effectElements[4].p._mdf){\r\n            this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[0].p._mdf){\r\n            var col = this.filterManager.effectElements[0].p.v;\r\n            this.feFlood.setAttribute('flood-color',rgbToHex(Math.round(col[0]*255),Math.round(col[1]*255),Math.round(col[2]*255)));\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[1].p._mdf){\r\n            this.feFlood.setAttribute('flood-opacity',this.filterManager.effectElements[1].p.v/255);\r\n        }\r\n        if(forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf){\r\n            var distance = this.filterManager.effectElements[3].p.v;\r\n            var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\r\n            var x = distance * Math.cos(angle);\r\n            var y = distance * Math.sin(angle);\r\n            this.feOffset.setAttribute('dx', x);\r\n            this.feOffset.setAttribute('dy', y);\r\n        }\r\n        /*if(forceRender || this.filterManager.effectElements[5].p._mdf){\r\n            if(this.filterManager.effectElements[5].p.v === 1 && this.originalNodeAdded) {\r\n                this.feMerge.removeChild(this.feMergeNode);\r\n                this.originalNodeAdded = false;\r\n            } else if(this.filterManager.effectElements[5].p.v === 0 && !this.originalNodeAdded) {\r\n                this.feMerge.appendChild(this.feMergeNode);\r\n                this.originalNodeAdded = true;\r\n            }\r\n        }*/\r\n    }\r\n};\r\nvar _svgMatteSymbols = [];\r\n\r\nfunction SVGMatte3Effect(filterElem, filterManager, elem){\r\n    this.initialized = false;\r\n    this.filterManager = filterManager;\r\n    this.filterElem = filterElem;\r\n    this.elem = elem;\r\n    elem.matteElement = createNS('g');\r\n    elem.matteElement.appendChild(elem.layerElement);\r\n    elem.matteElement.appendChild(elem.transformedElement);\r\n    elem.baseElement = elem.matteElement;\r\n}\r\n\r\nSVGMatte3Effect.prototype.findSymbol = function(mask) {\r\n    var i = 0, len = _svgMatteSymbols.length;\r\n    while(i < len) {\r\n        if(_svgMatteSymbols[i] === mask) {\r\n            return _svgMatteSymbols[i];\r\n        }\r\n        i += 1;\r\n    }\r\n    return null;\r\n};\r\n\r\nSVGMatte3Effect.prototype.replaceInParent = function(mask, symbolId) {\r\n    var parentNode = mask.layerElement.parentNode;\r\n    if(!parentNode) {\r\n        return;\r\n    }\r\n    var children = parentNode.children;\r\n    var i = 0, len = children.length;\r\n    while (i < len) {\r\n        if (children[i] === mask.layerElement) {\r\n            break;\r\n        }\r\n        i += 1;\r\n    }\r\n    var nextChild;\r\n    if (i <= len - 2) {\r\n        nextChild = children[i + 1];\r\n    }\r\n    var useElem = createNS('use');\r\n    useElem.setAttribute('href', '#' + symbolId);\r\n    if(nextChild) {\r\n        parentNode.insertBefore(useElem, nextChild);\r\n    } else {\r\n        parentNode.appendChild(useElem);\r\n    }\r\n};\r\n\r\nSVGMatte3Effect.prototype.setElementAsMask = function(elem, mask) {\r\n    if(!this.findSymbol(mask)) {\r\n        var symbolId = createElementID();\r\n        var masker = createNS('mask');\r\n        masker.setAttribute('id', mask.layerId);\r\n        masker.setAttribute('mask-type', 'alpha');\r\n        _svgMatteSymbols.push(mask);\r\n        var defs = elem.globalData.defs;\r\n        defs.appendChild(masker);\r\n        var symbol = createNS('symbol');\r\n        symbol.setAttribute('id', symbolId);\r\n        this.replaceInParent(mask, symbolId);\r\n        symbol.appendChild(mask.layerElement);\r\n        defs.appendChild(symbol);\r\n        var useElem = createNS('use');\r\n        useElem.setAttribute('href', '#' + symbolId);\r\n        masker.appendChild(useElem);\r\n        mask.data.hd = false;\r\n        mask.show();\r\n    }\r\n    elem.setMatte(mask.layerId);\r\n};\r\n\r\nSVGMatte3Effect.prototype.initialize = function() {\r\n    var ind = this.filterManager.effectElements[0].p.v;\r\n    var elements = this.elem.comp.elements;\r\n    var i = 0, len = elements.length;\r\n    while (i < len) {\r\n    \tif (elements[i] && elements[i].data.ind === ind) {\r\n    \t\tthis.setElementAsMask(this.elem, elements[i]);\r\n    \t}\r\n    \ti += 1;\r\n    }\r\n    this.initialized = true;\r\n};\r\n\r\nSVGMatte3Effect.prototype.renderFrame = function() {\r\n\tif(!this.initialized) {\r\n\t\tthis.initialize();\r\n\t}\r\n};\r\nfunction SVGEffects(elem){\r\n    var i, len = elem.data.ef ? elem.data.ef.length : 0;\r\n    var filId = createElementID();\r\n    var fil = filtersFactory.createFilter(filId);\r\n    var count = 0;\r\n    this.filters = [];\r\n    var filterManager;\r\n    for(i=0;i<len;i+=1){\r\n        filterManager = null;\r\n        if(elem.data.ef[i].ty === 20){\r\n            count += 1;\r\n            filterManager = new SVGTintFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 21){\r\n            count += 1;\r\n            filterManager = new SVGFillFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 22){\r\n            filterManager = new SVGStrokeEffect(elem, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 23){\r\n            count += 1;\r\n            filterManager = new SVGTritoneFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 24){\r\n            count += 1;\r\n            filterManager = new SVGProLevelsFilter(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 25){\r\n            count += 1;\r\n            filterManager = new SVGDropShadowEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }else if(elem.data.ef[i].ty === 28){\r\n            //count += 1;\r\n            filterManager = new SVGMatte3Effect(fil, elem.effectsManager.effectElements[i], elem);\r\n        }else if(elem.data.ef[i].ty === 29){\r\n            count += 1;\r\n            filterManager = new SVGGaussianBlurEffect(fil, elem.effectsManager.effectElements[i]);\r\n        }\r\n        if(filterManager) {\r\n            this.filters.push(filterManager);\r\n        }\r\n    }\r\n    if(count){\r\n        elem.globalData.defs.appendChild(fil);\r\n        elem.layerElement.setAttribute('filter','url(' + locationHref + '#'+filId+')');\r\n    }\r\n    if (this.filters.length) {\r\n        elem.addRenderableComponent(this);\r\n    }\r\n}\r\n\r\nSVGEffects.prototype.renderFrame = function(_isFirstFrame){\r\n    var i, len = this.filters.length;\r\n    for(i=0;i<len;i+=1){\r\n        this.filters[i].renderFrame(_isFirstFrame);\r\n    }\r\n};\r\nfunction CVContextData() {\r\n\tthis.saved = [];\r\n    this.cArrPos = 0;\r\n    this.cTr = new Matrix();\r\n    this.cO = 1;\r\n    var i, len = 15;\r\n    this.savedOp = createTypedArray('float32', len);\r\n    for(i=0;i<len;i+=1){\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = len;\r\n}\r\n\r\nCVContextData.prototype.duplicate = function() {\r\n\tvar newLength = this._length * 2;\r\n\tvar currentSavedOp = this.savedOp;\r\n    this.savedOp = createTypedArray('float32', newLength);\r\n    this.savedOp.set(currentSavedOp);\r\n    var i = 0;\r\n    for(i = this._length; i < newLength; i += 1) {\r\n        this.saved[i] = createTypedArray('float32', 16);\r\n    }\r\n    this._length = newLength;\r\n};\r\n\r\nCVContextData.prototype.reset = function() {\r\n\tthis.cArrPos = 0;\r\n\tthis.cTr.reset();\r\n    this.cO = 1;\r\n};\r\nfunction CVBaseElement(){\r\n}\r\n\r\nCVBaseElement.prototype = {\r\n    createElements: function(){},\r\n    initRendererElement: function(){},\r\n    createContainerElements: function(){\r\n        this.canvasContext = this.globalData.canvasContext;\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n    },\r\n    createContent: function(){},\r\n    setBlendMode: function(){\r\n        var globalData = this.globalData;\r\n        if(globalData.blendMode !== this.data.bm) {\r\n            globalData.blendMode = this.data.bm;\r\n            var blendModeValue = getBlendMode(this.data.bm);\r\n            globalData.canvasContext.globalCompositeOperation = blendModeValue;\r\n        }\r\n    },\r\n    createRenderableComponents: function(){\r\n        this.maskManager = new CVMaskElement(this.data, this);\r\n    },\r\n    hideElement: function(){\r\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\r\n            this.hidden = true;\r\n        }\r\n    },\r\n    showElement: function(){\r\n        if (this.isInRange && !this.isTransparent){\r\n            this.hidden = false;\r\n            this._isFirstFrame = true;\r\n            this.maskManager._isFirstFrame = true;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        if (this.hidden || this.data.hd) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.setBlendMode();\r\n        this.globalData.renderer.save();\r\n        this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\r\n        this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\r\n        this.renderInnerContent();\r\n        this.globalData.renderer.restore();\r\n        if(this.maskManager.hasMasks) {\r\n            this.globalData.renderer.restore(true);\r\n        }\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.canvasContext = null;\r\n        this.data = null;\r\n        this.globalData = null;\r\n        this.maskManager.destroy();\r\n    },\r\n    mHelper: new Matrix()\r\n};\r\nCVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\r\nCVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\r\n\r\nfunction CVImageElement(data, globalData, comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.img = globalData.imageLoader.getImage(this.assetData);\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\r\n\r\nCVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVImageElement.prototype.createContent = function(){\r\n\r\n    if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\r\n        var canvas = createTag('canvas');\r\n        canvas.width = this.assetData.w;\r\n        canvas.height = this.assetData.h;\r\n        var ctx = canvas.getContext('2d');\r\n\r\n        var imgW = this.img.width;\r\n        var imgH = this.img.height;\r\n        var imgRel = imgW / imgH;\r\n        var canvasRel = this.assetData.w/this.assetData.h;\r\n        var widthCrop, heightCrop;\r\n        var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\r\n        if((imgRel > canvasRel && par === 'xMidYMid slice') || (imgRel < canvasRel && par !== 'xMidYMid slice')) {\r\n            heightCrop = imgH;\r\n            widthCrop = heightCrop*canvasRel;\r\n        } else {\r\n            widthCrop = imgW;\r\n            heightCrop = widthCrop/canvasRel;\r\n        }\r\n        ctx.drawImage(this.img,(imgW-widthCrop)/2,(imgH-heightCrop)/2,widthCrop,heightCrop,0,0,this.assetData.w,this.assetData.h);\r\n        this.img = canvas;\r\n    }\r\n\r\n};\r\n\r\nCVImageElement.prototype.renderInnerContent = function(parentMatrix){\r\n    this.canvasContext.drawImage(this.img, 0, 0);\r\n};\r\n\r\nCVImageElement.prototype.destroy = function(){\r\n    this.img = null;\r\n};\r\nfunction CVCompElement(data, globalData, comp) {\r\n    this.completeLayers = false;\r\n    this.layers = data.layers;\r\n    this.pendingElements = [];\r\n    this.elements = createSizedArray(this.layers.length);\r\n    this.initElement(data, globalData, comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate, this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([CanvasRenderer, ICompElement, CVBaseElement], CVCompElement);\r\n\r\nCVCompElement.prototype.renderInnerContent = function() {\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.completeLayers || this.elements[i]){\r\n            this.elements[i].renderFrame();\r\n        }\r\n    }\r\n};\r\n\r\nCVCompElement.prototype.destroy = function(){\r\n    var i,len = this.layers.length;\r\n    for( i = len - 1; i >= 0; i -= 1 ){\r\n        if(this.elements[i]) {\r\n            this.elements[i].destroy();\r\n        }\r\n    }\r\n    this.layers = null;\r\n    this.elements = null;\r\n};\r\n\r\nfunction CVMaskElement(data,element){\r\n    this.data = data;\r\n    this.element = element;\r\n    this.masksProperties = this.data.masksProperties || [];\r\n    this.viewData = createSizedArray(this.masksProperties.length);\r\n    var i, len = this.masksProperties.length, hasMasks = false;\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            hasMasks = true;\r\n        }\r\n        this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);\r\n    }\r\n    this.hasMasks = hasMasks;\r\n    if(hasMasks) {\r\n        this.element.addRenderableComponent(this);\r\n    }\r\n}\r\n\r\nCVMaskElement.prototype.renderFrame = function () {\r\n    if(!this.hasMasks){\r\n        return;\r\n    }\r\n    var transform = this.element.finalTransform.mat;\r\n    var ctx = this.element.canvasContext;\r\n    var i, len = this.masksProperties.length;\r\n    var pt,pts,data;\r\n    ctx.beginPath();\r\n    for (i = 0; i < len; i++) {\r\n        if(this.masksProperties[i].mode !== 'n'){\r\n            if (this.masksProperties[i].inv) {\r\n                ctx.moveTo(0, 0);\r\n                ctx.lineTo(this.element.globalData.compSize.w, 0);\r\n                ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\r\n                ctx.lineTo(0, this.element.globalData.compSize.h);\r\n                ctx.lineTo(0, 0);\r\n            }\r\n            data = this.viewData[i].v;\r\n            pt = transform.applyToPointArray(data.v[0][0],data.v[0][1],0);\r\n            ctx.moveTo(pt[0], pt[1]);\r\n            var j, jLen = data._length;\r\n            for (j = 1; j < jLen; j++) {\r\n                pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\r\n                ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n            }\r\n            pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\r\n            ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\r\n        }\r\n    }\r\n    this.element.globalData.renderer.save(true);\r\n    ctx.clip();\r\n};\r\n\r\nCVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\r\n\r\nCVMaskElement.prototype.destroy = function(){\r\n    this.element = null;\r\n};\r\nfunction CVShapeElement(data, globalData, comp) {\r\n    this.shapes = [];\r\n    this.shapesData = data.shapes;\r\n    this.stylesList = [];\r\n    this.itemsData = [];\r\n    this.prevViewData = [];\r\n    this.shapeModifiers = [];\r\n    this.processedElements = [];\r\n    this.transformsManager = new ShapeTransformManager();\r\n    this.initElement(data, globalData, comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement], CVShapeElement);\r\n\r\nCVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\r\n\r\nCVShapeElement.prototype.transformHelper = {opacity:1,_opMdf:false};\r\n\r\nCVShapeElement.prototype.dashResetter = [];\r\n\r\nCVShapeElement.prototype.createContent = function(){\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true, []);\r\n};\r\n\r\nCVShapeElement.prototype.createStyleElement = function(data, transforms) {\r\n    var styleElem = {\r\n        data: data,\r\n        type: data.ty,\r\n        preTransforms: this.transformsManager.addTransformSequence(transforms),\r\n        transforms: [],\r\n        elements: [],\r\n        closed: data.hd === true\r\n    };\r\n    var elementData = {};\r\n    if(data.ty == 'fl' || data.ty == 'st'){\r\n        elementData.c = PropertyFactory.getProp(this,data.c,1,255,this);\r\n        if(!elementData.c.k){\r\n            styleElem.co = 'rgb('+bm_floor(elementData.c.v[0])+','+bm_floor(elementData.c.v[1])+','+bm_floor(elementData.c.v[2])+')';\r\n        }\r\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\r\n        elementData.s = PropertyFactory.getProp(this,data.s,1,null,this);\r\n        elementData.e = PropertyFactory.getProp(this,data.e,1,null,this);\r\n        elementData.h = PropertyFactory.getProp(this,data.h||{k:0},0,0.01,this);\r\n        elementData.a = PropertyFactory.getProp(this,data.a||{k:0},0,degToRads,this);\r\n        elementData.g = new GradientProperty(this,data.g,this);\r\n    }\r\n    elementData.o = PropertyFactory.getProp(this,data.o,0,0.01,this);\r\n    if(data.ty == 'st' || data.ty == 'gs') {\r\n        styleElem.lc = this.lcEnum[data.lc] || 'round';\r\n        styleElem.lj = this.ljEnum[data.lj] || 'round';\r\n        if(data.lj == 1) {\r\n            styleElem.ml = data.ml;\r\n        }\r\n        elementData.w = PropertyFactory.getProp(this,data.w,0,null,this);\r\n        if(!elementData.w.k){\r\n            styleElem.wi = elementData.w.v;\r\n        }\r\n        if(data.d){\r\n            var d = new DashProperty(this,data.d,'canvas', this);\r\n            elementData.d = d;\r\n            if(!elementData.d.k){\r\n                styleElem.da = elementData.d.dashArray;\r\n                styleElem.do = elementData.d.dashoffset[0];\r\n            }\r\n        }\r\n    } else {\r\n        styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\r\n    }\r\n    this.stylesList.push(styleElem);\r\n    elementData.style = styleElem;\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createGroupElement = function(data) {\r\n    var elementData = {\r\n        it: [],\r\n        prevViewData: []\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createTransformElement = function(data) {\r\n    var elementData = {\r\n        transform : {\r\n            opacity: 1,\r\n            _opMdf:false,\r\n            key: this.transformsManager.getNewKey(),\r\n            op: PropertyFactory.getProp(this,data.o,0,0.01,this),\r\n            mProps: TransformPropertyFactory.getTransformProperty(this,data,this)\r\n        }\r\n    };\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.createShapeElement = function(data) {\r\n    var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\r\n    \r\n    this.shapes.push(elementData);\r\n    this.addShapeToModifiers(elementData);\r\n    return elementData;\r\n};\r\n\r\nCVShapeElement.prototype.reloadShapes = function() {\r\n    this._isFirstFrame = true;\r\n    var i, len = this.itemsData.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        this.prevViewData[i] = this.itemsData[i];\r\n    }\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData, true, []);\r\n    len = this.dynamicProperties.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        this.dynamicProperties[i].getValue();\r\n    }\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n};\r\n\r\nCVShapeElement.prototype.addTransformToStyleList = function(transform) {\r\n    var i, len = this.stylesList.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        if(!this.stylesList[i].closed) {\r\n            this.stylesList[i].transforms.push(transform);\r\n        }\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.removeTransformFromStyleList = function() {\r\n    var i, len = this.stylesList.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        if(!this.stylesList[i].closed) {\r\n            this.stylesList[i].transforms.pop();\r\n        }\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.closeStyles = function(styles) {\r\n    var i, len = styles.length;\r\n    for (i = 0; i < len; i += 1) {\r\n        styles[i].closed = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.searchShapes = function(arr,itemsData, prevViewData, shouldRender, transforms){\r\n    var i, len = arr.length - 1;\r\n    var j, jLen;\r\n    var ownStyles = [], ownModifiers = [], processedPos, modifier, currentTransform;\r\n    var ownTransforms = [].concat(transforms);\r\n    for(i=len;i>=0;i-=1){\r\n        processedPos = this.searchProcessedElement(arr[i]);\r\n        if(!processedPos){\r\n            arr[i]._shouldRender = shouldRender;\r\n        } else {\r\n            itemsData[i] = prevViewData[processedPos - 1];\r\n        }\r\n        if(arr[i].ty == 'fl' || arr[i].ty == 'st'|| arr[i].ty == 'gf'|| arr[i].ty == 'gs'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\r\n            } else {\r\n                itemsData[i].style.closed = false;\r\n            }\r\n            \r\n            ownStyles.push(itemsData[i].style);\r\n        }else if(arr[i].ty == 'gr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createGroupElement(arr[i]);\r\n            } else {\r\n                jLen = itemsData[i].it.length;\r\n                for(j=0;j<jLen;j+=1){\r\n                    itemsData[i].prevViewData[j] = itemsData[i].it[j];\r\n                }\r\n            }\r\n            this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData, shouldRender, ownTransforms);\r\n        }else if(arr[i].ty == 'tr'){\r\n            if(!processedPos){\r\n                currentTransform = this.createTransformElement(arr[i]);\r\n                itemsData[i] = currentTransform;\r\n            }\r\n            ownTransforms.push(itemsData[i]);\r\n            this.addTransformToStyleList(itemsData[i]);\r\n        }else if(arr[i].ty == 'sh' || arr[i].ty == 'rc' || arr[i].ty == 'el' || arr[i].ty == 'sr'){\r\n            if(!processedPos){\r\n                itemsData[i] = this.createShapeElement(arr[i]);\r\n            }\r\n            \r\n        }else if(arr[i].ty == 'tm' || arr[i].ty == 'rd'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                modifier.init(this,arr[i]);\r\n                itemsData[i] = modifier;\r\n                this.shapeModifiers.push(modifier);\r\n            } else {\r\n                modifier = itemsData[i];\r\n                modifier.closed = false;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        } else if(arr[i].ty == 'rp'){\r\n            if(!processedPos){\r\n                modifier = ShapeModifiers.getModifier(arr[i].ty);\r\n                itemsData[i] = modifier;\r\n                modifier.init(this,arr,i,itemsData);\r\n                this.shapeModifiers.push(modifier);\r\n                shouldRender = false;\r\n            }else{\r\n                modifier = itemsData[i];\r\n                modifier.closed = true;\r\n            }\r\n            ownModifiers.push(modifier);\r\n        }\r\n        this.addProcessedElement(arr[i], i + 1);\r\n    }\r\n    this.removeTransformFromStyleList();\r\n    this.closeStyles(ownStyles);\r\n    len = ownModifiers.length;\r\n    for(i=0;i<len;i+=1){\r\n        ownModifiers[i].closed = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderInnerContent = function() {\r\n    this.transformHelper.opacity = 1;\r\n    this.transformHelper._opMdf = false;\r\n    this.renderModifiers();\r\n    this.transformsManager.processSequences(this._isFirstFrame);\r\n    this.renderShape(this.transformHelper,this.shapesData,this.itemsData,true);\r\n};\r\n\r\nCVShapeElement.prototype.renderShapeTransform = function(parentTransform, groupTransform) {\r\n    if(parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\r\n        groupTransform.opacity = parentTransform.opacity;\r\n        groupTransform.opacity *= groupTransform.op.v;\r\n        groupTransform._opMdf = true;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.drawLayer = function() {\r\n    var i, len = this.stylesList.length;\r\n    var j, jLen, k, kLen,elems,nodes, renderer = this.globalData.renderer, ctx = this.globalData.canvasContext, type, currentStyle;\r\n    for(i=0;i<len;i+=1){\r\n        currentStyle = this.stylesList[i];\r\n        type = currentStyle.type;\r\n\r\n        //Skipping style when\r\n        //Stroke width equals 0\r\n        //style should not be rendered (extra unused repeaters)\r\n        //current opacity equals 0\r\n        //global opacity equals 0\r\n        if(((type === 'st' || type === 'gs') && currentStyle.wi === 0) || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0){\r\n            continue;\r\n        }\r\n        renderer.save();\r\n        elems = currentStyle.elements;\r\n        if(type === 'st' || type === 'gs'){\r\n            ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\r\n            ctx.lineWidth = currentStyle.wi;\r\n            ctx.lineCap = currentStyle.lc;\r\n            ctx.lineJoin = currentStyle.lj;\r\n            ctx.miterLimit = currentStyle.ml || 0;\r\n        } else {\r\n            ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\r\n        }\r\n        renderer.ctxOpacity(currentStyle.coOp);\r\n        if(type !== 'st' && type !== 'gs'){\r\n            ctx.beginPath();\r\n        }\r\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\r\n        jLen = elems.length;\r\n        for(j=0;j<jLen;j+=1){\r\n            if(type === 'st' || type === 'gs'){\r\n                ctx.beginPath();\r\n                if(currentStyle.da){\r\n                    ctx.setLineDash(currentStyle.da);\r\n                    ctx.lineDashOffset = currentStyle.do;\r\n                }\r\n            }\r\n            nodes = elems[j].trNodes;\r\n            kLen = nodes.length;\r\n\r\n            for(k=0;k<kLen;k+=1){\r\n                if(nodes[k].t == 'm'){\r\n                    ctx.moveTo(nodes[k].p[0],nodes[k].p[1]);\r\n                }else if(nodes[k].t == 'c'){\r\n                    ctx.bezierCurveTo(nodes[k].pts[0],nodes[k].pts[1],nodes[k].pts[2],nodes[k].pts[3],nodes[k].pts[4],nodes[k].pts[5]);\r\n                }else{\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n            if(type === 'st' || type === 'gs'){\r\n                ctx.stroke();\r\n                if(currentStyle.da){\r\n                    ctx.setLineDash(this.dashResetter);\r\n                }\r\n            }\r\n        }\r\n        if(type !== 'st' && type !== 'gs'){\r\n            ctx.fill(currentStyle.r);\r\n        }\r\n        renderer.restore();\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderShape = function(parentTransform,items,data,isMain){\r\n    var i, len = items.length - 1;\r\n    var groupTransform;\r\n    groupTransform = parentTransform;\r\n    for(i=len;i>=0;i-=1){\r\n        if(items[i].ty == 'tr'){\r\n            groupTransform = data[i].transform;\r\n            this.renderShapeTransform(parentTransform, groupTransform);\r\n        }else if(items[i].ty == 'sh' || items[i].ty == 'el' || items[i].ty == 'rc' || items[i].ty == 'sr'){\r\n            this.renderPath(items[i],data[i]);\r\n        }else if(items[i].ty == 'fl'){\r\n            this.renderFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'st'){\r\n            this.renderStroke(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gf' || items[i].ty == 'gs'){\r\n            this.renderGradientFill(items[i],data[i],groupTransform);\r\n        }else if(items[i].ty == 'gr'){\r\n            this.renderShape(groupTransform,items[i].it,data[i].it);\r\n        }else if(items[i].ty == 'tm');\r\n    }\r\n    if(isMain){\r\n        this.drawLayer();\r\n    }\r\n    \r\n};\r\n\r\nCVShapeElement.prototype.renderStyledShape = function(styledShape, shape){\r\n    if(this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\r\n        var shapeNodes = styledShape.trNodes;\r\n        var paths = shape.paths;\r\n        var i, len, j, jLen = paths._length;\r\n        shapeNodes.length = 0;\r\n        var groupTransformMat = styledShape.transforms.finalTransform;\r\n        for (j = 0; j < jLen; j += 1) {\r\n            var pathNodes = paths.shapes[j];\r\n            if(pathNodes && pathNodes.v){\r\n                len = pathNodes._length;\r\n                for (i = 1; i < len; i += 1) {\r\n                    if (i === 1) {\r\n                        shapeNodes.push({\r\n                            t: 'm',\r\n                            p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                        });\r\n                    }\r\n                    shapeNodes.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\r\n                    });\r\n                }\r\n                if (len === 1) {\r\n                    shapeNodes.push({\r\n                        t: 'm',\r\n                        p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\r\n                    });\r\n                }\r\n                if (pathNodes.c && len) {\r\n                    shapeNodes.push({\r\n                        t: 'c',\r\n                        pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\r\n                    });\r\n                    shapeNodes.push({\r\n                        t: 'z'\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        styledShape.trNodes = shapeNodes;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderPath = function(pathData,itemData){\r\n    if(pathData.hd !== true && pathData._shouldRender) {\r\n        var i, len = itemData.styledShapes.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\r\n        }\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n\r\n    if (itemData.c._mdf || this._isFirstFrame) {\r\n        styleElem.co = 'rgb(' \r\n        + bm_floor(itemData.c.v[0]) + ',' \r\n        + bm_floor(itemData.c.v[1]) + ',' \r\n        + bm_floor(itemData.c.v[2]) + ')';\r\n    }\r\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\r\n        styleElem.coOp = itemData.o.v * groupTransform.opacity;\r\n    }\r\n};\r\n\r\nCVShapeElement.prototype.renderGradientFill = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    if(!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || (styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf))) {\r\n        var ctx = this.globalData.canvasContext;\r\n        var grd;\r\n        var pt1 = itemData.s.v, pt2 = itemData.e.v;\r\n        if (styleData.t === 1) {\r\n            grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\r\n        } else {\r\n            var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\r\n            var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\r\n\r\n            var percent = itemData.h.v >= 1 ? 0.99 : itemData.h.v <= -1 ? -0.99: itemData.h.v;\r\n            var dist = rad * percent;\r\n            var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\r\n            var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\r\n            var grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\r\n        }\r\n\r\n        var i, len = styleData.g.p;\r\n        var cValues = itemData.g.c;\r\n        var opacity = 1;\r\n\r\n        for (i = 0; i < len; i += 1){\r\n            if(itemData.g._hasOpacity && itemData.g._collapsable) {\r\n                opacity = itemData.g.o[i*2 + 1];\r\n            }\r\n            grd.addColorStop(cValues[i * 4] / 100,'rgba('+ cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ','+cValues[i * 4 + 3] + ',' + opacity + ')');\r\n        }\r\n        styleElem.grd = grd;\r\n    }\r\n    styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    \r\n};\r\n\r\nCVShapeElement.prototype.renderStroke = function(styleData,itemData, groupTransform){\r\n    var styleElem = itemData.style;\r\n    var d = itemData.d;\r\n    if(d && (d._mdf  || this._isFirstFrame)){\r\n        styleElem.da = d.dashArray;\r\n        styleElem.do = d.dashoffset[0];\r\n    }\r\n    if(itemData.c._mdf || this._isFirstFrame){\r\n        styleElem.co = 'rgb('+bm_floor(itemData.c.v[0])+','+bm_floor(itemData.c.v[1])+','+bm_floor(itemData.c.v[2])+')';\r\n    }\r\n    if(itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame){\r\n        styleElem.coOp = itemData.o.v*groupTransform.opacity;\r\n    }\r\n    if(itemData.w._mdf || this._isFirstFrame){\r\n        styleElem.wi = itemData.w.v;\r\n    }\r\n};\r\n\r\n\r\nCVShapeElement.prototype.destroy = function(){\r\n    this.shapesData = null;\r\n    this.globalData = null;\r\n    this.canvasContext = null;\r\n    this.stylesList.length = 0;\r\n    this.itemsData.length = 0;\r\n};\r\n\r\n\r\nfunction CVSolidElement(data, globalData, comp) {\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\r\n\r\nCVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\r\nCVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\r\n\r\nCVSolidElement.prototype.renderInnerContent = function() {\r\n    var ctx = this.canvasContext;\r\n    ctx.fillStyle = this.data.sc;\r\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh);\r\n    //\r\n};\r\nfunction CVTextElement(data, globalData, comp){\r\n    this.textSpans = [];\r\n    this.yOffset = 0;\r\n    this.fillColorAnim = false;\r\n    this.strokeColorAnim = false;\r\n    this.strokeWidthAnim = false;\r\n    this.stroke = false;\r\n    this.fill = false;\r\n    this.justifyOffset = 0;\r\n    this.currentRender = null;\r\n    this.renderType = 'canvas';\r\n    this.values = {\r\n        fill: 'rgba(0,0,0,0)',\r\n        stroke: 'rgba(0,0,0,0)',\r\n        sWidth: 0,\r\n        fValue: ''\r\n    };\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement], CVTextElement);\r\n\r\nCVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\r\n\r\nCVTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n\r\n    var hasFill = false;\r\n    if(documentData.fc) {\r\n        hasFill = true;\r\n        this.values.fill = this.buildColor(documentData.fc);\r\n    }else{\r\n        this.values.fill = 'rgba(0,0,0,0)';\r\n    }\r\n    this.fill = hasFill;\r\n    var hasStroke = false;\r\n    if(documentData.sc){\r\n        hasStroke = true;\r\n        this.values.stroke = this.buildColor(documentData.sc);\r\n        this.values.sWidth = documentData.sw;\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    var i, len;\r\n    var letters = documentData.l;\r\n    var matrixHelper = this.mHelper;\r\n    this.stroke = hasStroke;\r\n    this.values.fValue = documentData.finalSize + 'px '+ this.globalData.fontManager.getFontByName(documentData.f).fFamily;\r\n    len = documentData.finalText.length;\r\n    //this.tHelper.font = this.values.fValue;\r\n    var charData, shapeData, k, kLen, shapes, j, jLen, pathNodes, commands, pathArr, singleShape = this.data.singleShape;\r\n    var trackingOffset = documentData.tr/1000*documentData.finalSize;\r\n    var xPos = 0, yPos = 0, firstLine = true;\r\n    var cnt = 0;\r\n    for (i = 0; i < len; i += 1) {\r\n        charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n        shapeData = charData && charData.data || {};\r\n        matrixHelper.reset();\r\n        if(singleShape && letters[i].n) {\r\n            xPos = -trackingOffset;\r\n            yPos += documentData.yOffset;\r\n            yPos += firstLine ? 1 : 0;\r\n            firstLine = false;\r\n        }\r\n\r\n        shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\r\n        jLen = shapes.length;\r\n        matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n        if(singleShape){\r\n            this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\r\n        }\r\n        commands = createSizedArray(jLen);\r\n        for(j=0;j<jLen;j+=1){\r\n            kLen = shapes[j].ks.k.i.length;\r\n            pathNodes = shapes[j].ks.k;\r\n            pathArr = [];\r\n            for(k=1;k<kLen;k+=1){\r\n                if(k==1){\r\n                    pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n                }\r\n                pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToY(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToX(pathNodes.v[k][0],pathNodes.v[k][1],0),matrixHelper.applyToY(pathNodes.v[k][0],pathNodes.v[k][1],0));\r\n            }\r\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToY(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));\r\n            commands[j] = pathArr;\r\n        }\r\n        if(singleShape){\r\n            xPos += letters[i].l;\r\n            xPos += trackingOffset;\r\n        }\r\n        if(this.textSpans[cnt]){\r\n            this.textSpans[cnt].elem = commands;\r\n        } else {\r\n            this.textSpans[cnt] = {elem: commands};\r\n        }\r\n        cnt +=1;\r\n    }\r\n};\r\n\r\nCVTextElement.prototype.renderInnerContent = function(){\r\n    var ctx = this.canvasContext;\r\n    var finalMat = this.finalTransform.mat.props;\r\n    ctx.font = this.values.fValue;\r\n    ctx.lineCap = 'butt';\r\n    ctx.lineJoin = 'miter';\r\n    ctx.miterLimit = 4;\r\n\r\n    if(!this.data.singleShape){\r\n        this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    }\r\n\r\n    var  i,len, j, jLen, k, kLen;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter;\r\n    var lastFill = null, lastStroke = null, lastStrokeW = null, commands, pathArr;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            continue;\r\n        }\r\n        renderedLetter = renderedLetters[i];\r\n        if(renderedLetter){\r\n            this.globalData.renderer.save();\r\n            this.globalData.renderer.ctxTransform(renderedLetter.p);\r\n            this.globalData.renderer.ctxOpacity(renderedLetter.o);\r\n        }\r\n        if(this.fill){\r\n            if(renderedLetter && renderedLetter.fc){\r\n                if(lastFill !== renderedLetter.fc){\r\n                    lastFill = renderedLetter.fc;\r\n                    ctx.fillStyle = renderedLetter.fc;\r\n                }\r\n            }else if(lastFill !== this.values.fill){\r\n                lastFill = this.values.fill;\r\n                ctx.fillStyle = this.values.fill;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.fill();\r\n            ///ctx.fillText(this.textSpans[i].val,0,0);\r\n        }\r\n        if(this.stroke){\r\n            if(renderedLetter && renderedLetter.sw){\r\n                if(lastStrokeW !== renderedLetter.sw){\r\n                    lastStrokeW = renderedLetter.sw;\r\n                    ctx.lineWidth = renderedLetter.sw;\r\n                }\r\n            }else if(lastStrokeW !== this.values.sWidth){\r\n                lastStrokeW = this.values.sWidth;\r\n                ctx.lineWidth = this.values.sWidth;\r\n            }\r\n            if(renderedLetter && renderedLetter.sc){\r\n                if(lastStroke !== renderedLetter.sc){\r\n                    lastStroke = renderedLetter.sc;\r\n                    ctx.strokeStyle = renderedLetter.sc;\r\n                }\r\n            }else if(lastStroke !== this.values.stroke){\r\n                lastStroke = this.values.stroke;\r\n                ctx.strokeStyle = this.values.stroke;\r\n            }\r\n            commands = this.textSpans[i].elem;\r\n            jLen = commands.length;\r\n            this.globalData.canvasContext.beginPath();\r\n            for(j=0;j<jLen;j+=1) {\r\n                pathArr = commands[j];\r\n                kLen = pathArr.length;\r\n                this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\r\n                for (k = 2; k < kLen; k += 6) {\r\n                    this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\r\n                }\r\n            }\r\n            this.globalData.canvasContext.closePath();\r\n            this.globalData.canvasContext.stroke();\r\n            ///ctx.strokeText(letters[i].val,0,0);\r\n        }\r\n        if(renderedLetter) {\r\n            this.globalData.renderer.restore();\r\n        }\r\n    }\r\n};\r\nfunction CVEffects() {\r\n\r\n}\r\nCVEffects.prototype.renderFrame = function(){};\r\nfunction HBaseElement(data,globalData,comp){}\r\nHBaseElement.prototype = {\r\n    checkBlendMode: function(){},\r\n    initRendererElement: function(){\r\n        this.baseElement = createTag(this.data.tg || 'div');\r\n        if(this.data.hasMask) {\r\n            this.svgElement = createNS('svg');\r\n            this.layerElement = createNS('g');\r\n            this.maskedElement = this.layerElement;\r\n            this.svgElement.appendChild(this.layerElement);\r\n            this.baseElement.appendChild(this.svgElement);\r\n        } else {\r\n            this.layerElement = this.baseElement;\r\n        }\r\n        styleDiv(this.baseElement);\r\n    },\r\n    createContainerElements: function(){\r\n        this.renderableEffectsManager = new CVEffects(this);\r\n        this.transformedElement = this.baseElement;\r\n        this.maskedElement = this.layerElement;\r\n        if (this.data.ln) {\r\n            this.layerElement.setAttribute('id',this.data.ln);\r\n        }\r\n        if (this.data.cl) {\r\n            this.layerElement.setAttribute('class', this.data.cl);\r\n        }\r\n        if (this.data.bm !== 0) {\r\n            this.setBlendMode();\r\n        }\r\n    },\r\n    renderElement: function() {\r\n        if(this.finalTransform._matMdf){\r\n            this.transformedElement.style.transform = this.transformedElement.style.webkitTransform = this.finalTransform.mat.toCSS();\r\n        }\r\n        if(this.finalTransform._opMdf){\r\n            this.transformedElement.style.opacity = this.finalTransform.mProp.o.v;\r\n        }\r\n    },\r\n    renderFrame: function() {\r\n        //If it is exported as hidden (data.hd === true) no need to render\r\n        //If it is not visible no need to render\r\n        if (this.data.hd || this.hidden) {\r\n            return;\r\n        }\r\n        this.renderTransform();\r\n        this.renderRenderable();\r\n        this.renderElement();\r\n        this.renderInnerContent();\r\n        if (this._isFirstFrame) {\r\n            this._isFirstFrame = false;\r\n        }\r\n    },\r\n    destroy: function(){\r\n        this.layerElement = null;\r\n        this.transformedElement = null;\r\n        if(this.matteElement) {\r\n            this.matteElement = null;\r\n        }\r\n        if(this.maskManager) {\r\n            this.maskManager.destroy();\r\n            this.maskManager = null;\r\n        }\r\n    },\r\n    createRenderableComponents: function(){\r\n        this.maskManager = new MaskElement(this.data, this, this.globalData);\r\n    },\r\n    addEffects: function(){\r\n    },\r\n    setMatte: function(){}\r\n};\r\nHBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\r\nHBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\r\nHBaseElement.prototype.buildElementParenting = HybridRenderer.prototype.buildElementParenting;\r\nfunction HSolidElement(data,globalData,comp){\r\n    this.initElement(data,globalData,comp);\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement], HSolidElement);\r\n\r\nHSolidElement.prototype.createContent = function(){\r\n    var rect;\r\n    if(this.data.hasMask){\r\n        rect = createNS('rect');\r\n        rect.setAttribute('width',this.data.sw);\r\n        rect.setAttribute('height',this.data.sh);\r\n        rect.setAttribute('fill',this.data.sc);\r\n        this.svgElement.setAttribute('width',this.data.sw);\r\n        this.svgElement.setAttribute('height',this.data.sh);\r\n    } else {\r\n        rect = createTag('div');\r\n        rect.style.width = this.data.sw + 'px';\r\n        rect.style.height = this.data.sh + 'px';\r\n        rect.style.backgroundColor = this.data.sc;\r\n    }\r\n    this.layerElement.appendChild(rect);\r\n};\r\n\r\nfunction HCompElement(data,globalData,comp){\r\n    this.layers = data.layers;\r\n    this.supports3d = !data.hasMask;\r\n    this.completeLayers = false;\r\n    this.pendingElements = [];\r\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\r\n    this.initElement(data,globalData,comp);\r\n    this.tm = data.tm ? PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this) : {_placeholder:true};\r\n}\r\n\r\nextendPrototype([HybridRenderer, ICompElement, HBaseElement], HCompElement);\r\nHCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\r\n\r\nHCompElement.prototype.createContainerElements = function(){\r\n    this._createBaseContainerElements();\r\n    //divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\r\n    if(this.data.hasMask){\r\n        this.svgElement.setAttribute('width',this.data.w);\r\n        this.svgElement.setAttribute('height',this.data.h);\r\n        this.transformedElement = this.baseElement;\r\n    } else {\r\n        this.transformedElement = this.layerElement;\r\n    }\r\n};\r\n\r\nHCompElement.prototype.addTo3dContainer = function(elem,pos) {\r\n    var j = 0;\r\n    var nextElement;\r\n    while(j<pos){\r\n        if(this.elements[j] && this.elements[j].getBaseElement){\r\n            nextElement = this.elements[j].getBaseElement();\r\n        }\r\n        j += 1;\r\n    }\r\n    if(nextElement){\r\n        this.layerElement.insertBefore(elem, nextElement);\r\n    } else {\r\n        this.layerElement.appendChild(elem);\r\n    }\r\n};\r\n\r\nfunction HShapeElement(data,globalData,comp){\r\n    //List of drawable elements\r\n    this.shapes = [];\r\n    // Full shape data\r\n    this.shapesData = data.shapes;\r\n    //List of styles that will be applied to shapes\r\n    this.stylesList = [];\r\n    //List of modifiers that will be applied to shapes\r\n    this.shapeModifiers = [];\r\n    //List of items in shape tree\r\n    this.itemsData = [];\r\n    //List of items in previous shape tree\r\n    this.processedElements = [];\r\n    // List of animated components\r\n    this.animatedContents = [];\r\n    this.shapesContainer = createNS('g');\r\n    this.initElement(data,globalData,comp);\r\n    //Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\r\n    // List of elements that have been created\r\n    this.prevViewData = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n}\r\nextendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement], HShapeElement);\r\nHShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\r\n\r\nHShapeElement.prototype.createContent = function(){\r\n    var cont;\r\n    this.baseElement.style.fontSize = 0;\r\n    if (this.data.hasMask) {\r\n        this.layerElement.appendChild(this.shapesContainer);\r\n        cont = this.svgElement;\r\n    } else {\r\n        cont = createNS('svg');\r\n        var size = this.comp.data ? this.comp.data : this.globalData.compSize;\r\n        cont.setAttribute('width',size.w);\r\n        cont.setAttribute('height',size.h);\r\n        cont.appendChild(this.shapesContainer);\r\n        this.layerElement.appendChild(cont);\r\n    }\r\n\r\n    this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0, [], true);\r\n    this.filterUniqueShapes();\r\n    this.shapeCont = cont;\r\n};\r\n\r\nHShapeElement.prototype.getTransformedPoint = function(transformers, point) {\r\n    var i, len = transformers.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\r\n    }\r\n    return point;\r\n};\r\n\r\nHShapeElement.prototype.calculateShapeBoundingBox = function(item, boundingBox) {\r\n    var shape = item.sh.v;\r\n    var transformers = item.transformers;\r\n    var i, len = shape._length, vPoint, oPoint, nextIPoint, nextVPoint;\r\n    if (len <= 1) {\r\n        return;\r\n    }\r\n    for (i = 0; i < len - 1; i += 1) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n    if(shape.c) {\r\n        vPoint = this.getTransformedPoint(transformers, shape.v[i]);\r\n        oPoint = this.getTransformedPoint(transformers, shape.o[i]);\r\n        nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\r\n        nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\r\n        this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\r\n    }\r\n};\r\n\r\nHShapeElement.prototype.checkBounds = function(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\r\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\r\n    var bounds = this.shapeBoundingBox;\r\n    boundingBox.x = bm_min(bounds.left, boundingBox.x);\r\n    boundingBox.xMax = bm_max(bounds.right, boundingBox.xMax);\r\n    boundingBox.y = bm_min(bounds.top, boundingBox.y);\r\n    boundingBox.yMax = bm_max(bounds.bottom, boundingBox.yMax);\r\n};\r\n\r\nHShapeElement.prototype.shapeBoundingBox = {\r\n    left:0,\r\n    right:0,\r\n    top:0,\r\n    bottom:0,\r\n};\r\n\r\nHShapeElement.prototype.tempBoundingBox = {\r\n    x:0,\r\n    xMax:0,\r\n    y:0,\r\n    yMax:0,\r\n    width:0,\r\n    height:0\r\n};\r\n\r\nHShapeElement.prototype.getBoundsOfCurve = function(p0, p1, p2, p3) {\r\n\r\n    var bounds = [[p0[0],p3[0]], [p0[1],p3[1]]];\r\n\r\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\r\n\r\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\r\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\r\n      c = 3 * p1[i] - 3 * p0[i];\r\n\r\n      b = b | 0;\r\n      a = a | 0;\r\n      c = c | 0;\r\n\r\n      if (a === 0) {\r\n\r\n        if (b === 0) {\r\n          continue;\r\n        }\r\n\r\n        t = -c / b;\r\n\r\n        if (0 < t && t < 1) {\r\n          bounds[i].push(this.calculateF(t,p0,p1,p2,p3,i));\r\n        }\r\n        continue;\r\n      }\r\n\r\n      b2ac = b * b - 4 * c * a;\r\n\r\n      if (b2ac < 0) {\r\n        continue;\r\n      }\r\n\r\n      t1 = (-b + bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t1 && t1 < 1) bounds[i].push(this.calculateF(t1,p0,p1,p2,p3,i));\r\n\r\n      t2 = (-b - bm_sqrt(b2ac))/(2 * a);\r\n      if (0 < t2 && t2 < 1) bounds[i].push(this.calculateF(t2,p0,p1,p2,p3,i));\r\n\r\n    }\r\n\r\n    this.shapeBoundingBox.left = bm_min.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.top = bm_min.apply(null, bounds[1]);\r\n    this.shapeBoundingBox.right = bm_max.apply(null, bounds[0]);\r\n    this.shapeBoundingBox.bottom = bm_max.apply(null, bounds[1]);\r\n  };\r\n\r\n  HShapeElement.prototype.calculateF = function(t, p0, p1, p2, p3, i) {\r\n    return bm_pow(1-t, 3) * p0[i]\r\n        + 3 * bm_pow(1-t, 2) * t * p1[i]\r\n        + 3 * (1-t) * bm_pow(t, 2) * p2[i]\r\n        + bm_pow(t, 3) * p3[i];\r\n  };\r\n\r\nHShapeElement.prototype.calculateBoundingBox = function(itemsData, boundingBox) {\r\n    var i, len = itemsData.length;\r\n    for(i = 0; i < len; i += 1) {\r\n        if(itemsData[i] && itemsData[i].sh) {\r\n            this.calculateShapeBoundingBox(itemsData[i], boundingBox);\r\n        } else if(itemsData[i] && itemsData[i].it) {\r\n            this.calculateBoundingBox(itemsData[i].it, boundingBox);\r\n        }\r\n    }\r\n};\r\n\r\nHShapeElement.prototype.currentBoxContains = function(box) {\r\n    return this.currentBBox.x <= box.x \r\n    && this.currentBBox.y <= box.y \r\n    && this.currentBBox.width + this.currentBBox.x >= box.x + box.width\r\n    && this.currentBBox.height + this.currentBBox.y >= box.y + box.height\r\n};\r\n\r\nHShapeElement.prototype.renderInnerContent = function() {\r\n    this._renderShapeFrame();\r\n\r\n    if(!this.hidden && (this._isFirstFrame || this._mdf)) {\r\n        var tempBoundingBox = this.tempBoundingBox;\r\n        var max = 999999;\r\n        tempBoundingBox.x = max;\r\n        tempBoundingBox.xMax = -max;\r\n        tempBoundingBox.y = max;\r\n        tempBoundingBox.yMax = -max;\r\n        this.calculateBoundingBox(this.itemsData, tempBoundingBox);\r\n        tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\r\n        tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y;\r\n        //var tempBoundingBox = this.shapeCont.getBBox();\r\n        if(this.currentBoxContains(tempBoundingBox)) {\r\n            return;\r\n        }\r\n        var changed = false;\r\n        if(this.currentBBox.w !== tempBoundingBox.width){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.shapeCont.setAttribute('width',tempBoundingBox.width);\r\n            changed = true;\r\n        }\r\n        if(this.currentBBox.h !== tempBoundingBox.height){\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.shapeCont.setAttribute('height',tempBoundingBox.height);\r\n            changed = true;\r\n        }\r\n        if(changed  || this.currentBBox.x !== tempBoundingBox.x  || this.currentBBox.y !== tempBoundingBox.y){\r\n            this.currentBBox.w = tempBoundingBox.width;\r\n            this.currentBBox.h = tempBoundingBox.height;\r\n            this.currentBBox.x = tempBoundingBox.x;\r\n            this.currentBBox.y = tempBoundingBox.y;\r\n\r\n            this.shapeCont.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.shapeCont.style.transform = this.shapeCont.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n\r\n};\r\nfunction HTextElement(data,globalData,comp){\r\n    this.textSpans = [];\r\n    this.textPaths = [];\r\n    this.currentBBox = {\r\n        x:999999,\r\n        y: -999999,\r\n        h: 0,\r\n        w: 0\r\n    };\r\n    this.renderType = 'svg';\r\n    this.isMasked = false;\r\n    this.initElement(data,globalData,comp);\r\n\r\n}\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement], HTextElement);\r\n\r\nHTextElement.prototype.createContent = function(){\r\n    this.isMasked = this.checkMasks();\r\n    if(this.isMasked){\r\n        this.renderType = 'svg';\r\n        this.compW = this.comp.data.w;\r\n        this.compH = this.comp.data.h;\r\n        this.svgElement.setAttribute('width',this.compW);\r\n        this.svgElement.setAttribute('height',this.compH);\r\n        var g = createNS('g');\r\n        this.maskedElement.appendChild(g);\r\n        this.innerElem = g;\r\n    } else {\r\n        this.renderType = 'html';\r\n        this.innerElem = this.layerElement;\r\n    }\r\n\r\n    this.checkParenting();\r\n\r\n};\r\n\r\nHTextElement.prototype.buildNewText = function(){\r\n    var documentData = this.textProperty.currentData;\r\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\r\n    var innerElemStyle = this.innerElem.style;\r\n    innerElemStyle.color = innerElemStyle.fill = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\r\n    if(documentData.sc){\r\n        innerElemStyle.stroke = this.buildColor(documentData.sc);\r\n        innerElemStyle.strokeWidth = documentData.sw+'px';\r\n    }\r\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\r\n    if(!this.globalData.fontManager.chars){\r\n        innerElemStyle.fontSize = documentData.finalSize+'px';\r\n        innerElemStyle.lineHeight = documentData.finalSize+'px';\r\n        if(fontData.fClass){\r\n            this.innerElem.className = fontData.fClass;\r\n        } else {\r\n            innerElemStyle.fontFamily = fontData.fFamily;\r\n            var fWeight = documentData.fWeight, fStyle = documentData.fStyle;\r\n            innerElemStyle.fontStyle = fStyle;\r\n            innerElemStyle.fontWeight = fWeight;\r\n        }\r\n    }\r\n    var i, len;\r\n\r\n    var letters = documentData.l;\r\n    len = letters.length;\r\n    var tSpan,tParent,tCont;\r\n    var matrixHelper = this.mHelper;\r\n    var shapes, shapeStr = '';\r\n    var cnt = 0;\r\n    for (i = 0;i < len ;i += 1) {\r\n        if(this.globalData.fontManager.chars){\r\n            if(!this.textPaths[cnt]){\r\n                tSpan = createNS('path');\r\n                tSpan.setAttribute('stroke-linecap', 'butt');\r\n                tSpan.setAttribute('stroke-linejoin','round');\r\n                tSpan.setAttribute('stroke-miterlimit','4');\r\n            } else {\r\n                tSpan = this.textPaths[cnt];\r\n            }\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tCont = tParent.children[0];\r\n                } else {\r\n\r\n                    tParent = createTag('div');\r\n                    tParent.style.lineHeight = 0;\r\n                    tCont = createNS('svg');\r\n                    tCont.appendChild(tSpan);\r\n                    styleDiv(tParent);\r\n                }\r\n            }\r\n        }else{\r\n            if(!this.isMasked){\r\n                if(this.textSpans[cnt]){\r\n                    tParent = this.textSpans[cnt];\r\n                    tSpan = this.textPaths[cnt];\r\n                } else {\r\n                    tParent = createTag('span');\r\n                    styleDiv(tParent);\r\n                    tSpan = createTag('span');\r\n                    styleDiv(tSpan);\r\n                    tParent.appendChild(tSpan);\r\n                }\r\n            } else {\r\n                tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\r\n            }\r\n        }\r\n        //tSpan.setAttribute('visibility', 'hidden');\r\n        if(this.globalData.fontManager.chars){\r\n            var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\r\n            var shapeData;\r\n            if(charData){\r\n                shapeData = charData.data;\r\n            } else {\r\n                shapeData = null;\r\n            }\r\n            matrixHelper.reset();\r\n            if(shapeData && shapeData.shapes){\r\n                shapes = shapeData.shapes[0].it;\r\n                matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);\r\n                shapeStr = this.createPathShape(matrixHelper,shapes);\r\n                tSpan.setAttribute('d',shapeStr);\r\n            }\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                if(shapeData && shapeData.shapes){\r\n\r\n                    //document.body.appendChild is needed to get exact measure of shape\r\n                    document.body.appendChild(tCont);\r\n                    var boundingBox = tCont.getBBox();\r\n                    tCont.setAttribute('width',boundingBox.width + 2);\r\n                    tCont.setAttribute('height',boundingBox.height + 2);\r\n                    tCont.setAttribute('viewBox',(boundingBox.x-1)+' '+ (boundingBox.y-1)+' '+ (boundingBox.width+2)+' '+ (boundingBox.height+2));\r\n                    tCont.style.transform = tCont.style.webkitTransform = 'translate(' + (boundingBox.x-1) + 'px,' + (boundingBox.y-1) + 'px)';\r\n\r\n                    letters[i].yOffset = boundingBox.y-1;\r\n\r\n                } else{\r\n                    tCont.setAttribute('width',1);\r\n                    tCont.setAttribute('height',1);\r\n                }\r\n                    tParent.appendChild(tCont);\r\n            }else{\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }else{\r\n            tSpan.textContent = letters[i].val;\r\n            tSpan.setAttributeNS(\"http://www.w3.org/XML/1998/namespace\", \"xml:space\",\"preserve\");\r\n            if(!this.isMasked){\r\n                this.innerElem.appendChild(tParent);\r\n                //\r\n                tSpan.style.transform = tSpan.style.webkitTransform = 'translate3d(0,'+ -documentData.finalSize/1.2+'px,0)';\r\n            } else {\r\n                this.innerElem.appendChild(tSpan);\r\n            }\r\n        }\r\n        //\r\n        if(!this.isMasked){\r\n            this.textSpans[cnt] = tParent;\r\n        }else{\r\n            this.textSpans[cnt] = tSpan;\r\n        }\r\n        this.textSpans[cnt].style.display = 'block';\r\n        this.textPaths[cnt] = tSpan;\r\n        cnt += 1;\r\n    }\r\n    while(cnt < this.textSpans.length){\r\n        this.textSpans[cnt].style.display = 'none';\r\n        cnt += 1;\r\n    }\r\n};\r\n\r\nHTextElement.prototype.renderInnerContent = function() {\r\n\r\n    if(this.data.singleShape){\r\n        if(!this._isFirstFrame && !this.lettersChangedFlag){\r\n            return;\r\n        } else {\r\n            // Todo Benchmark if using this is better than getBBox\r\n             if(this.isMasked && this.finalTransform._matMdf){\r\n                 this.svgElement.setAttribute('viewBox',-this.finalTransform.mProp.p.v[0]+' '+ -this.finalTransform.mProp.p.v[1]+' '+this.compW+' '+this.compH);\r\n                this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\r\n             }\r\n        }\r\n    }\r\n\r\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\r\n    if(!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag){\r\n        return;\r\n    }\r\n    var  i,len, count = 0;\r\n    var renderedLetters = this.textAnimator.renderedLetters;\r\n\r\n    var letters = this.textProperty.currentData.l;\r\n\r\n    len = letters.length;\r\n    var renderedLetter, textSpan, textPath;\r\n    for(i=0;i<len;i+=1){\r\n        if(letters[i].n){\r\n            count += 1;\r\n            continue;\r\n        }\r\n        textSpan = this.textSpans[i];\r\n        textPath = this.textPaths[i];\r\n        renderedLetter = renderedLetters[count];\r\n        count += 1;\r\n        if(renderedLetter._mdf.m) {\r\n            if(!this.isMasked){\r\n                textSpan.style.transform = textSpan.style.webkitTransform = renderedLetter.m;\r\n            }else{\r\n                textSpan.setAttribute('transform',renderedLetter.m);\r\n            }\r\n        }\r\n        ////textSpan.setAttribute('opacity',renderedLetter.o);\r\n        textSpan.style.opacity = renderedLetter.o;\r\n        if(renderedLetter.sw && renderedLetter._mdf.sw){\r\n            textPath.setAttribute('stroke-width',renderedLetter.sw);\r\n        }\r\n        if(renderedLetter.sc && renderedLetter._mdf.sc){\r\n            textPath.setAttribute('stroke',renderedLetter.sc);\r\n        }\r\n        if(renderedLetter.fc && renderedLetter._mdf.fc){\r\n            textPath.setAttribute('fill',renderedLetter.fc);\r\n            textPath.style.color = renderedLetter.fc;\r\n        }\r\n    }\r\n\r\n    if(this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)){\r\n        var boundingBox = this.innerElem.getBBox();\r\n\r\n        if(this.currentBBox.w !== boundingBox.width){\r\n            this.currentBBox.w = boundingBox.width;\r\n            this.svgElement.setAttribute('width',boundingBox.width);\r\n        }\r\n        if(this.currentBBox.h !== boundingBox.height){\r\n            this.currentBBox.h = boundingBox.height;\r\n            this.svgElement.setAttribute('height',boundingBox.height);\r\n        }\r\n\r\n        var margin = 1;\r\n        if(this.currentBBox.w !== (boundingBox.width + margin*2) || this.currentBBox.h !== (boundingBox.height + margin*2)  || this.currentBBox.x !== (boundingBox.x - margin)  || this.currentBBox.y !== (boundingBox.y - margin)){\r\n            this.currentBBox.w = boundingBox.width + margin*2;\r\n            this.currentBBox.h = boundingBox.height + margin*2;\r\n            this.currentBBox.x = boundingBox.x - margin;\r\n            this.currentBBox.y = boundingBox.y - margin;\r\n\r\n            this.svgElement.setAttribute('viewBox',this.currentBBox.x+' '+this.currentBBox.y+' '+this.currentBBox.w+' '+this.currentBBox.h);\r\n            this.svgElement.style.transform = this.svgElement.style.webkitTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\r\n        }\r\n    }\r\n};\r\nfunction HImageElement(data,globalData,comp){\r\n    this.assetData = globalData.getAssetData(data.refId);\r\n    this.initElement(data,globalData,comp);\r\n}\r\n\r\nextendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement], HImageElement);\r\n\r\n\r\nHImageElement.prototype.createContent = function(){\r\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\r\n    var img = new Image();\r\n\r\n    if(this.data.hasMask){\r\n        this.imageElem = createNS('image');\r\n        this.imageElem.setAttribute('width',this.assetData.w+\"px\");\r\n        this.imageElem.setAttribute('height',this.assetData.h+\"px\");\r\n        this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink','href',assetPath);\r\n        this.layerElement.appendChild(this.imageElem);\r\n        this.baseElement.setAttribute('width',this.assetData.w);\r\n        this.baseElement.setAttribute('height',this.assetData.h);\r\n    } else {\r\n        this.layerElement.appendChild(img);\r\n    }\r\n    img.src = assetPath;\r\n    if(this.data.ln){\r\n        this.baseElement.setAttribute('id',this.data.ln);\r\n    }\r\n};\r\nfunction HCameraElement(data,globalData,comp){\r\n    this.initFrame();\r\n    this.initBaseData(data,globalData,comp);\r\n    this.initHierarchy();\r\n    var getProp = PropertyFactory.getProp;\r\n    this.pe = getProp(this,data.pe,0,0,this);\r\n    if(data.ks.p.s){\r\n        this.px = getProp(this,data.ks.p.x,1,0,this);\r\n        this.py = getProp(this,data.ks.p.y,1,0,this);\r\n        this.pz = getProp(this,data.ks.p.z,1,0,this);\r\n    }else{\r\n        this.p = getProp(this,data.ks.p,1,0,this);\r\n    }\r\n    if(data.ks.a){\r\n        this.a = getProp(this,data.ks.a,1,0,this);\r\n    }\r\n    if(data.ks.or.k.length && data.ks.or.k[0].to){\r\n        var i,len = data.ks.or.k.length;\r\n        for(i=0;i<len;i+=1){\r\n            data.ks.or.k[i].to = null;\r\n            data.ks.or.k[i].ti = null;\r\n        }\r\n    }\r\n    this.or = getProp(this,data.ks.or,1,degToRads,this);\r\n    this.or.sh = true;\r\n    this.rx = getProp(this,data.ks.rx,0,degToRads,this);\r\n    this.ry = getProp(this,data.ks.ry,0,degToRads,this);\r\n    this.rz = getProp(this,data.ks.rz,0,degToRads,this);\r\n    this.mat = new Matrix();\r\n    this._prevMat = new Matrix();\r\n    this._isFirstFrame = true;\r\n    \r\n    // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\r\n    this.finalTransform = {\r\n        mProp: this\r\n    };\r\n}\r\nextendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\r\n\r\nHCameraElement.prototype.setup = function() {\r\n    var i, len = this.comp.threeDElements.length, comp;\r\n    for(i=0;i<len;i+=1){\r\n        //[perspectiveElem,container]\r\n        comp = this.comp.threeDElements[i];\r\n        if(comp.type === '3d') {\r\n            comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n            comp.container.style.transformOrigin = comp.container.style.mozTransformOrigin = comp.container.style.webkitTransformOrigin = \"0px 0px 0px\";\r\n            comp.perspectiveElem.style.transform = comp.perspectiveElem.style.webkitTransform = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\r\n        }\r\n    }\r\n};\r\n\r\nHCameraElement.prototype.createElements = function(){\r\n};\r\n\r\nHCameraElement.prototype.hide = function(){\r\n};\r\n\r\nHCameraElement.prototype.renderFrame = function(){\r\n    var _mdf = this._isFirstFrame;\r\n    var i, len;\r\n    if(this.hierarchy){\r\n        len = this.hierarchy.length;\r\n        for(i=0;i<len;i+=1){\r\n            _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\r\n        }\r\n    }\r\n    if(_mdf || this.pe._mdf || (this.p && this.p._mdf) || (this.px && (this.px._mdf || this.py._mdf || this.pz._mdf)) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || (this.a && this.a._mdf)) {\r\n        this.mat.reset();\r\n\r\n        if(this.hierarchy){\r\n            len = this.hierarchy.length - 1;\r\n            for (i = len; i >= 0; i -= 1) {\r\n                /*mat = this.hierarchy[i].finalTransform.mProp.v.props;\r\n                console.log(mat)\r\n                this.mat.transform(-mat[0],-mat[1],-mat[2],-mat[3],-mat[4],-mat[5],-mat[6],-mat[7],-mat[8],-mat[9],-mat[10],-mat[11],-mat[12],-mat[13],-mat[14],mat[15]);\r\n                console.log(this.mat.props)*/\r\n                var mTransf = this.hierarchy[i].finalTransform.mProp;\r\n                this.mat.translate(-mTransf.p.v[0],-mTransf.p.v[1],mTransf.p.v[2]);\r\n                this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\r\n                this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\r\n                this.mat.scale(1/mTransf.s.v[0],1/mTransf.s.v[1],1/mTransf.s.v[2]);\r\n                this.mat.translate(mTransf.a.v[0],mTransf.a.v[1],mTransf.a.v[2]);\r\n            }\r\n        }\r\n\r\n        if(this.p){\r\n            this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]);\r\n        }else{\r\n            this.mat.translate(-this.px.v,-this.py.v,this.pz.v);\r\n        }\r\n        if(this.a){\r\n            var diffVector = [this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]];\r\n            var mag = Math.sqrt(Math.pow(diffVector[0],2)+Math.pow(diffVector[1],2)+Math.pow(diffVector[2],2));\r\n            //var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\r\n            var lookDir = [diffVector[0]/mag,diffVector[1]/mag,diffVector[2]/mag];\r\n            var lookLengthOnXZ = Math.sqrt( lookDir[2]*lookDir[2] + lookDir[0]*lookDir[0] );\r\n            var m_rotationX = (Math.atan2( lookDir[1], lookLengthOnXZ ));\r\n            var m_rotationY = (Math.atan2( lookDir[0], -lookDir[2]));\r\n            this.mat.rotateY(m_rotationY).rotateX(-m_rotationX);\r\n\r\n        }\r\n        this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\r\n        this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\r\n        this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0);\r\n        this.mat.translate(0,0,this.pe.v);\r\n\r\n\r\n        \r\n\r\n        var hasMatrixChanged = !this._prevMat.equals(this.mat);\r\n        if((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\r\n            len = this.comp.threeDElements.length;\r\n            var comp;\r\n            for(i=0;i<len;i+=1){\r\n                comp = this.comp.threeDElements[i];\r\n                if(comp.type === '3d') {\r\n                    if(hasMatrixChanged) {\r\n                        comp.container.style.transform = comp.container.style.webkitTransform = this.mat.toCSS();\r\n                    }\r\n                    if(this.pe._mdf) {\r\n                        comp.perspectiveElem.style.perspective = comp.perspectiveElem.style.webkitPerspective = this.pe.v+'px';\r\n                    }\r\n                }\r\n            }\r\n            this.mat.clone(this._prevMat);\r\n        }\r\n    }\r\n    this._isFirstFrame = false;\r\n};\r\n\r\nHCameraElement.prototype.prepareFrame = function(num) {\r\n    this.prepareProperties(num, true);\r\n};\r\n\r\nHCameraElement.prototype.destroy = function(){\r\n};\r\nHCameraElement.prototype.getBaseElement = function(){return null;};\r\nvar animationManager = (function(){\r\n    var moduleOb = {};\r\n    var registeredAnimations = [];\r\n    var initTime = 0;\r\n    var len = 0;\r\n    var playingAnimationsNum = 0;\r\n    var _stopped = true;\r\n    var _isFrozen = false;\r\n\r\n    function removeElement(ev){\r\n        var i = 0;\r\n        var animItem = ev.target;\r\n        while(i<len) {\r\n            if (registeredAnimations[i].animation === animItem) {\r\n                registeredAnimations.splice(i, 1);\r\n                i -= 1;\r\n                len -= 1;\r\n                if(!animItem.isPaused){\r\n                    subtractPlayingCount();\r\n                }\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n\r\n    function registerAnimation(element, animationData){\r\n        if(!element){\r\n            return null;\r\n        }\r\n        var i=0;\r\n        while(i<len){\r\n            if(registeredAnimations[i].elem == element && registeredAnimations[i].elem !== null ){\r\n                return registeredAnimations[i].animation;\r\n            }\r\n            i+=1;\r\n        }\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, element);\r\n        animItem.setData(element, animationData);\r\n        return animItem;\r\n    }\r\n\r\n    function getRegisteredAnimations() {\r\n        var i, len = registeredAnimations.length;\r\n        var animations = [];\r\n        for(i = 0; i < len; i += 1) {\r\n            animations.push(registeredAnimations[i].animation);\r\n        }\r\n        return animations;\r\n    }\r\n\r\n    function addPlayingCount(){\r\n        playingAnimationsNum += 1;\r\n        activate();\r\n    }\r\n\r\n    function subtractPlayingCount(){\r\n        playingAnimationsNum -= 1;\r\n    }\r\n\r\n    function setupAnimation(animItem, element){\r\n        animItem.addEventListener('destroy',removeElement);\r\n        animItem.addEventListener('_active',addPlayingCount);\r\n        animItem.addEventListener('_idle',subtractPlayingCount);\r\n        registeredAnimations.push({elem: element,animation:animItem});\r\n        len += 1;\r\n    }\r\n\r\n    function loadAnimation(params){\r\n        var animItem = new AnimationItem();\r\n        setupAnimation(animItem, null);\r\n        animItem.setParams(params);\r\n        return animItem;\r\n    }\r\n\r\n\r\n    function setSpeed(val,animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setSpeed(val, animation);\r\n        }\r\n    }\r\n\r\n    function setDirection(val, animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.setDirection(val, animation);\r\n        }\r\n    }\r\n\r\n    function play(animation){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.play(animation);\r\n        }\r\n    }\r\n    function resume(nowTime) {\r\n        var elapsedTime = nowTime - initTime;\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.advanceTime(elapsedTime);\r\n        }\r\n        initTime = nowTime;\r\n        if(playingAnimationsNum && !_isFrozen) {\r\n            window.requestAnimationFrame(resume);\r\n        } else {\r\n            _stopped = true;\r\n        }\r\n    }\r\n\r\n    function first(nowTime){\r\n        initTime = nowTime;\r\n        window.requestAnimationFrame(resume);\r\n    }\r\n\r\n    function pause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.pause(animation);\r\n        }\r\n    }\r\n\r\n    function goToAndStop(value,isFrame,animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.goToAndStop(value,isFrame,animation);\r\n        }\r\n    }\r\n\r\n    function stop(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.stop(animation);\r\n        }\r\n    }\r\n\r\n    function togglePause(animation) {\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.togglePause(animation);\r\n        }\r\n    }\r\n\r\n    function destroy(animation) {\r\n        var i;\r\n        for(i=(len-1);i>=0;i-=1){\r\n            registeredAnimations[i].animation.destroy(animation);\r\n        }\r\n    }\r\n\r\n    function searchAnimations(animationData, standalone, renderer){\r\n        var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')),\r\n                  [].slice.call(document.getElementsByClassName('bodymovin')));\r\n        var i, len = animElements.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(renderer){\r\n                animElements[i].setAttribute('data-bm-type',renderer);\r\n            }\r\n            registerAnimation(animElements[i], animationData);\r\n        }\r\n        if(standalone && len === 0){\r\n            if(!renderer){\r\n                renderer = 'svg';\r\n            }\r\n            var body = document.getElementsByTagName('body')[0];\r\n            body.innerHTML = '';\r\n            var div = createTag('div');\r\n            div.style.width = '100%';\r\n            div.style.height = '100%';\r\n            div.setAttribute('data-bm-type',renderer);\r\n            body.appendChild(div);\r\n            registerAnimation(div, animationData);\r\n        }\r\n    }\r\n\r\n    function resize(){\r\n        var i;\r\n        for(i=0;i<len;i+=1){\r\n            registeredAnimations[i].animation.resize();\r\n        }\r\n    }\r\n\r\n    function activate(){\r\n        if(!_isFrozen && playingAnimationsNum){\r\n            if(_stopped) {\r\n                window.requestAnimationFrame(first);\r\n                _stopped = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    function freeze() {\r\n        _isFrozen = true;\r\n    }\r\n\r\n    function unfreeze() {\r\n        _isFrozen = false;\r\n        activate();\r\n    }\r\n\r\n    moduleOb.registerAnimation = registerAnimation;\r\n    moduleOb.loadAnimation = loadAnimation;\r\n    moduleOb.setSpeed = setSpeed;\r\n    moduleOb.setDirection = setDirection;\r\n    moduleOb.play = play;\r\n    moduleOb.pause = pause;\r\n    moduleOb.stop = stop;\r\n    moduleOb.togglePause = togglePause;\r\n    moduleOb.searchAnimations = searchAnimations;\r\n    moduleOb.resize = resize;\r\n    //moduleOb.start = start;\r\n    moduleOb.goToAndStop = goToAndStop;\r\n    moduleOb.destroy = destroy;\r\n    moduleOb.freeze = freeze;\r\n    moduleOb.unfreeze = unfreeze;\r\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\r\n    return moduleOb;\r\n}());\r\n\r\nvar AnimationItem = function () {\r\n    this._cbs = [];\r\n    this.name = '';\r\n    this.path = '';\r\n    this.isLoaded = false;\r\n    this.currentFrame = 0;\r\n    this.currentRawFrame = 0;\r\n    this.totalFrames = 0;\r\n    this.frameRate = 0;\r\n    this.frameMult = 0;\r\n    this.playSpeed = 1;\r\n    this.playDirection = 1;\r\n    this.playCount = 0;\r\n    this.animationData = {};\r\n    this.assets = [];\r\n    this.isPaused = true;\r\n    this.autoplay = false;\r\n    this.loop = true;\r\n    this.renderer = null;\r\n    this.animationID = createElementID();\r\n    this.assetsPath = '';\r\n    this.timeCompleted = 0;\r\n    this.segmentPos = 0;\r\n    this.subframeEnabled = subframeEnabled;\r\n    this.segments = [];\r\n    this._idle = true;\r\n    this._completedLoop = false;\r\n    this.projectInterface = ProjectInterface();\r\n    this.imagePreloader = new ImagePreloader();\r\n};\r\n\r\nextendPrototype([BaseEvent], AnimationItem);\r\n\r\nAnimationItem.prototype.setParams = function(params) {\r\n    if(params.context){\r\n        this.context = params.context;\r\n    }\r\n    if(params.wrapper || params.container){\r\n        this.wrapper = params.wrapper || params.container;\r\n    }\r\n    var animType = params.animType ? params.animType : params.renderer ? params.renderer : 'svg';\r\n    switch(animType){\r\n        case 'canvas':\r\n            this.renderer = new CanvasRenderer(this, params.rendererSettings);\r\n            break;\r\n        case 'svg':\r\n            this.renderer = new SVGRenderer(this, params.rendererSettings);\r\n            break;\r\n        default:\r\n            this.renderer = new HybridRenderer(this, params.rendererSettings);\r\n            break;\r\n    }\r\n    this.renderer.setProjectInterface(this.projectInterface);\r\n    this.animType = animType;\r\n\r\n    if(params.loop === '' || params.loop === null);else if(params.loop === false){\r\n        this.loop = false;\r\n    }else if(params.loop === true){\r\n        this.loop = true;\r\n    }else{\r\n        this.loop = parseInt(params.loop);\r\n    }\r\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\r\n    this.name = params.name ? params.name :  '';\r\n    this.autoloadSegments = params.hasOwnProperty('autoloadSegments') ? params.autoloadSegments :  true;\r\n    this.assetsPath = params.assetsPath;\r\n    if(params.animationData){\r\n        this.configAnimation(params.animationData);\r\n    }else if(params.path){\r\n        if(params.path.substr(-4) != 'json'){\r\n            if (params.path.substr(-1, 1) != '/') {\r\n                params.path += '/';\r\n            }\r\n            params.path += 'data.json';\r\n        }\r\n\r\n        if(params.path.lastIndexOf('\\\\') != -1){\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('\\\\')+1);\r\n        }else{\r\n            this.path = params.path.substr(0,params.path.lastIndexOf('/')+1);\r\n        }\r\n        this.fileName = params.path.substr(params.path.lastIndexOf('/')+1);\r\n        this.fileName = this.fileName.substr(0,this.fileName.lastIndexOf('.json'));\r\n\r\n        assetLoader.load(params.path, this.configAnimation.bind(this), function() {\r\n            this.trigger('data_failed');\r\n        }.bind(this));\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.setData = function (wrapper, animationData) {\r\n    var params = {\r\n        wrapper: wrapper,\r\n        animationData: animationData ? (typeof animationData  === \"object\") ? animationData : JSON.parse(animationData) : null\r\n    };\r\n    var wrapperAttributes = wrapper.attributes;\r\n\r\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') ? wrapperAttributes.getNamedItem('data-bm-path').value :  wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\r\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') ? wrapperAttributes.getNamedItem('bm-type').value :  wrapperAttributes.getNamedItem('data-bm-renderer') ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\r\n\r\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') ? wrapperAttributes.getNamedItem('data-anim-loop').value :  wrapperAttributes.getNamedItem('data-bm-loop') ? wrapperAttributes.getNamedItem('data-bm-loop').value :  wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\r\n    if(loop === '');else if(loop === 'false'){\r\n        params.loop = false;\r\n    }else if(loop === 'true'){\r\n        params.loop = true;\r\n    }else{\r\n        params.loop = parseInt(loop);\r\n    }\r\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') ? wrapperAttributes.getNamedItem('data-anim-autoplay').value :  wrapperAttributes.getNamedItem('data-bm-autoplay') ? wrapperAttributes.getNamedItem('data-bm-autoplay').value :  wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\r\n    params.autoplay = autoplay !== \"false\";\r\n\r\n    params.name = wrapperAttributes.getNamedItem('data-name') ? wrapperAttributes.getNamedItem('data-name').value :  wrapperAttributes.getNamedItem('data-bm-name') ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value :  '';\r\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') ? wrapperAttributes.getNamedItem('data-anim-prerender').value :  wrapperAttributes.getNamedItem('data-bm-prerender') ? wrapperAttributes.getNamedItem('data-bm-prerender').value :  wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\r\n\r\n    if(prerender === 'false'){\r\n        params.prerender = false;\r\n    }\r\n    this.setParams(params);\r\n};\r\n\r\nAnimationItem.prototype.includeLayers = function(data) {\r\n    if(data.op > this.animationData.op){\r\n        this.animationData.op = data.op;\r\n        this.totalFrames = Math.floor(data.op - this.animationData.ip);\r\n    }\r\n    var layers = this.animationData.layers;\r\n    var i, len = layers.length;\r\n    var newLayers = data.layers;\r\n    var j, jLen = newLayers.length;\r\n    for(j=0;j<jLen;j+=1){\r\n        i = 0;\r\n        while(i<len){\r\n            if(layers[i].id == newLayers[j].id){\r\n                layers[i] = newLayers[j];\r\n                break;\r\n            }\r\n            i += 1;\r\n        }\r\n    }\r\n    if(data.chars || data.fonts){\r\n        this.renderer.globalData.fontManager.addChars(data.chars);\r\n        this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\r\n    }\r\n    if(data.assets){\r\n        len = data.assets.length;\r\n        for(i = 0; i < len; i += 1){\r\n            this.animationData.assets.push(data.assets[i]);\r\n        }\r\n    }\r\n    this.animationData.__complete = false;\r\n    dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);\r\n    this.renderer.includeLayers(data.layers);\r\n    if(expressionsPlugin){\r\n        expressionsPlugin.initExpressions(this);\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.loadNextSegment = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments || segments.length === 0 || !this.autoloadSegments){\r\n        this.trigger('data_ready');\r\n        this.timeCompleted = this.totalFrames;\r\n        return;\r\n    }\r\n    var segment = segments.shift();\r\n    this.timeCompleted = segment.time * this.frameRate;\r\n    var segmentPath = this.path+this.fileName+'_' + this.segmentPos + '.json';\r\n    this.segmentPos += 1;\r\n    assetLoader.load(segmentPath, this.includeLayers.bind(this), function() {\r\n        this.trigger('data_failed');\r\n    }.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.loadSegments = function() {\r\n    var segments = this.animationData.segments;\r\n    if(!segments) {\r\n        this.timeCompleted = this.totalFrames;\r\n    }\r\n    this.loadNextSegment();\r\n};\r\n\r\nAnimationItem.prototype.imagesLoaded = function() {\r\n    this.trigger('loaded_images');\r\n    this.checkLoaded();\r\n};\r\n\r\nAnimationItem.prototype.preloadImages = function() {\r\n    this.imagePreloader.setAssetsPath(this.assetsPath);\r\n    this.imagePreloader.setPath(this.path);\r\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\r\n};\r\n\r\nAnimationItem.prototype.configAnimation = function (animData) {\r\n    if(!this.renderer){\r\n        return;\r\n    }\r\n    this.animationData = animData;\r\n    this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\r\n    this.renderer.configAnimation(animData);\r\n    if(!animData.assets){\r\n        animData.assets = [];\r\n    }\r\n    this.renderer.searchExtraCompositions(animData.assets);\r\n\r\n    this.assets = this.animationData.assets;\r\n    this.frameRate = this.animationData.fr;\r\n    this.firstFrame = Math.round(this.animationData.ip);\r\n    this.frameMult = this.animationData.fr / 1000;\r\n    this.trigger('config_ready');\r\n    this.preloadImages();\r\n    this.loadSegments();\r\n    this.updaFrameModifier();\r\n    this.waitForFontsLoaded();\r\n};\r\n\r\nAnimationItem.prototype.waitForFontsLoaded = function(){\r\n    if(!this.renderer) {\r\n        return;\r\n    }\r\n    if(this.renderer.globalData.fontManager.loaded()){\r\n        this.checkLoaded();\r\n    }else{\r\n        setTimeout(this.waitForFontsLoaded.bind(this),20);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.checkLoaded = function () {\r\n    if (!this.isLoaded && this.renderer.globalData.fontManager.loaded() && (this.imagePreloader.loaded() || this.renderer.rendererType !== 'canvas')) {\r\n        this.isLoaded = true;\r\n        dataManager.completeData(this.animationData, this.renderer.globalData.fontManager);\r\n        if(expressionsPlugin){\r\n            expressionsPlugin.initExpressions(this);\r\n        }\r\n        this.renderer.initItems();\r\n        setTimeout(function() {\r\n            this.trigger('DOMLoaded');\r\n        }.bind(this), 0);\r\n        this.gotoFrame();\r\n        if(this.autoplay){\r\n            this.play();\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resize = function () {\r\n    this.renderer.updateContainerSize();\r\n};\r\n\r\nAnimationItem.prototype.setSubframe = function(flag){\r\n    this.subframeEnabled = flag ? true : false;\r\n};\r\n\r\nAnimationItem.prototype.gotoFrame = function () {\r\n    this.currentFrame = this.subframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame;\r\n\r\n    if(this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted){\r\n        this.currentFrame = this.timeCompleted;\r\n    }\r\n    this.trigger('enterFrame');\r\n    this.renderFrame();\r\n};\r\n\r\nAnimationItem.prototype.renderFrame = function () {\r\n    if(this.isLoaded === false){\r\n        return;\r\n    }\r\n    this.renderer.renderFrame(this.currentFrame + this.firstFrame);\r\n};\r\n\r\nAnimationItem.prototype.play = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.isPaused = false;\r\n        if(this._idle){\r\n            this._idle = false;\r\n            this.trigger('_active');\r\n        }\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.pause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === false){\r\n        this.isPaused = true;\r\n        this._idle = true;\r\n        this.trigger('_idle');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.togglePause = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(this.isPaused === true){\r\n        this.play();\r\n    }else{\r\n        this.pause();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.stop = function (name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    this.pause();\r\n    this.playCount = 0;\r\n    this._completedLoop = false;\r\n    this.setCurrentRawFrameValue(0);\r\n};\r\n\r\nAnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\r\n    if(name && this.name != name){\r\n        return;\r\n    }\r\n    if(isFrame){\r\n        this.setCurrentRawFrameValue(value);\r\n    }else{\r\n        this.setCurrentRawFrameValue(value * this.frameModifier);\r\n    }\r\n    this.pause();\r\n};\r\n\r\nAnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\r\n    this.goToAndStop(value, isFrame, name);\r\n    this.play();\r\n};\r\n\r\nAnimationItem.prototype.advanceTime = function (value) {\r\n    if (this.isPaused === true || this.isLoaded === false) {\r\n        return;\r\n    }\r\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\r\n    var _isComplete = false;\r\n    // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\r\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\r\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\r\n        if (!this.loop || this.playCount === this.loop) {\r\n            if (!this.checkSegments(nextValue >  this.totalFrames ? nextValue % this.totalFrames : 0)) {\r\n                _isComplete = true;\r\n                nextValue = this.totalFrames - 1;\r\n            }\r\n        } else if (nextValue >= this.totalFrames) {\r\n            this.playCount += 1;\r\n            if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n                this.setCurrentRawFrameValue(nextValue % this.totalFrames);\r\n                this._completedLoop = true;\r\n                this.trigger('loopComplete');\r\n            }\r\n        } else {\r\n            this.setCurrentRawFrameValue(nextValue);\r\n        }\r\n    } else if(nextValue < 0) {\r\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\r\n            if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\r\n                this.setCurrentRawFrameValue(this.totalFrames + (nextValue % this.totalFrames));\r\n                if(!this._completedLoop) {\r\n                    this._completedLoop = true;\r\n                } else {\r\n                    this.trigger('loopComplete');\r\n                }\r\n            } else {\r\n                _isComplete = true;\r\n                nextValue = 0;\r\n            }\r\n        }\r\n    } else {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n    }\r\n    if (_isComplete) {\r\n        this.setCurrentRawFrameValue(nextValue);\r\n        this.pause();\r\n        this.trigger('complete');\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.adjustSegment = function(arr, offset){\r\n    this.playCount = 0;\r\n    if(arr[1] < arr[0]){\r\n        if(this.frameModifier > 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(-1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[0] - arr[1];\r\n        this.firstFrame = arr[1];\r\n        this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\r\n    } else if(arr[1] > arr[0]){\r\n        if(this.frameModifier < 0){\r\n            if(this.playSpeed < 0){\r\n                this.setSpeed(-this.playSpeed);\r\n            } else {\r\n                this.setDirection(1);\r\n            }\r\n        }\r\n        this.timeCompleted = this.totalFrames = arr[1] - arr[0];\r\n        this.firstFrame = arr[0];\r\n        this.setCurrentRawFrameValue(0.001 + offset);\r\n    }\r\n    this.trigger('segmentStart');\r\n};\r\nAnimationItem.prototype.setSegment = function (init,end) {\r\n    var pendingFrame = -1;\r\n    if(this.isPaused) {\r\n        if (this.currentRawFrame + this.firstFrame < init) {\r\n            pendingFrame = init;\r\n        } else if (this.currentRawFrame + this.firstFrame > end) {\r\n            pendingFrame = end - init;\r\n        }\r\n    }\r\n\r\n    this.firstFrame = init;\r\n    this.timeCompleted = this.totalFrames = end - init;\r\n    if(pendingFrame !== -1) {\r\n        this.goToAndStop(pendingFrame,true);\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.playSegments = function (arr, forceFlag) {\r\n    if (forceFlag) {\r\n        this.segments.length = 0;\r\n    }\r\n    if (typeof arr[0] === 'object') {\r\n        var i, len = arr.length;\r\n        for (i = 0; i < len; i += 1) {\r\n            this.segments.push(arr[i]);\r\n        }\r\n    } else {\r\n        this.segments.push(arr);\r\n    }\r\n    if (this.segments.length && forceFlag) {\r\n        this.adjustSegment(this.segments.shift(), 0);\r\n    }\r\n    if (this.isPaused) {\r\n        this.play();\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.resetSegments = function (forceFlag) {\r\n    this.segments.length = 0;\r\n    this.segments.push([this.animationData.ip,this.animationData.op]);\r\n    //this.segments.push([this.animationData.ip*this.frameRate,Math.floor(this.animationData.op - this.animationData.ip+this.animationData.ip*this.frameRate)]);\r\n    if (forceFlag) {\r\n        this.checkSegments(0);\r\n    }\r\n};\r\nAnimationItem.prototype.checkSegments = function(offset) {\r\n    if (this.segments.length) {\r\n        this.adjustSegment(this.segments.shift(), offset);\r\n        return true;\r\n    }\r\n    return false;\r\n};\r\n\r\nAnimationItem.prototype.destroy = function (name) {\r\n    if ((name && this.name != name) || !this.renderer) {\r\n        return;\r\n    }\r\n    this.renderer.destroy();\r\n    this.imagePreloader.destroy();\r\n    this.trigger('destroy');\r\n    this._cbs = null;\r\n    this.onEnterFrame = this.onLoopComplete = this.onComplete = this.onSegmentStart = this.onDestroy = null;\r\n    this.renderer = null;\r\n};\r\n\r\nAnimationItem.prototype.setCurrentRawFrameValue = function(value){\r\n    this.currentRawFrame = value;\r\n    this.gotoFrame();\r\n};\r\n\r\nAnimationItem.prototype.setSpeed = function (val) {\r\n    this.playSpeed = val;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.setDirection = function (val) {\r\n    this.playDirection = val < 0 ? -1 : 1;\r\n    this.updaFrameModifier();\r\n};\r\n\r\nAnimationItem.prototype.updaFrameModifier = function () {\r\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\r\n};\r\n\r\nAnimationItem.prototype.getPath = function () {\r\n    return this.path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetsPath = function (assetData) {\r\n    var path = '';\r\n    if(assetData.e) {\r\n        path = assetData.p;\r\n    } else if(this.assetsPath){\r\n        var imagePath = assetData.p;\r\n        if(imagePath.indexOf('images/') !== -1){\r\n            imagePath = imagePath.split('/')[1];\r\n        }\r\n        path = this.assetsPath + imagePath;\r\n    } else {\r\n        path = this.path;\r\n        path += assetData.u ? assetData.u : '';\r\n        path += assetData.p;\r\n    }\r\n    return path;\r\n};\r\n\r\nAnimationItem.prototype.getAssetData = function (id) {\r\n    var i = 0, len = this.assets.length;\r\n    while (i < len) {\r\n        if(id == this.assets[i].id){\r\n            return this.assets[i];\r\n        }\r\n        i += 1;\r\n    }\r\n};\r\n\r\nAnimationItem.prototype.hide = function () {\r\n    this.renderer.hide();\r\n};\r\n\r\nAnimationItem.prototype.show = function () {\r\n    this.renderer.show();\r\n};\r\n\r\nAnimationItem.prototype.getDuration = function (isFrame) {\r\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\r\n};\r\n\r\nAnimationItem.prototype.trigger = function(name){\r\n    if(this._cbs && this._cbs[name]){\r\n        switch(name){\r\n            case 'enterFrame':\r\n                this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameModifier));\r\n                break;\r\n            case 'loopComplete':\r\n                this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n                break;\r\n            case 'complete':\r\n                this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));\r\n                break;\r\n            case 'segmentStart':\r\n                this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n                break;\r\n            case 'destroy':\r\n                this.triggerEvent(name,new BMDestroyEvent(name,this));\r\n                break;\r\n            default:\r\n                this.triggerEvent(name);\r\n        }\r\n    }\r\n    if(name === 'enterFrame' && this.onEnterFrame){\r\n        this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult));\r\n    }\r\n    if(name === 'loopComplete' && this.onLoopComplete){\r\n        this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));\r\n    }\r\n    if(name === 'complete' && this.onComplete){\r\n        this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult));\r\n    }\r\n    if(name === 'segmentStart' && this.onSegmentStart){\r\n        this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));\r\n    }\r\n    if(name === 'destroy' && this.onDestroy){\r\n        this.onDestroy.call(this,new BMDestroyEvent(name,this));\r\n    }\r\n};\r\n\r\nvar Expressions = (function(){\r\n    var ob = {};\r\n    ob.initExpressions = initExpressions;\r\n\r\n\r\n    function initExpressions(animation){\r\n\r\n    \tvar stackCount = 0;\r\n    \tvar registers = [];\r\n\r\n    \tfunction pushExpression() {\r\n\t\t\tstackCount += 1;\r\n    \t}\r\n\r\n    \tfunction popExpression() {\r\n\t\t\tstackCount -= 1;\r\n\t\t\tif (stackCount === 0) {\r\n\t\t\t\treleaseInstances();\r\n\t\t\t}\r\n    \t}\r\n\r\n    \tfunction registerExpressionProperty(expression) {\r\n    \t\tif (registers.indexOf(expression) === -1) {\r\n\t\t\t\tregisters.push(expression);\r\n    \t\t}\r\n    \t}\r\n\r\n    \tfunction releaseInstances() {\r\n    \t\tvar i, len = registers.length;\r\n    \t\tfor (i = 0; i < len; i += 1) {\r\n\t\t\t\tregisters[i].release();\r\n    \t\t}\r\n    \t\tregisters.length = 0;\r\n    \t}\r\n\r\n        animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\r\n        animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\r\n        animation.renderer.globalData.pushExpression = pushExpression;\r\n        animation.renderer.globalData.popExpression = popExpression;\r\n        animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\r\n    }\r\n   return ob;\r\n}());\r\n\r\nexpressionsPlugin = Expressions;\r\n\r\nvar ExpressionManager = (function(){\r\n    var ob = {};\r\n    var Math = BMMath;\r\n\r\n    var easeInBez = BezierFactory.getBezierEasing(0.333,0,.833,.833, 'easeIn').get;\r\n    var easeOutBez = BezierFactory.getBezierEasing(0.167,0.167,.667,1, 'easeOut').get;\r\n    var easeInOutBez = BezierFactory.getBezierEasing(.33,0,.667,1, 'easeInOut').get;\r\n\r\n    function initiateExpression(elem,data,property){\r\n        var val = data.x;\r\n        var needsVelocity = /velocity(?![\\w\\d])/.test(val);\r\n        var _needsRandom = val.indexOf('random') !== -1;\r\n        var elemType = elem.data.ty;\r\n        var transform,content,effect;\r\n        var thisProperty = property;\r\n        thisProperty.valueAtTime = thisProperty.getValueAtTime;\r\n        Object.defineProperty(thisProperty, 'value', {\r\n            get: function() {\r\n                return thisProperty.v\r\n            }\r\n        });\r\n        elem.comp.frameDuration = 1/elem.comp.globalData.frameRate;\r\n        elem.comp.displayStartTime = 0;\r\n        var inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        var outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        var width = elem.data.sw ? elem.data.sw : 0;\r\n        var height = elem.data.sh ? elem.data.sh : 0;\r\n        var name = elem.data.nm;\r\n        var loopIn, loopOut, smooth;\r\n        var toWorld,fromWorld,fromComp,toComp,anchorPoint, thisLayer, thisComp,mask,valueAtTime,velocityAtTime;\r\n        var __expression_functions = [];\r\n        if(data.xf) {\r\n            var i, len = data.xf.length;\r\n            for(i = 0; i < len; i += 1) {\r\n                __expression_functions[i] = eval('(function(){ return ' + data.xf[i] + '}())');\r\n            }\r\n        }\r\n\r\n        var scoped_bm_rt;\r\n        var expression_function = eval('[function _expression_function(){' + val+';scoped_bm_rt=$bm_rt}' + ']')[0];\r\n        var numKeys = property.kf ? data.k.length : 0;\r\n\r\n        var active = !this.data || this.data.hd !== true;\r\n\r\n        var wiggle = function wiggle(freq,amp){\r\n            var i,j, len = this.pv.length ? this.pv.length : 1;\r\n            var addedAmps = createTypedArray('float32', len);\r\n            freq = 5;\r\n            var iterations = Math.floor(time*freq);\r\n            i = 0;\r\n            j = 0;\r\n            while(i<iterations){\r\n                //var rnd = BMMath.random();\r\n                for(j=0;j<len;j+=1){\r\n                    addedAmps[j] += -amp + amp*2*BMMath.random();\r\n                    //addedAmps[j] += -amp + amp*2*rnd;\r\n                }\r\n                i += 1;\r\n            }\r\n            //var rnd2 = BMMath.random();\r\n            var periods = time*freq;\r\n            var perc = periods - Math.floor(periods);\r\n            var arr = createTypedArray('float32', len);\r\n            if(len>1){\r\n                for(j=0;j<len;j+=1){\r\n                    arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*BMMath.random())*perc;\r\n                    //arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\r\n                    //arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\r\n                }\r\n                return arr;\r\n            } else {\r\n                return this.pv + addedAmps[0] + (-amp + amp*2*BMMath.random())*perc;\r\n            }\r\n        }.bind(this);\r\n\r\n        if(thisProperty.loopIn) {\r\n            loopIn = thisProperty.loopIn.bind(thisProperty);\r\n        }\r\n\r\n        if(thisProperty.loopOut) {\r\n            loopOut = thisProperty.loopOut.bind(thisProperty);\r\n        }\r\n\r\n        if(thisProperty.smooth) {\r\n            smooth = thisProperty.smooth.bind(thisProperty);\r\n        }\r\n\r\n        if(this.getValueAtTime) {\r\n            valueAtTime = this.getValueAtTime.bind(this);\r\n        }\r\n\r\n        if(this.getVelocityAtTime) {\r\n            velocityAtTime = this.getVelocityAtTime.bind(this);\r\n        }\r\n\r\n        var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\r\n\r\n        function seedRandom(seed){\r\n            BMMath.seedrandom(randSeed + seed);\r\n        }\r\n\r\n        var time, velocity, value, text, textIndex, textTotal, selectorValue;\r\n        var index = elem.data.ind;\r\n        var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n        var parent;\r\n        var randSeed = Math.floor(Math.random()*1000000);\r\n        var globalData = elem.globalData;\r\n        function executeExpression(_value) {\r\n            // globalData.pushExpression();\r\n            value = _value;\r\n            if (_needsRandom) {\r\n                seedRandom(randSeed);\r\n            }\r\n            if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\r\n                return value;\r\n            }\r\n            if(this.propType === 'textSelector'){\r\n                textIndex = this.textIndex;\r\n                textTotal = this.textTotal;\r\n                selectorValue = this.selectorValue;\r\n            }\r\n            if (!thisLayer) {\r\n                text = elem.layerInterface.text;\r\n                thisLayer = elem.layerInterface;\r\n                thisComp = elem.comp.compInterface;\r\n                toWorld = thisLayer.toWorld.bind(thisLayer);\r\n                fromWorld = thisLayer.fromWorld.bind(thisLayer);\r\n                fromComp = thisLayer.fromComp.bind(thisLayer);\r\n                toComp = thisLayer.toComp.bind(thisLayer);\r\n                mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\r\n            }\r\n            if (!transform) {\r\n                transform = elem.layerInterface(\"ADBE Transform Group\");\r\n                if(transform) {\r\n                    anchorPoint = transform.anchorPoint;\r\n                    /*position = transform.position;\r\n                    rotation = transform.rotation;\r\n                    scale = transform.scale;*/\r\n                }\r\n            }\r\n            \r\n            if (elemType === 4 && !content) {\r\n                content = thisLayer(\"ADBE Root Vectors Group\");\r\n            }\r\n            if (!effect) {\r\n                effect = thisLayer(4);\r\n            }\r\n            hasParent = !!(elem.hierarchy && elem.hierarchy.length);\r\n            if (hasParent && !parent) {\r\n                parent = elem.hierarchy[0].layerInterface;\r\n            }\r\n            time = this.comp.renderedFrame/this.comp.globalData.frameRate;\r\n            if (needsVelocity) {\r\n                velocity = velocityAtTime(time);\r\n            }\r\n            expression_function();\r\n            this.frameExpressionId = elem.globalData.frameId;\r\n\r\n\r\n            //TODO: Check if it's possible to return on ShapeInterface the .v value\r\n            if (scoped_bm_rt.propType === \"shape\") {\r\n                scoped_bm_rt = scoped_bm_rt.v;\r\n            }\r\n            // globalData.popExpression();\r\n            return scoped_bm_rt;\r\n        }\r\n        return executeExpression;\r\n    }\r\n\r\n    ob.initiateExpression = initiateExpression;\r\n    return ob;\r\n}());\r\nvar expressionHelpers = (function(){\r\n\r\n    function searchExpressions(elem,data,prop){\r\n        if(data.x){\r\n            prop.k = true;\r\n            prop.x = true;\r\n            prop.initiateExpression = ExpressionManager.initiateExpression;\r\n            prop.effectsSequence.push(prop.initiateExpression(elem,data,prop).bind(prop));\r\n        }\r\n    }\r\n\r\n    function getValueAtTime(frameNum) {\r\n        frameNum *= this.elem.globalData.frameRate;\r\n        frameNum -= this.offsetTime;\r\n        if(frameNum !== this._cachingAtTime.lastFrame) {\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\r\n            this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\r\n            this._cachingAtTime.lastFrame = frameNum;\r\n        }\r\n        return this._cachingAtTime.value;\r\n\r\n    }\r\n\r\n    function getSpeedAtTime(frameNum) {\r\n        var delta = -0.01;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var speed = 0;\r\n        if(v1.length){\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                speed += Math.pow(v2[i] - v1[i], 2);\r\n            }\r\n            speed = Math.sqrt(speed) * 100;\r\n        } else {\r\n            speed = 0;\r\n        }\r\n        return speed;\r\n    }\r\n\r\n    function getVelocityAtTime(frameNum) {\r\n        if(this.vel !== undefined){\r\n            return this.vel;\r\n        }\r\n        var delta = -0.001;\r\n        //frameNum += this.elem.data.st;\r\n        var v1 = this.getValueAtTime(frameNum);\r\n        var v2 = this.getValueAtTime(frameNum + delta);\r\n        var velocity;\r\n        if(v1.length){\r\n            velocity = createTypedArray('float32', v1.length);\r\n            var i;\r\n            for(i=0;i<v1.length;i+=1){\r\n                //removing frameRate\r\n                //if needed, don't add it here\r\n                //velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\r\n                velocity[i] = (v2[i] - v1[i])/delta;\r\n            }\r\n        } else {\r\n            velocity = (v2 - v1)/delta;\r\n        }\r\n        return velocity;\r\n    }\r\n\r\n    function getStaticValueAtTime() {\r\n        return this.pv;\r\n    }\r\n\r\n    function setGroupProperty(propertyGroup){\r\n        this.propertyGroup = propertyGroup;\r\n    }\r\n\r\n\treturn {\r\n\t\tsearchExpressions: searchExpressions,\r\n\t\tgetSpeedAtTime: getSpeedAtTime,\r\n\t\tgetVelocityAtTime: getVelocityAtTime,\r\n\t\tgetValueAtTime: getValueAtTime,\r\n\t\tgetStaticValueAtTime: getStaticValueAtTime,\r\n\t\tsetGroupProperty: setGroupProperty,\r\n\t}\r\n}());\r\n(function addPropertyDecorator() {\r\n\r\n    function loopOut(type,duration,durationFlag){\r\n        if(!this.k || !this.keyframes){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var lastKeyFrame = keyframes[keyframes.length - 1].t;\r\n        if(currentFrame<=lastKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, firstKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,lastKeyFrame - this.elem.data.ip);\r\n                } else {\r\n                    cycleDuration = Math.abs(lastKeyFrame - elem.comp.globalData.frameRate*duration);\r\n                }\r\n                firstKeyFrame = lastKeyFrame - cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(iterations % 2 !== 0){\r\n                    return this.getValueAtTime(((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((currentFrame - firstKeyFrame)/cycleDuration);\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = (endV[i]-initV[i])*repeats + current[i];\r\n                    }\r\n                    return ret;\r\n                }\r\n                return (endV-initV)*repeats + current;\r\n            } else if(type === 'continue'){\r\n                var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(lastValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = lastValue[i] + (lastValue[i]-nextLastValue[i])*((currentFrame - lastKeyFrame)/ this.comp.globalData.frameRate)/0.0005;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return lastValue + (lastValue-nextLastValue)*(((currentFrame - lastKeyFrame))/0.001);\r\n            }\r\n            return this.getValueAtTime((((currentFrame - firstKeyFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function loopIn(type,duration, durationFlag) {\r\n        if(!this.k){\r\n            return this.pv;\r\n        }\r\n        type = type ? type.toLowerCase() : '';\r\n        var currentFrame = this.comp.renderedFrame;\r\n        var keyframes = this.keyframes;\r\n        var firstKeyFrame = keyframes[0].t;\r\n        if(currentFrame>=firstKeyFrame){\r\n            return this.pv;\r\n        }else{\r\n            var cycleDuration, lastKeyFrame;\r\n            if(!durationFlag){\r\n                if(!duration || duration > keyframes.length - 1){\r\n                    duration = keyframes.length - 1;\r\n                }\r\n                lastKeyFrame = keyframes[duration].t;\r\n                cycleDuration = lastKeyFrame - firstKeyFrame;\r\n            } else {\r\n                if(!duration){\r\n                    cycleDuration = Math.max(0,this.elem.data.op - firstKeyFrame);\r\n                } else {\r\n                    cycleDuration = Math.abs(elem.comp.globalData.frameRate*duration);\r\n                }\r\n                lastKeyFrame = firstKeyFrame + cycleDuration;\r\n            }\r\n            var i, len, ret;\r\n            if(type === 'pingpong') {\r\n                var iterations = Math.floor((firstKeyFrame - currentFrame)/cycleDuration);\r\n                if(iterations % 2 === 0){\r\n                    return this.getValueAtTime((((firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n                }\r\n            } else if(type === 'offset'){\r\n                var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame)%cycleDuration +  firstKeyFrame) / this.comp.globalData.frameRate, 0);\r\n                var repeats = Math.floor((firstKeyFrame - currentFrame)/cycleDuration)+1;\r\n                if(this.pv.length){\r\n                    ret = new Array(initV.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = current[i]-(endV[i]-initV[i])*repeats;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return current-(endV-initV)*repeats;\r\n            } else if(type === 'continue'){\r\n                var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\r\n                var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\r\n                if(this.pv.length){\r\n                    ret = new Array(firstValue.length);\r\n                    len = ret.length;\r\n                    for(i=0;i<len;i+=1){\r\n                        ret[i] = firstValue[i] + (firstValue[i]-nextFirstValue[i])*(firstKeyFrame - currentFrame)/0.001;\r\n                    }\r\n                    return ret;\r\n                }\r\n                return firstValue + (firstValue-nextFirstValue)*(firstKeyFrame - currentFrame)/0.001;\r\n            }\r\n            return this.getValueAtTime(((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration +  firstKeyFrame)) / this.comp.globalData.frameRate, 0);\r\n        }\r\n    }\r\n\r\n    function smooth(width, samples) {\r\n        if (!this.k){\r\n            return this.pv;\r\n        }\r\n        width = (width || 0.4) * 0.5;\r\n        samples = Math.floor(samples || 5);\r\n        if (samples <= 1) {\r\n            return this.pv;\r\n        }\r\n        var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\r\n        var initFrame = currentTime - width;\r\n        var endFrame = currentTime + width;\r\n        var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\r\n        var i = 0, j = 0;\r\n        var value;\r\n        if (this.pv.length) {\r\n            value = createTypedArray('float32', this.pv.length);\r\n        } else {\r\n            value = 0;\r\n        }\r\n        var sampleValue;\r\n        while (i < samples) {\r\n            sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\r\n            if(this.pv.length) {\r\n                for (j = 0; j < this.pv.length; j += 1) {\r\n                    value[j] += sampleValue[j];\r\n                }\r\n            } else {\r\n                value += sampleValue;\r\n            }\r\n            i += 1;\r\n        }\r\n        if(this.pv.length) {\r\n            for (j = 0; j < this.pv.length; j += 1) {\r\n                value[j] /= samples;\r\n            }\r\n        } else {\r\n            value /= samples;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    function getTransformValueAtTime(time) {\r\n        console.warn('Transform at time not supported');\r\n    }\r\n\r\n    function getTransformStaticValueAtTime(time) {\r\n\r\n    }\r\n\r\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\r\n    TransformPropertyFactory.getTransformProperty = function(elem, data, container) {\r\n        var prop = getTransformProperty(elem, data, container);\r\n        if(prop.dynamicProperties.length) {\r\n            prop.getValueAtTime = getTransformValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n        return prop;\r\n    };\r\n\r\n    var propertyGetProp = PropertyFactory.getProp;\r\n    PropertyFactory.getProp = function(elem,data,type, mult, container){\r\n        var prop = propertyGetProp(elem,data,type, mult, container);\r\n        //prop.getVelocityAtTime = getVelocityAtTime;\r\n        //prop.loopOut = loopOut;\r\n        //prop.loopIn = loopIn;\r\n        if(prop.kf){\r\n            prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\r\n        } else {\r\n            prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\r\n        }\r\n        prop.setGroupProperty = expressionHelpers.setGroupProperty;\r\n        prop.loopOut = loopOut;\r\n        prop.loopIn = loopIn;\r\n        prop.smooth = smooth;\r\n        prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\r\n        prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\r\n        prop.numKeys = data.a === 1 ? data.k.length : 0;\r\n        prop.propertyIndex = data.ix;\r\n        var value = 0;\r\n        if(type !== 0) {\r\n            value = createTypedArray('float32', data.a === 1 ?  data.k[0].s.length : data.k.length);\r\n        }\r\n        prop._cachingAtTime = {\r\n            lastFrame: initialDefaultFrame,\r\n            lastIndex: 0,\r\n            value: value\r\n        };\r\n        expressionHelpers.searchExpressions(elem,data,prop);\r\n        if(prop.k){\r\n            container.addDynamicProperty(prop);\r\n        }\r\n\r\n        return prop;\r\n    };\r\n\r\n    function getShapeValueAtTime(frameNum) {\r\n        //For now this caching object is created only when needed instead of creating it when the shape is initialized.\r\n        if (!this._cachingAtTime) {\r\n            this._cachingAtTime = {\r\n                shapeValue: shape_pool.clone(this.pv),\r\n                lastIndex: 0,\r\n                lastTime: initialDefaultFrame\r\n            };\r\n        }\r\n        \r\n        frameNum *= this.elem.globalData.frameRate;\r\n        frameNum -= this.offsetTime;\r\n        if(frameNum !== this._cachingAtTime.lastTime) {\r\n            this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\r\n            this._cachingAtTime.lastTime = frameNum;\r\n            this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\r\n        }\r\n        return this._cachingAtTime.shapeValue;\r\n    }\r\n\r\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\r\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\r\n\r\n    function ShapeExpressions(){}\r\n    ShapeExpressions.prototype = {\r\n        vertices: function(prop, time){\r\n            if (this.k) {\r\n                this.getValue();\r\n            }\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            var i, len = shapePath._length;\r\n            var vertices = shapePath[prop];\r\n            var points = shapePath.v;\r\n            var arr = createSizedArray(len);\r\n            for(i = 0; i < len; i += 1) {\r\n                if(prop === 'i' || prop === 'o') {\r\n                    arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\r\n                } else {\r\n                    arr[i] = [vertices[i][0], vertices[i][1]];\r\n                }\r\n                \r\n            }\r\n            return arr;\r\n        },\r\n        points: function(time){\r\n            return this.vertices('v', time);\r\n        },\r\n        inTangents: function(time){\r\n            return this.vertices('i', time);\r\n        },\r\n        outTangents: function(time){\r\n            return this.vertices('o', time);\r\n        },\r\n        isClosed: function(){\r\n            return this.v.c;\r\n        },\r\n        pointOnPath: function(perc, time){\r\n            var shapePath = this.v;\r\n            if(time !== undefined) {\r\n                shapePath = this.getValueAtTime(time, 0);\r\n            }\r\n            if(!this._segmentsLength) {\r\n                this._segmentsLength = bez.getSegmentsLength(shapePath);\r\n            }\r\n\r\n            var segmentsLength = this._segmentsLength;\r\n            var lengths = segmentsLength.lengths;\r\n            var lengthPos = segmentsLength.totalLength * perc;\r\n            var i = 0, len = lengths.length;\r\n            var accumulatedLength = 0, pt;\r\n            while(i < len) {\r\n                if(accumulatedLength + lengths[i].addedLength > lengthPos) {\r\n                    var initIndex = i;\r\n                    var endIndex = (shapePath.c && i === len - 1) ? 0 : i + 1;\r\n                    var segmentPerc = (lengthPos - accumulatedLength)/lengths[i].addedLength;\r\n                    pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\r\n                    break;\r\n                } else {\r\n                    accumulatedLength += lengths[i].addedLength;\r\n                }\r\n                i += 1;\r\n            }\r\n            if(!pt){\r\n                pt = shapePath.c ? [shapePath.v[0][0],shapePath.v[0][1]]:[shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1]];\r\n            }\r\n            return pt;\r\n        },\r\n        vectorOnPath: function(perc, time, vectorType){\r\n            //perc doesn't use triple equality because it can be a Number object as well as a primitive.\r\n            perc = perc == 1 ? this.v.c ? 0 : 0.999 : perc;\r\n            var pt1 = this.pointOnPath(perc, time);\r\n            var pt2 = this.pointOnPath(perc + 0.001, time);\r\n            var xLength = pt2[0] - pt1[0];\r\n            var yLength = pt2[1] - pt1[1];\r\n            var magnitude = Math.sqrt(Math.pow(xLength,2) + Math.pow(yLength,2));\r\n            if (magnitude === 0) {\r\n                return [0,0];\r\n            }\r\n            var unitVector = vectorType === 'tangent' ? [xLength/magnitude, yLength/magnitude] : [-yLength/magnitude, xLength/magnitude];\r\n            return unitVector;\r\n        },\r\n        tangentOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'tangent');\r\n        },\r\n        normalOnPath: function(perc, time){\r\n            return this.vectorOnPath(perc, time, 'normal');\r\n        },\r\n        setGroupProperty: expressionHelpers.setGroupProperty,\r\n        getValueAtTime: expressionHelpers.getStaticValueAtTime\r\n    };\r\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\r\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\r\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\r\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\r\n\r\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\r\n    ShapePropertyFactory.getShapeProp = function(elem,data,type, arr, trims){\r\n        var prop = propertyGetShapeProp(elem,data,type, arr, trims);\r\n        prop.propertyIndex = data.ix;\r\n        prop.lock = false;\r\n        if(type === 3){\r\n            expressionHelpers.searchExpressions(elem,data.pt,prop);\r\n        } else if(type === 4){\r\n            expressionHelpers.searchExpressions(elem,data.ks,prop);\r\n        }\r\n        if(prop.k){\r\n            elem.addDynamicProperty(prop);\r\n        }\r\n        return prop;\r\n    };\r\n}());\r\n(function addDecorator() {\r\n\r\n    function searchExpressions(){\r\n        if(this.data.d.x){\r\n            this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this);\r\n            this.addEffect(this.getExpressionValue.bind(this));\r\n            return true;\r\n        }\r\n    }\r\n\r\n    TextProperty.prototype.getExpressionValue = function(currentValue, text) {\r\n        var newValue = this.calculateExpression(text);\r\n        if(currentValue.t !== newValue) {\r\n            var newData = {};\r\n            this.copyData(newData, currentValue);\r\n            newData.t = newValue.toString();\r\n            newData.__complete = false;\r\n            return newData;\r\n        }\r\n        return currentValue;\r\n    };\r\n\r\n    TextProperty.prototype.searchProperty = function(){\r\n\r\n        var isKeyframed = this.searchKeyframes();\r\n        var hasExpressions = this.searchExpressions();\r\n        this.kf = isKeyframed || hasExpressions;\r\n        return this.kf;\r\n    };\r\n\r\n    TextProperty.prototype.searchExpressions = searchExpressions;\r\n    \r\n}());\r\nvar ShapeExpressionInterface = (function(){\r\n\r\n    function iterateElements(shapes,view, propertyGroup){\r\n        var arr = [];\r\n        var i, len = shapes ? shapes.length : 0;\r\n        for(i=0;i<len;i+=1){\r\n            if(shapes[i].ty == 'gr'){\r\n                arr.push(groupInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'fl'){\r\n                arr.push(fillInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'st'){\r\n                arr.push(strokeInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tm'){\r\n                arr.push(trimInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'tr');else if(shapes[i].ty == 'el'){\r\n                arr.push(ellipseInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }else if(shapes[i].ty == 'sr'){\r\n                arr.push(starInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'sh'){\r\n                arr.push(pathInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rc'){\r\n                arr.push(rectInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rd'){\r\n                arr.push(roundedInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            } else if(shapes[i].ty == 'rp'){\r\n                arr.push(repeaterInterfaceFactory(shapes[i],view[i],propertyGroup));\r\n            }\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    function contentsInterfaceFactory(shape,view, propertyGroup){\r\n       var interfaces;\r\n       var interfaceFunction = function _interfaceFunction(value){\r\n           var i = 0, len = interfaces.length;\r\n            while(i<len){\r\n                if(interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value){\r\n                   return interfaces[i];\r\n                }\r\n                i+=1;\r\n            }\r\n            if(typeof value === 'number'){\r\n               return interfaces[value-1];\r\n            }\r\n       };\r\n       interfaceFunction.propertyGroup = function(val){\r\n           if(val === 1){\r\n               return interfaceFunction;\r\n           } else{\r\n               return propertyGroup(val-1);\r\n           }\r\n       };\r\n       interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\r\n       interfaceFunction.numProperties = interfaces.length;\r\n       interfaceFunction.propertyIndex = shape.cix;\r\n       interfaceFunction._name = shape.nm;\r\n\r\n       return interfaceFunction;\r\n   }\r\n\r\n    function groupInterfaceFactory(shape,view, propertyGroup){\r\n        var interfaceFunction = function _interfaceFunction(value){\r\n            switch(value){\r\n                case 'ADBE Vectors Group':\r\n                case 'Contents':\r\n                case 2:\r\n                    return interfaceFunction.content;\r\n                //Not necessary for now. Keeping them here in case a new case appears\r\n                //case 'ADBE Vector Transform Group':\r\n                //case 3:\r\n                default:\r\n                    return interfaceFunction.transform;\r\n            }\r\n        };\r\n        interfaceFunction.propertyGroup = function(val){\r\n            if(val === 1){\r\n                return interfaceFunction;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        };\r\n        var content = contentsInterfaceFactory(shape,view,interfaceFunction.propertyGroup);\r\n        var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1],view.it[view.it.length - 1],interfaceFunction.propertyGroup);\r\n        interfaceFunction.content = content;\r\n        interfaceFunction.transform = transformInterface;\r\n        Object.defineProperty(interfaceFunction, '_name', {\r\n            get: function(){\r\n                return shape.nm;\r\n            }\r\n        });\r\n        //interfaceFunction.content = interfaceFunction;\r\n        interfaceFunction.numProperties = shape.np;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        interfaceFunction.nm = shape.nm;\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function fillInterfaceFactory(shape,view,propertyGroup){\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: ExpressionPropertyInterface(view.c)\r\n            },\r\n            'opacity': {\r\n                get: ExpressionPropertyInterface(view.o)\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(propertyGroup);\r\n        view.o.setGroupProperty(propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function strokeInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val === 1){\r\n                return ob;\r\n            } else{\r\n                return propertyGroup(val-1);\r\n            }\r\n        }\r\n        function _dashPropertyGroup(val){\r\n            if(val === 1){\r\n                return dashOb;\r\n            } else{\r\n                return _propertyGroup(val-1);\r\n            }\r\n        }\r\n        function addPropertyToDashOb(i) {\r\n            Object.defineProperty(dashOb, shape.d[i].nm, {\r\n                get: ExpressionPropertyInterface(view.d.dataProps[i].p)\r\n            });\r\n        }\r\n        var i, len = shape.d ? shape.d.length : 0;\r\n        var dashOb = {};\r\n        for (i = 0; i < len; i += 1) {\r\n            addPropertyToDashOb(i);\r\n            view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Color' || val === 'color'){\r\n                return interfaceFunction.color;\r\n            } else if(val === 'Opacity' || val === 'opacity'){\r\n                return interfaceFunction.opacity;\r\n            } else if(val === 'Stroke Width' || val === 'stroke width'){\r\n                return interfaceFunction.strokeWidth;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'color': {\r\n                get: ExpressionPropertyInterface(view.c)\r\n            },\r\n            'opacity': {\r\n                get: ExpressionPropertyInterface(view.o)\r\n            },\r\n            'strokeWidth': {\r\n                get: ExpressionPropertyInterface(view.w)\r\n            },\r\n            'dash': {\r\n                get: function() {\r\n                    return dashOb;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'mn': { value: shape.mn }\r\n        });\r\n\r\n        view.c.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n        view.w.setGroupProperty(_propertyGroup);\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function trimInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n\r\n        view.s.setGroupProperty(_propertyGroup);\r\n        view.e.setGroupProperty(_propertyGroup);\r\n        view.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === shape.e.ix || val === 'End' || val === 'end'){\r\n                return interfaceFunction.end;\r\n            }\r\n            if(val === shape.s.ix){\r\n                return interfaceFunction.start;\r\n            }\r\n            if(val === shape.o.ix){\r\n                return interfaceFunction.offset;\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        interfaceFunction.propertyGroup = propertyGroup;\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'start': {\r\n                get: ExpressionPropertyInterface(view.s)\r\n            },\r\n            'end': {\r\n                get: ExpressionPropertyInterface(view.e)\r\n            },\r\n            'offset': {\r\n                get: ExpressionPropertyInterface(view.o)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function transformInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        view.transform.mProps.o.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.p.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.a.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.s.setGroupProperty(_propertyGroup);\r\n        view.transform.mProps.r.setGroupProperty(_propertyGroup);\r\n        if(view.transform.mProps.sk){\r\n            view.transform.mProps.sk.setGroupProperty(_propertyGroup);\r\n            view.transform.mProps.sa.setGroupProperty(_propertyGroup);\r\n        }\r\n        view.transform.op.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.a.ix === value || value === 'Anchor Point'){\r\n                return interfaceFunction.anchorPoint;\r\n            }\r\n            if(shape.o.ix === value || value === 'Opacity'){\r\n                return interfaceFunction.opacity;\r\n            }\r\n            if(shape.p.ix === value || value === 'Position'){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation'){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.s.ix === value || value === 'Scale'){\r\n                return interfaceFunction.scale;\r\n            }\r\n            if(shape.sk && shape.sk.ix === value || value === 'Skew'){\r\n                return interfaceFunction.skew;\r\n            }\r\n            if(shape.sa && shape.sa.ix === value || value === 'Skew Axis'){\r\n                return interfaceFunction.skewAxis;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'opacity': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.o)\r\n            },\r\n            'position': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.p)\r\n            },\r\n            'anchorPoint': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.a)\r\n            },\r\n            'scale': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.s)\r\n            },\r\n            'rotation': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.r)\r\n            },\r\n            'skew': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.sk)\r\n            },\r\n            'skewAxis': {\r\n                get: ExpressionPropertyInterface(view.transform.mProps.sa)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.ty = 'tr';\r\n        interfaceFunction.mn = shape.mn;\r\n        interfaceFunction.propertyGroup = propertyGroup;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function ellipseInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.s.ix === value){\r\n                return interfaceFunction.size;\r\n            }\r\n        }\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'size': {\r\n                get: ExpressionPropertyInterface(prop.s)\r\n            },\r\n            'position': {\r\n                get: ExpressionPropertyInterface(prop.p)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function starInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.or.setGroupProperty(_propertyGroup);\r\n        prop.os.setGroupProperty(_propertyGroup);\r\n        prop.pt.setGroupProperty(_propertyGroup);\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n        if(shape.ir){\r\n            prop.ir.setGroupProperty(_propertyGroup);\r\n            prop.is.setGroupProperty(_propertyGroup);\r\n        }\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.rotation;\r\n            }\r\n            if(shape.pt.ix === value){\r\n                return interfaceFunction.points;\r\n            }\r\n            if(shape.or.ix === value || 'ADBE Vector Star Outer Radius' === value){\r\n                return interfaceFunction.outerRadius;\r\n            }\r\n            if(shape.os.ix === value){\r\n                return interfaceFunction.outerRoundness;\r\n            }\r\n            if(shape.ir && (shape.ir.ix === value || 'ADBE Vector Star Inner Radius' === value)){\r\n                return interfaceFunction.innerRadius;\r\n            }\r\n            if(shape.is && shape.is.ix === value){\r\n                return interfaceFunction.innerRoundness;\r\n            }\r\n\r\n        }\r\n\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: ExpressionPropertyInterface(prop.p)\r\n            },\r\n            'rotation': {\r\n                get: ExpressionPropertyInterface(prop.r)\r\n            },\r\n            'points': {\r\n                get: ExpressionPropertyInterface(prop.pt)\r\n            },\r\n            'outerRadius': {\r\n                get: ExpressionPropertyInterface(prop.or)\r\n            },\r\n            'outerRoundness': {\r\n                get: ExpressionPropertyInterface(prop.os)\r\n            },\r\n            'innerRadius': {\r\n                get: ExpressionPropertyInterface(prop.ir)\r\n            },\r\n            'innerRoundness': {\r\n                get: ExpressionPropertyInterface(prop.is)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function rectInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.p.setGroupProperty(_propertyGroup);\r\n        prop.s.setGroupProperty(_propertyGroup);\r\n        prop.r.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.p.ix === value){\r\n                return interfaceFunction.position;\r\n            }\r\n            if(shape.r.ix === value){\r\n                return interfaceFunction.roundness;\r\n            }\r\n            if(shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size'){\r\n                return interfaceFunction.size;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'position': {\r\n                get: ExpressionPropertyInterface(prop.p)\r\n            },\r\n            'roundness': {\r\n                get: ExpressionPropertyInterface(prop.r)\r\n            },\r\n            'size': {\r\n                get: ExpressionPropertyInterface(prop.s)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function roundedInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.rd.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.r.ix === value || 'Round Corners 1' === value){\r\n                return interfaceFunction.radius;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'radius': {\r\n                get: ExpressionPropertyInterface(prop.rd)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function repeaterInterfaceFactory(shape,view,propertyGroup){\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        var prop = view;\r\n        interfaceFunction.propertyIndex = shape.ix;\r\n        prop.c.setGroupProperty(_propertyGroup);\r\n        prop.o.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(value){\r\n            if(shape.c.ix === value || 'Copies' === value){\r\n                return interfaceFunction.copies;\r\n            } else if(shape.o.ix === value || 'Offset' === value){\r\n                return interfaceFunction.offset;\r\n            }\r\n\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'copies': {\r\n                get: ExpressionPropertyInterface(prop.c)\r\n            },\r\n            'offset': {\r\n                get: ExpressionPropertyInterface(prop.o)\r\n            },\r\n            '_name': { value: shape.nm }\r\n        });\r\n        interfaceFunction.mn = shape.mn;\r\n        return interfaceFunction;\r\n    }\r\n\r\n    function pathInterfaceFactory(shape,view,propertyGroup){\r\n        var prop = view.sh;\r\n        function _propertyGroup(val){\r\n            if(val == 1){\r\n                return interfaceFunction;\r\n            } else {\r\n                return propertyGroup(--val);\r\n            }\r\n        }\r\n        prop.setGroupProperty(_propertyGroup);\r\n\r\n        function interfaceFunction(val){\r\n            if(val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2){\r\n                return interfaceFunction.path;\r\n            }\r\n        }\r\n        Object.defineProperties(interfaceFunction, {\r\n            'path': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            'shape': {\r\n                get: function(){\r\n                    if(prop.k){\r\n                        prop.getValue();\r\n                    }\r\n                    return prop;\r\n                }\r\n            },\r\n            '_name': { value: shape.nm },\r\n            'ix': { value: shape.ix },\r\n            'propertyIndex': { value: shape.ix },\r\n            'mn': { value: shape.mn }\r\n        });\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return function(shapes,view,propertyGroup) {\r\n        var interfaces;\r\n        function _interfaceFunction(value){\r\n            if(typeof value === 'number'){\r\n                return interfaces[value-1];\r\n            } else {\r\n                var i = 0, len = interfaces.length;\r\n                while(i<len){\r\n                    if(interfaces[i]._name === value){\r\n                        return interfaces[i];\r\n                    }\r\n                    i+=1;\r\n                }\r\n            }\r\n        }\r\n        _interfaceFunction.propertyGroup = propertyGroup;\r\n        interfaces = iterateElements(shapes, view, _interfaceFunction);\r\n        _interfaceFunction.numProperties = interfaces.length;\r\n        return _interfaceFunction;\r\n    };\r\n}());\r\n\r\nvar TextExpressionInterface = (function(){\r\n\treturn function(elem){\r\n        var _prevValue, _sourceText;\r\n        function _thisLayerFunction(){\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"sourceText\", {\r\n            get: function(){\r\n                elem.textProperty.getValue();\r\n                var stringValue = elem.textProperty.currentData.t;\r\n                if(stringValue !== _prevValue) {\r\n                    elem.textProperty.currentData.t = _prevValue;\r\n                    _sourceText = new String(stringValue);\r\n                    //If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\r\n                    _sourceText.value = stringValue ? stringValue : new String(stringValue);\r\n                }\r\n                return _sourceText;\r\n            }\r\n        });\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\nvar LayerExpressionInterface = (function (){\r\n    function toWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n        }\r\n        return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0);\r\n    }\r\n    function fromWorld(arr, time){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        var transformMat;\r\n        if(time) {\r\n            //Todo implement value at time on transform properties\r\n            //transformMat = this._elem.finalTransform.mProp.getValueAtTime(time);\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        } else {\r\n            transformMat = this._elem.finalTransform.mProp;\r\n        }\r\n        transformMat.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n    function fromComp(arr){\r\n        var toWorldMat = new Matrix();\r\n        toWorldMat.reset();\r\n        this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\r\n        if(this._elem.hierarchy && this._elem.hierarchy.length){\r\n            var i, len = this._elem.hierarchy.length;\r\n            for(i=0;i<len;i+=1){\r\n                this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\r\n            }\r\n            return toWorldMat.inversePoint(arr);\r\n        }\r\n        return toWorldMat.inversePoint(arr);\r\n    }\r\n\r\n    function sampleImage() {\r\n        return [1,1,1,1];\r\n    }\r\n\r\n\r\n    return function(elem){\r\n\r\n        var transformInterface;\r\n\r\n        function _registerMaskInterface(maskManager){\r\n            _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\r\n        }\r\n        function _registerEffectsInterface(effects){\r\n            _thisLayerFunction.effect = effects;\r\n        }\r\n\r\n        function _thisLayerFunction(name){\r\n            switch(name){\r\n                case \"ADBE Root Vectors Group\":\r\n                case \"Contents\":\r\n                case 2:\r\n                    return _thisLayerFunction.shapeInterface;\r\n                case 1:\r\n                case 6:\r\n                case \"Transform\":\r\n                case \"transform\":\r\n                case \"ADBE Transform Group\":\r\n                    return transformInterface;\r\n                case 4:\r\n                case \"ADBE Effect Parade\":\r\n                case \"effects\":\r\n                case \"Effects\":\r\n                    return _thisLayerFunction.effect;\r\n            }\r\n        }\r\n        _thisLayerFunction.toWorld = toWorld;\r\n        _thisLayerFunction.fromWorld = fromWorld;\r\n        _thisLayerFunction.toComp = toWorld;\r\n        _thisLayerFunction.fromComp = fromComp;\r\n        _thisLayerFunction.sampleImage = sampleImage;\r\n        _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\r\n        _thisLayerFunction._elem = elem;\r\n        transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\r\n        var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\r\n        Object.defineProperties(_thisLayerFunction,{\r\n            hasParent: {\r\n                get: function(){\r\n                    return elem.hierarchy.length;\r\n                }\r\n            },\r\n            parent: {\r\n                get: function(){\r\n                    return elem.hierarchy[0].layerInterface;\r\n                }\r\n            },\r\n            rotation: getDescriptor(transformInterface, 'rotation'),\r\n            scale: getDescriptor(transformInterface, 'scale'),\r\n            position: getDescriptor(transformInterface, 'position'),\r\n            opacity: getDescriptor(transformInterface, 'opacity'),\r\n            anchorPoint: anchorPointDescriptor,\r\n            anchor_point: anchorPointDescriptor,\r\n            transform: {\r\n                get: function () {\r\n                    return transformInterface;\r\n                }\r\n            },\r\n            active: {\r\n                get: function(){\r\n                    return elem.isInRange;\r\n                }\r\n            }\r\n        });\r\n\r\n        _thisLayerFunction.startTime = elem.data.st;\r\n        _thisLayerFunction.index = elem.data.ind;\r\n        _thisLayerFunction.source = elem.data.refId;\r\n        _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\r\n        _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\r\n        _thisLayerFunction.inPoint = elem.data.ip/elem.comp.globalData.frameRate;\r\n        _thisLayerFunction.outPoint = elem.data.op/elem.comp.globalData.frameRate;\r\n        _thisLayerFunction._name = elem.data.nm;\r\n\r\n        _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\r\n        _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\n\r\nvar CompExpressionInterface = (function () {\r\n    return function(comp) {\r\n        function _thisLayerFunction(name) {\r\n            var i = 0, len = comp.layers.length;\r\n            while ( i < len) {\r\n                if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\r\n                    return comp.elements[i].layerInterface;\r\n                }\r\n                i += 1;\r\n            }\r\n            return null;\r\n            //return {active:false};\r\n        }\r\n        Object.defineProperty(_thisLayerFunction, \"_name\", { value: comp.data.nm });\r\n        _thisLayerFunction.layer = _thisLayerFunction;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\r\n        _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\r\n        _thisLayerFunction.pixelAspect = 1;\r\n        _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\r\n        _thisLayerFunction.displayStartTime = 0;\r\n        _thisLayerFunction.numLayers = comp.layers.length;\r\n        return _thisLayerFunction;\r\n    };\r\n}());\r\nvar TransformExpressionInterface = (function (){\r\n    return function(transform){\r\n        function _thisFunction(name){\r\n            switch(name){\r\n                case \"scale\":\r\n                case \"Scale\":\r\n                case \"ADBE Scale\":\r\n                case 6:\r\n                    return _thisFunction.scale;\r\n                case \"rotation\":\r\n                case \"Rotation\":\r\n                case \"ADBE Rotation\":\r\n                case \"ADBE Rotate Z\":\r\n                case 10:\r\n                    return _thisFunction.rotation;\r\n                case \"ADBE Rotate X\":\r\n                    return _thisFunction.xRotation;\r\n                case \"ADBE Rotate Y\":\r\n                    return _thisFunction.yRotation;\r\n                case \"position\":\r\n                case \"Position\":\r\n                case \"ADBE Position\":\r\n                case 2:\r\n                    return _thisFunction.position;\r\n                case 'ADBE Position_0':\r\n                    return _thisFunction.xPosition;\r\n                case 'ADBE Position_1':\r\n                    return _thisFunction.yPosition;\r\n                case 'ADBE Position_2':\r\n                    return _thisFunction.zPosition;\r\n                case \"anchorPoint\":\r\n                case \"AnchorPoint\":\r\n                case \"Anchor Point\":\r\n                case \"ADBE AnchorPoint\":\r\n                case 1:\r\n                    return _thisFunction.anchorPoint;\r\n                case \"opacity\":\r\n                case \"Opacity\":\r\n                case 11:\r\n                    return _thisFunction.opacity;\r\n            }\r\n        }\r\n\r\n        Object.defineProperty(_thisFunction, \"rotation\", {\r\n            get: ExpressionPropertyInterface(transform.r || transform.rz)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"zRotation\", {\r\n            get: ExpressionPropertyInterface(transform.rz || transform.r)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xRotation\", {\r\n            get: ExpressionPropertyInterface(transform.rx)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yRotation\", {\r\n            get: ExpressionPropertyInterface(transform.ry)\r\n        });\r\n        Object.defineProperty(_thisFunction, \"scale\", {\r\n            get: ExpressionPropertyInterface(transform.s)\r\n        });\r\n\r\n        if(transform.p) {\r\n            var _transformFactory = ExpressionPropertyInterface(transform.p);\r\n        }\r\n        Object.defineProperty(_thisFunction, \"position\", {\r\n            get: function () {\r\n                if(transform.p) {\r\n                    return _transformFactory();\r\n                } else {\r\n                    return [transform.px.v, transform.py.v, transform.pz ? transform.pz.v : 0];\r\n                }\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"xPosition\", {\r\n            get: ExpressionPropertyInterface(transform.px)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"yPosition\", {\r\n            get: ExpressionPropertyInterface(transform.py)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"zPosition\", {\r\n            get: ExpressionPropertyInterface(transform.pz)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"anchorPoint\", {\r\n            get: ExpressionPropertyInterface(transform.a)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"opacity\", {\r\n            get: ExpressionPropertyInterface(transform.o)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skew\", {\r\n            get: ExpressionPropertyInterface(transform.sk)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"skewAxis\", {\r\n            get: ExpressionPropertyInterface(transform.sa)\r\n        });\r\n\r\n        Object.defineProperty(_thisFunction, \"orientation\", {\r\n            get: ExpressionPropertyInterface(transform.or)\r\n        });\r\n\r\n        return _thisFunction;\r\n    };\r\n}());\r\nvar ProjectInterface = (function (){\r\n\r\n    function registerComposition(comp){\r\n        this.compositions.push(comp);\r\n    }\r\n\r\n    return function(){\r\n        function _thisProjectFunction(name){\r\n            var i = 0, len = this.compositions.length;\r\n            while(i<len){\r\n                if(this.compositions[i].data && this.compositions[i].data.nm === name){\r\n                    if(this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\r\n                        this.compositions[i].prepareFrame(this.currentFrame);\r\n                    }\r\n                    return this.compositions[i].compInterface;\r\n                }\r\n                i+=1;\r\n            }\r\n        }\r\n\r\n        _thisProjectFunction.compositions = [];\r\n        _thisProjectFunction.currentFrame = 0;\r\n\r\n        _thisProjectFunction.registerComposition = registerComposition;\r\n\r\n\r\n\r\n        return _thisProjectFunction;\r\n    };\r\n}());\r\nvar EffectsExpressionInterface = (function (){\r\n    var ob = {\r\n        createEffectsInterface: createEffectsInterface\r\n    };\r\n\r\n    function createEffectsInterface(elem, propertyGroup){\r\n        if(elem.effectsManager){\r\n\r\n            var effectElements = [];\r\n            var effectsData = elem.data.ef;\r\n            var i, len = elem.effectsManager.effectElements.length;\r\n            for(i=0;i<len;i+=1){\r\n                effectElements.push(createGroupInterface(effectsData[i],elem.effectsManager.effectElements[i],propertyGroup,elem));\r\n            }\r\n\r\n            return function(name){\r\n                var effects = elem.data.ef || [], i = 0, len = effects.length;\r\n                while(i<len) {\r\n                    if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                        return effectElements[i];\r\n                    }\r\n                    i += 1;\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    function createGroupInterface(data,elements, propertyGroup, elem){\r\n        var effectElements = [];\r\n        var i, len = data.ef.length;\r\n        for(i=0;i<len;i+=1){\r\n            if(data.ef[i].ty === 5){\r\n                effectElements.push(createGroupInterface(data.ef[i],elements.effectElements[i],elements.effectElements[i].propertyGroup, elem));\r\n            } else {\r\n                effectElements.push(createValueInterface(elements.effectElements[i],data.ef[i].ty, elem, _propertyGroup));\r\n            }\r\n        }\r\n\r\n        function _propertyGroup(val) {\r\n            if(val === 1){\r\n               return groupInterface;\r\n            } else{\r\n               return propertyGroup(val-1);\r\n            }\r\n        }\r\n\r\n        var groupInterface = function(name){\r\n            var effects = data.ef, i = 0, len = effects.length;\r\n            while(i<len) {\r\n                if(name === effects[i].nm || name === effects[i].mn || name === effects[i].ix){\r\n                    if(effects[i].ty === 5){\r\n                        return effectElements[i];\r\n                    } else {\r\n                        return effectElements[i]();\r\n                    }\r\n                }\r\n                i += 1;\r\n            }\r\n            return effectElements[0]();\r\n        };\r\n\r\n        groupInterface.propertyGroup = _propertyGroup;\r\n\r\n        if(data.mn === 'ADBE Color Control'){\r\n            Object.defineProperty(groupInterface, 'color', {\r\n                get: function(){\r\n                    return effectElements[0]();\r\n                }\r\n            });\r\n        }\r\n        Object.defineProperty(groupInterface, 'numProperties', {\r\n            get: function(){\r\n                return data.np;\r\n            }\r\n        });\r\n        groupInterface.active = groupInterface.enabled = data.en !== 0;\r\n        return groupInterface;\r\n    }\r\n\r\n    function createValueInterface(element, type, elem, propertyGroup){\r\n        var expressionProperty = ExpressionPropertyInterface(element.p);\r\n        function interfaceFunction(){\r\n            if(type === 10){\r\n                return elem.comp.compInterface(element.p.v);\r\n            }\r\n            return expressionProperty();\r\n        }\r\n\r\n        if(element.p.setGroupProperty) {\r\n            element.p.setGroupProperty(propertyGroup);\r\n        }\r\n\r\n        return interfaceFunction;\r\n    }\r\n\r\n    return ob;\r\n\r\n}());\r\nvar MaskManagerInterface = (function(){\r\n\r\n\tfunction MaskInterface(mask, data){\r\n\t\tthis._mask = mask;\r\n\t\tthis._data = data;\r\n\t}\r\n\tObject.defineProperty(MaskInterface.prototype, 'maskPath', {\r\n        get: function(){\r\n            if(this._mask.prop.k){\r\n                this._mask.prop.getValue();\r\n            }\r\n            return this._mask.prop;\r\n        }\r\n    });\r\n\tObject.defineProperty(MaskInterface.prototype, 'maskOpacity', {\r\n        get: function(){\r\n            if(this._mask.op.k){\r\n                this._mask.op.getValue();\r\n            }\r\n            return this._mask.op.v * 100;\r\n        }\r\n    });\r\n\r\n\tvar MaskManager = function(maskManager, elem){\r\n\t\tvar _masksInterfaces = createSizedArray(maskManager.viewData.length);\r\n\t\tvar i, len = maskManager.viewData.length;\r\n\t\tfor(i = 0; i < len; i += 1) {\r\n\t\t\t_masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\r\n\t\t}\r\n\r\n\t\tvar maskFunction = function(name){\r\n\t\t\ti = 0;\r\n\t\t    while(i<len){\r\n\t\t        if(maskManager.masksProperties[i].nm === name){\r\n\t\t            return _masksInterfaces[i];\r\n\t\t        }\r\n\t\t        i += 1;\r\n\t\t    }\r\n\t\t};\r\n\t\treturn maskFunction;\r\n\t};\r\n\treturn MaskManager;\r\n}());\r\n\r\nvar ExpressionPropertyInterface = (function() {\r\n\r\n    var defaultUnidimensionalValue = {pv:0, v:0, mult: 1};\r\n    var defaultMultidimensionalValue = {pv:[0,0,0], v:[0,0,0], mult: 1};\r\n\r\n    function completeProperty(expressionValue, property, type) {\r\n        Object.defineProperty(expressionValue, 'velocity', {\r\n            get: function(){\r\n                return property.getVelocityAtTime(property.comp.currentFrame);\r\n            }\r\n        });\r\n        expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\r\n        expressionValue.key = function(pos) {\r\n            if (!expressionValue.numKeys) {\r\n                return 0;\r\n            } else {\r\n                var value = '';\r\n                if ('s' in property.keyframes[pos-1]) {\r\n                    value = property.keyframes[pos-1].s;\r\n                } else if ('e' in property.keyframes[pos-2]) {\r\n                    value = property.keyframes[pos-2].e;\r\n                } else {\r\n                    value = property.keyframes[pos-2].s;\r\n                }\r\n                var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value);\r\n                valueProp.time = property.keyframes[pos-1].t / property.elem.comp.globalData.frameRate;\r\n                return valueProp;\r\n            }\r\n        };\r\n        expressionValue.valueAtTime = property.getValueAtTime;\r\n        expressionValue.speedAtTime = property.getSpeedAtTime;\r\n        expressionValue.velocityAtTime = property.getVelocityAtTime;\r\n        expressionValue.propertyGroup = property.propertyGroup;\r\n    }\r\n\r\n    function UnidimensionalPropertyInterface(property) {\r\n        if(!property || !('pv' in property)) {\r\n            property = defaultUnidimensionalValue;\r\n        }\r\n        var mult = 1 / property.mult;\r\n        var val = property.pv * mult;\r\n        var expressionValue = new Number(val);\r\n        expressionValue.value = val;\r\n        completeProperty(expressionValue, property, 'unidimensional');\r\n\r\n        return function() {\r\n            if (property.k) {\r\n                property.getValue();\r\n            }\r\n            val = property.v * mult;\r\n            if(expressionValue.value !== val) {\r\n                expressionValue = new Number(val);\r\n                expressionValue.value = val;\r\n                completeProperty(expressionValue, property, 'unidimensional');\r\n            }\r\n            return expressionValue;\r\n        }\r\n    }\r\n\r\n    function MultidimensionalPropertyInterface(property) {\r\n        if(!property || !('pv' in property)) {\r\n            property = defaultMultidimensionalValue;\r\n        }\r\n        var mult = 1 / property.mult;\r\n        var len = property.pv.length;\r\n        var expressionValue = createTypedArray('float32', len);\r\n        var arrValue = createTypedArray('float32', len);\r\n        expressionValue.value = arrValue;\r\n        completeProperty(expressionValue, property, 'multidimensional');\r\n\r\n        return function() {\r\n            if (property.k) {\r\n                property.getValue();\r\n            }\r\n            for (var i = 0; i < len; i += 1) {\r\n                expressionValue[i] = arrValue[i] = property.v[i] * mult;\r\n            }\r\n            return expressionValue;\r\n        }\r\n    }\r\n\r\n    //TODO: try to avoid using this getter\r\n    function defaultGetter() {\r\n        return defaultUnidimensionalValue;\r\n    }\r\n    \r\n    return function(property) {\r\n        if(!property) {\r\n            return defaultGetter;\r\n        } else if (property.propType === 'unidimensional') {\r\n            return UnidimensionalPropertyInterface(property);\r\n        } else {\r\n            return MultidimensionalPropertyInterface(property);\r\n        }\r\n    }\r\n}());\r\n\r\n(function(){\r\n\r\n    var TextExpressionSelectorProp = (function(){\r\n\r\n        function getValueProxy(index,total){\r\n            this.textIndex = index+1;\r\n            this.textTotal = total;\r\n            this.v = this.getValue() * this.mult;\r\n            return this.v;\r\n        }\r\n\r\n        return function TextExpressionSelectorProp(elem,data){\r\n            this.pv = 1;\r\n            this.comp = elem.comp;\r\n            this.elem = elem;\r\n            this.mult = 0.01;\r\n            this.propType = 'textSelector';\r\n            this.textTotal = data.totalChars;\r\n            this.selectorValue = 100;\r\n            this.lastValue = [1,1,1];\r\n            this.k = true;\r\n            this.x = true;\r\n            this.getValue = ExpressionManager.initiateExpression.bind(this)(elem,data,this);\r\n            this.getMult = getValueProxy;\r\n            this.getVelocityAtTime = expressionHelpers.getVelocityAtTime;\r\n            if(this.kf){\r\n                this.getValueAtTime = expressionHelpers.getValueAtTime.bind(this);\r\n            } else {\r\n                this.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(this);\r\n            }\r\n            this.setGroupProperty = expressionHelpers.setGroupProperty;\r\n        };\r\n    }());\r\n\r\n\tvar propertyGetTextProp = TextSelectorProp.getTextSelectorProp;\r\n\tTextSelectorProp.getTextSelectorProp = function(elem, data,arr){\r\n\t    if(data.t === 1){\r\n\t        return new TextExpressionSelectorProp(elem, data,arr);\r\n\t    } else {\r\n\t        return propertyGetTextProp(elem,data,arr);\r\n\t    }\r\n\t};\r\n}());\r\nfunction SliderEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction AngleEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction ColorEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction PointEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,1,0,container);\r\n}\r\nfunction LayerIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction MaskIndexEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction CheckboxEffect(data,elem, container){\r\n    this.p = PropertyFactory.getProp(elem,data.v,0,0,container);\r\n}\r\nfunction NoValueEffect(){\r\n    this.p = {};\r\n}\r\nfunction EffectsManager(){}\r\nfunction EffectsManager(data,element){\r\n    var effects = data.ef || [];\r\n    this.effectElements = [];\r\n    var i,len = effects.length;\r\n    var effectItem;\r\n    for(i=0;i<len;i++) {\r\n        effectItem = new GroupEffect(effects[i],element);\r\n        this.effectElements.push(effectItem);\r\n    }\r\n}\r\n\r\nfunction GroupEffect(data,element){\r\n    this.init(data,element);\r\n}\r\n\r\nextendPrototype([DynamicPropertyContainer], GroupEffect);\r\n\r\nGroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\r\n\r\nGroupEffect.prototype.init = function(data,element){\r\n    this.data = data;\r\n    this.effectElements = [];\r\n    this.initDynamicPropertyContainer(element);\r\n    var i, len = this.data.ef.length;\r\n    var eff, effects = this.data.ef;\r\n    for(i=0;i<len;i+=1){\r\n        eff = null;\r\n        switch(effects[i].ty){\r\n            case 0:\r\n                eff = new SliderEffect(effects[i],element,this);\r\n                break;\r\n            case 1:\r\n                eff = new AngleEffect(effects[i],element,this);\r\n                break;\r\n            case 2:\r\n                eff = new ColorEffect(effects[i],element,this);\r\n                break;\r\n            case 3:\r\n                eff = new PointEffect(effects[i],element,this);\r\n                break;\r\n            case 4:\r\n            case 7:\r\n                eff = new CheckboxEffect(effects[i],element,this);\r\n                break;\r\n            case 10:\r\n                eff = new LayerIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 11:\r\n                eff = new MaskIndexEffect(effects[i],element,this);\r\n                break;\r\n            case 5:\r\n                eff = new EffectsManager(effects[i],element,this);\r\n                break;\r\n            //case 6:\r\n            default:\r\n                eff = new NoValueEffect(effects[i],element,this);\r\n                break;\r\n        }\r\n        if(eff) {\r\n            this.effectElements.push(eff);\r\n        }\r\n    }\r\n};\r\n\r\n    var lottiejs = {};\r\n\r\n    function setLocationHref (href) {\r\n        locationHref = href;\r\n    }\r\n\r\n    function searchAnimations() {\r\n        {\r\n            animationManager.searchAnimations();\r\n        }\r\n    }\r\n\r\n    function setSubframeRendering(flag) {\r\n        subframeEnabled = flag;\r\n    }\r\n\r\n    function loadAnimation(params) {\r\n        return animationManager.loadAnimation(params);\r\n    }\r\n\r\n    function setQuality(value) {\r\n        if (typeof value === 'string') {\r\n            switch (value) {\r\n                case 'high':\r\n                    defaultCurveSegments = 200;\r\n                    break;\r\n                case 'medium':\r\n                    defaultCurveSegments = 50;\r\n                    break;\r\n                case 'low':\r\n                    defaultCurveSegments = 10;\r\n                    break;\r\n            }\r\n        } else if (!isNaN(value) && value > 1) {\r\n            defaultCurveSegments = value;\r\n        }\r\n    }\r\n\r\n    function inBrowser() {\r\n        return typeof navigator !== 'undefined';\r\n    }\r\n\r\n    function installPlugin(type, plugin) {\r\n        if (type === 'expressions') {\r\n            expressionsPlugin = plugin;\r\n        }\r\n    }\r\n\r\n    function getFactory(name) {\r\n        switch (name) {\r\n            case \"propertyFactory\":\r\n                return PropertyFactory;\r\n            case \"shapePropertyFactory\":\r\n                return ShapePropertyFactory;\r\n            case \"matrix\":\r\n                return Matrix;\r\n        }\r\n    }\r\n\r\n    lottiejs.play = animationManager.play;\r\n    lottiejs.pause = animationManager.pause;\r\n    lottiejs.setLocationHref = setLocationHref;\r\n    lottiejs.togglePause = animationManager.togglePause;\r\n    lottiejs.setSpeed = animationManager.setSpeed;\r\n    lottiejs.setDirection = animationManager.setDirection;\r\n    lottiejs.stop = animationManager.stop;\r\n    lottiejs.searchAnimations = searchAnimations;\r\n    lottiejs.registerAnimation = animationManager.registerAnimation;\r\n    lottiejs.loadAnimation = loadAnimation;\r\n    lottiejs.setSubframeRendering = setSubframeRendering;\r\n    lottiejs.resize = animationManager.resize;\r\n    //lottiejs.start = start;\r\n    lottiejs.goToAndStop = animationManager.goToAndStop;\r\n    lottiejs.destroy = animationManager.destroy;\r\n    lottiejs.setQuality = setQuality;\r\n    lottiejs.inBrowser = inBrowser;\r\n    lottiejs.installPlugin = installPlugin;\r\n    lottiejs.freeze = animationManager.freeze;\r\n    lottiejs.unfreeze = animationManager.unfreeze;\r\n    lottiejs.getRegisteredAnimations = animationManager.getRegisteredAnimations;\r\n    lottiejs.__getFactory = getFactory;\r\n    lottiejs.version = '5.5.7';\r\n\r\n    function checkReady() {\r\n        if (document.readyState === \"complete\") {\r\n            clearInterval(readyStateCheckInterval);\r\n            searchAnimations();\r\n        }\r\n    }\r\n\r\n    function getQueryVariable(variable) {\r\n        var vars = queryString.split('&');\r\n        for (var i = 0; i < vars.length; i++) {\r\n            var pair = vars[i].split('=');\r\n            if (decodeURIComponent(pair[0]) == variable) {\r\n                return decodeURIComponent(pair[1]);\r\n            }\r\n        }\r\n    }\r\n    var renderer = '';\r\n    {\r\n        var scripts = document.getElementsByTagName('script');\r\n        var index = scripts.length - 1;\r\n        var myScript = scripts[index] || {\r\n            src: ''\r\n        };\r\n        var queryString = myScript.src.replace(/^[^\\?]+\\??/, '');\r\n        renderer = getQueryVariable('renderer');\r\n    }\r\n    var readyStateCheckInterval = setInterval(checkReady, 100);\r\n    return lottiejs;\r\n}));\n});\n\nvar data = {\n  'v': '5.4.1',\n  'fr': 29.9700012207031,\n  'ip': 0,\n  'op': 75.0000030548126,\n  'w': 1280,\n  'h': 800,\n  'nm': 'Confetti',\n  'ddd': 0,\n  'assets': [{\n    'id': 'comp_0',\n    'layers': [{\n      'ddd': 0,\n      'ind': 1,\n      'ty': 4,\n      'nm': 'elems Outlines',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 0,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [648, 408, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [55, 55, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0]],\n              'v': [[0, -56.517], [65.259, 56.517], [-65.26, 56.517]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.96862745098, 0.423529411765, 0.533333333333, 1],\n              'e': [0.701960802078, 0.070588238537, 0.090196080506, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [285.686, 74.119],\n              'to': [-57.8834648132324, -52.8268241882324],\n              'ti': [57.8834648132324, 52.8268241882324]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 18],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 2,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[-78.593, 0], [0.001, -78.593], [78.594, 0], [0.001, 78.593]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.643137276173, 0.35686275363, 0.945098042488, 1],\n              'e': [0.61960786581, 0.243137255311, 0.996078431606, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [629.686, 746.119],\n              'to': [-0.55013018846512, 59.1731758117676],\n              'ti': [0.55013018846512, -59.1731758117676]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 3',\n        'np': 2,\n        'cix': 2,\n        'ix': 2,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[24.5, -23.5], [24.5, -81.5], [-23.5, -81.5], [-23.5, -23.5], [-81.5, -23.5], [-81.5, 23.5], [-23.5, 23.5], [-23.5, 81.5], [24.5, 81.5], [24.5, 23.5], [81.5, 23.5], [81.5, -23.5]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.960784313725, 0.96862745098, 0.439215686275, 1],\n              'e': [0.96928614378, 0.919638156891, 0.541258990765, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [1013.686, 133.119],\n              'to': [63.4498710632324, -42.9934883117676],\n              'ti': [-63.4498710632324, 42.9934883117676]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 5',\n        'np': 2,\n        'cix': 2,\n        'ix': 3,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[-43.406, 0], [0, -43.406], [43.406, 0], [0, 43.406]],\n              'o': [[43.406, 0], [0, 43.406], [-43.406, 0], [0, -43.406]],\n              'v': [[0, -78.593], [78.593, 0], [0, 78.593], [-78.593, 0]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833],\n                'y': [0.833]\n              },\n              'o': {\n                'x': [0.167],\n                'y': [0.167]\n              },\n              'n': ['0p833_0p833_0p167_0p167'],\n              't': 0,\n              's': [0.145098039216, 0.776470588235, 0.964705882353, 1],\n              'e': [0.196078434587, 0.745098054409, 0.996078431606, 1]\n            }, {\n              't': 45.0000018328876\n            }],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [137.686, 622.119],\n              'to': [-82.5501327514648, 38.5065116882324],\n              'ti': [82.5501327514648, -38.5065116882324]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 7',\n        'np': 2,\n        'cix': 2,\n        'ix': 4,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 2,\n      'ty': 4,\n      'nm': 'elems greys',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 50,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 0,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [653, 411, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [55, 55, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0]],\n              'v': [[0, -56.517], [65.259, 56.517], [-65.26, 56.517]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.903109669685, 0.903109669685, 0.903109669685, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [277.686, 123.119],\n              'to': [-59.216796875, -44.66015625],\n              'ti': [59.216796875, 44.66015625]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 18],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 2,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[-78.593, 0], [0.001, -78.593], [78.594, 0], [0.001, 78.593]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [648.686, 706.119],\n              'to': [2.61653637886047, 52.5065116882324],\n              'ti': [-2.61653637886047, -52.5065116882324]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 3',\n        'np': 2,\n        'cix': 2,\n        'ix': 2,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'o': [[0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0], [0, 0]],\n              'v': [[24.5, -23.5], [24.5, -81.5], [-23.5, -81.5], [-23.5, -23.5], [-81.5, -23.5], [-81.5, 23.5], [-23.5, 23.5], [-23.5, 81.5], [24.5, 81.5], [24.5, 23.5], [81.5, 23.5], [81.5, -23.5]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [992.686, 193.119],\n              'to': [59.9498710632324, -32.9934883117676],\n              'ti': [-59.9498710632324, 32.9934883117676]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 5',\n        'np': 2,\n        'cix': 2,\n        'ix': 3,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[-43.406, 0], [0, -43.406], [43.406, 0], [0, 43.406]],\n              'o': [[43.406, 0], [0, 43.406], [-43.406, 0], [0, -43.406]],\n              'v': [[0, -78.593], [78.593, 0], [0, 78.593], [-78.593, 0]],\n              'c': true\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 25,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': 0.196,\n                'y': 1\n              },\n              'o': {\n                'x': 0,\n                'y': 0\n              },\n              'n': '0p196_1_0_0',\n              't': 0,\n              's': [632.987, 391.08],\n              'e': [171.686, 618.119],\n              'to': [-76.8834609985352, 37.83984375],\n              'ti': [76.8834609985352, -37.83984375]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.833, 0.833],\n                'y': [0.833, 0.833]\n              },\n              'o': {\n                'x': [1, 1],\n                'y': [0, 0]\n              },\n              'n': ['0p833_0p833_1_0', '0p833_0p833_1_0'],\n              't': 0,\n              's': [33.246, 33.246],\n              'e': [0, 0]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 3\n          },\n          'r': {\n            'a': 1,\n            'k': [{\n              'i': {\n                'x': [0.529],\n                'y': [1]\n              },\n              'o': {\n                'x': [0.054],\n                'y': [0.039]\n              },\n              'n': ['0p529_1_0p054_0p039'],\n              't': 0,\n              's': [0],\n              'e': [720]\n            }, {\n              't': 60.0000024438501\n            }],\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 7',\n        'np': 2,\n        'cix': 2,\n        'ix': 4,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }]\n  }, {\n    'id': 'comp_1',\n    'layers': [{\n      'ddd': 0,\n      'ind': 1,\n      'ty': 4,\n      'nm': 'twiggle Outlines 10',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 20,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 2,\n      'ty': 4,\n      'nm': 'twiggle Outlines 9',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 308,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 3,\n      'ty': 4,\n      'nm': 'twiggle Outlines 8',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 236,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 4,\n      'ty': 4,\n      'nm': 'twiggle Outlines 7',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 164,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 5,\n      'ty': 4,\n      'nm': 'twiggle Outlines 6',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 92,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 399, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [545, 457, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.901960790157, 0.901960790157, 0.901960790157, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 50,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 25,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 12,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 38.0000015477717\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 6,\n      'ty': 4,\n      'nm': 'twiggle Outlines 5',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 360,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.96862745285, 0.423529416323, 0.533333361149, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 7,\n      'ty': 4,\n      'nm': 'twiggle Outlines 4',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 288,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.643137276173, 0.35686275363, 0.945098042488, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 8,\n      'ty': 4,\n      'nm': 'twiggle Outlines 3',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 216,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.447058826685, 0.96862745285, 0.32549020648, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 9,\n      'ty': 4,\n      'nm': 'twiggle Outlines 2',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 144,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.145098039216, 0.776470588235, 0.964705882353, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }, {\n      'ddd': 0,\n      'ind': 10,\n      'ty': 4,\n      'nm': 'twiggle Outlines',\n      'sr': 1,\n      'ks': {\n        'o': {\n          'a': 0,\n          'k': 100,\n          'ix': 11\n        },\n        'r': {\n          'a': 0,\n          'k': 72,\n          'ix': 10\n        },\n        'p': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 2\n        },\n        'a': {\n          'a': 0,\n          'k': [640, 400, 0],\n          'ix': 1\n        },\n        's': {\n          'a': 0,\n          'k': [74.124, 74.124, 100],\n          'ix': 6\n        }\n      },\n      'ao': 0,\n      'shapes': [{\n        'ty': 'gr',\n        'it': [{\n          'ind': 0,\n          'ty': 'sh',\n          'ix': 1,\n          'ks': {\n            'a': 0,\n            'k': {\n              'i': [[0, 0], [-54.167, -22.916], [-31.25, 25], [-17.709, 23.959], [-17.709, 37.5], [0, 0]],\n              'o': [[0, 0], [54.166, 22.917], [31.25, -25], [17.708, -23.958], [17.708, -37.5], [0, 0]],\n              'v': [[-141.771, 120.599], [-86.354, 90.057], [-33.229, 21.307], [48.021, -3.693], [60.281, -83.099], [141.771, -118.996]],\n              'c': false\n            },\n            'ix': 2\n          },\n          'nm': 'Path 1',\n          'mn': 'ADBE Vector Shape - Group',\n          'hd': false\n        }, {\n          'ty': 'st',\n          'c': {\n            'a': 0,\n            'k': [0.960784316063, 0.96862745285, 0.439215689898, 1],\n            'ix': 3\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 4\n          },\n          'w': {\n            'a': 0,\n            'k': 8,\n            'ix': 5\n          },\n          'lc': 1,\n          'lj': 1,\n          'ml': 10,\n          'ml2': {\n            'a': 0,\n            'k': 10,\n            'ix': 8\n          },\n          'nm': 'Stroke 1',\n          'mn': 'ADBE Vector Graphic - Stroke',\n          'hd': false\n        }, {\n          'ty': 'fl',\n          'c': {\n            'a': 0,\n            'k': [1, 1, 1, 1],\n            'ix': 4\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 5\n          },\n          'r': 1,\n          'nm': 'Fill 1',\n          'mn': 'ADBE Vector Graphic - Fill',\n          'hd': false\n        }, {\n          'ty': 'tr',\n          'p': {\n            'a': 0,\n            'k': [788.771, 279.401],\n            'ix': 2\n          },\n          'a': {\n            'a': 0,\n            'k': [0, 0],\n            'ix': 1\n          },\n          's': {\n            'a': 0,\n            'k': [100, 100],\n            'ix': 3\n          },\n          'r': {\n            'a': 0,\n            'k': 0,\n            'ix': 6\n          },\n          'o': {\n            'a': 0,\n            'k': 100,\n            'ix': 7\n          },\n          'sk': {\n            'a': 0,\n            'k': 0,\n            'ix': 4\n          },\n          'sa': {\n            'a': 0,\n            'k': 0,\n            'ix': 5\n          },\n          'nm': 'Transform'\n        }],\n        'nm': 'Group 1',\n        'np': 3,\n        'cix': 2,\n        'ix': 1,\n        'mn': 'ADBE Vector Group',\n        'hd': false\n      }, {\n        'ty': 'tm',\n        's': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 13,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 1\n        },\n        'e': {\n          'a': 1,\n          'k': [{\n            'i': {\n              'x': [0.833],\n              'y': [0.833]\n            },\n            'o': {\n              'x': [0.167],\n              'y': [0.167]\n            },\n            'n': ['0p833_0p833_0p167_0p167'],\n            't': 0,\n            's': [0],\n            'e': [100]\n          }, {\n            't': 30.0000012219251\n          }],\n          'ix': 2\n        },\n        'o': {\n          'a': 0,\n          'k': 0,\n          'ix': 3\n        },\n        'm': 1,\n        'ix': 2,\n        'nm': 'Trim Paths 1',\n        'mn': 'ADBE Vector Filter - Trim',\n        'hd': false\n      }],\n      'ip': 0,\n      'op': 300.00001221925,\n      'st': 0,\n      'bm': 0\n    }]\n  }],\n  'layers': [{\n    'ddd': 0,\n    'ind': 2,\n    'ty': 0,\n    'nm': 'layer 1',\n    'refId': 'comp_0',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 0,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [67.505, 67.505, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 0,\n    'op': 300.00001221925,\n    'st': 0,\n    'bm': 0\n  }, {\n    'ddd': 0,\n    'ind': 3,\n    'ty': 0,\n    'nm': 'layer 1',\n    'refId': 'comp_0',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 215,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [67.505, 67.505, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 4.00000016292334,\n    'op': 304.000012382174,\n    'st': 4.00000016292334,\n    'bm': 0\n  }, {\n    'ddd': 0,\n    'ind': 4,\n    'ty': 0,\n    'nm': 'layer 1',\n    'refId': 'comp_0',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 58,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [82.5, 82.5, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 9.00000036657752,\n    'op': 309.000012585828,\n    'st': 9.00000036657752,\n    'bm': 0\n  }, {\n    'ddd': 0,\n    'ind': 6,\n    'ty': 0,\n    'nm': 'Twiggles',\n    'refId': 'comp_1',\n    'sr': 1,\n    'ks': {\n      'o': {\n        'a': 0,\n        'k': 100,\n        'ix': 11\n      },\n      'r': {\n        'a': 0,\n        'k': 0,\n        'ix': 10\n      },\n      'p': {\n        'a': 0,\n        'k': [660, 420, 0],\n        'ix': 2\n      },\n      'a': {\n        'a': 0,\n        'k': [640, 400, 0],\n        'ix': 1\n      },\n      's': {\n        'a': 0,\n        'k': [67.505, 67.505, 100],\n        'ix': 6\n      }\n    },\n    'ao': 0,\n    'w': 1280,\n    'h': 800,\n    'ip': 6.00000024438501,\n    'op': 306.000012463636,\n    'st': 6.00000024438501,\n    'bm': 0\n  }],\n  'markers': []\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css$1 = \".absolute-player {\\n    width: 800px!important;\\n    position: absolute;\\n    bottom: 0;\\n    height: 800px!important;\\n    transform: translate3d(-413px, 409px, 10px) !important;\\n}\";\nstyleInject(css$1);\n\nvar memphis = function memphis(container) {\n  lottie.loadAnimation({\n    container: container,\n    renderer: 'svg',\n    rendererSettings: {\n      className: 'absolute-player'\n    },\n    loop: false,\n    autoplay: true,\n    animationData: data,\n    onComplete: lottie.destroy()\n  });\n};\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar transition = {\n  type: 'spring',\n  stiffness: 200,\n  damping: 2\n};\n\nvar SpringAnim = posed.div({\n  confetti: {\n    y: 5,\n    transition: transition\n  },\n  emoji: {\n    y: 5,\n    transition: transition\n  },\n  memphis: {\n    scale: 1.1,\n    transition: transition\n  },\n  punished: {\n    x: 5,\n    transition: transition\n  },\n  resting: {\n    y: 0,\n    x: 0,\n    scale: 1,\n    transition: transition\n  }\n});\n\nvar Reward = function (_Component) {\n  inherits(Reward, _Component);\n\n  function Reward() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, Reward);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = Reward.__proto__ || Object.getPrototypeOf(Reward)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n      state: 'resting'\n    }, _this.rewardMe = function () {\n      var _this$props = _this.props,\n          type = _this$props.type,\n          config = _this$props.config;\n\n      var props = [_this.container, config];\n      switch (type) {\n        case 'confetti':\n          {\n            _this.handleAnimation(type);\n            confetti.apply(undefined, props);\n            break;\n          }\n        case 'emoji':\n          {\n            _this.handleAnimation(type);\n            emoji.apply(undefined, props);\n            break;\n          }\n        case 'memphis':\n          {\n            _this.handleAnimation(type);\n            memphis(_this.lottieContainer, config);\n            break;\n          }\n        default:\n          {\n            break;\n          }\n      }\n    }, _this.punishMe = function () {\n      _this.handlePunishAnimation();\n    }, _this.rest = function () {\n      setTimeout(function () {\n        _this.setState({ state: 'resting' });\n      }, 100);\n    }, _this.handleAnimation = function (type) {\n      _this.setState({ state: type }, function () {\n        _this.rest();\n      });\n    }, _this.handlePunishAnimation = function () {\n      _this.setState({ state: 'punished' }, function () {\n        _this.rest();\n      });\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n\n  createClass(Reward, [{\n    key: 'render',\n    value: function render() {\n      var _this2 = this;\n\n      var _props = this.props,\n          _props$config = _props.config,\n          config = _props$config === undefined ? {} : _props$config,\n          children = _props.children;\n      var _config$springAnimati = config.springAnimation,\n          springAnimation = _config$springAnimati === undefined ? true : _config$springAnimati;\n      var state = this.state.state;\n\n      return React.createElement(\n        React.Fragment,\n        null,\n        React.createElement('div', { ref: function ref(_ref2) {\n            _this2.container = _ref2;\n          } }),\n        React.createElement('div', { style: lottieContainerStyles, ref: function ref(_ref3) {\n            _this2.lottieContainer = _ref3;\n          } }),\n        React.createElement(\n          SpringAnim,\n          { pose: springAnimation && state },\n          children\n        )\n      );\n    }\n  }]);\n  return Reward;\n}(Component);\n\n\nvar lottieContainerStyles = { position: 'relative' };\n\nReward.propTypes = {\n  type: PropTypes.string.isRequired,\n  config: PropTypes.object,\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired\n};\n\nexport default Reward;\n//# sourceMappingURL=index.es.js.map\n"]},"metadata":{},"sourceType":"module"}